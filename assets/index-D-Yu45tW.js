(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();function YA(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Sg={exports:{}},sc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ET;function pO(){if(ET)return sc;ET=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,i,o){var u=null;if(o!==void 0&&(u=""+o),i.key!==void 0&&(u=""+i.key),"key"in i){o={};for(var h in i)h!=="key"&&(o[h]=i[h])}else o=i;return i=o.ref,{$$typeof:t,type:r,key:u,ref:i!==void 0?i:null,props:o}}return sc.Fragment=e,sc.jsx=n,sc.jsxs=n,sc}var ST;function gO(){return ST||(ST=1,Sg.exports=pO()),Sg.exports}var x=gO(),Ag={exports:{}},Oe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var AT;function yO(){if(AT)return Oe;AT=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),u=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),_=Symbol.iterator;function w(U){return U===null||typeof U!="object"?null:(U=_&&U[_]||U["@@iterator"],typeof U=="function"?U:null)}var E={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},R=Object.assign,O={};function I(U,ie,ce){this.props=U,this.context=ie,this.refs=O,this.updater=ce||E}I.prototype.isReactComponent={},I.prototype.setState=function(U,ie){if(typeof U!="object"&&typeof U!="function"&&U!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,U,ie,"setState")},I.prototype.forceUpdate=function(U){this.updater.enqueueForceUpdate(this,U,"forceUpdate")};function P(){}P.prototype=I.prototype;function V(U,ie,ce){this.props=U,this.context=ie,this.refs=O,this.updater=ce||E}var M=V.prototype=new P;M.constructor=V,R(M,I.prototype),M.isPureReactComponent=!0;var J=Array.isArray,X={H:null,A:null,T:null,S:null,V:null},oe=Object.prototype.hasOwnProperty;function L(U,ie,ce,le,ve,Pe){return ce=Pe.ref,{$$typeof:t,type:U,key:ie,ref:ce!==void 0?ce:null,props:Pe}}function C(U,ie){return L(U.type,ie,void 0,void 0,void 0,U.props)}function k(U){return typeof U=="object"&&U!==null&&U.$$typeof===t}function B(U){var ie={"=":"=0",":":"=2"};return"$"+U.replace(/[=:]/g,function(ce){return ie[ce]})}var q=/\/+/g;function F(U,ie){return typeof U=="object"&&U!==null&&U.key!=null?B(""+U.key):ie.toString(36)}function j(){}function xt(U){switch(U.status){case"fulfilled":return U.value;case"rejected":throw U.reason;default:switch(typeof U.status=="string"?U.then(j,j):(U.status="pending",U.then(function(ie){U.status==="pending"&&(U.status="fulfilled",U.value=ie)},function(ie){U.status==="pending"&&(U.status="rejected",U.reason=ie)})),U.status){case"fulfilled":return U.value;case"rejected":throw U.reason}}throw U}function at(U,ie,ce,le,ve){var Pe=typeof U;(Pe==="undefined"||Pe==="boolean")&&(U=null);var xe=!1;if(U===null)xe=!0;else switch(Pe){case"bigint":case"string":case"number":xe=!0;break;case"object":switch(U.$$typeof){case t:case e:xe=!0;break;case g:return xe=U._init,at(xe(U._payload),ie,ce,le,ve)}}if(xe)return ve=ve(U),xe=le===""?"."+F(U,0):le,J(ve)?(ce="",xe!=null&&(ce=xe.replace(q,"$&/")+"/"),at(ve,ie,ce,"",function(Rr){return Rr})):ve!=null&&(k(ve)&&(ve=C(ve,ce+(ve.key==null||U&&U.key===ve.key?"":(""+ve.key).replace(q,"$&/")+"/")+xe)),ie.push(ve)),1;xe=0;var Ht=le===""?".":le+":";if(J(U))for(var nt=0;nt<U.length;nt++)le=U[nt],Pe=Ht+F(le,nt),xe+=at(le,ie,ce,Pe,ve);else if(nt=w(U),typeof nt=="function")for(U=nt.call(U),nt=0;!(le=U.next()).done;)le=le.value,Pe=Ht+F(le,nt++),xe+=at(le,ie,ce,Pe,ve);else if(Pe==="object"){if(typeof U.then=="function")return at(xt(U),ie,ce,le,ve);throw ie=String(U),Error("Objects are not valid as a React child (found: "+(ie==="[object Object]"?"object with keys {"+Object.keys(U).join(", ")+"}":ie)+"). If you meant to render a collection of children, use an array instead.")}return xe}function Z(U,ie,ce){if(U==null)return U;var le=[],ve=0;return at(U,le,"","",function(Pe){return ie.call(ce,Pe,ve++)}),le}function ae(U){if(U._status===-1){var ie=U._result;ie=ie(),ie.then(function(ce){(U._status===0||U._status===-1)&&(U._status=1,U._result=ce)},function(ce){(U._status===0||U._status===-1)&&(U._status=2,U._result=ce)}),U._status===-1&&(U._status=0,U._result=ie)}if(U._status===1)return U._result.default;throw U._result}var de=typeof reportError=="function"?reportError:function(U){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ie=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof U=="object"&&U!==null&&typeof U.message=="string"?String(U.message):String(U),error:U});if(!window.dispatchEvent(ie))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",U);return}console.error(U)};function ke(){}return Oe.Children={map:Z,forEach:function(U,ie,ce){Z(U,function(){ie.apply(this,arguments)},ce)},count:function(U){var ie=0;return Z(U,function(){ie++}),ie},toArray:function(U){return Z(U,function(ie){return ie})||[]},only:function(U){if(!k(U))throw Error("React.Children.only expected to receive a single React element child.");return U}},Oe.Component=I,Oe.Fragment=n,Oe.Profiler=i,Oe.PureComponent=V,Oe.StrictMode=r,Oe.Suspense=d,Oe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=X,Oe.__COMPILER_RUNTIME={__proto__:null,c:function(U){return X.H.useMemoCache(U)}},Oe.cache=function(U){return function(){return U.apply(null,arguments)}},Oe.cloneElement=function(U,ie,ce){if(U==null)throw Error("The argument must be a React element, but you passed "+U+".");var le=R({},U.props),ve=U.key,Pe=void 0;if(ie!=null)for(xe in ie.ref!==void 0&&(Pe=void 0),ie.key!==void 0&&(ve=""+ie.key),ie)!oe.call(ie,xe)||xe==="key"||xe==="__self"||xe==="__source"||xe==="ref"&&ie.ref===void 0||(le[xe]=ie[xe]);var xe=arguments.length-2;if(xe===1)le.children=ce;else if(1<xe){for(var Ht=Array(xe),nt=0;nt<xe;nt++)Ht[nt]=arguments[nt+2];le.children=Ht}return L(U.type,ve,void 0,void 0,Pe,le)},Oe.createContext=function(U){return U={$$typeof:u,_currentValue:U,_currentValue2:U,_threadCount:0,Provider:null,Consumer:null},U.Provider=U,U.Consumer={$$typeof:o,_context:U},U},Oe.createElement=function(U,ie,ce){var le,ve={},Pe=null;if(ie!=null)for(le in ie.key!==void 0&&(Pe=""+ie.key),ie)oe.call(ie,le)&&le!=="key"&&le!=="__self"&&le!=="__source"&&(ve[le]=ie[le]);var xe=arguments.length-2;if(xe===1)ve.children=ce;else if(1<xe){for(var Ht=Array(xe),nt=0;nt<xe;nt++)Ht[nt]=arguments[nt+2];ve.children=Ht}if(U&&U.defaultProps)for(le in xe=U.defaultProps,xe)ve[le]===void 0&&(ve[le]=xe[le]);return L(U,Pe,void 0,void 0,null,ve)},Oe.createRef=function(){return{current:null}},Oe.forwardRef=function(U){return{$$typeof:h,render:U}},Oe.isValidElement=k,Oe.lazy=function(U){return{$$typeof:g,_payload:{_status:-1,_result:U},_init:ae}},Oe.memo=function(U,ie){return{$$typeof:m,type:U,compare:ie===void 0?null:ie}},Oe.startTransition=function(U){var ie=X.T,ce={};X.T=ce;try{var le=U(),ve=X.S;ve!==null&&ve(ce,le),typeof le=="object"&&le!==null&&typeof le.then=="function"&&le.then(ke,de)}catch(Pe){de(Pe)}finally{X.T=ie}},Oe.unstable_useCacheRefresh=function(){return X.H.useCacheRefresh()},Oe.use=function(U){return X.H.use(U)},Oe.useActionState=function(U,ie,ce){return X.H.useActionState(U,ie,ce)},Oe.useCallback=function(U,ie){return X.H.useCallback(U,ie)},Oe.useContext=function(U){return X.H.useContext(U)},Oe.useDebugValue=function(){},Oe.useDeferredValue=function(U,ie){return X.H.useDeferredValue(U,ie)},Oe.useEffect=function(U,ie,ce){var le=X.H;if(typeof ce=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return le.useEffect(U,ie)},Oe.useId=function(){return X.H.useId()},Oe.useImperativeHandle=function(U,ie,ce){return X.H.useImperativeHandle(U,ie,ce)},Oe.useInsertionEffect=function(U,ie){return X.H.useInsertionEffect(U,ie)},Oe.useLayoutEffect=function(U,ie){return X.H.useLayoutEffect(U,ie)},Oe.useMemo=function(U,ie){return X.H.useMemo(U,ie)},Oe.useOptimistic=function(U,ie){return X.H.useOptimistic(U,ie)},Oe.useReducer=function(U,ie,ce){return X.H.useReducer(U,ie,ce)},Oe.useRef=function(U){return X.H.useRef(U)},Oe.useState=function(U){return X.H.useState(U)},Oe.useSyncExternalStore=function(U,ie,ce){return X.H.useSyncExternalStore(U,ie,ce)},Oe.useTransition=function(){return X.H.useTransition()},Oe.version="19.1.1",Oe}var RT;function Ev(){return RT||(RT=1,Ag.exports=yO()),Ag.exports}var D=Ev();const vO=YA(D);var Rg={exports:{}},ic={},xg={exports:{}},Cg={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xT;function _O(){return xT||(xT=1,(function(t){function e(Z,ae){var de=Z.length;Z.push(ae);e:for(;0<de;){var ke=de-1>>>1,U=Z[ke];if(0<i(U,ae))Z[ke]=ae,Z[de]=U,de=ke;else break e}}function n(Z){return Z.length===0?null:Z[0]}function r(Z){if(Z.length===0)return null;var ae=Z[0],de=Z.pop();if(de!==ae){Z[0]=de;e:for(var ke=0,U=Z.length,ie=U>>>1;ke<ie;){var ce=2*(ke+1)-1,le=Z[ce],ve=ce+1,Pe=Z[ve];if(0>i(le,de))ve<U&&0>i(Pe,le)?(Z[ke]=Pe,Z[ve]=de,ke=ve):(Z[ke]=le,Z[ce]=de,ke=ce);else if(ve<U&&0>i(Pe,de))Z[ke]=Pe,Z[ve]=de,ke=ve;else break e}}return ae}function i(Z,ae){var de=Z.sortIndex-ae.sortIndex;return de!==0?de:Z.id-ae.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var u=Date,h=u.now();t.unstable_now=function(){return u.now()-h}}var d=[],m=[],g=1,_=null,w=3,E=!1,R=!1,O=!1,I=!1,P=typeof setTimeout=="function"?setTimeout:null,V=typeof clearTimeout=="function"?clearTimeout:null,M=typeof setImmediate<"u"?setImmediate:null;function J(Z){for(var ae=n(m);ae!==null;){if(ae.callback===null)r(m);else if(ae.startTime<=Z)r(m),ae.sortIndex=ae.expirationTime,e(d,ae);else break;ae=n(m)}}function X(Z){if(O=!1,J(Z),!R)if(n(d)!==null)R=!0,oe||(oe=!0,F());else{var ae=n(m);ae!==null&&at(X,ae.startTime-Z)}}var oe=!1,L=-1,C=5,k=-1;function B(){return I?!0:!(t.unstable_now()-k<C)}function q(){if(I=!1,oe){var Z=t.unstable_now();k=Z;var ae=!0;try{e:{R=!1,O&&(O=!1,V(L),L=-1),E=!0;var de=w;try{t:{for(J(Z),_=n(d);_!==null&&!(_.expirationTime>Z&&B());){var ke=_.callback;if(typeof ke=="function"){_.callback=null,w=_.priorityLevel;var U=ke(_.expirationTime<=Z);if(Z=t.unstable_now(),typeof U=="function"){_.callback=U,J(Z),ae=!0;break t}_===n(d)&&r(d),J(Z)}else r(d);_=n(d)}if(_!==null)ae=!0;else{var ie=n(m);ie!==null&&at(X,ie.startTime-Z),ae=!1}}break e}finally{_=null,w=de,E=!1}ae=void 0}}finally{ae?F():oe=!1}}}var F;if(typeof M=="function")F=function(){M(q)};else if(typeof MessageChannel<"u"){var j=new MessageChannel,xt=j.port2;j.port1.onmessage=q,F=function(){xt.postMessage(null)}}else F=function(){P(q,0)};function at(Z,ae){L=P(function(){Z(t.unstable_now())},ae)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Z){Z.callback=null},t.unstable_forceFrameRate=function(Z){0>Z||125<Z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<Z?Math.floor(1e3/Z):5},t.unstable_getCurrentPriorityLevel=function(){return w},t.unstable_next=function(Z){switch(w){case 1:case 2:case 3:var ae=3;break;default:ae=w}var de=w;w=ae;try{return Z()}finally{w=de}},t.unstable_requestPaint=function(){I=!0},t.unstable_runWithPriority=function(Z,ae){switch(Z){case 1:case 2:case 3:case 4:case 5:break;default:Z=3}var de=w;w=Z;try{return ae()}finally{w=de}},t.unstable_scheduleCallback=function(Z,ae,de){var ke=t.unstable_now();switch(typeof de=="object"&&de!==null?(de=de.delay,de=typeof de=="number"&&0<de?ke+de:ke):de=ke,Z){case 1:var U=-1;break;case 2:U=250;break;case 5:U=1073741823;break;case 4:U=1e4;break;default:U=5e3}return U=de+U,Z={id:g++,callback:ae,priorityLevel:Z,startTime:de,expirationTime:U,sortIndex:-1},de>ke?(Z.sortIndex=de,e(m,Z),n(d)===null&&Z===n(m)&&(O?(V(L),L=-1):O=!0,at(X,de-ke))):(Z.sortIndex=U,e(d,Z),R||E||(R=!0,oe||(oe=!0,F()))),Z},t.unstable_shouldYield=B,t.unstable_wrapCallback=function(Z){var ae=w;return function(){var de=w;w=ae;try{return Z.apply(this,arguments)}finally{w=de}}}})(Cg)),Cg}var CT;function wO(){return CT||(CT=1,xg.exports=_O()),xg.exports}var Ig={exports:{}},dn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var IT;function bO(){if(IT)return dn;IT=1;var t=Ev();function e(d){var m="https://react.dev/errors/"+d;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)m+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+d+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},i=Symbol.for("react.portal");function o(d,m,g){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:_==null?null:""+_,children:d,containerInfo:m,implementation:g}}var u=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(d,m){if(d==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return dn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,dn.createPortal=function(d,m){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(e(299));return o(d,m,null,g)},dn.flushSync=function(d){var m=u.T,g=r.p;try{if(u.T=null,r.p=2,d)return d()}finally{u.T=m,r.p=g,r.d.f()}},dn.preconnect=function(d,m){typeof d=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,r.d.C(d,m))},dn.prefetchDNS=function(d){typeof d=="string"&&r.d.D(d)},dn.preinit=function(d,m){if(typeof d=="string"&&m&&typeof m.as=="string"){var g=m.as,_=h(g,m.crossOrigin),w=typeof m.integrity=="string"?m.integrity:void 0,E=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;g==="style"?r.d.S(d,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:_,integrity:w,fetchPriority:E}):g==="script"&&r.d.X(d,{crossOrigin:_,integrity:w,fetchPriority:E,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},dn.preinitModule=function(d,m){if(typeof d=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var g=h(m.as,m.crossOrigin);r.d.M(d,{crossOrigin:g,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&r.d.M(d)},dn.preload=function(d,m){if(typeof d=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var g=m.as,_=h(g,m.crossOrigin);r.d.L(d,g,{crossOrigin:_,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},dn.preloadModule=function(d,m){if(typeof d=="string")if(m){var g=h(m.as,m.crossOrigin);r.d.m(d,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:g,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else r.d.m(d)},dn.requestFormReset=function(d){r.d.r(d)},dn.unstable_batchedUpdates=function(d,m){return d(m)},dn.useFormState=function(d,m,g){return u.H.useFormState(d,m,g)},dn.useFormStatus=function(){return u.H.useHostTransitionStatus()},dn.version="19.1.1",dn}var OT;function TO(){if(OT)return Ig.exports;OT=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Ig.exports=bO(),Ig.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kT;function EO(){if(kT)return ic;kT=1;var t=wO(),e=Ev(),n=TO();function r(s){var a="https://react.dev/errors/"+s;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)a+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+s+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function o(s){var a=s,l=s;if(s.alternate)for(;a.return;)a=a.return;else{s=a;do a=s,(a.flags&4098)!==0&&(l=a.return),s=a.return;while(s)}return a.tag===3?l:null}function u(s){if(s.tag===13){var a=s.memoizedState;if(a===null&&(s=s.alternate,s!==null&&(a=s.memoizedState)),a!==null)return a.dehydrated}return null}function h(s){if(o(s)!==s)throw Error(r(188))}function d(s){var a=s.alternate;if(!a){if(a=o(s),a===null)throw Error(r(188));return a!==s?null:s}for(var l=s,c=a;;){var p=l.return;if(p===null)break;var y=p.alternate;if(y===null){if(c=p.return,c!==null){l=c;continue}break}if(p.child===y.child){for(y=p.child;y;){if(y===l)return h(p),s;if(y===c)return h(p),a;y=y.sibling}throw Error(r(188))}if(l.return!==c.return)l=p,c=y;else{for(var T=!1,S=p.child;S;){if(S===l){T=!0,l=p,c=y;break}if(S===c){T=!0,c=p,l=y;break}S=S.sibling}if(!T){for(S=y.child;S;){if(S===l){T=!0,l=y,c=p;break}if(S===c){T=!0,c=y,l=p;break}S=S.sibling}if(!T)throw Error(r(189))}}if(l.alternate!==c)throw Error(r(190))}if(l.tag!==3)throw Error(r(188));return l.stateNode.current===l?s:a}function m(s){var a=s.tag;if(a===5||a===26||a===27||a===6)return s;for(s=s.child;s!==null;){if(a=m(s),a!==null)return a;s=s.sibling}return null}var g=Object.assign,_=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),E=Symbol.for("react.portal"),R=Symbol.for("react.fragment"),O=Symbol.for("react.strict_mode"),I=Symbol.for("react.profiler"),P=Symbol.for("react.provider"),V=Symbol.for("react.consumer"),M=Symbol.for("react.context"),J=Symbol.for("react.forward_ref"),X=Symbol.for("react.suspense"),oe=Symbol.for("react.suspense_list"),L=Symbol.for("react.memo"),C=Symbol.for("react.lazy"),k=Symbol.for("react.activity"),B=Symbol.for("react.memo_cache_sentinel"),q=Symbol.iterator;function F(s){return s===null||typeof s!="object"?null:(s=q&&s[q]||s["@@iterator"],typeof s=="function"?s:null)}var j=Symbol.for("react.client.reference");function xt(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===j?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case R:return"Fragment";case I:return"Profiler";case O:return"StrictMode";case X:return"Suspense";case oe:return"SuspenseList";case k:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case E:return"Portal";case M:return(s.displayName||"Context")+".Provider";case V:return(s._context.displayName||"Context")+".Consumer";case J:var a=s.render;return s=s.displayName,s||(s=a.displayName||a.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case L:return a=s.displayName||null,a!==null?a:xt(s.type)||"Memo";case C:a=s._payload,s=s._init;try{return xt(s(a))}catch{}}return null}var at=Array.isArray,Z=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ae=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,de={pending:!1,data:null,method:null,action:null},ke=[],U=-1;function ie(s){return{current:s}}function ce(s){0>U||(s.current=ke[U],ke[U]=null,U--)}function le(s,a){U++,ke[U]=s.current,s.current=a}var ve=ie(null),Pe=ie(null),xe=ie(null),Ht=ie(null);function nt(s,a){switch(le(xe,a),le(Pe,s),le(ve,null),a.nodeType){case 9:case 11:s=(s=a.documentElement)&&(s=s.namespaceURI)?Xb(s):0;break;default:if(s=a.tagName,a=a.namespaceURI)a=Xb(a),s=Jb(a,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}ce(ve),le(ve,s)}function Rr(){ce(ve),ce(Pe),ce(xe)}function Gs(s){s.memoizedState!==null&&le(Ht,s);var a=ve.current,l=Jb(a,s.type);a!==l&&(le(Pe,s),le(ve,l))}function rs(s){Pe.current===s&&(ce(ve),ce(Pe)),Ht.current===s&&(ce(Ht),Zu._currentValue=de)}var Gi=Object.prototype.hasOwnProperty,Ki=t.unstable_scheduleCallback,Wi=t.unstable_cancelCallback,Ql=t.unstable_shouldYield,ph=t.unstable_requestPaint,qn=t.unstable_now,Sm=t.unstable_getCurrentPriorityLevel,Xl=t.unstable_ImmediatePriority,lo=t.unstable_UserBlockingPriority,Yi=t.unstable_NormalPriority,Am=t.unstable_LowPriority,uo=t.unstable_IdlePriority,Jl=t.log,gh=t.unstable_setDisableYieldValue,gt=null,We=null;function In(s){if(typeof Jl=="function"&&gh(s),We&&typeof We.setStrictMode=="function")try{We.setStrictMode(gt,s)}catch{}}var cn=Math.clz32?Math.clz32:Qi,yh=Math.log,Rm=Math.LN2;function Qi(s){return s>>>=0,s===0?32:31-(yh(s)/Rm|0)|0}var Xi=256,Ji=4194304;function ar(s){var a=s&42;if(a!==0)return a;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function co(s,a,l){var c=s.pendingLanes;if(c===0)return 0;var p=0,y=s.suspendedLanes,T=s.pingedLanes;s=s.warmLanes;var S=c&134217727;return S!==0?(c=S&~y,c!==0?p=ar(c):(T&=S,T!==0?p=ar(T):l||(l=S&~s,l!==0&&(p=ar(l))))):(S=c&~y,S!==0?p=ar(S):T!==0?p=ar(T):l||(l=c&~s,l!==0&&(p=ar(l)))),p===0?0:a!==0&&a!==p&&(a&y)===0&&(y=p&-p,l=a&-a,y>=l||y===32&&(l&4194048)!==0)?a:p}function Zi(s,a){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&a)===0}function Zl(s,a){switch(s){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function eu(){var s=Xi;return Xi<<=1,(Xi&4194048)===0&&(Xi=256),s}function tu(){var s=Ji;return Ji<<=1,(Ji&62914560)===0&&(Ji=4194304),s}function ss(s){for(var a=[],l=0;31>l;l++)a.push(s);return a}function is(s,a){s.pendingLanes|=a,a!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function nu(s,a,l,c,p,y){var T=s.pendingLanes;s.pendingLanes=l,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=l,s.entangledLanes&=l,s.errorRecoveryDisabledLanes&=l,s.shellSuspendCounter=0;var S=s.entanglements,N=s.expirationTimes,K=s.hiddenUpdates;for(l=T&~l;0<l;){var ee=31-cn(l),re=1<<ee;S[ee]=0,N[ee]=-1;var W=K[ee];if(W!==null)for(K[ee]=null,ee=0;ee<W.length;ee++){var Y=W[ee];Y!==null&&(Y.lane&=-536870913)}l&=~re}c!==0&&xr(s,c,0),y!==0&&p===0&&s.tag!==0&&(s.suspendedLanes|=y&~(T&~a))}function xr(s,a,l){s.pendingLanes|=a,s.suspendedLanes&=~a;var c=31-cn(a);s.entangledLanes|=a,s.entanglements[c]=s.entanglements[c]|1073741824|l&4194090}function ru(s,a){var l=s.entangledLanes|=a;for(s=s.entanglements;l;){var c=31-cn(l),p=1<<c;p&a|s[c]&a&&(s[c]|=a),l&=~p}}function Ks(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function ho(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function Ws(){var s=ae.p;return s!==0?s:(s=window.event,s===void 0?32:yT(s.type))}function vh(s,a){var l=ae.p;try{return ae.p=s,a()}finally{ae.p=l}}var lt=Math.random().toString(36).slice(2),Lt="__reactFiber$"+lt,Ct="__reactProps$"+lt,$n="__reactContainer$"+lt,su="__reactEvents$"+lt,xm="__reactListeners$"+lt,Ys="__reactHandles$"+lt,_h="__reactResources$"+lt,ea="__reactMarker$"+lt;function Qs(s){delete s[Lt],delete s[Ct],delete s[su],delete s[xm],delete s[Ys]}function as(s){var a=s[Lt];if(a)return a;for(var l=s.parentNode;l;){if(a=l[$n]||l[Lt]){if(l=a.alternate,a.child!==null||l!==null&&l.child!==null)for(s=nT(s);s!==null;){if(l=s[Lt])return l;s=nT(s)}return a}s=l,l=s.parentNode}return null}function Cr(s){if(s=s[Lt]||s[$n]){var a=s.tag;if(a===5||a===6||a===13||a===26||a===27||a===3)return s}return null}function Ir(s){var a=s.tag;if(a===5||a===26||a===27||a===6)return s.stateNode;throw Error(r(33))}function vn(s){var a=s[_h];return a||(a=s[_h]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function bt(s){s[ea]=!0}var iu=new Set,fo={};function or(s,a){os(s,a),os(s+"Capture",a)}function os(s,a){for(fo[s]=a,s=0;s<a.length;s++)iu.add(a[s])}var wh=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),bh={},ta={};function Th(s){return Gi.call(ta,s)?!0:Gi.call(bh,s)?!1:wh.test(s)?ta[s]=!0:(bh[s]=!0,!1)}function Xs(s,a,l){if(Th(a))if(l===null)s.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":s.removeAttribute(a);return;case"boolean":var c=a.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){s.removeAttribute(a);return}}s.setAttribute(a,""+l)}}function Or(s,a,l){if(l===null)s.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(a);return}s.setAttribute(a,""+l)}}function Jt(s,a,l,c){if(c===null)s.removeAttribute(l);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(l);return}s.setAttributeNS(a,l,""+c)}}var na,Eh;function ls(s){if(na===void 0)try{throw Error()}catch(l){var a=l.stack.trim().match(/\n( *(at )?)/);na=a&&a[1]||"",Eh=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+na+s+Eh}var mo=!1;function po(s,a){if(!s||mo)return"";mo=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(a){var re=function(){throw Error()};if(Object.defineProperty(re.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(re,[])}catch(Y){var W=Y}Reflect.construct(s,[],re)}else{try{re.call()}catch(Y){W=Y}s.call(re.prototype)}}else{try{throw Error()}catch(Y){W=Y}(re=s())&&typeof re.catch=="function"&&re.catch(function(){})}}catch(Y){if(Y&&W&&typeof Y.stack=="string")return[Y.stack,W.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var p=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");p&&p.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=c.DetermineComponentFrameRoot(),T=y[0],S=y[1];if(T&&S){var N=T.split(`
`),K=S.split(`
`);for(p=c=0;c<N.length&&!N[c].includes("DetermineComponentFrameRoot");)c++;for(;p<K.length&&!K[p].includes("DetermineComponentFrameRoot");)p++;if(c===N.length||p===K.length)for(c=N.length-1,p=K.length-1;1<=c&&0<=p&&N[c]!==K[p];)p--;for(;1<=c&&0<=p;c--,p--)if(N[c]!==K[p]){if(c!==1||p!==1)do if(c--,p--,0>p||N[c]!==K[p]){var ee=`
`+N[c].replace(" at new "," at ");return s.displayName&&ee.includes("<anonymous>")&&(ee=ee.replace("<anonymous>",s.displayName)),ee}while(1<=c&&0<=p);break}}}finally{mo=!1,Error.prepareStackTrace=l}return(l=s?s.displayName||s.name:"")?ls(l):""}function au(s){switch(s.tag){case 26:case 27:case 5:return ls(s.type);case 16:return ls("Lazy");case 13:return ls("Suspense");case 19:return ls("SuspenseList");case 0:case 15:return po(s.type,!1);case 11:return po(s.type.render,!1);case 1:return po(s.type,!0);case 31:return ls("Activity");default:return""}}function go(s){try{var a="";do a+=au(s),s=s.return;while(s);return a}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}function _n(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function ou(s){var a=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function Cm(s){var a=ou(s)?"checked":"value",l=Object.getOwnPropertyDescriptor(s.constructor.prototype,a),c=""+s[a];if(!s.hasOwnProperty(a)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var p=l.get,y=l.set;return Object.defineProperty(s,a,{configurable:!0,get:function(){return p.call(this)},set:function(T){c=""+T,y.call(this,T)}}),Object.defineProperty(s,a,{enumerable:l.enumerable}),{getValue:function(){return c},setValue:function(T){c=""+T},stopTracking:function(){s._valueTracker=null,delete s[a]}}}}function yo(s){s._valueTracker||(s._valueTracker=Cm(s))}function lu(s){if(!s)return!1;var a=s._valueTracker;if(!a)return!0;var l=a.getValue(),c="";return s&&(c=ou(s)?s.checked?"true":"false":s.value),s=c,s!==l?(a.setValue(s),!0):!1}function ra(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var Im=/[\n"\\]/g;function It(s){return s.replace(Im,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function On(s,a,l,c,p,y,T,S){s.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?s.type=T:s.removeAttribute("type"),a!=null?T==="number"?(a===0&&s.value===""||s.value!=a)&&(s.value=""+_n(a)):s.value!==""+_n(a)&&(s.value=""+_n(a)):T!=="submit"&&T!=="reset"||s.removeAttribute("value"),a!=null?Js(s,T,_n(a)):l!=null?Js(s,T,_n(l)):c!=null&&s.removeAttribute("value"),p==null&&y!=null&&(s.defaultChecked=!!y),p!=null&&(s.checked=p&&typeof p!="function"&&typeof p!="symbol"),S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?s.name=""+_n(S):s.removeAttribute("name")}function sa(s,a,l,c,p,y,T,S){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(s.type=y),a!=null||l!=null){if(!(y!=="submit"&&y!=="reset"||a!=null))return;l=l!=null?""+_n(l):"",a=a!=null?""+_n(a):l,S||a===s.value||(s.value=a),s.defaultValue=a}c=c??p,c=typeof c!="function"&&typeof c!="symbol"&&!!c,s.checked=S?s.checked:!!c,s.defaultChecked=!!c,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(s.name=T)}function Js(s,a,l){a==="number"&&ra(s.ownerDocument)===s||s.defaultValue===""+l||(s.defaultValue=""+l)}function us(s,a,l,c){if(s=s.options,a){a={};for(var p=0;p<l.length;p++)a["$"+l[p]]=!0;for(l=0;l<s.length;l++)p=a.hasOwnProperty("$"+s[l].value),s[l].selected!==p&&(s[l].selected=p),p&&c&&(s[l].defaultSelected=!0)}else{for(l=""+_n(l),a=null,p=0;p<s.length;p++){if(s[p].value===l){s[p].selected=!0,c&&(s[p].defaultSelected=!0);return}a!==null||s[p].disabled||(a=s[p])}a!==null&&(a.selected=!0)}}function Xe(s,a,l){if(a!=null&&(a=""+_n(a),a!==s.value&&(s.value=a),l==null)){s.defaultValue!==a&&(s.defaultValue=a);return}s.defaultValue=l!=null?""+_n(l):""}function ia(s,a,l,c){if(a==null){if(c!=null){if(l!=null)throw Error(r(92));if(at(c)){if(1<c.length)throw Error(r(93));c=c[0]}l=c}l==null&&(l=""),a=l}l=_n(a),s.defaultValue=l,c=s.textContent,c===l&&c!==""&&c!==null&&(s.value=c)}function Fn(s,a){if(a){var l=s.firstChild;if(l&&l===s.lastChild&&l.nodeType===3){l.nodeValue=a;return}}s.textContent=a}var aa=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Sh(s,a,l){var c=a.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?c?s.setProperty(a,""):a==="float"?s.cssFloat="":s[a]="":c?s.setProperty(a,l):typeof l!="number"||l===0||aa.has(a)?a==="float"?s.cssFloat=l:s[a]=(""+l).trim():s[a]=l+"px"}function uu(s,a,l){if(a!=null&&typeof a!="object")throw Error(r(62));if(s=s.style,l!=null){for(var c in l)!l.hasOwnProperty(c)||a!=null&&a.hasOwnProperty(c)||(c.indexOf("--")===0?s.setProperty(c,""):c==="float"?s.cssFloat="":s[c]="");for(var p in a)c=a[p],a.hasOwnProperty(p)&&l[p]!==c&&Sh(s,p,c)}else for(var y in a)a.hasOwnProperty(y)&&Sh(s,y,a[y])}function cu(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Om=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),km=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function vo(s){return km.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}var cs=null;function Hn(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var hs=null,ds=null;function hu(s){var a=Cr(s);if(a&&(s=a.stateNode)){var l=s[Ct]||null;e:switch(s=a.stateNode,a.type){case"input":if(On(s,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),a=l.name,l.type==="radio"&&a!=null){for(l=s;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+It(""+a)+'"][type="radio"]'),a=0;a<l.length;a++){var c=l[a];if(c!==s&&c.form===s.form){var p=c[Ct]||null;if(!p)throw Error(r(90));On(c,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name)}}for(a=0;a<l.length;a++)c=l[a],c.form===s.form&&lu(c)}break e;case"textarea":Xe(s,l.value,l.defaultValue);break e;case"select":a=l.value,a!=null&&us(s,!!l.multiple,a,!1)}}}var kr=!1;function Ah(s,a,l){if(kr)return s(a,l);kr=!0;try{var c=s(a);return c}finally{if(kr=!1,(hs!==null||ds!==null)&&(vd(),hs&&(a=hs,s=ds,ds=hs=null,hu(a),s)))for(a=0;a<s.length;a++)hu(s[a])}}function oa(s,a){var l=s.stateNode;if(l===null)return null;var c=l[Ct]||null;if(c===null)return null;l=c[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(s=s.type,c=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!c;break e;default:s=!1}if(s)return null;if(l&&typeof l!="function")throw Error(r(231,a,typeof l));return l}var lr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Gn=!1;if(lr)try{var la={};Object.defineProperty(la,"passive",{get:function(){Gn=!0}}),window.addEventListener("test",la,la),window.removeEventListener("test",la,la)}catch{Gn=!1}var Dr=null,Zs=null,fs=null;function du(){if(fs)return fs;var s,a=Zs,l=a.length,c,p="value"in Dr?Dr.value:Dr.textContent,y=p.length;for(s=0;s<l&&a[s]===p[s];s++);var T=l-s;for(c=1;c<=T&&a[l-c]===p[y-c];c++);return fs=p.slice(s,1<c?1-c:void 0)}function Pr(s){var a=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&a===13&&(s=13)):s=a,s===10&&(s=13),32<=s||s===13?s:0}function Nr(){return!0}function fu(){return!1}function Gt(s){function a(l,c,p,y,T){this._reactName=l,this._targetInst=p,this.type=c,this.nativeEvent=y,this.target=T,this.currentTarget=null;for(var S in s)s.hasOwnProperty(S)&&(l=s[S],this[S]=l?l(y):y[S]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?Nr:fu,this.isPropagationStopped=fu,this}return g(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Nr)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Nr)},persist:function(){},isPersistent:Nr}),a}var Ge={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},_o=Gt(Ge),ua=g({},Ge,{view:0,detail:0}),Rh=Gt(ua),wo,bo,Vr,ca=g({},ua,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:fa,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Vr&&(Vr&&s.type==="mousemove"?(wo=s.screenX-Vr.screenX,bo=s.screenY-Vr.screenY):bo=wo=0,Vr=s),wo)},movementY:function(s){return"movementY"in s?s.movementY:bo}}),Kn=Gt(ca),xh=g({},ca,{dataTransfer:0}),Dm=Gt(xh),ha=g({},ua,{relatedTarget:0}),To=Gt(ha),mu=g({},Ge,{animationName:0,elapsedTime:0,pseudoElement:0}),Eo=Gt(mu),Ch=g({},Ge,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),So=Gt(Ch),Pm=g({},Ge,{data:0}),pu=Gt(Pm),da={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ih={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Oh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function gu(s){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(s):(s=Oh[s])?!!a[s]:!1}function fa(){return gu}var kh=g({},ua,{key:function(s){if(s.key){var a=da[s.key]||s.key;if(a!=="Unidentified")return a}return s.type==="keypress"?(s=Pr(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?Ih[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:fa,charCode:function(s){return s.type==="keypress"?Pr(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Pr(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),Ao=Gt(kh),Dh=g({},ca,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),yu=Gt(Dh),ms=g({},ua,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:fa}),Ph=Gt(ms),Nh=g({},Ge,{propertyName:0,elapsedTime:0,pseudoElement:0}),Vh=Gt(Nh),Mh=g({},ca,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),Ro=Gt(Mh),wn=g({},Ge,{newState:0,oldState:0}),Lh=Gt(wn),jh=[9,13,27,32],Mr=lr&&"CompositionEvent"in window,f=null;lr&&"documentMode"in document&&(f=document.documentMode);var v=lr&&"TextEvent"in window&&!f,b=lr&&(!Mr||f&&8<f&&11>=f),A=" ",H=!1;function Q(s,a){switch(s){case"keyup":return jh.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ue(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Be=!1;function jt(s,a){switch(s){case"compositionend":return ue(a);case"keypress":return a.which!==32?null:(H=!0,A);case"textInput":return s=a.data,s===A&&H?null:s;default:return null}}function ze(s,a){if(Be)return s==="compositionend"||!Mr&&Q(s,a)?(s=du(),fs=Zs=Dr=null,Be=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return b&&a.locale!=="ko"?null:a.data;default:return null}}var Kt={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ut(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a==="input"?!!Kt[s.type]:a==="textarea"}function ps(s,a,l,c){hs?ds?ds.push(c):ds=[c]:hs=c,a=Sd(a,"onChange"),0<a.length&&(l=new _o("onChange","change",null,l,c),s.push({event:l,listeners:a}))}var Zt=null,Lr=null;function vu(s){Gb(s,0)}function Uh(s){var a=Ir(s);if(lu(a))return s}function f0(s,a){if(s==="change")return a}var m0=!1;if(lr){var Nm;if(lr){var Vm="oninput"in document;if(!Vm){var p0=document.createElement("div");p0.setAttribute("oninput","return;"),Vm=typeof p0.oninput=="function"}Nm=Vm}else Nm=!1;m0=Nm&&(!document.documentMode||9<document.documentMode)}function g0(){Zt&&(Zt.detachEvent("onpropertychange",y0),Lr=Zt=null)}function y0(s){if(s.propertyName==="value"&&Uh(Lr)){var a=[];ps(a,Lr,s,Hn(s)),Ah(vu,a)}}function HI(s,a,l){s==="focusin"?(g0(),Zt=a,Lr=l,Zt.attachEvent("onpropertychange",y0)):s==="focusout"&&g0()}function GI(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Uh(Lr)}function KI(s,a){if(s==="click")return Uh(a)}function WI(s,a){if(s==="input"||s==="change")return Uh(a)}function YI(s,a){return s===a&&(s!==0||1/s===1/a)||s!==s&&a!==a}var kn=typeof Object.is=="function"?Object.is:YI;function _u(s,a){if(kn(s,a))return!0;if(typeof s!="object"||s===null||typeof a!="object"||a===null)return!1;var l=Object.keys(s),c=Object.keys(a);if(l.length!==c.length)return!1;for(c=0;c<l.length;c++){var p=l[c];if(!Gi.call(a,p)||!kn(s[p],a[p]))return!1}return!0}function v0(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function _0(s,a){var l=v0(s);s=0;for(var c;l;){if(l.nodeType===3){if(c=s+l.textContent.length,s<=a&&c>=a)return{node:l,offset:a-s};s=c}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=v0(l)}}function w0(s,a){return s&&a?s===a?!0:s&&s.nodeType===3?!1:a&&a.nodeType===3?w0(s,a.parentNode):"contains"in s?s.contains(a):s.compareDocumentPosition?!!(s.compareDocumentPosition(a)&16):!1:!1}function b0(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var a=ra(s.document);a instanceof s.HTMLIFrameElement;){try{var l=typeof a.contentWindow.location.href=="string"}catch{l=!1}if(l)s=a.contentWindow;else break;a=ra(s.document)}return a}function Mm(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a&&(a==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||a==="textarea"||s.contentEditable==="true")}var QI=lr&&"documentMode"in document&&11>=document.documentMode,xo=null,Lm=null,wu=null,jm=!1;function T0(s,a,l){var c=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;jm||xo==null||xo!==ra(c)||(c=xo,"selectionStart"in c&&Mm(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),wu&&_u(wu,c)||(wu=c,c=Sd(Lm,"onSelect"),0<c.length&&(a=new _o("onSelect","select",null,a,l),s.push({event:a,listeners:c}),a.target=xo)))}function ma(s,a){var l={};return l[s.toLowerCase()]=a.toLowerCase(),l["Webkit"+s]="webkit"+a,l["Moz"+s]="moz"+a,l}var Co={animationend:ma("Animation","AnimationEnd"),animationiteration:ma("Animation","AnimationIteration"),animationstart:ma("Animation","AnimationStart"),transitionrun:ma("Transition","TransitionRun"),transitionstart:ma("Transition","TransitionStart"),transitioncancel:ma("Transition","TransitionCancel"),transitionend:ma("Transition","TransitionEnd")},Um={},E0={};lr&&(E0=document.createElement("div").style,"AnimationEvent"in window||(delete Co.animationend.animation,delete Co.animationiteration.animation,delete Co.animationstart.animation),"TransitionEvent"in window||delete Co.transitionend.transition);function pa(s){if(Um[s])return Um[s];if(!Co[s])return s;var a=Co[s],l;for(l in a)if(a.hasOwnProperty(l)&&l in E0)return Um[s]=a[l];return s}var S0=pa("animationend"),A0=pa("animationiteration"),R0=pa("animationstart"),XI=pa("transitionrun"),JI=pa("transitionstart"),ZI=pa("transitioncancel"),x0=pa("transitionend"),C0=new Map,Bm="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Bm.push("scrollEnd");function ur(s,a){C0.set(s,a),or(a,[s])}var I0=new WeakMap;function Wn(s,a){if(typeof s=="object"&&s!==null){var l=I0.get(s);return l!==void 0?l:(a={value:s,source:a,stack:go(a)},I0.set(s,a),a)}return{value:s,source:a,stack:go(a)}}var Yn=[],Io=0,zm=0;function Bh(){for(var s=Io,a=zm=Io=0;a<s;){var l=Yn[a];Yn[a++]=null;var c=Yn[a];Yn[a++]=null;var p=Yn[a];Yn[a++]=null;var y=Yn[a];if(Yn[a++]=null,c!==null&&p!==null){var T=c.pending;T===null?p.next=p:(p.next=T.next,T.next=p),c.pending=p}y!==0&&O0(l,p,y)}}function zh(s,a,l,c){Yn[Io++]=s,Yn[Io++]=a,Yn[Io++]=l,Yn[Io++]=c,zm|=c,s.lanes|=c,s=s.alternate,s!==null&&(s.lanes|=c)}function qm(s,a,l,c){return zh(s,a,l,c),qh(s)}function Oo(s,a){return zh(s,null,null,a),qh(s)}function O0(s,a,l){s.lanes|=l;var c=s.alternate;c!==null&&(c.lanes|=l);for(var p=!1,y=s.return;y!==null;)y.childLanes|=l,c=y.alternate,c!==null&&(c.childLanes|=l),y.tag===22&&(s=y.stateNode,s===null||s._visibility&1||(p=!0)),s=y,y=y.return;return s.tag===3?(y=s.stateNode,p&&a!==null&&(p=31-cn(l),s=y.hiddenUpdates,c=s[p],c===null?s[p]=[a]:c.push(a),a.lane=l|536870912),y):null}function qh(s){if(50<Hu)throw Hu=0,Wp=null,Error(r(185));for(var a=s.return;a!==null;)s=a,a=s.return;return s.tag===3?s.stateNode:null}var ko={};function e2(s,a,l,c){this.tag=s,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Dn(s,a,l,c){return new e2(s,a,l,c)}function $m(s){return s=s.prototype,!(!s||!s.isReactComponent)}function gs(s,a){var l=s.alternate;return l===null?(l=Dn(s.tag,a,s.key,s.mode),l.elementType=s.elementType,l.type=s.type,l.stateNode=s.stateNode,l.alternate=s,s.alternate=l):(l.pendingProps=a,l.type=s.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=s.flags&65011712,l.childLanes=s.childLanes,l.lanes=s.lanes,l.child=s.child,l.memoizedProps=s.memoizedProps,l.memoizedState=s.memoizedState,l.updateQueue=s.updateQueue,a=s.dependencies,l.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},l.sibling=s.sibling,l.index=s.index,l.ref=s.ref,l.refCleanup=s.refCleanup,l}function k0(s,a){s.flags&=65011714;var l=s.alternate;return l===null?(s.childLanes=0,s.lanes=a,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,a=l.dependencies,s.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),s}function $h(s,a,l,c,p,y){var T=0;if(c=s,typeof s=="function")$m(s)&&(T=1);else if(typeof s=="string")T=nO(s,l,ve.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case k:return s=Dn(31,l,a,p),s.elementType=k,s.lanes=y,s;case R:return ga(l.children,p,y,a);case O:T=8,p|=24;break;case I:return s=Dn(12,l,a,p|2),s.elementType=I,s.lanes=y,s;case X:return s=Dn(13,l,a,p),s.elementType=X,s.lanes=y,s;case oe:return s=Dn(19,l,a,p),s.elementType=oe,s.lanes=y,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case P:case M:T=10;break e;case V:T=9;break e;case J:T=11;break e;case L:T=14;break e;case C:T=16,c=null;break e}T=29,l=Error(r(130,s===null?"null":typeof s,"")),c=null}return a=Dn(T,l,a,p),a.elementType=s,a.type=c,a.lanes=y,a}function ga(s,a,l,c){return s=Dn(7,s,c,a),s.lanes=l,s}function Fm(s,a,l){return s=Dn(6,s,null,a),s.lanes=l,s}function Hm(s,a,l){return a=Dn(4,s.children!==null?s.children:[],s.key,a),a.lanes=l,a.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},a}var Do=[],Po=0,Fh=null,Hh=0,Qn=[],Xn=0,ya=null,ys=1,vs="";function va(s,a){Do[Po++]=Hh,Do[Po++]=Fh,Fh=s,Hh=a}function D0(s,a,l){Qn[Xn++]=ys,Qn[Xn++]=vs,Qn[Xn++]=ya,ya=s;var c=ys;s=vs;var p=32-cn(c)-1;c&=~(1<<p),l+=1;var y=32-cn(a)+p;if(30<y){var T=p-p%5;y=(c&(1<<T)-1).toString(32),c>>=T,p-=T,ys=1<<32-cn(a)+p|l<<p|c,vs=y+s}else ys=1<<y|l<<p|c,vs=s}function Gm(s){s.return!==null&&(va(s,1),D0(s,1,0))}function Km(s){for(;s===Fh;)Fh=Do[--Po],Do[Po]=null,Hh=Do[--Po],Do[Po]=null;for(;s===ya;)ya=Qn[--Xn],Qn[Xn]=null,vs=Qn[--Xn],Qn[Xn]=null,ys=Qn[--Xn],Qn[Xn]=null}var bn=null,yt=null,He=!1,_a=null,jr=!1,Wm=Error(r(519));function wa(s){var a=Error(r(418,""));throw Eu(Wn(a,s)),Wm}function P0(s){var a=s.stateNode,l=s.type,c=s.memoizedProps;switch(a[Lt]=s,a[Ct]=c,l){case"dialog":Me("cancel",a),Me("close",a);break;case"iframe":case"object":case"embed":Me("load",a);break;case"video":case"audio":for(l=0;l<Ku.length;l++)Me(Ku[l],a);break;case"source":Me("error",a);break;case"img":case"image":case"link":Me("error",a),Me("load",a);break;case"details":Me("toggle",a);break;case"input":Me("invalid",a),sa(a,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0),yo(a);break;case"select":Me("invalid",a);break;case"textarea":Me("invalid",a),ia(a,c.value,c.defaultValue,c.children),yo(a)}l=c.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||a.textContent===""+l||c.suppressHydrationWarning===!0||Qb(a.textContent,l)?(c.popover!=null&&(Me("beforetoggle",a),Me("toggle",a)),c.onScroll!=null&&Me("scroll",a),c.onScrollEnd!=null&&Me("scrollend",a),c.onClick!=null&&(a.onclick=Ad),a=!0):a=!1,a||wa(s)}function N0(s){for(bn=s.return;bn;)switch(bn.tag){case 5:case 13:jr=!1;return;case 27:case 3:jr=!0;return;default:bn=bn.return}}function bu(s){if(s!==bn)return!1;if(!He)return N0(s),He=!0,!1;var a=s.tag,l;if((l=a!==3&&a!==27)&&((l=a===5)&&(l=s.type,l=!(l!=="form"&&l!=="button")||cg(s.type,s.memoizedProps)),l=!l),l&&yt&&wa(s),N0(s),a===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));e:{for(s=s.nextSibling,a=0;s;){if(s.nodeType===8)if(l=s.data,l==="/$"){if(a===0){yt=hr(s.nextSibling);break e}a--}else l!=="$"&&l!=="$!"&&l!=="$?"||a++;s=s.nextSibling}yt=null}}else a===27?(a=yt,pi(s.type)?(s=mg,mg=null,yt=s):yt=a):yt=bn?hr(s.stateNode.nextSibling):null;return!0}function Tu(){yt=bn=null,He=!1}function V0(){var s=_a;return s!==null&&(Rn===null?Rn=s:Rn.push.apply(Rn,s),_a=null),s}function Eu(s){_a===null?_a=[s]:_a.push(s)}var Ym=ie(null),ba=null,_s=null;function ei(s,a,l){le(Ym,a._currentValue),a._currentValue=l}function ws(s){s._currentValue=Ym.current,ce(Ym)}function Qm(s,a,l){for(;s!==null;){var c=s.alternate;if((s.childLanes&a)!==a?(s.childLanes|=a,c!==null&&(c.childLanes|=a)):c!==null&&(c.childLanes&a)!==a&&(c.childLanes|=a),s===l)break;s=s.return}}function Xm(s,a,l,c){var p=s.child;for(p!==null&&(p.return=s);p!==null;){var y=p.dependencies;if(y!==null){var T=p.child;y=y.firstContext;e:for(;y!==null;){var S=y;y=p;for(var N=0;N<a.length;N++)if(S.context===a[N]){y.lanes|=l,S=y.alternate,S!==null&&(S.lanes|=l),Qm(y.return,l,s),c||(T=null);break e}y=S.next}}else if(p.tag===18){if(T=p.return,T===null)throw Error(r(341));T.lanes|=l,y=T.alternate,y!==null&&(y.lanes|=l),Qm(T,l,s),T=null}else T=p.child;if(T!==null)T.return=p;else for(T=p;T!==null;){if(T===s){T=null;break}if(p=T.sibling,p!==null){p.return=T.return,T=p;break}T=T.return}p=T}}function Su(s,a,l,c){s=null;for(var p=a,y=!1;p!==null;){if(!y){if((p.flags&524288)!==0)y=!0;else if((p.flags&262144)!==0)break}if(p.tag===10){var T=p.alternate;if(T===null)throw Error(r(387));if(T=T.memoizedProps,T!==null){var S=p.type;kn(p.pendingProps.value,T.value)||(s!==null?s.push(S):s=[S])}}else if(p===Ht.current){if(T=p.alternate,T===null)throw Error(r(387));T.memoizedState.memoizedState!==p.memoizedState.memoizedState&&(s!==null?s.push(Zu):s=[Zu])}p=p.return}s!==null&&Xm(a,s,l,c),a.flags|=262144}function Gh(s){for(s=s.firstContext;s!==null;){if(!kn(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function Ta(s){ba=s,_s=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function hn(s){return M0(ba,s)}function Kh(s,a){return ba===null&&Ta(s),M0(s,a)}function M0(s,a){var l=a._currentValue;if(a={context:a,memoizedValue:l,next:null},_s===null){if(s===null)throw Error(r(308));_s=a,s.dependencies={lanes:0,firstContext:a},s.flags|=524288}else _s=_s.next=a;return l}var t2=typeof AbortController<"u"?AbortController:function(){var s=[],a=this.signal={aborted:!1,addEventListener:function(l,c){s.push(c)}};this.abort=function(){a.aborted=!0,s.forEach(function(l){return l()})}},n2=t.unstable_scheduleCallback,r2=t.unstable_NormalPriority,Bt={$$typeof:M,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Jm(){return{controller:new t2,data:new Map,refCount:0}}function Au(s){s.refCount--,s.refCount===0&&n2(r2,function(){s.controller.abort()})}var Ru=null,Zm=0,No=0,Vo=null;function s2(s,a){if(Ru===null){var l=Ru=[];Zm=0,No=tg(),Vo={status:"pending",value:void 0,then:function(c){l.push(c)}}}return Zm++,a.then(L0,L0),a}function L0(){if(--Zm===0&&Ru!==null){Vo!==null&&(Vo.status="fulfilled");var s=Ru;Ru=null,No=0,Vo=null;for(var a=0;a<s.length;a++)(0,s[a])()}}function i2(s,a){var l=[],c={status:"pending",value:null,reason:null,then:function(p){l.push(p)}};return s.then(function(){c.status="fulfilled",c.value=a;for(var p=0;p<l.length;p++)(0,l[p])(a)},function(p){for(c.status="rejected",c.reason=p,p=0;p<l.length;p++)(0,l[p])(void 0)}),c}var j0=Z.S;Z.S=function(s,a){typeof a=="object"&&a!==null&&typeof a.then=="function"&&s2(s,a),j0!==null&&j0(s,a)};var Ea=ie(null);function ep(){var s=Ea.current;return s!==null?s:rt.pooledCache}function Wh(s,a){a===null?le(Ea,Ea.current):le(Ea,a.pool)}function U0(){var s=ep();return s===null?null:{parent:Bt._currentValue,pool:s}}var xu=Error(r(460)),B0=Error(r(474)),Yh=Error(r(542)),tp={then:function(){}};function z0(s){return s=s.status,s==="fulfilled"||s==="rejected"}function Qh(){}function q0(s,a,l){switch(l=s[l],l===void 0?s.push(a):l!==a&&(a.then(Qh,Qh),a=l),a.status){case"fulfilled":return a.value;case"rejected":throw s=a.reason,F0(s),s;default:if(typeof a.status=="string")a.then(Qh,Qh);else{if(s=rt,s!==null&&100<s.shellSuspendCounter)throw Error(r(482));s=a,s.status="pending",s.then(function(c){if(a.status==="pending"){var p=a;p.status="fulfilled",p.value=c}},function(c){if(a.status==="pending"){var p=a;p.status="rejected",p.reason=c}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw s=a.reason,F0(s),s}throw Cu=a,xu}}var Cu=null;function $0(){if(Cu===null)throw Error(r(459));var s=Cu;return Cu=null,s}function F0(s){if(s===xu||s===Yh)throw Error(r(483))}var ti=!1;function np(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function rp(s,a){s=s.updateQueue,a.updateQueue===s&&(a.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function ni(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function ri(s,a,l){var c=s.updateQueue;if(c===null)return null;if(c=c.shared,(Ye&2)!==0){var p=c.pending;return p===null?a.next=a:(a.next=p.next,p.next=a),c.pending=a,a=qh(s),O0(s,null,l),a}return zh(s,c,a,l),qh(s)}function Iu(s,a,l){if(a=a.updateQueue,a!==null&&(a=a.shared,(l&4194048)!==0)){var c=a.lanes;c&=s.pendingLanes,l|=c,a.lanes=l,ru(s,l)}}function sp(s,a){var l=s.updateQueue,c=s.alternate;if(c!==null&&(c=c.updateQueue,l===c)){var p=null,y=null;if(l=l.firstBaseUpdate,l!==null){do{var T={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};y===null?p=y=T:y=y.next=T,l=l.next}while(l!==null);y===null?p=y=a:y=y.next=a}else p=y=a;l={baseState:c.baseState,firstBaseUpdate:p,lastBaseUpdate:y,shared:c.shared,callbacks:c.callbacks},s.updateQueue=l;return}s=l.lastBaseUpdate,s===null?l.firstBaseUpdate=a:s.next=a,l.lastBaseUpdate=a}var ip=!1;function Ou(){if(ip){var s=Vo;if(s!==null)throw s}}function ku(s,a,l,c){ip=!1;var p=s.updateQueue;ti=!1;var y=p.firstBaseUpdate,T=p.lastBaseUpdate,S=p.shared.pending;if(S!==null){p.shared.pending=null;var N=S,K=N.next;N.next=null,T===null?y=K:T.next=K,T=N;var ee=s.alternate;ee!==null&&(ee=ee.updateQueue,S=ee.lastBaseUpdate,S!==T&&(S===null?ee.firstBaseUpdate=K:S.next=K,ee.lastBaseUpdate=N))}if(y!==null){var re=p.baseState;T=0,ee=K=N=null,S=y;do{var W=S.lane&-536870913,Y=W!==S.lane;if(Y?(qe&W)===W:(c&W)===W){W!==0&&W===No&&(ip=!0),ee!==null&&(ee=ee.next={lane:0,tag:S.tag,payload:S.payload,callback:null,next:null});e:{var Se=s,_e=S;W=a;var et=l;switch(_e.tag){case 1:if(Se=_e.payload,typeof Se=="function"){re=Se.call(et,re,W);break e}re=Se;break e;case 3:Se.flags=Se.flags&-65537|128;case 0:if(Se=_e.payload,W=typeof Se=="function"?Se.call(et,re,W):Se,W==null)break e;re=g({},re,W);break e;case 2:ti=!0}}W=S.callback,W!==null&&(s.flags|=64,Y&&(s.flags|=8192),Y=p.callbacks,Y===null?p.callbacks=[W]:Y.push(W))}else Y={lane:W,tag:S.tag,payload:S.payload,callback:S.callback,next:null},ee===null?(K=ee=Y,N=re):ee=ee.next=Y,T|=W;if(S=S.next,S===null){if(S=p.shared.pending,S===null)break;Y=S,S=Y.next,Y.next=null,p.lastBaseUpdate=Y,p.shared.pending=null}}while(!0);ee===null&&(N=re),p.baseState=N,p.firstBaseUpdate=K,p.lastBaseUpdate=ee,y===null&&(p.shared.lanes=0),hi|=T,s.lanes=T,s.memoizedState=re}}function H0(s,a){if(typeof s!="function")throw Error(r(191,s));s.call(a)}function G0(s,a){var l=s.callbacks;if(l!==null)for(s.callbacks=null,s=0;s<l.length;s++)H0(l[s],a)}var Mo=ie(null),Xh=ie(0);function K0(s,a){s=xs,le(Xh,s),le(Mo,a),xs=s|a.baseLanes}function ap(){le(Xh,xs),le(Mo,Mo.current)}function op(){xs=Xh.current,ce(Mo),ce(Xh)}var si=0,De=null,Je=null,Ot=null,Jh=!1,Lo=!1,Sa=!1,Zh=0,Du=0,jo=null,a2=0;function Tt(){throw Error(r(321))}function lp(s,a){if(a===null)return!1;for(var l=0;l<a.length&&l<s.length;l++)if(!kn(s[l],a[l]))return!1;return!0}function up(s,a,l,c,p,y){return si=y,De=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,Z.H=s===null||s.memoizedState===null?Ow:kw,Sa=!1,y=l(c,p),Sa=!1,Lo&&(y=Y0(a,l,c,p)),W0(s),y}function W0(s){Z.H=id;var a=Je!==null&&Je.next!==null;if(si=0,Ot=Je=De=null,Jh=!1,Du=0,jo=null,a)throw Error(r(300));s===null||Wt||(s=s.dependencies,s!==null&&Gh(s)&&(Wt=!0))}function Y0(s,a,l,c){De=s;var p=0;do{if(Lo&&(jo=null),Du=0,Lo=!1,25<=p)throw Error(r(301));if(p+=1,Ot=Je=null,s.updateQueue!=null){var y=s.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}Z.H=f2,y=a(l,c)}while(Lo);return y}function o2(){var s=Z.H,a=s.useState()[0];return a=typeof a.then=="function"?Pu(a):a,s=s.useState()[0],(Je!==null?Je.memoizedState:null)!==s&&(De.flags|=1024),a}function cp(){var s=Zh!==0;return Zh=0,s}function hp(s,a,l){a.updateQueue=s.updateQueue,a.flags&=-2053,s.lanes&=~l}function dp(s){if(Jh){for(s=s.memoizedState;s!==null;){var a=s.queue;a!==null&&(a.pending=null),s=s.next}Jh=!1}si=0,Ot=Je=De=null,Lo=!1,Du=Zh=0,jo=null}function Sn(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ot===null?De.memoizedState=Ot=s:Ot=Ot.next=s,Ot}function kt(){if(Je===null){var s=De.alternate;s=s!==null?s.memoizedState:null}else s=Je.next;var a=Ot===null?De.memoizedState:Ot.next;if(a!==null)Ot=a,Je=s;else{if(s===null)throw De.alternate===null?Error(r(467)):Error(r(310));Je=s,s={memoizedState:Je.memoizedState,baseState:Je.baseState,baseQueue:Je.baseQueue,queue:Je.queue,next:null},Ot===null?De.memoizedState=Ot=s:Ot=Ot.next=s}return Ot}function fp(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Pu(s){var a=Du;return Du+=1,jo===null&&(jo=[]),s=q0(jo,s,a),a=De,(Ot===null?a.memoizedState:Ot.next)===null&&(a=a.alternate,Z.H=a===null||a.memoizedState===null?Ow:kw),s}function ed(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return Pu(s);if(s.$$typeof===M)return hn(s)}throw Error(r(438,String(s)))}function mp(s){var a=null,l=De.updateQueue;if(l!==null&&(a=l.memoCache),a==null){var c=De.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(a={data:c.data.map(function(p){return p.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),l===null&&(l=fp(),De.updateQueue=l),l.memoCache=a,l=a.data[a.index],l===void 0)for(l=a.data[a.index]=Array(s),c=0;c<s;c++)l[c]=B;return a.index++,l}function bs(s,a){return typeof a=="function"?a(s):a}function td(s){var a=kt();return pp(a,Je,s)}function pp(s,a,l){var c=s.queue;if(c===null)throw Error(r(311));c.lastRenderedReducer=l;var p=s.baseQueue,y=c.pending;if(y!==null){if(p!==null){var T=p.next;p.next=y.next,y.next=T}a.baseQueue=p=y,c.pending=null}if(y=s.baseState,p===null)s.memoizedState=y;else{a=p.next;var S=T=null,N=null,K=a,ee=!1;do{var re=K.lane&-536870913;if(re!==K.lane?(qe&re)===re:(si&re)===re){var W=K.revertLane;if(W===0)N!==null&&(N=N.next={lane:0,revertLane:0,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null}),re===No&&(ee=!0);else if((si&W)===W){K=K.next,W===No&&(ee=!0);continue}else re={lane:0,revertLane:K.revertLane,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},N===null?(S=N=re,T=y):N=N.next=re,De.lanes|=W,hi|=W;re=K.action,Sa&&l(y,re),y=K.hasEagerState?K.eagerState:l(y,re)}else W={lane:re,revertLane:K.revertLane,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},N===null?(S=N=W,T=y):N=N.next=W,De.lanes|=re,hi|=re;K=K.next}while(K!==null&&K!==a);if(N===null?T=y:N.next=S,!kn(y,s.memoizedState)&&(Wt=!0,ee&&(l=Vo,l!==null)))throw l;s.memoizedState=y,s.baseState=T,s.baseQueue=N,c.lastRenderedState=y}return p===null&&(c.lanes=0),[s.memoizedState,c.dispatch]}function gp(s){var a=kt(),l=a.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=s;var c=l.dispatch,p=l.pending,y=a.memoizedState;if(p!==null){l.pending=null;var T=p=p.next;do y=s(y,T.action),T=T.next;while(T!==p);kn(y,a.memoizedState)||(Wt=!0),a.memoizedState=y,a.baseQueue===null&&(a.baseState=y),l.lastRenderedState=y}return[y,c]}function Q0(s,a,l){var c=De,p=kt(),y=He;if(y){if(l===void 0)throw Error(r(407));l=l()}else l=a();var T=!kn((Je||p).memoizedState,l);T&&(p.memoizedState=l,Wt=!0),p=p.queue;var S=Z0.bind(null,c,p,s);if(Nu(2048,8,S,[s]),p.getSnapshot!==a||T||Ot!==null&&Ot.memoizedState.tag&1){if(c.flags|=2048,Uo(9,nd(),J0.bind(null,c,p,l,a),null),rt===null)throw Error(r(349));y||(si&124)!==0||X0(c,a,l)}return l}function X0(s,a,l){s.flags|=16384,s={getSnapshot:a,value:l},a=De.updateQueue,a===null?(a=fp(),De.updateQueue=a,a.stores=[s]):(l=a.stores,l===null?a.stores=[s]:l.push(s))}function J0(s,a,l,c){a.value=l,a.getSnapshot=c,ew(a)&&tw(s)}function Z0(s,a,l){return l(function(){ew(a)&&tw(s)})}function ew(s){var a=s.getSnapshot;s=s.value;try{var l=a();return!kn(s,l)}catch{return!0}}function tw(s){var a=Oo(s,2);a!==null&&Ln(a,s,2)}function yp(s){var a=Sn();if(typeof s=="function"){var l=s;if(s=l(),Sa){In(!0);try{l()}finally{In(!1)}}}return a.memoizedState=a.baseState=s,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:bs,lastRenderedState:s},a}function nw(s,a,l,c){return s.baseState=l,pp(s,Je,typeof c=="function"?c:bs)}function l2(s,a,l,c,p){if(sd(s))throw Error(r(485));if(s=a.action,s!==null){var y={payload:p,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){y.listeners.push(T)}};Z.T!==null?l(!0):y.isTransition=!1,c(y),l=a.pending,l===null?(y.next=a.pending=y,rw(a,y)):(y.next=l.next,a.pending=l.next=y)}}function rw(s,a){var l=a.action,c=a.payload,p=s.state;if(a.isTransition){var y=Z.T,T={};Z.T=T;try{var S=l(p,c),N=Z.S;N!==null&&N(T,S),sw(s,a,S)}catch(K){vp(s,a,K)}finally{Z.T=y}}else try{y=l(p,c),sw(s,a,y)}catch(K){vp(s,a,K)}}function sw(s,a,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(c){iw(s,a,c)},function(c){return vp(s,a,c)}):iw(s,a,l)}function iw(s,a,l){a.status="fulfilled",a.value=l,aw(a),s.state=l,a=s.pending,a!==null&&(l=a.next,l===a?s.pending=null:(l=l.next,a.next=l,rw(s,l)))}function vp(s,a,l){var c=s.pending;if(s.pending=null,c!==null){c=c.next;do a.status="rejected",a.reason=l,aw(a),a=a.next;while(a!==c)}s.action=null}function aw(s){s=s.listeners;for(var a=0;a<s.length;a++)(0,s[a])()}function ow(s,a){return a}function lw(s,a){if(He){var l=rt.formState;if(l!==null){e:{var c=De;if(He){if(yt){t:{for(var p=yt,y=jr;p.nodeType!==8;){if(!y){p=null;break t}if(p=hr(p.nextSibling),p===null){p=null;break t}}y=p.data,p=y==="F!"||y==="F"?p:null}if(p){yt=hr(p.nextSibling),c=p.data==="F!";break e}}wa(c)}c=!1}c&&(a=l[0])}}return l=Sn(),l.memoizedState=l.baseState=a,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ow,lastRenderedState:a},l.queue=c,l=xw.bind(null,De,c),c.dispatch=l,c=yp(!1),y=Ep.bind(null,De,!1,c.queue),c=Sn(),p={state:a,dispatch:null,action:s,pending:null},c.queue=p,l=l2.bind(null,De,p,y,l),p.dispatch=l,c.memoizedState=s,[a,l,!1]}function uw(s){var a=kt();return cw(a,Je,s)}function cw(s,a,l){if(a=pp(s,a,ow)[0],s=td(bs)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var c=Pu(a)}catch(T){throw T===xu?Yh:T}else c=a;a=kt();var p=a.queue,y=p.dispatch;return l!==a.memoizedState&&(De.flags|=2048,Uo(9,nd(),u2.bind(null,p,l),null)),[c,y,s]}function u2(s,a){s.action=a}function hw(s){var a=kt(),l=Je;if(l!==null)return cw(a,l,s);kt(),a=a.memoizedState,l=kt();var c=l.queue.dispatch;return l.memoizedState=s,[a,c,!1]}function Uo(s,a,l,c){return s={tag:s,create:l,deps:c,inst:a,next:null},a=De.updateQueue,a===null&&(a=fp(),De.updateQueue=a),l=a.lastEffect,l===null?a.lastEffect=s.next=s:(c=l.next,l.next=s,s.next=c,a.lastEffect=s),s}function nd(){return{destroy:void 0,resource:void 0}}function dw(){return kt().memoizedState}function rd(s,a,l,c){var p=Sn();c=c===void 0?null:c,De.flags|=s,p.memoizedState=Uo(1|a,nd(),l,c)}function Nu(s,a,l,c){var p=kt();c=c===void 0?null:c;var y=p.memoizedState.inst;Je!==null&&c!==null&&lp(c,Je.memoizedState.deps)?p.memoizedState=Uo(a,y,l,c):(De.flags|=s,p.memoizedState=Uo(1|a,y,l,c))}function fw(s,a){rd(8390656,8,s,a)}function mw(s,a){Nu(2048,8,s,a)}function pw(s,a){return Nu(4,2,s,a)}function gw(s,a){return Nu(4,4,s,a)}function yw(s,a){if(typeof a=="function"){s=s();var l=a(s);return function(){typeof l=="function"?l():a(null)}}if(a!=null)return s=s(),a.current=s,function(){a.current=null}}function vw(s,a,l){l=l!=null?l.concat([s]):null,Nu(4,4,yw.bind(null,a,s),l)}function _p(){}function _w(s,a){var l=kt();a=a===void 0?null:a;var c=l.memoizedState;return a!==null&&lp(a,c[1])?c[0]:(l.memoizedState=[s,a],s)}function ww(s,a){var l=kt();a=a===void 0?null:a;var c=l.memoizedState;if(a!==null&&lp(a,c[1]))return c[0];if(c=s(),Sa){In(!0);try{s()}finally{In(!1)}}return l.memoizedState=[c,a],c}function wp(s,a,l){return l===void 0||(si&1073741824)!==0?s.memoizedState=a:(s.memoizedState=l,s=Eb(),De.lanes|=s,hi|=s,l)}function bw(s,a,l,c){return kn(l,a)?l:Mo.current!==null?(s=wp(s,l,c),kn(s,a)||(Wt=!0),s):(si&42)===0?(Wt=!0,s.memoizedState=l):(s=Eb(),De.lanes|=s,hi|=s,a)}function Tw(s,a,l,c,p){var y=ae.p;ae.p=y!==0&&8>y?y:8;var T=Z.T,S={};Z.T=S,Ep(s,!1,a,l);try{var N=p(),K=Z.S;if(K!==null&&K(S,N),N!==null&&typeof N=="object"&&typeof N.then=="function"){var ee=i2(N,c);Vu(s,a,ee,Mn(s))}else Vu(s,a,c,Mn(s))}catch(re){Vu(s,a,{then:function(){},status:"rejected",reason:re},Mn())}finally{ae.p=y,Z.T=T}}function c2(){}function bp(s,a,l,c){if(s.tag!==5)throw Error(r(476));var p=Ew(s).queue;Tw(s,p,a,de,l===null?c2:function(){return Sw(s),l(c)})}function Ew(s){var a=s.memoizedState;if(a!==null)return a;a={memoizedState:de,baseState:de,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:bs,lastRenderedState:de},next:null};var l={};return a.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:bs,lastRenderedState:l},next:null},s.memoizedState=a,s=s.alternate,s!==null&&(s.memoizedState=a),a}function Sw(s){var a=Ew(s).next.queue;Vu(s,a,{},Mn())}function Tp(){return hn(Zu)}function Aw(){return kt().memoizedState}function Rw(){return kt().memoizedState}function h2(s){for(var a=s.return;a!==null;){switch(a.tag){case 24:case 3:var l=Mn();s=ni(l);var c=ri(a,s,l);c!==null&&(Ln(c,a,l),Iu(c,a,l)),a={cache:Jm()},s.payload=a;return}a=a.return}}function d2(s,a,l){var c=Mn();l={lane:c,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null},sd(s)?Cw(a,l):(l=qm(s,a,l,c),l!==null&&(Ln(l,s,c),Iw(l,a,c)))}function xw(s,a,l){var c=Mn();Vu(s,a,l,c)}function Vu(s,a,l,c){var p={lane:c,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null};if(sd(s))Cw(a,p);else{var y=s.alternate;if(s.lanes===0&&(y===null||y.lanes===0)&&(y=a.lastRenderedReducer,y!==null))try{var T=a.lastRenderedState,S=y(T,l);if(p.hasEagerState=!0,p.eagerState=S,kn(S,T))return zh(s,a,p,0),rt===null&&Bh(),!1}catch{}finally{}if(l=qm(s,a,p,c),l!==null)return Ln(l,s,c),Iw(l,a,c),!0}return!1}function Ep(s,a,l,c){if(c={lane:2,revertLane:tg(),action:c,hasEagerState:!1,eagerState:null,next:null},sd(s)){if(a)throw Error(r(479))}else a=qm(s,l,c,2),a!==null&&Ln(a,s,2)}function sd(s){var a=s.alternate;return s===De||a!==null&&a===De}function Cw(s,a){Lo=Jh=!0;var l=s.pending;l===null?a.next=a:(a.next=l.next,l.next=a),s.pending=a}function Iw(s,a,l){if((l&4194048)!==0){var c=a.lanes;c&=s.pendingLanes,l|=c,a.lanes=l,ru(s,l)}}var id={readContext:hn,use:ed,useCallback:Tt,useContext:Tt,useEffect:Tt,useImperativeHandle:Tt,useLayoutEffect:Tt,useInsertionEffect:Tt,useMemo:Tt,useReducer:Tt,useRef:Tt,useState:Tt,useDebugValue:Tt,useDeferredValue:Tt,useTransition:Tt,useSyncExternalStore:Tt,useId:Tt,useHostTransitionStatus:Tt,useFormState:Tt,useActionState:Tt,useOptimistic:Tt,useMemoCache:Tt,useCacheRefresh:Tt},Ow={readContext:hn,use:ed,useCallback:function(s,a){return Sn().memoizedState=[s,a===void 0?null:a],s},useContext:hn,useEffect:fw,useImperativeHandle:function(s,a,l){l=l!=null?l.concat([s]):null,rd(4194308,4,yw.bind(null,a,s),l)},useLayoutEffect:function(s,a){return rd(4194308,4,s,a)},useInsertionEffect:function(s,a){rd(4,2,s,a)},useMemo:function(s,a){var l=Sn();a=a===void 0?null:a;var c=s();if(Sa){In(!0);try{s()}finally{In(!1)}}return l.memoizedState=[c,a],c},useReducer:function(s,a,l){var c=Sn();if(l!==void 0){var p=l(a);if(Sa){In(!0);try{l(a)}finally{In(!1)}}}else p=a;return c.memoizedState=c.baseState=p,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:p},c.queue=s,s=s.dispatch=d2.bind(null,De,s),[c.memoizedState,s]},useRef:function(s){var a=Sn();return s={current:s},a.memoizedState=s},useState:function(s){s=yp(s);var a=s.queue,l=xw.bind(null,De,a);return a.dispatch=l,[s.memoizedState,l]},useDebugValue:_p,useDeferredValue:function(s,a){var l=Sn();return wp(l,s,a)},useTransition:function(){var s=yp(!1);return s=Tw.bind(null,De,s.queue,!0,!1),Sn().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,a,l){var c=De,p=Sn();if(He){if(l===void 0)throw Error(r(407));l=l()}else{if(l=a(),rt===null)throw Error(r(349));(qe&124)!==0||X0(c,a,l)}p.memoizedState=l;var y={value:l,getSnapshot:a};return p.queue=y,fw(Z0.bind(null,c,y,s),[s]),c.flags|=2048,Uo(9,nd(),J0.bind(null,c,y,l,a),null),l},useId:function(){var s=Sn(),a=rt.identifierPrefix;if(He){var l=vs,c=ys;l=(c&~(1<<32-cn(c)-1)).toString(32)+l,a=""+a+"R"+l,l=Zh++,0<l&&(a+="H"+l.toString(32)),a+=""}else l=a2++,a=""+a+"r"+l.toString(32)+"";return s.memoizedState=a},useHostTransitionStatus:Tp,useFormState:lw,useActionState:lw,useOptimistic:function(s){var a=Sn();a.memoizedState=a.baseState=s;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=l,a=Ep.bind(null,De,!0,l),l.dispatch=a,[s,a]},useMemoCache:mp,useCacheRefresh:function(){return Sn().memoizedState=h2.bind(null,De)}},kw={readContext:hn,use:ed,useCallback:_w,useContext:hn,useEffect:mw,useImperativeHandle:vw,useInsertionEffect:pw,useLayoutEffect:gw,useMemo:ww,useReducer:td,useRef:dw,useState:function(){return td(bs)},useDebugValue:_p,useDeferredValue:function(s,a){var l=kt();return bw(l,Je.memoizedState,s,a)},useTransition:function(){var s=td(bs)[0],a=kt().memoizedState;return[typeof s=="boolean"?s:Pu(s),a]},useSyncExternalStore:Q0,useId:Aw,useHostTransitionStatus:Tp,useFormState:uw,useActionState:uw,useOptimistic:function(s,a){var l=kt();return nw(l,Je,s,a)},useMemoCache:mp,useCacheRefresh:Rw},f2={readContext:hn,use:ed,useCallback:_w,useContext:hn,useEffect:mw,useImperativeHandle:vw,useInsertionEffect:pw,useLayoutEffect:gw,useMemo:ww,useReducer:gp,useRef:dw,useState:function(){return gp(bs)},useDebugValue:_p,useDeferredValue:function(s,a){var l=kt();return Je===null?wp(l,s,a):bw(l,Je.memoizedState,s,a)},useTransition:function(){var s=gp(bs)[0],a=kt().memoizedState;return[typeof s=="boolean"?s:Pu(s),a]},useSyncExternalStore:Q0,useId:Aw,useHostTransitionStatus:Tp,useFormState:hw,useActionState:hw,useOptimistic:function(s,a){var l=kt();return Je!==null?nw(l,Je,s,a):(l.baseState=s,[s,l.queue.dispatch])},useMemoCache:mp,useCacheRefresh:Rw},Bo=null,Mu=0;function ad(s){var a=Mu;return Mu+=1,Bo===null&&(Bo=[]),q0(Bo,s,a)}function Lu(s,a){a=a.props.ref,s.ref=a!==void 0?a:null}function od(s,a){throw a.$$typeof===_?Error(r(525)):(s=Object.prototype.toString.call(a),Error(r(31,s==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":s)))}function Dw(s){var a=s._init;return a(s._payload)}function Pw(s){function a($,z){if(s){var G=$.deletions;G===null?($.deletions=[z],$.flags|=16):G.push(z)}}function l($,z){if(!s)return null;for(;z!==null;)a($,z),z=z.sibling;return null}function c($){for(var z=new Map;$!==null;)$.key!==null?z.set($.key,$):z.set($.index,$),$=$.sibling;return z}function p($,z){return $=gs($,z),$.index=0,$.sibling=null,$}function y($,z,G){return $.index=G,s?(G=$.alternate,G!==null?(G=G.index,G<z?($.flags|=67108866,z):G):($.flags|=67108866,z)):($.flags|=1048576,z)}function T($){return s&&$.alternate===null&&($.flags|=67108866),$}function S($,z,G,te){return z===null||z.tag!==6?(z=Fm(G,$.mode,te),z.return=$,z):(z=p(z,G),z.return=$,z)}function N($,z,G,te){var me=G.type;return me===R?ee($,z,G.props.children,te,G.key):z!==null&&(z.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===C&&Dw(me)===z.type)?(z=p(z,G.props),Lu(z,G),z.return=$,z):(z=$h(G.type,G.key,G.props,null,$.mode,te),Lu(z,G),z.return=$,z)}function K($,z,G,te){return z===null||z.tag!==4||z.stateNode.containerInfo!==G.containerInfo||z.stateNode.implementation!==G.implementation?(z=Hm(G,$.mode,te),z.return=$,z):(z=p(z,G.children||[]),z.return=$,z)}function ee($,z,G,te,me){return z===null||z.tag!==7?(z=ga(G,$.mode,te,me),z.return=$,z):(z=p(z,G),z.return=$,z)}function re($,z,G){if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return z=Fm(""+z,$.mode,G),z.return=$,z;if(typeof z=="object"&&z!==null){switch(z.$$typeof){case w:return G=$h(z.type,z.key,z.props,null,$.mode,G),Lu(G,z),G.return=$,G;case E:return z=Hm(z,$.mode,G),z.return=$,z;case C:var te=z._init;return z=te(z._payload),re($,z,G)}if(at(z)||F(z))return z=ga(z,$.mode,G,null),z.return=$,z;if(typeof z.then=="function")return re($,ad(z),G);if(z.$$typeof===M)return re($,Kh($,z),G);od($,z)}return null}function W($,z,G,te){var me=z!==null?z.key:null;if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return me!==null?null:S($,z,""+G,te);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case w:return G.key===me?N($,z,G,te):null;case E:return G.key===me?K($,z,G,te):null;case C:return me=G._init,G=me(G._payload),W($,z,G,te)}if(at(G)||F(G))return me!==null?null:ee($,z,G,te,null);if(typeof G.then=="function")return W($,z,ad(G),te);if(G.$$typeof===M)return W($,z,Kh($,G),te);od($,G)}return null}function Y($,z,G,te,me){if(typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint")return $=$.get(G)||null,S(z,$,""+te,me);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case w:return $=$.get(te.key===null?G:te.key)||null,N(z,$,te,me);case E:return $=$.get(te.key===null?G:te.key)||null,K(z,$,te,me);case C:var Ne=te._init;return te=Ne(te._payload),Y($,z,G,te,me)}if(at(te)||F(te))return $=$.get(G)||null,ee(z,$,te,me,null);if(typeof te.then=="function")return Y($,z,G,ad(te),me);if(te.$$typeof===M)return Y($,z,G,Kh(z,te),me);od(z,te)}return null}function Se($,z,G,te){for(var me=null,Ne=null,ge=z,we=z=0,Qt=null;ge!==null&&we<G.length;we++){ge.index>we?(Qt=ge,ge=null):Qt=ge.sibling;var Fe=W($,ge,G[we],te);if(Fe===null){ge===null&&(ge=Qt);break}s&&ge&&Fe.alternate===null&&a($,ge),z=y(Fe,z,we),Ne===null?me=Fe:Ne.sibling=Fe,Ne=Fe,ge=Qt}if(we===G.length)return l($,ge),He&&va($,we),me;if(ge===null){for(;we<G.length;we++)ge=re($,G[we],te),ge!==null&&(z=y(ge,z,we),Ne===null?me=ge:Ne.sibling=ge,Ne=ge);return He&&va($,we),me}for(ge=c(ge);we<G.length;we++)Qt=Y(ge,$,we,G[we],te),Qt!==null&&(s&&Qt.alternate!==null&&ge.delete(Qt.key===null?we:Qt.key),z=y(Qt,z,we),Ne===null?me=Qt:Ne.sibling=Qt,Ne=Qt);return s&&ge.forEach(function(wi){return a($,wi)}),He&&va($,we),me}function _e($,z,G,te){if(G==null)throw Error(r(151));for(var me=null,Ne=null,ge=z,we=z=0,Qt=null,Fe=G.next();ge!==null&&!Fe.done;we++,Fe=G.next()){ge.index>we?(Qt=ge,ge=null):Qt=ge.sibling;var wi=W($,ge,Fe.value,te);if(wi===null){ge===null&&(ge=Qt);break}s&&ge&&wi.alternate===null&&a($,ge),z=y(wi,z,we),Ne===null?me=wi:Ne.sibling=wi,Ne=wi,ge=Qt}if(Fe.done)return l($,ge),He&&va($,we),me;if(ge===null){for(;!Fe.done;we++,Fe=G.next())Fe=re($,Fe.value,te),Fe!==null&&(z=y(Fe,z,we),Ne===null?me=Fe:Ne.sibling=Fe,Ne=Fe);return He&&va($,we),me}for(ge=c(ge);!Fe.done;we++,Fe=G.next())Fe=Y(ge,$,we,Fe.value,te),Fe!==null&&(s&&Fe.alternate!==null&&ge.delete(Fe.key===null?we:Fe.key),z=y(Fe,z,we),Ne===null?me=Fe:Ne.sibling=Fe,Ne=Fe);return s&&ge.forEach(function(mO){return a($,mO)}),He&&va($,we),me}function et($,z,G,te){if(typeof G=="object"&&G!==null&&G.type===R&&G.key===null&&(G=G.props.children),typeof G=="object"&&G!==null){switch(G.$$typeof){case w:e:{for(var me=G.key;z!==null;){if(z.key===me){if(me=G.type,me===R){if(z.tag===7){l($,z.sibling),te=p(z,G.props.children),te.return=$,$=te;break e}}else if(z.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===C&&Dw(me)===z.type){l($,z.sibling),te=p(z,G.props),Lu(te,G),te.return=$,$=te;break e}l($,z);break}else a($,z);z=z.sibling}G.type===R?(te=ga(G.props.children,$.mode,te,G.key),te.return=$,$=te):(te=$h(G.type,G.key,G.props,null,$.mode,te),Lu(te,G),te.return=$,$=te)}return T($);case E:e:{for(me=G.key;z!==null;){if(z.key===me)if(z.tag===4&&z.stateNode.containerInfo===G.containerInfo&&z.stateNode.implementation===G.implementation){l($,z.sibling),te=p(z,G.children||[]),te.return=$,$=te;break e}else{l($,z);break}else a($,z);z=z.sibling}te=Hm(G,$.mode,te),te.return=$,$=te}return T($);case C:return me=G._init,G=me(G._payload),et($,z,G,te)}if(at(G))return Se($,z,G,te);if(F(G)){if(me=F(G),typeof me!="function")throw Error(r(150));return G=me.call(G),_e($,z,G,te)}if(typeof G.then=="function")return et($,z,ad(G),te);if(G.$$typeof===M)return et($,z,Kh($,G),te);od($,G)}return typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint"?(G=""+G,z!==null&&z.tag===6?(l($,z.sibling),te=p(z,G),te.return=$,$=te):(l($,z),te=Fm(G,$.mode,te),te.return=$,$=te),T($)):l($,z)}return function($,z,G,te){try{Mu=0;var me=et($,z,G,te);return Bo=null,me}catch(ge){if(ge===xu||ge===Yh)throw ge;var Ne=Dn(29,ge,null,$.mode);return Ne.lanes=te,Ne.return=$,Ne}finally{}}}var zo=Pw(!0),Nw=Pw(!1),Jn=ie(null),Ur=null;function ii(s){var a=s.alternate;le(zt,zt.current&1),le(Jn,s),Ur===null&&(a===null||Mo.current!==null||a.memoizedState!==null)&&(Ur=s)}function Vw(s){if(s.tag===22){if(le(zt,zt.current),le(Jn,s),Ur===null){var a=s.alternate;a!==null&&a.memoizedState!==null&&(Ur=s)}}else ai()}function ai(){le(zt,zt.current),le(Jn,Jn.current)}function Ts(s){ce(Jn),Ur===s&&(Ur=null),ce(zt)}var zt=ie(0);function ld(s){for(var a=s;a!==null;){if(a.tag===13){var l=a.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||fg(l)))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}function Sp(s,a,l,c){a=s.memoizedState,l=l(c,a),l=l==null?a:g({},a,l),s.memoizedState=l,s.lanes===0&&(s.updateQueue.baseState=l)}var Ap={enqueueSetState:function(s,a,l){s=s._reactInternals;var c=Mn(),p=ni(c);p.payload=a,l!=null&&(p.callback=l),a=ri(s,p,c),a!==null&&(Ln(a,s,c),Iu(a,s,c))},enqueueReplaceState:function(s,a,l){s=s._reactInternals;var c=Mn(),p=ni(c);p.tag=1,p.payload=a,l!=null&&(p.callback=l),a=ri(s,p,c),a!==null&&(Ln(a,s,c),Iu(a,s,c))},enqueueForceUpdate:function(s,a){s=s._reactInternals;var l=Mn(),c=ni(l);c.tag=2,a!=null&&(c.callback=a),a=ri(s,c,l),a!==null&&(Ln(a,s,l),Iu(a,s,l))}};function Mw(s,a,l,c,p,y,T){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(c,y,T):a.prototype&&a.prototype.isPureReactComponent?!_u(l,c)||!_u(p,y):!0}function Lw(s,a,l,c){s=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(l,c),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(l,c),a.state!==s&&Ap.enqueueReplaceState(a,a.state,null)}function Aa(s,a){var l=a;if("ref"in a){l={};for(var c in a)c!=="ref"&&(l[c]=a[c])}if(s=s.defaultProps){l===a&&(l=g({},l));for(var p in s)l[p]===void 0&&(l[p]=s[p])}return l}var ud=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)};function jw(s){ud(s)}function Uw(s){console.error(s)}function Bw(s){ud(s)}function cd(s,a){try{var l=s.onUncaughtError;l(a.value,{componentStack:a.stack})}catch(c){setTimeout(function(){throw c})}}function zw(s,a,l){try{var c=s.onCaughtError;c(l.value,{componentStack:l.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(p){setTimeout(function(){throw p})}}function Rp(s,a,l){return l=ni(l),l.tag=3,l.payload={element:null},l.callback=function(){cd(s,a)},l}function qw(s){return s=ni(s),s.tag=3,s}function $w(s,a,l,c){var p=l.type.getDerivedStateFromError;if(typeof p=="function"){var y=c.value;s.payload=function(){return p(y)},s.callback=function(){zw(a,l,c)}}var T=l.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(s.callback=function(){zw(a,l,c),typeof p!="function"&&(di===null?di=new Set([this]):di.add(this));var S=c.stack;this.componentDidCatch(c.value,{componentStack:S!==null?S:""})})}function m2(s,a,l,c,p){if(l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(a=l.alternate,a!==null&&Su(a,l,p,!0),l=Jn.current,l!==null){switch(l.tag){case 13:return Ur===null?Qp():l.alternate===null&&vt===0&&(vt=3),l.flags&=-257,l.flags|=65536,l.lanes=p,c===tp?l.flags|=16384:(a=l.updateQueue,a===null?l.updateQueue=new Set([c]):a.add(c),Jp(s,c,p)),!1;case 22:return l.flags|=65536,c===tp?l.flags|=16384:(a=l.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([c])},l.updateQueue=a):(l=a.retryQueue,l===null?a.retryQueue=new Set([c]):l.add(c)),Jp(s,c,p)),!1}throw Error(r(435,l.tag))}return Jp(s,c,p),Qp(),!1}if(He)return a=Jn.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=p,c!==Wm&&(s=Error(r(422),{cause:c}),Eu(Wn(s,l)))):(c!==Wm&&(a=Error(r(423),{cause:c}),Eu(Wn(a,l))),s=s.current.alternate,s.flags|=65536,p&=-p,s.lanes|=p,c=Wn(c,l),p=Rp(s.stateNode,c,p),sp(s,p),vt!==4&&(vt=2)),!1;var y=Error(r(520),{cause:c});if(y=Wn(y,l),Fu===null?Fu=[y]:Fu.push(y),vt!==4&&(vt=2),a===null)return!0;c=Wn(c,l),l=a;do{switch(l.tag){case 3:return l.flags|=65536,s=p&-p,l.lanes|=s,s=Rp(l.stateNode,c,s),sp(l,s),!1;case 1:if(a=l.type,y=l.stateNode,(l.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(di===null||!di.has(y))))return l.flags|=65536,p&=-p,l.lanes|=p,p=qw(p),$w(p,s,l,c),sp(l,p),!1}l=l.return}while(l!==null);return!1}var Fw=Error(r(461)),Wt=!1;function en(s,a,l,c){a.child=s===null?Nw(a,null,l,c):zo(a,s.child,l,c)}function Hw(s,a,l,c,p){l=l.render;var y=a.ref;if("ref"in c){var T={};for(var S in c)S!=="ref"&&(T[S]=c[S])}else T=c;return Ta(a),c=up(s,a,l,T,y,p),S=cp(),s!==null&&!Wt?(hp(s,a,p),Es(s,a,p)):(He&&S&&Gm(a),a.flags|=1,en(s,a,c,p),a.child)}function Gw(s,a,l,c,p){if(s===null){var y=l.type;return typeof y=="function"&&!$m(y)&&y.defaultProps===void 0&&l.compare===null?(a.tag=15,a.type=y,Kw(s,a,y,c,p)):(s=$h(l.type,null,c,a,a.mode,p),s.ref=a.ref,s.return=a,a.child=s)}if(y=s.child,!Np(s,p)){var T=y.memoizedProps;if(l=l.compare,l=l!==null?l:_u,l(T,c)&&s.ref===a.ref)return Es(s,a,p)}return a.flags|=1,s=gs(y,c),s.ref=a.ref,s.return=a,a.child=s}function Kw(s,a,l,c,p){if(s!==null){var y=s.memoizedProps;if(_u(y,c)&&s.ref===a.ref)if(Wt=!1,a.pendingProps=c=y,Np(s,p))(s.flags&131072)!==0&&(Wt=!0);else return a.lanes=s.lanes,Es(s,a,p)}return xp(s,a,l,c,p)}function Ww(s,a,l){var c=a.pendingProps,p=c.children,y=s!==null?s.memoizedState:null;if(c.mode==="hidden"){if((a.flags&128)!==0){if(c=y!==null?y.baseLanes|l:l,s!==null){for(p=a.child=s.child,y=0;p!==null;)y=y|p.lanes|p.childLanes,p=p.sibling;a.childLanes=y&~c}else a.childLanes=0,a.child=null;return Yw(s,a,c,l)}if((l&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},s!==null&&Wh(a,y!==null?y.cachePool:null),y!==null?K0(a,y):ap(),Vw(a);else return a.lanes=a.childLanes=536870912,Yw(s,a,y!==null?y.baseLanes|l:l,l)}else y!==null?(Wh(a,y.cachePool),K0(a,y),ai(),a.memoizedState=null):(s!==null&&Wh(a,null),ap(),ai());return en(s,a,p,l),a.child}function Yw(s,a,l,c){var p=ep();return p=p===null?null:{parent:Bt._currentValue,pool:p},a.memoizedState={baseLanes:l,cachePool:p},s!==null&&Wh(a,null),ap(),Vw(a),s!==null&&Su(s,a,c,!0),null}function hd(s,a){var l=a.ref;if(l===null)s!==null&&s.ref!==null&&(a.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(r(284));(s===null||s.ref!==l)&&(a.flags|=4194816)}}function xp(s,a,l,c,p){return Ta(a),l=up(s,a,l,c,void 0,p),c=cp(),s!==null&&!Wt?(hp(s,a,p),Es(s,a,p)):(He&&c&&Gm(a),a.flags|=1,en(s,a,l,p),a.child)}function Qw(s,a,l,c,p,y){return Ta(a),a.updateQueue=null,l=Y0(a,c,l,p),W0(s),c=cp(),s!==null&&!Wt?(hp(s,a,y),Es(s,a,y)):(He&&c&&Gm(a),a.flags|=1,en(s,a,l,y),a.child)}function Xw(s,a,l,c,p){if(Ta(a),a.stateNode===null){var y=ko,T=l.contextType;typeof T=="object"&&T!==null&&(y=hn(T)),y=new l(c,y),a.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=Ap,a.stateNode=y,y._reactInternals=a,y=a.stateNode,y.props=c,y.state=a.memoizedState,y.refs={},np(a),T=l.contextType,y.context=typeof T=="object"&&T!==null?hn(T):ko,y.state=a.memoizedState,T=l.getDerivedStateFromProps,typeof T=="function"&&(Sp(a,l,T,c),y.state=a.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(T=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),T!==y.state&&Ap.enqueueReplaceState(y,y.state,null),ku(a,c,y,p),Ou(),y.state=a.memoizedState),typeof y.componentDidMount=="function"&&(a.flags|=4194308),c=!0}else if(s===null){y=a.stateNode;var S=a.memoizedProps,N=Aa(l,S);y.props=N;var K=y.context,ee=l.contextType;T=ko,typeof ee=="object"&&ee!==null&&(T=hn(ee));var re=l.getDerivedStateFromProps;ee=typeof re=="function"||typeof y.getSnapshotBeforeUpdate=="function",S=a.pendingProps!==S,ee||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(S||K!==T)&&Lw(a,y,c,T),ti=!1;var W=a.memoizedState;y.state=W,ku(a,c,y,p),Ou(),K=a.memoizedState,S||W!==K||ti?(typeof re=="function"&&(Sp(a,l,re,c),K=a.memoizedState),(N=ti||Mw(a,l,N,c,W,K,T))?(ee||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(a.flags|=4194308)):(typeof y.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=c,a.memoizedState=K),y.props=c,y.state=K,y.context=T,c=N):(typeof y.componentDidMount=="function"&&(a.flags|=4194308),c=!1)}else{y=a.stateNode,rp(s,a),T=a.memoizedProps,ee=Aa(l,T),y.props=ee,re=a.pendingProps,W=y.context,K=l.contextType,N=ko,typeof K=="object"&&K!==null&&(N=hn(K)),S=l.getDerivedStateFromProps,(K=typeof S=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(T!==re||W!==N)&&Lw(a,y,c,N),ti=!1,W=a.memoizedState,y.state=W,ku(a,c,y,p),Ou();var Y=a.memoizedState;T!==re||W!==Y||ti||s!==null&&s.dependencies!==null&&Gh(s.dependencies)?(typeof S=="function"&&(Sp(a,l,S,c),Y=a.memoizedState),(ee=ti||Mw(a,l,ee,c,W,Y,N)||s!==null&&s.dependencies!==null&&Gh(s.dependencies))?(K||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(c,Y,N),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(c,Y,N)),typeof y.componentDidUpdate=="function"&&(a.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof y.componentDidUpdate!="function"||T===s.memoizedProps&&W===s.memoizedState||(a.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||T===s.memoizedProps&&W===s.memoizedState||(a.flags|=1024),a.memoizedProps=c,a.memoizedState=Y),y.props=c,y.state=Y,y.context=N,c=ee):(typeof y.componentDidUpdate!="function"||T===s.memoizedProps&&W===s.memoizedState||(a.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||T===s.memoizedProps&&W===s.memoizedState||(a.flags|=1024),c=!1)}return y=c,hd(s,a),c=(a.flags&128)!==0,y||c?(y=a.stateNode,l=c&&typeof l.getDerivedStateFromError!="function"?null:y.render(),a.flags|=1,s!==null&&c?(a.child=zo(a,s.child,null,p),a.child=zo(a,null,l,p)):en(s,a,l,p),a.memoizedState=y.state,s=a.child):s=Es(s,a,p),s}function Jw(s,a,l,c){return Tu(),a.flags|=256,en(s,a,l,c),a.child}var Cp={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ip(s){return{baseLanes:s,cachePool:U0()}}function Op(s,a,l){return s=s!==null?s.childLanes&~l:0,a&&(s|=Zn),s}function Zw(s,a,l){var c=a.pendingProps,p=!1,y=(a.flags&128)!==0,T;if((T=y)||(T=s!==null&&s.memoizedState===null?!1:(zt.current&2)!==0),T&&(p=!0,a.flags&=-129),T=(a.flags&32)!==0,a.flags&=-33,s===null){if(He){if(p?ii(a):ai(),He){var S=yt,N;if(N=S){e:{for(N=S,S=jr;N.nodeType!==8;){if(!S){S=null;break e}if(N=hr(N.nextSibling),N===null){S=null;break e}}S=N}S!==null?(a.memoizedState={dehydrated:S,treeContext:ya!==null?{id:ys,overflow:vs}:null,retryLane:536870912,hydrationErrors:null},N=Dn(18,null,null,0),N.stateNode=S,N.return=a,a.child=N,bn=a,yt=null,N=!0):N=!1}N||wa(a)}if(S=a.memoizedState,S!==null&&(S=S.dehydrated,S!==null))return fg(S)?a.lanes=32:a.lanes=536870912,null;Ts(a)}return S=c.children,c=c.fallback,p?(ai(),p=a.mode,S=dd({mode:"hidden",children:S},p),c=ga(c,p,l,null),S.return=a,c.return=a,S.sibling=c,a.child=S,p=a.child,p.memoizedState=Ip(l),p.childLanes=Op(s,T,l),a.memoizedState=Cp,c):(ii(a),kp(a,S))}if(N=s.memoizedState,N!==null&&(S=N.dehydrated,S!==null)){if(y)a.flags&256?(ii(a),a.flags&=-257,a=Dp(s,a,l)):a.memoizedState!==null?(ai(),a.child=s.child,a.flags|=128,a=null):(ai(),p=c.fallback,S=a.mode,c=dd({mode:"visible",children:c.children},S),p=ga(p,S,l,null),p.flags|=2,c.return=a,p.return=a,c.sibling=p,a.child=c,zo(a,s.child,null,l),c=a.child,c.memoizedState=Ip(l),c.childLanes=Op(s,T,l),a.memoizedState=Cp,a=p);else if(ii(a),fg(S)){if(T=S.nextSibling&&S.nextSibling.dataset,T)var K=T.dgst;T=K,c=Error(r(419)),c.stack="",c.digest=T,Eu({value:c,source:null,stack:null}),a=Dp(s,a,l)}else if(Wt||Su(s,a,l,!1),T=(l&s.childLanes)!==0,Wt||T){if(T=rt,T!==null&&(c=l&-l,c=(c&42)!==0?1:Ks(c),c=(c&(T.suspendedLanes|l))!==0?0:c,c!==0&&c!==N.retryLane))throw N.retryLane=c,Oo(s,c),Ln(T,s,c),Fw;S.data==="$?"||Qp(),a=Dp(s,a,l)}else S.data==="$?"?(a.flags|=192,a.child=s.child,a=null):(s=N.treeContext,yt=hr(S.nextSibling),bn=a,He=!0,_a=null,jr=!1,s!==null&&(Qn[Xn++]=ys,Qn[Xn++]=vs,Qn[Xn++]=ya,ys=s.id,vs=s.overflow,ya=a),a=kp(a,c.children),a.flags|=4096);return a}return p?(ai(),p=c.fallback,S=a.mode,N=s.child,K=N.sibling,c=gs(N,{mode:"hidden",children:c.children}),c.subtreeFlags=N.subtreeFlags&65011712,K!==null?p=gs(K,p):(p=ga(p,S,l,null),p.flags|=2),p.return=a,c.return=a,c.sibling=p,a.child=c,c=p,p=a.child,S=s.child.memoizedState,S===null?S=Ip(l):(N=S.cachePool,N!==null?(K=Bt._currentValue,N=N.parent!==K?{parent:K,pool:K}:N):N=U0(),S={baseLanes:S.baseLanes|l,cachePool:N}),p.memoizedState=S,p.childLanes=Op(s,T,l),a.memoizedState=Cp,c):(ii(a),l=s.child,s=l.sibling,l=gs(l,{mode:"visible",children:c.children}),l.return=a,l.sibling=null,s!==null&&(T=a.deletions,T===null?(a.deletions=[s],a.flags|=16):T.push(s)),a.child=l,a.memoizedState=null,l)}function kp(s,a){return a=dd({mode:"visible",children:a},s.mode),a.return=s,s.child=a}function dd(s,a){return s=Dn(22,s,null,a),s.lanes=0,s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},s}function Dp(s,a,l){return zo(a,s.child,null,l),s=kp(a,a.pendingProps.children),s.flags|=2,a.memoizedState=null,s}function eb(s,a,l){s.lanes|=a;var c=s.alternate;c!==null&&(c.lanes|=a),Qm(s.return,a,l)}function Pp(s,a,l,c,p){var y=s.memoizedState;y===null?s.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:c,tail:l,tailMode:p}:(y.isBackwards=a,y.rendering=null,y.renderingStartTime=0,y.last=c,y.tail=l,y.tailMode=p)}function tb(s,a,l){var c=a.pendingProps,p=c.revealOrder,y=c.tail;if(en(s,a,c.children,l),c=zt.current,(c&2)!==0)c=c&1|2,a.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=a.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&eb(s,l,a);else if(s.tag===19)eb(s,l,a);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===a)break e;for(;s.sibling===null;){if(s.return===null||s.return===a)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}c&=1}switch(le(zt,c),p){case"forwards":for(l=a.child,p=null;l!==null;)s=l.alternate,s!==null&&ld(s)===null&&(p=l),l=l.sibling;l=p,l===null?(p=a.child,a.child=null):(p=l.sibling,l.sibling=null),Pp(a,!1,p,l,y);break;case"backwards":for(l=null,p=a.child,a.child=null;p!==null;){if(s=p.alternate,s!==null&&ld(s)===null){a.child=p;break}s=p.sibling,p.sibling=l,l=p,p=s}Pp(a,!0,l,null,y);break;case"together":Pp(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function Es(s,a,l){if(s!==null&&(a.dependencies=s.dependencies),hi|=a.lanes,(l&a.childLanes)===0)if(s!==null){if(Su(s,a,l,!1),(l&a.childLanes)===0)return null}else return null;if(s!==null&&a.child!==s.child)throw Error(r(153));if(a.child!==null){for(s=a.child,l=gs(s,s.pendingProps),a.child=l,l.return=a;s.sibling!==null;)s=s.sibling,l=l.sibling=gs(s,s.pendingProps),l.return=a;l.sibling=null}return a.child}function Np(s,a){return(s.lanes&a)!==0?!0:(s=s.dependencies,!!(s!==null&&Gh(s)))}function p2(s,a,l){switch(a.tag){case 3:nt(a,a.stateNode.containerInfo),ei(a,Bt,s.memoizedState.cache),Tu();break;case 27:case 5:Gs(a);break;case 4:nt(a,a.stateNode.containerInfo);break;case 10:ei(a,a.type,a.memoizedProps.value);break;case 13:var c=a.memoizedState;if(c!==null)return c.dehydrated!==null?(ii(a),a.flags|=128,null):(l&a.child.childLanes)!==0?Zw(s,a,l):(ii(a),s=Es(s,a,l),s!==null?s.sibling:null);ii(a);break;case 19:var p=(s.flags&128)!==0;if(c=(l&a.childLanes)!==0,c||(Su(s,a,l,!1),c=(l&a.childLanes)!==0),p){if(c)return tb(s,a,l);a.flags|=128}if(p=a.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),le(zt,zt.current),c)break;return null;case 22:case 23:return a.lanes=0,Ww(s,a,l);case 24:ei(a,Bt,s.memoizedState.cache)}return Es(s,a,l)}function nb(s,a,l){if(s!==null)if(s.memoizedProps!==a.pendingProps)Wt=!0;else{if(!Np(s,l)&&(a.flags&128)===0)return Wt=!1,p2(s,a,l);Wt=(s.flags&131072)!==0}else Wt=!1,He&&(a.flags&1048576)!==0&&D0(a,Hh,a.index);switch(a.lanes=0,a.tag){case 16:e:{s=a.pendingProps;var c=a.elementType,p=c._init;if(c=p(c._payload),a.type=c,typeof c=="function")$m(c)?(s=Aa(c,s),a.tag=1,a=Xw(null,a,c,s,l)):(a.tag=0,a=xp(null,a,c,s,l));else{if(c!=null){if(p=c.$$typeof,p===J){a.tag=11,a=Hw(null,a,c,s,l);break e}else if(p===L){a.tag=14,a=Gw(null,a,c,s,l);break e}}throw a=xt(c)||c,Error(r(306,a,""))}}return a;case 0:return xp(s,a,a.type,a.pendingProps,l);case 1:return c=a.type,p=Aa(c,a.pendingProps),Xw(s,a,c,p,l);case 3:e:{if(nt(a,a.stateNode.containerInfo),s===null)throw Error(r(387));c=a.pendingProps;var y=a.memoizedState;p=y.element,rp(s,a),ku(a,c,null,l);var T=a.memoizedState;if(c=T.cache,ei(a,Bt,c),c!==y.cache&&Xm(a,[Bt],l,!0),Ou(),c=T.element,y.isDehydrated)if(y={element:c,isDehydrated:!1,cache:T.cache},a.updateQueue.baseState=y,a.memoizedState=y,a.flags&256){a=Jw(s,a,c,l);break e}else if(c!==p){p=Wn(Error(r(424)),a),Eu(p),a=Jw(s,a,c,l);break e}else{switch(s=a.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(yt=hr(s.firstChild),bn=a,He=!0,_a=null,jr=!0,l=Nw(a,null,c,l),a.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(Tu(),c===p){a=Es(s,a,l);break e}en(s,a,c,l)}a=a.child}return a;case 26:return hd(s,a),s===null?(l=aT(a.type,null,a.pendingProps,null))?a.memoizedState=l:He||(l=a.type,s=a.pendingProps,c=Rd(xe.current).createElement(l),c[Lt]=a,c[Ct]=s,nn(c,l,s),bt(c),a.stateNode=c):a.memoizedState=aT(a.type,s.memoizedProps,a.pendingProps,s.memoizedState),null;case 27:return Gs(a),s===null&&He&&(c=a.stateNode=rT(a.type,a.pendingProps,xe.current),bn=a,jr=!0,p=yt,pi(a.type)?(mg=p,yt=hr(c.firstChild)):yt=p),en(s,a,a.pendingProps.children,l),hd(s,a),s===null&&(a.flags|=4194304),a.child;case 5:return s===null&&He&&((p=c=yt)&&(c=$2(c,a.type,a.pendingProps,jr),c!==null?(a.stateNode=c,bn=a,yt=hr(c.firstChild),jr=!1,p=!0):p=!1),p||wa(a)),Gs(a),p=a.type,y=a.pendingProps,T=s!==null?s.memoizedProps:null,c=y.children,cg(p,y)?c=null:T!==null&&cg(p,T)&&(a.flags|=32),a.memoizedState!==null&&(p=up(s,a,o2,null,null,l),Zu._currentValue=p),hd(s,a),en(s,a,c,l),a.child;case 6:return s===null&&He&&((s=l=yt)&&(l=F2(l,a.pendingProps,jr),l!==null?(a.stateNode=l,bn=a,yt=null,s=!0):s=!1),s||wa(a)),null;case 13:return Zw(s,a,l);case 4:return nt(a,a.stateNode.containerInfo),c=a.pendingProps,s===null?a.child=zo(a,null,c,l):en(s,a,c,l),a.child;case 11:return Hw(s,a,a.type,a.pendingProps,l);case 7:return en(s,a,a.pendingProps,l),a.child;case 8:return en(s,a,a.pendingProps.children,l),a.child;case 12:return en(s,a,a.pendingProps.children,l),a.child;case 10:return c=a.pendingProps,ei(a,a.type,c.value),en(s,a,c.children,l),a.child;case 9:return p=a.type._context,c=a.pendingProps.children,Ta(a),p=hn(p),c=c(p),a.flags|=1,en(s,a,c,l),a.child;case 14:return Gw(s,a,a.type,a.pendingProps,l);case 15:return Kw(s,a,a.type,a.pendingProps,l);case 19:return tb(s,a,l);case 31:return c=a.pendingProps,l=a.mode,c={mode:c.mode,children:c.children},s===null?(l=dd(c,l),l.ref=a.ref,a.child=l,l.return=a,a=l):(l=gs(s.child,c),l.ref=a.ref,a.child=l,l.return=a,a=l),a;case 22:return Ww(s,a,l);case 24:return Ta(a),c=hn(Bt),s===null?(p=ep(),p===null&&(p=rt,y=Jm(),p.pooledCache=y,y.refCount++,y!==null&&(p.pooledCacheLanes|=l),p=y),a.memoizedState={parent:c,cache:p},np(a),ei(a,Bt,p)):((s.lanes&l)!==0&&(rp(s,a),ku(a,null,null,l),Ou()),p=s.memoizedState,y=a.memoizedState,p.parent!==c?(p={parent:c,cache:c},a.memoizedState=p,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=p),ei(a,Bt,c)):(c=y.cache,ei(a,Bt,c),c!==p.cache&&Xm(a,[Bt],l,!0))),en(s,a,a.pendingProps.children,l),a.child;case 29:throw a.pendingProps}throw Error(r(156,a.tag))}function Ss(s){s.flags|=4}function rb(s,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!hT(a)){if(a=Jn.current,a!==null&&((qe&4194048)===qe?Ur!==null:(qe&62914560)!==qe&&(qe&536870912)===0||a!==Ur))throw Cu=tp,B0;s.flags|=8192}}function fd(s,a){a!==null&&(s.flags|=4),s.flags&16384&&(a=s.tag!==22?tu():536870912,s.lanes|=a,Ho|=a)}function ju(s,a){if(!He)switch(s.tailMode){case"hidden":a=s.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?s.tail=null:l.sibling=null;break;case"collapsed":l=s.tail;for(var c=null;l!==null;)l.alternate!==null&&(c=l),l=l.sibling;c===null?a||s.tail===null?s.tail=null:s.tail.sibling=null:c.sibling=null}}function ht(s){var a=s.alternate!==null&&s.alternate.child===s.child,l=0,c=0;if(a)for(var p=s.child;p!==null;)l|=p.lanes|p.childLanes,c|=p.subtreeFlags&65011712,c|=p.flags&65011712,p.return=s,p=p.sibling;else for(p=s.child;p!==null;)l|=p.lanes|p.childLanes,c|=p.subtreeFlags,c|=p.flags,p.return=s,p=p.sibling;return s.subtreeFlags|=c,s.childLanes=l,a}function g2(s,a,l){var c=a.pendingProps;switch(Km(a),a.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ht(a),null;case 1:return ht(a),null;case 3:return l=a.stateNode,c=null,s!==null&&(c=s.memoizedState.cache),a.memoizedState.cache!==c&&(a.flags|=2048),ws(Bt),Rr(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(s===null||s.child===null)&&(bu(a)?Ss(a):s===null||s.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,V0())),ht(a),null;case 26:return l=a.memoizedState,s===null?(Ss(a),l!==null?(ht(a),rb(a,l)):(ht(a),a.flags&=-16777217)):l?l!==s.memoizedState?(Ss(a),ht(a),rb(a,l)):(ht(a),a.flags&=-16777217):(s.memoizedProps!==c&&Ss(a),ht(a),a.flags&=-16777217),null;case 27:rs(a),l=xe.current;var p=a.type;if(s!==null&&a.stateNode!=null)s.memoizedProps!==c&&Ss(a);else{if(!c){if(a.stateNode===null)throw Error(r(166));return ht(a),null}s=ve.current,bu(a)?P0(a):(s=rT(p,c,l),a.stateNode=s,Ss(a))}return ht(a),null;case 5:if(rs(a),l=a.type,s!==null&&a.stateNode!=null)s.memoizedProps!==c&&Ss(a);else{if(!c){if(a.stateNode===null)throw Error(r(166));return ht(a),null}if(s=ve.current,bu(a))P0(a);else{switch(p=Rd(xe.current),s){case 1:s=p.createElementNS("http://www.w3.org/2000/svg",l);break;case 2:s=p.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;default:switch(l){case"svg":s=p.createElementNS("http://www.w3.org/2000/svg",l);break;case"math":s=p.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;case"script":s=p.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild);break;case"select":s=typeof c.is=="string"?p.createElement("select",{is:c.is}):p.createElement("select"),c.multiple?s.multiple=!0:c.size&&(s.size=c.size);break;default:s=typeof c.is=="string"?p.createElement(l,{is:c.is}):p.createElement(l)}}s[Lt]=a,s[Ct]=c;e:for(p=a.child;p!==null;){if(p.tag===5||p.tag===6)s.appendChild(p.stateNode);else if(p.tag!==4&&p.tag!==27&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===a)break e;for(;p.sibling===null;){if(p.return===null||p.return===a)break e;p=p.return}p.sibling.return=p.return,p=p.sibling}a.stateNode=s;e:switch(nn(s,l,c),l){case"button":case"input":case"select":case"textarea":s=!!c.autoFocus;break e;case"img":s=!0;break e;default:s=!1}s&&Ss(a)}}return ht(a),a.flags&=-16777217,null;case 6:if(s&&a.stateNode!=null)s.memoizedProps!==c&&Ss(a);else{if(typeof c!="string"&&a.stateNode===null)throw Error(r(166));if(s=xe.current,bu(a)){if(s=a.stateNode,l=a.memoizedProps,c=null,p=bn,p!==null)switch(p.tag){case 27:case 5:c=p.memoizedProps}s[Lt]=a,s=!!(s.nodeValue===l||c!==null&&c.suppressHydrationWarning===!0||Qb(s.nodeValue,l)),s||wa(a)}else s=Rd(s).createTextNode(c),s[Lt]=a,a.stateNode=s}return ht(a),null;case 13:if(c=a.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(p=bu(a),c!==null&&c.dehydrated!==null){if(s===null){if(!p)throw Error(r(318));if(p=a.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(r(317));p[Lt]=a}else Tu(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;ht(a),p=!1}else p=V0(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=p),p=!0;if(!p)return a.flags&256?(Ts(a),a):(Ts(a),null)}if(Ts(a),(a.flags&128)!==0)return a.lanes=l,a;if(l=c!==null,s=s!==null&&s.memoizedState!==null,l){c=a.child,p=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(p=c.alternate.memoizedState.cachePool.pool);var y=null;c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(y=c.memoizedState.cachePool.pool),y!==p&&(c.flags|=2048)}return l!==s&&l&&(a.child.flags|=8192),fd(a,a.updateQueue),ht(a),null;case 4:return Rr(),s===null&&ig(a.stateNode.containerInfo),ht(a),null;case 10:return ws(a.type),ht(a),null;case 19:if(ce(zt),p=a.memoizedState,p===null)return ht(a),null;if(c=(a.flags&128)!==0,y=p.rendering,y===null)if(c)ju(p,!1);else{if(vt!==0||s!==null&&(s.flags&128)!==0)for(s=a.child;s!==null;){if(y=ld(s),y!==null){for(a.flags|=128,ju(p,!1),s=y.updateQueue,a.updateQueue=s,fd(a,s),a.subtreeFlags=0,s=l,l=a.child;l!==null;)k0(l,s),l=l.sibling;return le(zt,zt.current&1|2),a.child}s=s.sibling}p.tail!==null&&qn()>gd&&(a.flags|=128,c=!0,ju(p,!1),a.lanes=4194304)}else{if(!c)if(s=ld(y),s!==null){if(a.flags|=128,c=!0,s=s.updateQueue,a.updateQueue=s,fd(a,s),ju(p,!0),p.tail===null&&p.tailMode==="hidden"&&!y.alternate&&!He)return ht(a),null}else 2*qn()-p.renderingStartTime>gd&&l!==536870912&&(a.flags|=128,c=!0,ju(p,!1),a.lanes=4194304);p.isBackwards?(y.sibling=a.child,a.child=y):(s=p.last,s!==null?s.sibling=y:a.child=y,p.last=y)}return p.tail!==null?(a=p.tail,p.rendering=a,p.tail=a.sibling,p.renderingStartTime=qn(),a.sibling=null,s=zt.current,le(zt,c?s&1|2:s&1),a):(ht(a),null);case 22:case 23:return Ts(a),op(),c=a.memoizedState!==null,s!==null?s.memoizedState!==null!==c&&(a.flags|=8192):c&&(a.flags|=8192),c?(l&536870912)!==0&&(a.flags&128)===0&&(ht(a),a.subtreeFlags&6&&(a.flags|=8192)):ht(a),l=a.updateQueue,l!==null&&fd(a,l.retryQueue),l=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),c=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(c=a.memoizedState.cachePool.pool),c!==l&&(a.flags|=2048),s!==null&&ce(Ea),null;case 24:return l=null,s!==null&&(l=s.memoizedState.cache),a.memoizedState.cache!==l&&(a.flags|=2048),ws(Bt),ht(a),null;case 25:return null;case 30:return null}throw Error(r(156,a.tag))}function y2(s,a){switch(Km(a),a.tag){case 1:return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 3:return ws(Bt),Rr(),s=a.flags,(s&65536)!==0&&(s&128)===0?(a.flags=s&-65537|128,a):null;case 26:case 27:case 5:return rs(a),null;case 13:if(Ts(a),s=a.memoizedState,s!==null&&s.dehydrated!==null){if(a.alternate===null)throw Error(r(340));Tu()}return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 19:return ce(zt),null;case 4:return Rr(),null;case 10:return ws(a.type),null;case 22:case 23:return Ts(a),op(),s!==null&&ce(Ea),s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 24:return ws(Bt),null;case 25:return null;default:return null}}function sb(s,a){switch(Km(a),a.tag){case 3:ws(Bt),Rr();break;case 26:case 27:case 5:rs(a);break;case 4:Rr();break;case 13:Ts(a);break;case 19:ce(zt);break;case 10:ws(a.type);break;case 22:case 23:Ts(a),op(),s!==null&&ce(Ea);break;case 24:ws(Bt)}}function Uu(s,a){try{var l=a.updateQueue,c=l!==null?l.lastEffect:null;if(c!==null){var p=c.next;l=p;do{if((l.tag&s)===s){c=void 0;var y=l.create,T=l.inst;c=y(),T.destroy=c}l=l.next}while(l!==p)}}catch(S){tt(a,a.return,S)}}function oi(s,a,l){try{var c=a.updateQueue,p=c!==null?c.lastEffect:null;if(p!==null){var y=p.next;c=y;do{if((c.tag&s)===s){var T=c.inst,S=T.destroy;if(S!==void 0){T.destroy=void 0,p=a;var N=l,K=S;try{K()}catch(ee){tt(p,N,ee)}}}c=c.next}while(c!==y)}}catch(ee){tt(a,a.return,ee)}}function ib(s){var a=s.updateQueue;if(a!==null){var l=s.stateNode;try{G0(a,l)}catch(c){tt(s,s.return,c)}}}function ab(s,a,l){l.props=Aa(s.type,s.memoizedProps),l.state=s.memoizedState;try{l.componentWillUnmount()}catch(c){tt(s,a,c)}}function Bu(s,a){try{var l=s.ref;if(l!==null){switch(s.tag){case 26:case 27:case 5:var c=s.stateNode;break;case 30:c=s.stateNode;break;default:c=s.stateNode}typeof l=="function"?s.refCleanup=l(c):l.current=c}}catch(p){tt(s,a,p)}}function Br(s,a){var l=s.ref,c=s.refCleanup;if(l!==null)if(typeof c=="function")try{c()}catch(p){tt(s,a,p)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(p){tt(s,a,p)}else l.current=null}function ob(s){var a=s.type,l=s.memoizedProps,c=s.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":l.autoFocus&&c.focus();break e;case"img":l.src?c.src=l.src:l.srcSet&&(c.srcset=l.srcSet)}}catch(p){tt(s,s.return,p)}}function Vp(s,a,l){try{var c=s.stateNode;j2(c,s.type,l,a),c[Ct]=a}catch(p){tt(s,s.return,p)}}function lb(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&pi(s.type)||s.tag===4}function Mp(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||lb(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&pi(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Lp(s,a,l){var c=s.tag;if(c===5||c===6)s=s.stateNode,a?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(s,a):(a=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,a.appendChild(s),l=l._reactRootContainer,l!=null||a.onclick!==null||(a.onclick=Ad));else if(c!==4&&(c===27&&pi(s.type)&&(l=s.stateNode,a=null),s=s.child,s!==null))for(Lp(s,a,l),s=s.sibling;s!==null;)Lp(s,a,l),s=s.sibling}function md(s,a,l){var c=s.tag;if(c===5||c===6)s=s.stateNode,a?l.insertBefore(s,a):l.appendChild(s);else if(c!==4&&(c===27&&pi(s.type)&&(l=s.stateNode),s=s.child,s!==null))for(md(s,a,l),s=s.sibling;s!==null;)md(s,a,l),s=s.sibling}function ub(s){var a=s.stateNode,l=s.memoizedProps;try{for(var c=s.type,p=a.attributes;p.length;)a.removeAttributeNode(p[0]);nn(a,c,l),a[Lt]=s,a[Ct]=l}catch(y){tt(s,s.return,y)}}var As=!1,Et=!1,jp=!1,cb=typeof WeakSet=="function"?WeakSet:Set,Yt=null;function v2(s,a){if(s=s.containerInfo,lg=Dd,s=b0(s),Mm(s)){if("selectionStart"in s)var l={start:s.selectionStart,end:s.selectionEnd};else e:{l=(l=s.ownerDocument)&&l.defaultView||window;var c=l.getSelection&&l.getSelection();if(c&&c.rangeCount!==0){l=c.anchorNode;var p=c.anchorOffset,y=c.focusNode;c=c.focusOffset;try{l.nodeType,y.nodeType}catch{l=null;break e}var T=0,S=-1,N=-1,K=0,ee=0,re=s,W=null;t:for(;;){for(var Y;re!==l||p!==0&&re.nodeType!==3||(S=T+p),re!==y||c!==0&&re.nodeType!==3||(N=T+c),re.nodeType===3&&(T+=re.nodeValue.length),(Y=re.firstChild)!==null;)W=re,re=Y;for(;;){if(re===s)break t;if(W===l&&++K===p&&(S=T),W===y&&++ee===c&&(N=T),(Y=re.nextSibling)!==null)break;re=W,W=re.parentNode}re=Y}l=S===-1||N===-1?null:{start:S,end:N}}else l=null}l=l||{start:0,end:0}}else l=null;for(ug={focusedElem:s,selectionRange:l},Dd=!1,Yt=a;Yt!==null;)if(a=Yt,s=a.child,(a.subtreeFlags&1024)!==0&&s!==null)s.return=a,Yt=s;else for(;Yt!==null;){switch(a=Yt,y=a.alternate,s=a.flags,a.tag){case 0:break;case 11:case 15:break;case 1:if((s&1024)!==0&&y!==null){s=void 0,l=a,p=y.memoizedProps,y=y.memoizedState,c=l.stateNode;try{var Se=Aa(l.type,p,l.elementType===l.type);s=c.getSnapshotBeforeUpdate(Se,y),c.__reactInternalSnapshotBeforeUpdate=s}catch(_e){tt(l,l.return,_e)}}break;case 3:if((s&1024)!==0){if(s=a.stateNode.containerInfo,l=s.nodeType,l===9)dg(s);else if(l===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":dg(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(r(163))}if(s=a.sibling,s!==null){s.return=a.return,Yt=s;break}Yt=a.return}}function hb(s,a,l){var c=l.flags;switch(l.tag){case 0:case 11:case 15:li(s,l),c&4&&Uu(5,l);break;case 1:if(li(s,l),c&4)if(s=l.stateNode,a===null)try{s.componentDidMount()}catch(T){tt(l,l.return,T)}else{var p=Aa(l.type,a.memoizedProps);a=a.memoizedState;try{s.componentDidUpdate(p,a,s.__reactInternalSnapshotBeforeUpdate)}catch(T){tt(l,l.return,T)}}c&64&&ib(l),c&512&&Bu(l,l.return);break;case 3:if(li(s,l),c&64&&(s=l.updateQueue,s!==null)){if(a=null,l.child!==null)switch(l.child.tag){case 27:case 5:a=l.child.stateNode;break;case 1:a=l.child.stateNode}try{G0(s,a)}catch(T){tt(l,l.return,T)}}break;case 27:a===null&&c&4&&ub(l);case 26:case 5:li(s,l),a===null&&c&4&&ob(l),c&512&&Bu(l,l.return);break;case 12:li(s,l);break;case 13:li(s,l),c&4&&mb(s,l),c&64&&(s=l.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(l=x2.bind(null,l),H2(s,l))));break;case 22:if(c=l.memoizedState!==null||As,!c){a=a!==null&&a.memoizedState!==null||Et,p=As;var y=Et;As=c,(Et=a)&&!y?ui(s,l,(l.subtreeFlags&8772)!==0):li(s,l),As=p,Et=y}break;case 30:break;default:li(s,l)}}function db(s){var a=s.alternate;a!==null&&(s.alternate=null,db(a)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(a=s.stateNode,a!==null&&Qs(a)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var ut=null,An=!1;function Rs(s,a,l){for(l=l.child;l!==null;)fb(s,a,l),l=l.sibling}function fb(s,a,l){if(We&&typeof We.onCommitFiberUnmount=="function")try{We.onCommitFiberUnmount(gt,l)}catch{}switch(l.tag){case 26:Et||Br(l,a),Rs(s,a,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:Et||Br(l,a);var c=ut,p=An;pi(l.type)&&(ut=l.stateNode,An=!1),Rs(s,a,l),Yu(l.stateNode),ut=c,An=p;break;case 5:Et||Br(l,a);case 6:if(c=ut,p=An,ut=null,Rs(s,a,l),ut=c,An=p,ut!==null)if(An)try{(ut.nodeType===9?ut.body:ut.nodeName==="HTML"?ut.ownerDocument.body:ut).removeChild(l.stateNode)}catch(y){tt(l,a,y)}else try{ut.removeChild(l.stateNode)}catch(y){tt(l,a,y)}break;case 18:ut!==null&&(An?(s=ut,tT(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,l.stateNode),rc(s)):tT(ut,l.stateNode));break;case 4:c=ut,p=An,ut=l.stateNode.containerInfo,An=!0,Rs(s,a,l),ut=c,An=p;break;case 0:case 11:case 14:case 15:Et||oi(2,l,a),Et||oi(4,l,a),Rs(s,a,l);break;case 1:Et||(Br(l,a),c=l.stateNode,typeof c.componentWillUnmount=="function"&&ab(l,a,c)),Rs(s,a,l);break;case 21:Rs(s,a,l);break;case 22:Et=(c=Et)||l.memoizedState!==null,Rs(s,a,l),Et=c;break;default:Rs(s,a,l)}}function mb(s,a){if(a.memoizedState===null&&(s=a.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{rc(s)}catch(l){tt(a,a.return,l)}}function _2(s){switch(s.tag){case 13:case 19:var a=s.stateNode;return a===null&&(a=s.stateNode=new cb),a;case 22:return s=s.stateNode,a=s._retryCache,a===null&&(a=s._retryCache=new cb),a;default:throw Error(r(435,s.tag))}}function Up(s,a){var l=_2(s);a.forEach(function(c){var p=C2.bind(null,s,c);l.has(c)||(l.add(c),c.then(p,p))})}function Pn(s,a){var l=a.deletions;if(l!==null)for(var c=0;c<l.length;c++){var p=l[c],y=s,T=a,S=T;e:for(;S!==null;){switch(S.tag){case 27:if(pi(S.type)){ut=S.stateNode,An=!1;break e}break;case 5:ut=S.stateNode,An=!1;break e;case 3:case 4:ut=S.stateNode.containerInfo,An=!0;break e}S=S.return}if(ut===null)throw Error(r(160));fb(y,T,p),ut=null,An=!1,y=p.alternate,y!==null&&(y.return=null),p.return=null}if(a.subtreeFlags&13878)for(a=a.child;a!==null;)pb(a,s),a=a.sibling}var cr=null;function pb(s,a){var l=s.alternate,c=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:Pn(a,s),Nn(s),c&4&&(oi(3,s,s.return),Uu(3,s),oi(5,s,s.return));break;case 1:Pn(a,s),Nn(s),c&512&&(Et||l===null||Br(l,l.return)),c&64&&As&&(s=s.updateQueue,s!==null&&(c=s.callbacks,c!==null&&(l=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=l===null?c:l.concat(c))));break;case 26:var p=cr;if(Pn(a,s),Nn(s),c&512&&(Et||l===null||Br(l,l.return)),c&4){var y=l!==null?l.memoizedState:null;if(c=s.memoizedState,l===null)if(c===null)if(s.stateNode===null){e:{c=s.type,l=s.memoizedProps,p=p.ownerDocument||p;t:switch(c){case"title":y=p.getElementsByTagName("title")[0],(!y||y[ea]||y[Lt]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=p.createElement(c),p.head.insertBefore(y,p.querySelector("head > title"))),nn(y,c,l),y[Lt]=s,bt(y),c=y;break e;case"link":var T=uT("link","href",p).get(c+(l.href||""));if(T){for(var S=0;S<T.length;S++)if(y=T[S],y.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&y.getAttribute("rel")===(l.rel==null?null:l.rel)&&y.getAttribute("title")===(l.title==null?null:l.title)&&y.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){T.splice(S,1);break t}}y=p.createElement(c),nn(y,c,l),p.head.appendChild(y);break;case"meta":if(T=uT("meta","content",p).get(c+(l.content||""))){for(S=0;S<T.length;S++)if(y=T[S],y.getAttribute("content")===(l.content==null?null:""+l.content)&&y.getAttribute("name")===(l.name==null?null:l.name)&&y.getAttribute("property")===(l.property==null?null:l.property)&&y.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&y.getAttribute("charset")===(l.charSet==null?null:l.charSet)){T.splice(S,1);break t}}y=p.createElement(c),nn(y,c,l),p.head.appendChild(y);break;default:throw Error(r(468,c))}y[Lt]=s,bt(y),c=y}s.stateNode=c}else cT(p,s.type,s.stateNode);else s.stateNode=lT(p,c,s.memoizedProps);else y!==c?(y===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):y.count--,c===null?cT(p,s.type,s.stateNode):lT(p,c,s.memoizedProps)):c===null&&s.stateNode!==null&&Vp(s,s.memoizedProps,l.memoizedProps)}break;case 27:Pn(a,s),Nn(s),c&512&&(Et||l===null||Br(l,l.return)),l!==null&&c&4&&Vp(s,s.memoizedProps,l.memoizedProps);break;case 5:if(Pn(a,s),Nn(s),c&512&&(Et||l===null||Br(l,l.return)),s.flags&32){p=s.stateNode;try{Fn(p,"")}catch(Y){tt(s,s.return,Y)}}c&4&&s.stateNode!=null&&(p=s.memoizedProps,Vp(s,p,l!==null?l.memoizedProps:p)),c&1024&&(jp=!0);break;case 6:if(Pn(a,s),Nn(s),c&4){if(s.stateNode===null)throw Error(r(162));c=s.memoizedProps,l=s.stateNode;try{l.nodeValue=c}catch(Y){tt(s,s.return,Y)}}break;case 3:if(Id=null,p=cr,cr=xd(a.containerInfo),Pn(a,s),cr=p,Nn(s),c&4&&l!==null&&l.memoizedState.isDehydrated)try{rc(a.containerInfo)}catch(Y){tt(s,s.return,Y)}jp&&(jp=!1,gb(s));break;case 4:c=cr,cr=xd(s.stateNode.containerInfo),Pn(a,s),Nn(s),cr=c;break;case 12:Pn(a,s),Nn(s);break;case 13:Pn(a,s),Nn(s),s.child.flags&8192&&s.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(Hp=qn()),c&4&&(c=s.updateQueue,c!==null&&(s.updateQueue=null,Up(s,c)));break;case 22:p=s.memoizedState!==null;var N=l!==null&&l.memoizedState!==null,K=As,ee=Et;if(As=K||p,Et=ee||N,Pn(a,s),Et=ee,As=K,Nn(s),c&8192)e:for(a=s.stateNode,a._visibility=p?a._visibility&-2:a._visibility|1,p&&(l===null||N||As||Et||Ra(s)),l=null,a=s;;){if(a.tag===5||a.tag===26){if(l===null){N=l=a;try{if(y=N.stateNode,p)T=y.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none";else{S=N.stateNode;var re=N.memoizedProps.style,W=re!=null&&re.hasOwnProperty("display")?re.display:null;S.style.display=W==null||typeof W=="boolean"?"":(""+W).trim()}}catch(Y){tt(N,N.return,Y)}}}else if(a.tag===6){if(l===null){N=a;try{N.stateNode.nodeValue=p?"":N.memoizedProps}catch(Y){tt(N,N.return,Y)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===s)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break e;for(;a.sibling===null;){if(a.return===null||a.return===s)break e;l===a&&(l=null),a=a.return}l===a&&(l=null),a.sibling.return=a.return,a=a.sibling}c&4&&(c=s.updateQueue,c!==null&&(l=c.retryQueue,l!==null&&(c.retryQueue=null,Up(s,l))));break;case 19:Pn(a,s),Nn(s),c&4&&(c=s.updateQueue,c!==null&&(s.updateQueue=null,Up(s,c)));break;case 30:break;case 21:break;default:Pn(a,s),Nn(s)}}function Nn(s){var a=s.flags;if(a&2){try{for(var l,c=s.return;c!==null;){if(lb(c)){l=c;break}c=c.return}if(l==null)throw Error(r(160));switch(l.tag){case 27:var p=l.stateNode,y=Mp(s);md(s,y,p);break;case 5:var T=l.stateNode;l.flags&32&&(Fn(T,""),l.flags&=-33);var S=Mp(s);md(s,S,T);break;case 3:case 4:var N=l.stateNode.containerInfo,K=Mp(s);Lp(s,K,N);break;default:throw Error(r(161))}}catch(ee){tt(s,s.return,ee)}s.flags&=-3}a&4096&&(s.flags&=-4097)}function gb(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var a=s;gb(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),s=s.sibling}}function li(s,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)hb(s,a.alternate,a),a=a.sibling}function Ra(s){for(s=s.child;s!==null;){var a=s;switch(a.tag){case 0:case 11:case 14:case 15:oi(4,a,a.return),Ra(a);break;case 1:Br(a,a.return);var l=a.stateNode;typeof l.componentWillUnmount=="function"&&ab(a,a.return,l),Ra(a);break;case 27:Yu(a.stateNode);case 26:case 5:Br(a,a.return),Ra(a);break;case 22:a.memoizedState===null&&Ra(a);break;case 30:Ra(a);break;default:Ra(a)}s=s.sibling}}function ui(s,a,l){for(l=l&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var c=a.alternate,p=s,y=a,T=y.flags;switch(y.tag){case 0:case 11:case 15:ui(p,y,l),Uu(4,y);break;case 1:if(ui(p,y,l),c=y,p=c.stateNode,typeof p.componentDidMount=="function")try{p.componentDidMount()}catch(K){tt(c,c.return,K)}if(c=y,p=c.updateQueue,p!==null){var S=c.stateNode;try{var N=p.shared.hiddenCallbacks;if(N!==null)for(p.shared.hiddenCallbacks=null,p=0;p<N.length;p++)H0(N[p],S)}catch(K){tt(c,c.return,K)}}l&&T&64&&ib(y),Bu(y,y.return);break;case 27:ub(y);case 26:case 5:ui(p,y,l),l&&c===null&&T&4&&ob(y),Bu(y,y.return);break;case 12:ui(p,y,l);break;case 13:ui(p,y,l),l&&T&4&&mb(p,y);break;case 22:y.memoizedState===null&&ui(p,y,l),Bu(y,y.return);break;case 30:break;default:ui(p,y,l)}a=a.sibling}}function Bp(s,a){var l=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),s=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(s=a.memoizedState.cachePool.pool),s!==l&&(s!=null&&s.refCount++,l!=null&&Au(l))}function zp(s,a){s=null,a.alternate!==null&&(s=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==s&&(a.refCount++,s!=null&&Au(s))}function zr(s,a,l,c){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)yb(s,a,l,c),a=a.sibling}function yb(s,a,l,c){var p=a.flags;switch(a.tag){case 0:case 11:case 15:zr(s,a,l,c),p&2048&&Uu(9,a);break;case 1:zr(s,a,l,c);break;case 3:zr(s,a,l,c),p&2048&&(s=null,a.alternate!==null&&(s=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==s&&(a.refCount++,s!=null&&Au(s)));break;case 12:if(p&2048){zr(s,a,l,c),s=a.stateNode;try{var y=a.memoizedProps,T=y.id,S=y.onPostCommit;typeof S=="function"&&S(T,a.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(N){tt(a,a.return,N)}}else zr(s,a,l,c);break;case 13:zr(s,a,l,c);break;case 23:break;case 22:y=a.stateNode,T=a.alternate,a.memoizedState!==null?y._visibility&2?zr(s,a,l,c):zu(s,a):y._visibility&2?zr(s,a,l,c):(y._visibility|=2,qo(s,a,l,c,(a.subtreeFlags&10256)!==0)),p&2048&&Bp(T,a);break;case 24:zr(s,a,l,c),p&2048&&zp(a.alternate,a);break;default:zr(s,a,l,c)}}function qo(s,a,l,c,p){for(p=p&&(a.subtreeFlags&10256)!==0,a=a.child;a!==null;){var y=s,T=a,S=l,N=c,K=T.flags;switch(T.tag){case 0:case 11:case 15:qo(y,T,S,N,p),Uu(8,T);break;case 23:break;case 22:var ee=T.stateNode;T.memoizedState!==null?ee._visibility&2?qo(y,T,S,N,p):zu(y,T):(ee._visibility|=2,qo(y,T,S,N,p)),p&&K&2048&&Bp(T.alternate,T);break;case 24:qo(y,T,S,N,p),p&&K&2048&&zp(T.alternate,T);break;default:qo(y,T,S,N,p)}a=a.sibling}}function zu(s,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var l=s,c=a,p=c.flags;switch(c.tag){case 22:zu(l,c),p&2048&&Bp(c.alternate,c);break;case 24:zu(l,c),p&2048&&zp(c.alternate,c);break;default:zu(l,c)}a=a.sibling}}var qu=8192;function $o(s){if(s.subtreeFlags&qu)for(s=s.child;s!==null;)vb(s),s=s.sibling}function vb(s){switch(s.tag){case 26:$o(s),s.flags&qu&&s.memoizedState!==null&&sO(cr,s.memoizedState,s.memoizedProps);break;case 5:$o(s);break;case 3:case 4:var a=cr;cr=xd(s.stateNode.containerInfo),$o(s),cr=a;break;case 22:s.memoizedState===null&&(a=s.alternate,a!==null&&a.memoizedState!==null?(a=qu,qu=16777216,$o(s),qu=a):$o(s));break;default:$o(s)}}function _b(s){var a=s.alternate;if(a!==null&&(s=a.child,s!==null)){a.child=null;do a=s.sibling,s.sibling=null,s=a;while(s!==null)}}function $u(s){var a=s.deletions;if((s.flags&16)!==0){if(a!==null)for(var l=0;l<a.length;l++){var c=a[l];Yt=c,bb(c,s)}_b(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)wb(s),s=s.sibling}function wb(s){switch(s.tag){case 0:case 11:case 15:$u(s),s.flags&2048&&oi(9,s,s.return);break;case 3:$u(s);break;case 12:$u(s);break;case 22:var a=s.stateNode;s.memoizedState!==null&&a._visibility&2&&(s.return===null||s.return.tag!==13)?(a._visibility&=-3,pd(s)):$u(s);break;default:$u(s)}}function pd(s){var a=s.deletions;if((s.flags&16)!==0){if(a!==null)for(var l=0;l<a.length;l++){var c=a[l];Yt=c,bb(c,s)}_b(s)}for(s=s.child;s!==null;){switch(a=s,a.tag){case 0:case 11:case 15:oi(8,a,a.return),pd(a);break;case 22:l=a.stateNode,l._visibility&2&&(l._visibility&=-3,pd(a));break;default:pd(a)}s=s.sibling}}function bb(s,a){for(;Yt!==null;){var l=Yt;switch(l.tag){case 0:case 11:case 15:oi(8,l,a);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var c=l.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:Au(l.memoizedState.cache)}if(c=l.child,c!==null)c.return=l,Yt=c;else e:for(l=s;Yt!==null;){c=Yt;var p=c.sibling,y=c.return;if(db(c),c===l){Yt=null;break e}if(p!==null){p.return=y,Yt=p;break e}Yt=y}}}var w2={getCacheForType:function(s){var a=hn(Bt),l=a.data.get(s);return l===void 0&&(l=s(),a.data.set(s,l)),l}},b2=typeof WeakMap=="function"?WeakMap:Map,Ye=0,rt=null,Ve=null,qe=0,Qe=0,Vn=null,ci=!1,Fo=!1,qp=!1,xs=0,vt=0,hi=0,xa=0,$p=0,Zn=0,Ho=0,Fu=null,Rn=null,Fp=!1,Hp=0,gd=1/0,yd=null,di=null,tn=0,fi=null,Go=null,Ko=0,Gp=0,Kp=null,Tb=null,Hu=0,Wp=null;function Mn(){if((Ye&2)!==0&&qe!==0)return qe&-qe;if(Z.T!==null){var s=No;return s!==0?s:tg()}return Ws()}function Eb(){Zn===0&&(Zn=(qe&536870912)===0||He?eu():536870912);var s=Jn.current;return s!==null&&(s.flags|=32),Zn}function Ln(s,a,l){(s===rt&&(Qe===2||Qe===9)||s.cancelPendingCommit!==null)&&(Wo(s,0),mi(s,qe,Zn,!1)),is(s,l),((Ye&2)===0||s!==rt)&&(s===rt&&((Ye&2)===0&&(xa|=l),vt===4&&mi(s,qe,Zn,!1)),qr(s))}function Sb(s,a,l){if((Ye&6)!==0)throw Error(r(327));var c=!l&&(a&124)===0&&(a&s.expiredLanes)===0||Zi(s,a),p=c?S2(s,a):Xp(s,a,!0),y=c;do{if(p===0){Fo&&!c&&mi(s,a,0,!1);break}else{if(l=s.current.alternate,y&&!T2(l)){p=Xp(s,a,!1),y=!1;continue}if(p===2){if(y=a,s.errorRecoveryDisabledLanes&y)var T=0;else T=s.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){a=T;e:{var S=s;p=Fu;var N=S.current.memoizedState.isDehydrated;if(N&&(Wo(S,T).flags|=256),T=Xp(S,T,!1),T!==2){if(qp&&!N){S.errorRecoveryDisabledLanes|=y,xa|=y,p=4;break e}y=Rn,Rn=p,y!==null&&(Rn===null?Rn=y:Rn.push.apply(Rn,y))}p=T}if(y=!1,p!==2)continue}}if(p===1){Wo(s,0),mi(s,a,0,!0);break}e:{switch(c=s,y=p,y){case 0:case 1:throw Error(r(345));case 4:if((a&4194048)!==a)break;case 6:mi(c,a,Zn,!ci);break e;case 2:Rn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((a&62914560)===a&&(p=Hp+300-qn(),10<p)){if(mi(c,a,Zn,!ci),co(c,0,!0)!==0)break e;c.timeoutHandle=Zb(Ab.bind(null,c,l,Rn,yd,Fp,a,Zn,xa,Ho,ci,y,2,-0,0),p);break e}Ab(c,l,Rn,yd,Fp,a,Zn,xa,Ho,ci,y,0,-0,0)}}break}while(!0);qr(s)}function Ab(s,a,l,c,p,y,T,S,N,K,ee,re,W,Y){if(s.timeoutHandle=-1,re=a.subtreeFlags,(re&8192||(re&16785408)===16785408)&&(Ju={stylesheets:null,count:0,unsuspend:rO},vb(a),re=iO(),re!==null)){s.cancelPendingCommit=re(Db.bind(null,s,a,y,l,c,p,T,S,N,ee,1,W,Y)),mi(s,y,T,!K);return}Db(s,a,y,l,c,p,T,S,N)}function T2(s){for(var a=s;;){var l=a.tag;if((l===0||l===11||l===15)&&a.flags&16384&&(l=a.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var c=0;c<l.length;c++){var p=l[c],y=p.getSnapshot;p=p.value;try{if(!kn(y(),p))return!1}catch{return!1}}if(l=a.child,a.subtreeFlags&16384&&l!==null)l.return=a,a=l;else{if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function mi(s,a,l,c){a&=~$p,a&=~xa,s.suspendedLanes|=a,s.pingedLanes&=~a,c&&(s.warmLanes|=a),c=s.expirationTimes;for(var p=a;0<p;){var y=31-cn(p),T=1<<y;c[y]=-1,p&=~T}l!==0&&xr(s,l,a)}function vd(){return(Ye&6)===0?(Gu(0),!1):!0}function Yp(){if(Ve!==null){if(Qe===0)var s=Ve.return;else s=Ve,_s=ba=null,dp(s),Bo=null,Mu=0,s=Ve;for(;s!==null;)sb(s.alternate,s),s=s.return;Ve=null}}function Wo(s,a){var l=s.timeoutHandle;l!==-1&&(s.timeoutHandle=-1,B2(l)),l=s.cancelPendingCommit,l!==null&&(s.cancelPendingCommit=null,l()),Yp(),rt=s,Ve=l=gs(s.current,null),qe=a,Qe=0,Vn=null,ci=!1,Fo=Zi(s,a),qp=!1,Ho=Zn=$p=xa=hi=vt=0,Rn=Fu=null,Fp=!1,(a&8)!==0&&(a|=a&32);var c=s.entangledLanes;if(c!==0)for(s=s.entanglements,c&=a;0<c;){var p=31-cn(c),y=1<<p;a|=s[p],c&=~y}return xs=a,Bh(),l}function Rb(s,a){De=null,Z.H=id,a===xu||a===Yh?(a=$0(),Qe=3):a===B0?(a=$0(),Qe=4):Qe=a===Fw?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,Vn=a,Ve===null&&(vt=1,cd(s,Wn(a,s.current)))}function xb(){var s=Z.H;return Z.H=id,s===null?id:s}function Cb(){var s=Z.A;return Z.A=w2,s}function Qp(){vt=4,ci||(qe&4194048)!==qe&&Jn.current!==null||(Fo=!0),(hi&134217727)===0&&(xa&134217727)===0||rt===null||mi(rt,qe,Zn,!1)}function Xp(s,a,l){var c=Ye;Ye|=2;var p=xb(),y=Cb();(rt!==s||qe!==a)&&(yd=null,Wo(s,a)),a=!1;var T=vt;e:do try{if(Qe!==0&&Ve!==null){var S=Ve,N=Vn;switch(Qe){case 8:Yp(),T=6;break e;case 3:case 2:case 9:case 6:Jn.current===null&&(a=!0);var K=Qe;if(Qe=0,Vn=null,Yo(s,S,N,K),l&&Fo){T=0;break e}break;default:K=Qe,Qe=0,Vn=null,Yo(s,S,N,K)}}E2(),T=vt;break}catch(ee){Rb(s,ee)}while(!0);return a&&s.shellSuspendCounter++,_s=ba=null,Ye=c,Z.H=p,Z.A=y,Ve===null&&(rt=null,qe=0,Bh()),T}function E2(){for(;Ve!==null;)Ib(Ve)}function S2(s,a){var l=Ye;Ye|=2;var c=xb(),p=Cb();rt!==s||qe!==a?(yd=null,gd=qn()+500,Wo(s,a)):Fo=Zi(s,a);e:do try{if(Qe!==0&&Ve!==null){a=Ve;var y=Vn;t:switch(Qe){case 1:Qe=0,Vn=null,Yo(s,a,y,1);break;case 2:case 9:if(z0(y)){Qe=0,Vn=null,Ob(a);break}a=function(){Qe!==2&&Qe!==9||rt!==s||(Qe=7),qr(s)},y.then(a,a);break e;case 3:Qe=7;break e;case 4:Qe=5;break e;case 7:z0(y)?(Qe=0,Vn=null,Ob(a)):(Qe=0,Vn=null,Yo(s,a,y,7));break;case 5:var T=null;switch(Ve.tag){case 26:T=Ve.memoizedState;case 5:case 27:var S=Ve;if(!T||hT(T)){Qe=0,Vn=null;var N=S.sibling;if(N!==null)Ve=N;else{var K=S.return;K!==null?(Ve=K,_d(K)):Ve=null}break t}}Qe=0,Vn=null,Yo(s,a,y,5);break;case 6:Qe=0,Vn=null,Yo(s,a,y,6);break;case 8:Yp(),vt=6;break e;default:throw Error(r(462))}}A2();break}catch(ee){Rb(s,ee)}while(!0);return _s=ba=null,Z.H=c,Z.A=p,Ye=l,Ve!==null?0:(rt=null,qe=0,Bh(),vt)}function A2(){for(;Ve!==null&&!Ql();)Ib(Ve)}function Ib(s){var a=nb(s.alternate,s,xs);s.memoizedProps=s.pendingProps,a===null?_d(s):Ve=a}function Ob(s){var a=s,l=a.alternate;switch(a.tag){case 15:case 0:a=Qw(l,a,a.pendingProps,a.type,void 0,qe);break;case 11:a=Qw(l,a,a.pendingProps,a.type.render,a.ref,qe);break;case 5:dp(a);default:sb(l,a),a=Ve=k0(a,xs),a=nb(l,a,xs)}s.memoizedProps=s.pendingProps,a===null?_d(s):Ve=a}function Yo(s,a,l,c){_s=ba=null,dp(a),Bo=null,Mu=0;var p=a.return;try{if(m2(s,p,a,l,qe)){vt=1,cd(s,Wn(l,s.current)),Ve=null;return}}catch(y){if(p!==null)throw Ve=p,y;vt=1,cd(s,Wn(l,s.current)),Ve=null;return}a.flags&32768?(He||c===1?s=!0:Fo||(qe&536870912)!==0?s=!1:(ci=s=!0,(c===2||c===9||c===3||c===6)&&(c=Jn.current,c!==null&&c.tag===13&&(c.flags|=16384))),kb(a,s)):_d(a)}function _d(s){var a=s;do{if((a.flags&32768)!==0){kb(a,ci);return}s=a.return;var l=g2(a.alternate,a,xs);if(l!==null){Ve=l;return}if(a=a.sibling,a!==null){Ve=a;return}Ve=a=s}while(a!==null);vt===0&&(vt=5)}function kb(s,a){do{var l=y2(s.alternate,s);if(l!==null){l.flags&=32767,Ve=l;return}if(l=s.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!a&&(s=s.sibling,s!==null)){Ve=s;return}Ve=s=l}while(s!==null);vt=6,Ve=null}function Db(s,a,l,c,p,y,T,S,N){s.cancelPendingCommit=null;do wd();while(tn!==0);if((Ye&6)!==0)throw Error(r(327));if(a!==null){if(a===s.current)throw Error(r(177));if(y=a.lanes|a.childLanes,y|=zm,nu(s,l,y,T,S,N),s===rt&&(Ve=rt=null,qe=0),Go=a,fi=s,Ko=l,Gp=y,Kp=p,Tb=c,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,I2(Yi,function(){return Lb(),null})):(s.callbackNode=null,s.callbackPriority=0),c=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||c){c=Z.T,Z.T=null,p=ae.p,ae.p=2,T=Ye,Ye|=4;try{v2(s,a,l)}finally{Ye=T,ae.p=p,Z.T=c}}tn=1,Pb(),Nb(),Vb()}}function Pb(){if(tn===1){tn=0;var s=fi,a=Go,l=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||l){l=Z.T,Z.T=null;var c=ae.p;ae.p=2;var p=Ye;Ye|=4;try{pb(a,s);var y=ug,T=b0(s.containerInfo),S=y.focusedElem,N=y.selectionRange;if(T!==S&&S&&S.ownerDocument&&w0(S.ownerDocument.documentElement,S)){if(N!==null&&Mm(S)){var K=N.start,ee=N.end;if(ee===void 0&&(ee=K),"selectionStart"in S)S.selectionStart=K,S.selectionEnd=Math.min(ee,S.value.length);else{var re=S.ownerDocument||document,W=re&&re.defaultView||window;if(W.getSelection){var Y=W.getSelection(),Se=S.textContent.length,_e=Math.min(N.start,Se),et=N.end===void 0?_e:Math.min(N.end,Se);!Y.extend&&_e>et&&(T=et,et=_e,_e=T);var $=_0(S,_e),z=_0(S,et);if($&&z&&(Y.rangeCount!==1||Y.anchorNode!==$.node||Y.anchorOffset!==$.offset||Y.focusNode!==z.node||Y.focusOffset!==z.offset)){var G=re.createRange();G.setStart($.node,$.offset),Y.removeAllRanges(),_e>et?(Y.addRange(G),Y.extend(z.node,z.offset)):(G.setEnd(z.node,z.offset),Y.addRange(G))}}}}for(re=[],Y=S;Y=Y.parentNode;)Y.nodeType===1&&re.push({element:Y,left:Y.scrollLeft,top:Y.scrollTop});for(typeof S.focus=="function"&&S.focus(),S=0;S<re.length;S++){var te=re[S];te.element.scrollLeft=te.left,te.element.scrollTop=te.top}}Dd=!!lg,ug=lg=null}finally{Ye=p,ae.p=c,Z.T=l}}s.current=a,tn=2}}function Nb(){if(tn===2){tn=0;var s=fi,a=Go,l=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||l){l=Z.T,Z.T=null;var c=ae.p;ae.p=2;var p=Ye;Ye|=4;try{hb(s,a.alternate,a)}finally{Ye=p,ae.p=c,Z.T=l}}tn=3}}function Vb(){if(tn===4||tn===3){tn=0,ph();var s=fi,a=Go,l=Ko,c=Tb;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?tn=5:(tn=0,Go=fi=null,Mb(s,s.pendingLanes));var p=s.pendingLanes;if(p===0&&(di=null),ho(l),a=a.stateNode,We&&typeof We.onCommitFiberRoot=="function")try{We.onCommitFiberRoot(gt,a,void 0,(a.current.flags&128)===128)}catch{}if(c!==null){a=Z.T,p=ae.p,ae.p=2,Z.T=null;try{for(var y=s.onRecoverableError,T=0;T<c.length;T++){var S=c[T];y(S.value,{componentStack:S.stack})}}finally{Z.T=a,ae.p=p}}(Ko&3)!==0&&wd(),qr(s),p=s.pendingLanes,(l&4194090)!==0&&(p&42)!==0?s===Wp?Hu++:(Hu=0,Wp=s):Hu=0,Gu(0)}}function Mb(s,a){(s.pooledCacheLanes&=a)===0&&(a=s.pooledCache,a!=null&&(s.pooledCache=null,Au(a)))}function wd(s){return Pb(),Nb(),Vb(),Lb()}function Lb(){if(tn!==5)return!1;var s=fi,a=Gp;Gp=0;var l=ho(Ko),c=Z.T,p=ae.p;try{ae.p=32>l?32:l,Z.T=null,l=Kp,Kp=null;var y=fi,T=Ko;if(tn=0,Go=fi=null,Ko=0,(Ye&6)!==0)throw Error(r(331));var S=Ye;if(Ye|=4,wb(y.current),yb(y,y.current,T,l),Ye=S,Gu(0,!1),We&&typeof We.onPostCommitFiberRoot=="function")try{We.onPostCommitFiberRoot(gt,y)}catch{}return!0}finally{ae.p=p,Z.T=c,Mb(s,a)}}function jb(s,a,l){a=Wn(l,a),a=Rp(s.stateNode,a,2),s=ri(s,a,2),s!==null&&(is(s,2),qr(s))}function tt(s,a,l){if(s.tag===3)jb(s,s,l);else for(;a!==null;){if(a.tag===3){jb(a,s,l);break}else if(a.tag===1){var c=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(di===null||!di.has(c))){s=Wn(l,s),l=qw(2),c=ri(a,l,2),c!==null&&($w(l,c,a,s),is(c,2),qr(c));break}}a=a.return}}function Jp(s,a,l){var c=s.pingCache;if(c===null){c=s.pingCache=new b2;var p=new Set;c.set(a,p)}else p=c.get(a),p===void 0&&(p=new Set,c.set(a,p));p.has(l)||(qp=!0,p.add(l),s=R2.bind(null,s,a,l),a.then(s,s))}function R2(s,a,l){var c=s.pingCache;c!==null&&c.delete(a),s.pingedLanes|=s.suspendedLanes&l,s.warmLanes&=~l,rt===s&&(qe&l)===l&&(vt===4||vt===3&&(qe&62914560)===qe&&300>qn()-Hp?(Ye&2)===0&&Wo(s,0):$p|=l,Ho===qe&&(Ho=0)),qr(s)}function Ub(s,a){a===0&&(a=tu()),s=Oo(s,a),s!==null&&(is(s,a),qr(s))}function x2(s){var a=s.memoizedState,l=0;a!==null&&(l=a.retryLane),Ub(s,l)}function C2(s,a){var l=0;switch(s.tag){case 13:var c=s.stateNode,p=s.memoizedState;p!==null&&(l=p.retryLane);break;case 19:c=s.stateNode;break;case 22:c=s.stateNode._retryCache;break;default:throw Error(r(314))}c!==null&&c.delete(a),Ub(s,l)}function I2(s,a){return Ki(s,a)}var bd=null,Qo=null,Zp=!1,Td=!1,eg=!1,Ca=0;function qr(s){s!==Qo&&s.next===null&&(Qo===null?bd=Qo=s:Qo=Qo.next=s),Td=!0,Zp||(Zp=!0,k2())}function Gu(s,a){if(!eg&&Td){eg=!0;do for(var l=!1,c=bd;c!==null;){if(s!==0){var p=c.pendingLanes;if(p===0)var y=0;else{var T=c.suspendedLanes,S=c.pingedLanes;y=(1<<31-cn(42|s)+1)-1,y&=p&~(T&~S),y=y&201326741?y&201326741|1:y?y|2:0}y!==0&&(l=!0,$b(c,y))}else y=qe,y=co(c,c===rt?y:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(y&3)===0||Zi(c,y)||(l=!0,$b(c,y));c=c.next}while(l);eg=!1}}function O2(){Bb()}function Bb(){Td=Zp=!1;var s=0;Ca!==0&&(U2()&&(s=Ca),Ca=0);for(var a=qn(),l=null,c=bd;c!==null;){var p=c.next,y=zb(c,a);y===0?(c.next=null,l===null?bd=p:l.next=p,p===null&&(Qo=l)):(l=c,(s!==0||(y&3)!==0)&&(Td=!0)),c=p}Gu(s)}function zb(s,a){for(var l=s.suspendedLanes,c=s.pingedLanes,p=s.expirationTimes,y=s.pendingLanes&-62914561;0<y;){var T=31-cn(y),S=1<<T,N=p[T];N===-1?((S&l)===0||(S&c)!==0)&&(p[T]=Zl(S,a)):N<=a&&(s.expiredLanes|=S),y&=~S}if(a=rt,l=qe,l=co(s,s===a?l:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),c=s.callbackNode,l===0||s===a&&(Qe===2||Qe===9)||s.cancelPendingCommit!==null)return c!==null&&c!==null&&Wi(c),s.callbackNode=null,s.callbackPriority=0;if((l&3)===0||Zi(s,l)){if(a=l&-l,a===s.callbackPriority)return a;switch(c!==null&&Wi(c),ho(l)){case 2:case 8:l=lo;break;case 32:l=Yi;break;case 268435456:l=uo;break;default:l=Yi}return c=qb.bind(null,s),l=Ki(l,c),s.callbackPriority=a,s.callbackNode=l,a}return c!==null&&c!==null&&Wi(c),s.callbackPriority=2,s.callbackNode=null,2}function qb(s,a){if(tn!==0&&tn!==5)return s.callbackNode=null,s.callbackPriority=0,null;var l=s.callbackNode;if(wd()&&s.callbackNode!==l)return null;var c=qe;return c=co(s,s===rt?c:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),c===0?null:(Sb(s,c,a),zb(s,qn()),s.callbackNode!=null&&s.callbackNode===l?qb.bind(null,s):null)}function $b(s,a){if(wd())return null;Sb(s,a,!0)}function k2(){z2(function(){(Ye&6)!==0?Ki(Xl,O2):Bb()})}function tg(){return Ca===0&&(Ca=eu()),Ca}function Fb(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:vo(""+s)}function Hb(s,a){var l=a.ownerDocument.createElement("input");return l.name=a.name,l.value=a.value,s.id&&l.setAttribute("form",s.id),a.parentNode.insertBefore(l,a),s=new FormData(s),l.parentNode.removeChild(l),s}function D2(s,a,l,c,p){if(a==="submit"&&l&&l.stateNode===p){var y=Fb((p[Ct]||null).action),T=c.submitter;T&&(a=(a=T[Ct]||null)?Fb(a.formAction):T.getAttribute("formAction"),a!==null&&(y=a,T=null));var S=new _o("action","action",null,c,p);s.push({event:S,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(Ca!==0){var N=T?Hb(p,T):new FormData(p);bp(l,{pending:!0,data:N,method:p.method,action:y},null,N)}}else typeof y=="function"&&(S.preventDefault(),N=T?Hb(p,T):new FormData(p),bp(l,{pending:!0,data:N,method:p.method,action:y},y,N))},currentTarget:p}]})}}for(var ng=0;ng<Bm.length;ng++){var rg=Bm[ng],P2=rg.toLowerCase(),N2=rg[0].toUpperCase()+rg.slice(1);ur(P2,"on"+N2)}ur(S0,"onAnimationEnd"),ur(A0,"onAnimationIteration"),ur(R0,"onAnimationStart"),ur("dblclick","onDoubleClick"),ur("focusin","onFocus"),ur("focusout","onBlur"),ur(XI,"onTransitionRun"),ur(JI,"onTransitionStart"),ur(ZI,"onTransitionCancel"),ur(x0,"onTransitionEnd"),os("onMouseEnter",["mouseout","mouseover"]),os("onMouseLeave",["mouseout","mouseover"]),os("onPointerEnter",["pointerout","pointerover"]),os("onPointerLeave",["pointerout","pointerover"]),or("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),or("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),or("onBeforeInput",["compositionend","keypress","textInput","paste"]),or("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),or("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),or("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ku="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),V2=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ku));function Gb(s,a){a=(a&4)!==0;for(var l=0;l<s.length;l++){var c=s[l],p=c.event;c=c.listeners;e:{var y=void 0;if(a)for(var T=c.length-1;0<=T;T--){var S=c[T],N=S.instance,K=S.currentTarget;if(S=S.listener,N!==y&&p.isPropagationStopped())break e;y=S,p.currentTarget=K;try{y(p)}catch(ee){ud(ee)}p.currentTarget=null,y=N}else for(T=0;T<c.length;T++){if(S=c[T],N=S.instance,K=S.currentTarget,S=S.listener,N!==y&&p.isPropagationStopped())break e;y=S,p.currentTarget=K;try{y(p)}catch(ee){ud(ee)}p.currentTarget=null,y=N}}}}function Me(s,a){var l=a[su];l===void 0&&(l=a[su]=new Set);var c=s+"__bubble";l.has(c)||(Kb(a,s,2,!1),l.add(c))}function sg(s,a,l){var c=0;a&&(c|=4),Kb(l,s,c,a)}var Ed="_reactListening"+Math.random().toString(36).slice(2);function ig(s){if(!s[Ed]){s[Ed]=!0,iu.forEach(function(l){l!=="selectionchange"&&(V2.has(l)||sg(l,!1,s),sg(l,!0,s))});var a=s.nodeType===9?s:s.ownerDocument;a===null||a[Ed]||(a[Ed]=!0,sg("selectionchange",!1,a))}}function Kb(s,a,l,c){switch(yT(a)){case 2:var p=lO;break;case 8:p=uO;break;default:p=_g}l=p.bind(null,a,l,s),p=void 0,!Gn||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(p=!0),c?p!==void 0?s.addEventListener(a,l,{capture:!0,passive:p}):s.addEventListener(a,l,!0):p!==void 0?s.addEventListener(a,l,{passive:p}):s.addEventListener(a,l,!1)}function ag(s,a,l,c,p){var y=c;if((a&1)===0&&(a&2)===0&&c!==null)e:for(;;){if(c===null)return;var T=c.tag;if(T===3||T===4){var S=c.stateNode.containerInfo;if(S===p)break;if(T===4)for(T=c.return;T!==null;){var N=T.tag;if((N===3||N===4)&&T.stateNode.containerInfo===p)return;T=T.return}for(;S!==null;){if(T=as(S),T===null)return;if(N=T.tag,N===5||N===6||N===26||N===27){c=y=T;continue e}S=S.parentNode}}c=c.return}Ah(function(){var K=y,ee=Hn(l),re=[];e:{var W=C0.get(s);if(W!==void 0){var Y=_o,Se=s;switch(s){case"keypress":if(Pr(l)===0)break e;case"keydown":case"keyup":Y=Ao;break;case"focusin":Se="focus",Y=To;break;case"focusout":Se="blur",Y=To;break;case"beforeblur":case"afterblur":Y=To;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Y=Kn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Y=Dm;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Y=Ph;break;case S0:case A0:case R0:Y=Eo;break;case x0:Y=Vh;break;case"scroll":case"scrollend":Y=Rh;break;case"wheel":Y=Ro;break;case"copy":case"cut":case"paste":Y=So;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Y=yu;break;case"toggle":case"beforetoggle":Y=Lh}var _e=(a&4)!==0,et=!_e&&(s==="scroll"||s==="scrollend"),$=_e?W!==null?W+"Capture":null:W;_e=[];for(var z=K,G;z!==null;){var te=z;if(G=te.stateNode,te=te.tag,te!==5&&te!==26&&te!==27||G===null||$===null||(te=oa(z,$),te!=null&&_e.push(Wu(z,te,G))),et)break;z=z.return}0<_e.length&&(W=new Y(W,Se,null,l,ee),re.push({event:W,listeners:_e}))}}if((a&7)===0){e:{if(W=s==="mouseover"||s==="pointerover",Y=s==="mouseout"||s==="pointerout",W&&l!==cs&&(Se=l.relatedTarget||l.fromElement)&&(as(Se)||Se[$n]))break e;if((Y||W)&&(W=ee.window===ee?ee:(W=ee.ownerDocument)?W.defaultView||W.parentWindow:window,Y?(Se=l.relatedTarget||l.toElement,Y=K,Se=Se?as(Se):null,Se!==null&&(et=o(Se),_e=Se.tag,Se!==et||_e!==5&&_e!==27&&_e!==6)&&(Se=null)):(Y=null,Se=K),Y!==Se)){if(_e=Kn,te="onMouseLeave",$="onMouseEnter",z="mouse",(s==="pointerout"||s==="pointerover")&&(_e=yu,te="onPointerLeave",$="onPointerEnter",z="pointer"),et=Y==null?W:Ir(Y),G=Se==null?W:Ir(Se),W=new _e(te,z+"leave",Y,l,ee),W.target=et,W.relatedTarget=G,te=null,as(ee)===K&&(_e=new _e($,z+"enter",Se,l,ee),_e.target=G,_e.relatedTarget=et,te=_e),et=te,Y&&Se)t:{for(_e=Y,$=Se,z=0,G=_e;G;G=Xo(G))z++;for(G=0,te=$;te;te=Xo(te))G++;for(;0<z-G;)_e=Xo(_e),z--;for(;0<G-z;)$=Xo($),G--;for(;z--;){if(_e===$||$!==null&&_e===$.alternate)break t;_e=Xo(_e),$=Xo($)}_e=null}else _e=null;Y!==null&&Wb(re,W,Y,_e,!1),Se!==null&&et!==null&&Wb(re,et,Se,_e,!0)}}e:{if(W=K?Ir(K):window,Y=W.nodeName&&W.nodeName.toLowerCase(),Y==="select"||Y==="input"&&W.type==="file")var me=f0;else if(Ut(W))if(m0)me=WI;else{me=GI;var Ne=HI}else Y=W.nodeName,!Y||Y.toLowerCase()!=="input"||W.type!=="checkbox"&&W.type!=="radio"?K&&cu(K.elementType)&&(me=f0):me=KI;if(me&&(me=me(s,K))){ps(re,me,l,ee);break e}Ne&&Ne(s,W,K),s==="focusout"&&K&&W.type==="number"&&K.memoizedProps.value!=null&&Js(W,"number",W.value)}switch(Ne=K?Ir(K):window,s){case"focusin":(Ut(Ne)||Ne.contentEditable==="true")&&(xo=Ne,Lm=K,wu=null);break;case"focusout":wu=Lm=xo=null;break;case"mousedown":jm=!0;break;case"contextmenu":case"mouseup":case"dragend":jm=!1,T0(re,l,ee);break;case"selectionchange":if(QI)break;case"keydown":case"keyup":T0(re,l,ee)}var ge;if(Mr)e:{switch(s){case"compositionstart":var we="onCompositionStart";break e;case"compositionend":we="onCompositionEnd";break e;case"compositionupdate":we="onCompositionUpdate";break e}we=void 0}else Be?Q(s,l)&&(we="onCompositionEnd"):s==="keydown"&&l.keyCode===229&&(we="onCompositionStart");we&&(b&&l.locale!=="ko"&&(Be||we!=="onCompositionStart"?we==="onCompositionEnd"&&Be&&(ge=du()):(Dr=ee,Zs="value"in Dr?Dr.value:Dr.textContent,Be=!0)),Ne=Sd(K,we),0<Ne.length&&(we=new pu(we,s,null,l,ee),re.push({event:we,listeners:Ne}),ge?we.data=ge:(ge=ue(l),ge!==null&&(we.data=ge)))),(ge=v?jt(s,l):ze(s,l))&&(we=Sd(K,"onBeforeInput"),0<we.length&&(Ne=new pu("onBeforeInput","beforeinput",null,l,ee),re.push({event:Ne,listeners:we}),Ne.data=ge)),D2(re,s,K,l,ee)}Gb(re,a)})}function Wu(s,a,l){return{instance:s,listener:a,currentTarget:l}}function Sd(s,a){for(var l=a+"Capture",c=[];s!==null;){var p=s,y=p.stateNode;if(p=p.tag,p!==5&&p!==26&&p!==27||y===null||(p=oa(s,l),p!=null&&c.unshift(Wu(s,p,y)),p=oa(s,a),p!=null&&c.push(Wu(s,p,y))),s.tag===3)return c;s=s.return}return[]}function Xo(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function Wb(s,a,l,c,p){for(var y=a._reactName,T=[];l!==null&&l!==c;){var S=l,N=S.alternate,K=S.stateNode;if(S=S.tag,N!==null&&N===c)break;S!==5&&S!==26&&S!==27||K===null||(N=K,p?(K=oa(l,y),K!=null&&T.unshift(Wu(l,K,N))):p||(K=oa(l,y),K!=null&&T.push(Wu(l,K,N)))),l=l.return}T.length!==0&&s.push({event:a,listeners:T})}var M2=/\r\n?/g,L2=/\u0000|\uFFFD/g;function Yb(s){return(typeof s=="string"?s:""+s).replace(M2,`
`).replace(L2,"")}function Qb(s,a){return a=Yb(a),Yb(s)===a}function Ad(){}function Ze(s,a,l,c,p,y){switch(l){case"children":typeof c=="string"?a==="body"||a==="textarea"&&c===""||Fn(s,c):(typeof c=="number"||typeof c=="bigint")&&a!=="body"&&Fn(s,""+c);break;case"className":Or(s,"class",c);break;case"tabIndex":Or(s,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":Or(s,l,c);break;case"style":uu(s,c,y);break;case"data":if(a!=="object"){Or(s,"data",c);break}case"src":case"href":if(c===""&&(a!=="a"||l!=="href")){s.removeAttribute(l);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){s.removeAttribute(l);break}c=vo(""+c),s.setAttribute(l,c);break;case"action":case"formAction":if(typeof c=="function"){s.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(l==="formAction"?(a!=="input"&&Ze(s,a,"name",p.name,p,null),Ze(s,a,"formEncType",p.formEncType,p,null),Ze(s,a,"formMethod",p.formMethod,p,null),Ze(s,a,"formTarget",p.formTarget,p,null)):(Ze(s,a,"encType",p.encType,p,null),Ze(s,a,"method",p.method,p,null),Ze(s,a,"target",p.target,p,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){s.removeAttribute(l);break}c=vo(""+c),s.setAttribute(l,c);break;case"onClick":c!=null&&(s.onclick=Ad);break;case"onScroll":c!=null&&Me("scroll",s);break;case"onScrollEnd":c!=null&&Me("scrollend",s);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(r(61));if(l=c.__html,l!=null){if(p.children!=null)throw Error(r(60));s.innerHTML=l}}break;case"multiple":s.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":s.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){s.removeAttribute("xlink:href");break}l=vo(""+c),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?s.setAttribute(l,""+c):s.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?s.setAttribute(l,""):s.removeAttribute(l);break;case"capture":case"download":c===!0?s.setAttribute(l,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?s.setAttribute(l,c):s.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?s.setAttribute(l,c):s.removeAttribute(l);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?s.removeAttribute(l):s.setAttribute(l,c);break;case"popover":Me("beforetoggle",s),Me("toggle",s),Xs(s,"popover",c);break;case"xlinkActuate":Jt(s,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":Jt(s,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":Jt(s,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":Jt(s,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":Jt(s,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":Jt(s,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":Jt(s,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":Jt(s,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":Jt(s,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":Xs(s,"is",c);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=Om.get(l)||l,Xs(s,l,c))}}function og(s,a,l,c,p,y){switch(l){case"style":uu(s,c,y);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(r(61));if(l=c.__html,l!=null){if(p.children!=null)throw Error(r(60));s.innerHTML=l}}break;case"children":typeof c=="string"?Fn(s,c):(typeof c=="number"||typeof c=="bigint")&&Fn(s,""+c);break;case"onScroll":c!=null&&Me("scroll",s);break;case"onScrollEnd":c!=null&&Me("scrollend",s);break;case"onClick":c!=null&&(s.onclick=Ad);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!fo.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(p=l.endsWith("Capture"),a=l.slice(2,p?l.length-7:void 0),y=s[Ct]||null,y=y!=null?y[l]:null,typeof y=="function"&&s.removeEventListener(a,y,p),typeof c=="function")){typeof y!="function"&&y!==null&&(l in s?s[l]=null:s.hasAttribute(l)&&s.removeAttribute(l)),s.addEventListener(a,c,p);break e}l in s?s[l]=c:c===!0?s.setAttribute(l,""):Xs(s,l,c)}}}function nn(s,a,l){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Me("error",s),Me("load",s);var c=!1,p=!1,y;for(y in l)if(l.hasOwnProperty(y)){var T=l[y];if(T!=null)switch(y){case"src":c=!0;break;case"srcSet":p=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,a));default:Ze(s,a,y,T,l,null)}}p&&Ze(s,a,"srcSet",l.srcSet,l,null),c&&Ze(s,a,"src",l.src,l,null);return;case"input":Me("invalid",s);var S=y=T=p=null,N=null,K=null;for(c in l)if(l.hasOwnProperty(c)){var ee=l[c];if(ee!=null)switch(c){case"name":p=ee;break;case"type":T=ee;break;case"checked":N=ee;break;case"defaultChecked":K=ee;break;case"value":y=ee;break;case"defaultValue":S=ee;break;case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(r(137,a));break;default:Ze(s,a,c,ee,l,null)}}sa(s,y,S,N,K,T,p,!1),yo(s);return;case"select":Me("invalid",s),c=T=y=null;for(p in l)if(l.hasOwnProperty(p)&&(S=l[p],S!=null))switch(p){case"value":y=S;break;case"defaultValue":T=S;break;case"multiple":c=S;default:Ze(s,a,p,S,l,null)}a=y,l=T,s.multiple=!!c,a!=null?us(s,!!c,a,!1):l!=null&&us(s,!!c,l,!0);return;case"textarea":Me("invalid",s),y=p=c=null;for(T in l)if(l.hasOwnProperty(T)&&(S=l[T],S!=null))switch(T){case"value":c=S;break;case"defaultValue":p=S;break;case"children":y=S;break;case"dangerouslySetInnerHTML":if(S!=null)throw Error(r(91));break;default:Ze(s,a,T,S,l,null)}ia(s,c,p,y),yo(s);return;case"option":for(N in l)if(l.hasOwnProperty(N)&&(c=l[N],c!=null))switch(N){case"selected":s.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:Ze(s,a,N,c,l,null)}return;case"dialog":Me("beforetoggle",s),Me("toggle",s),Me("cancel",s),Me("close",s);break;case"iframe":case"object":Me("load",s);break;case"video":case"audio":for(c=0;c<Ku.length;c++)Me(Ku[c],s);break;case"image":Me("error",s),Me("load",s);break;case"details":Me("toggle",s);break;case"embed":case"source":case"link":Me("error",s),Me("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(K in l)if(l.hasOwnProperty(K)&&(c=l[K],c!=null))switch(K){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,a));default:Ze(s,a,K,c,l,null)}return;default:if(cu(a)){for(ee in l)l.hasOwnProperty(ee)&&(c=l[ee],c!==void 0&&og(s,a,ee,c,l,void 0));return}}for(S in l)l.hasOwnProperty(S)&&(c=l[S],c!=null&&Ze(s,a,S,c,l,null))}function j2(s,a,l,c){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var p=null,y=null,T=null,S=null,N=null,K=null,ee=null;for(Y in l){var re=l[Y];if(l.hasOwnProperty(Y)&&re!=null)switch(Y){case"checked":break;case"value":break;case"defaultValue":N=re;default:c.hasOwnProperty(Y)||Ze(s,a,Y,null,c,re)}}for(var W in c){var Y=c[W];if(re=l[W],c.hasOwnProperty(W)&&(Y!=null||re!=null))switch(W){case"type":y=Y;break;case"name":p=Y;break;case"checked":K=Y;break;case"defaultChecked":ee=Y;break;case"value":T=Y;break;case"defaultValue":S=Y;break;case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(r(137,a));break;default:Y!==re&&Ze(s,a,W,Y,c,re)}}On(s,T,S,N,K,ee,y,p);return;case"select":Y=T=S=W=null;for(y in l)if(N=l[y],l.hasOwnProperty(y)&&N!=null)switch(y){case"value":break;case"multiple":Y=N;default:c.hasOwnProperty(y)||Ze(s,a,y,null,c,N)}for(p in c)if(y=c[p],N=l[p],c.hasOwnProperty(p)&&(y!=null||N!=null))switch(p){case"value":W=y;break;case"defaultValue":S=y;break;case"multiple":T=y;default:y!==N&&Ze(s,a,p,y,c,N)}a=S,l=T,c=Y,W!=null?us(s,!!l,W,!1):!!c!=!!l&&(a!=null?us(s,!!l,a,!0):us(s,!!l,l?[]:"",!1));return;case"textarea":Y=W=null;for(S in l)if(p=l[S],l.hasOwnProperty(S)&&p!=null&&!c.hasOwnProperty(S))switch(S){case"value":break;case"children":break;default:Ze(s,a,S,null,c,p)}for(T in c)if(p=c[T],y=l[T],c.hasOwnProperty(T)&&(p!=null||y!=null))switch(T){case"value":W=p;break;case"defaultValue":Y=p;break;case"children":break;case"dangerouslySetInnerHTML":if(p!=null)throw Error(r(91));break;default:p!==y&&Ze(s,a,T,p,c,y)}Xe(s,W,Y);return;case"option":for(var Se in l)if(W=l[Se],l.hasOwnProperty(Se)&&W!=null&&!c.hasOwnProperty(Se))switch(Se){case"selected":s.selected=!1;break;default:Ze(s,a,Se,null,c,W)}for(N in c)if(W=c[N],Y=l[N],c.hasOwnProperty(N)&&W!==Y&&(W!=null||Y!=null))switch(N){case"selected":s.selected=W&&typeof W!="function"&&typeof W!="symbol";break;default:Ze(s,a,N,W,c,Y)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var _e in l)W=l[_e],l.hasOwnProperty(_e)&&W!=null&&!c.hasOwnProperty(_e)&&Ze(s,a,_e,null,c,W);for(K in c)if(W=c[K],Y=l[K],c.hasOwnProperty(K)&&W!==Y&&(W!=null||Y!=null))switch(K){case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(r(137,a));break;default:Ze(s,a,K,W,c,Y)}return;default:if(cu(a)){for(var et in l)W=l[et],l.hasOwnProperty(et)&&W!==void 0&&!c.hasOwnProperty(et)&&og(s,a,et,void 0,c,W);for(ee in c)W=c[ee],Y=l[ee],!c.hasOwnProperty(ee)||W===Y||W===void 0&&Y===void 0||og(s,a,ee,W,c,Y);return}}for(var $ in l)W=l[$],l.hasOwnProperty($)&&W!=null&&!c.hasOwnProperty($)&&Ze(s,a,$,null,c,W);for(re in c)W=c[re],Y=l[re],!c.hasOwnProperty(re)||W===Y||W==null&&Y==null||Ze(s,a,re,W,c,Y)}var lg=null,ug=null;function Rd(s){return s.nodeType===9?s:s.ownerDocument}function Xb(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Jb(s,a){if(s===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&a==="foreignObject"?0:s}function cg(s,a){return s==="textarea"||s==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var hg=null;function U2(){var s=window.event;return s&&s.type==="popstate"?s===hg?!1:(hg=s,!0):(hg=null,!1)}var Zb=typeof setTimeout=="function"?setTimeout:void 0,B2=typeof clearTimeout=="function"?clearTimeout:void 0,eT=typeof Promise=="function"?Promise:void 0,z2=typeof queueMicrotask=="function"?queueMicrotask:typeof eT<"u"?function(s){return eT.resolve(null).then(s).catch(q2)}:Zb;function q2(s){setTimeout(function(){throw s})}function pi(s){return s==="head"}function tT(s,a){var l=a,c=0,p=0;do{var y=l.nextSibling;if(s.removeChild(l),y&&y.nodeType===8)if(l=y.data,l==="/$"){if(0<c&&8>c){l=c;var T=s.ownerDocument;if(l&1&&Yu(T.documentElement),l&2&&Yu(T.body),l&4)for(l=T.head,Yu(l),T=l.firstChild;T;){var S=T.nextSibling,N=T.nodeName;T[ea]||N==="SCRIPT"||N==="STYLE"||N==="LINK"&&T.rel.toLowerCase()==="stylesheet"||l.removeChild(T),T=S}}if(p===0){s.removeChild(y),rc(a);return}p--}else l==="$"||l==="$?"||l==="$!"?p++:c=l.charCodeAt(0)-48;else c=0;l=y}while(l);rc(a)}function dg(s){var a=s.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var l=a;switch(a=a.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":dg(l),Qs(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}s.removeChild(l)}}function $2(s,a,l,c){for(;s.nodeType===1;){var p=l;if(s.nodeName.toLowerCase()!==a.toLowerCase()){if(!c&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(c){if(!s[ea])switch(a){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(y=s.getAttribute("rel"),y==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(y!==p.rel||s.getAttribute("href")!==(p.href==null||p.href===""?null:p.href)||s.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin)||s.getAttribute("title")!==(p.title==null?null:p.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(y=s.getAttribute("src"),(y!==(p.src==null?null:p.src)||s.getAttribute("type")!==(p.type==null?null:p.type)||s.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin))&&y&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(a==="input"&&s.type==="hidden"){var y=p.name==null?null:""+p.name;if(p.type==="hidden"&&s.getAttribute("name")===y)return s}else return s;if(s=hr(s.nextSibling),s===null)break}return null}function F2(s,a,l){if(a==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!l||(s=hr(s.nextSibling),s===null))return null;return s}function fg(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState==="complete"}function H2(s,a){var l=s.ownerDocument;if(s.data!=="$?"||l.readyState==="complete")a();else{var c=function(){a(),l.removeEventListener("DOMContentLoaded",c)};l.addEventListener("DOMContentLoaded",c),s._reactRetry=c}}function hr(s){for(;s!=null;s=s.nextSibling){var a=s.nodeType;if(a===1||a===3)break;if(a===8){if(a=s.data,a==="$"||a==="$!"||a==="$?"||a==="F!"||a==="F")break;if(a==="/$")return null}}return s}var mg=null;function nT(s){s=s.previousSibling;for(var a=0;s;){if(s.nodeType===8){var l=s.data;if(l==="$"||l==="$!"||l==="$?"){if(a===0)return s;a--}else l==="/$"&&a++}s=s.previousSibling}return null}function rT(s,a,l){switch(a=Rd(l),s){case"html":if(s=a.documentElement,!s)throw Error(r(452));return s;case"head":if(s=a.head,!s)throw Error(r(453));return s;case"body":if(s=a.body,!s)throw Error(r(454));return s;default:throw Error(r(451))}}function Yu(s){for(var a=s.attributes;a.length;)s.removeAttributeNode(a[0]);Qs(s)}var er=new Map,sT=new Set;function xd(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var Cs=ae.d;ae.d={f:G2,r:K2,D:W2,C:Y2,L:Q2,m:X2,X:Z2,S:J2,M:eO};function G2(){var s=Cs.f(),a=vd();return s||a}function K2(s){var a=Cr(s);a!==null&&a.tag===5&&a.type==="form"?Sw(a):Cs.r(s)}var Jo=typeof document>"u"?null:document;function iT(s,a,l){var c=Jo;if(c&&typeof a=="string"&&a){var p=It(a);p='link[rel="'+s+'"][href="'+p+'"]',typeof l=="string"&&(p+='[crossorigin="'+l+'"]'),sT.has(p)||(sT.add(p),s={rel:s,crossOrigin:l,href:a},c.querySelector(p)===null&&(a=c.createElement("link"),nn(a,"link",s),bt(a),c.head.appendChild(a)))}}function W2(s){Cs.D(s),iT("dns-prefetch",s,null)}function Y2(s,a){Cs.C(s,a),iT("preconnect",s,a)}function Q2(s,a,l){Cs.L(s,a,l);var c=Jo;if(c&&s&&a){var p='link[rel="preload"][as="'+It(a)+'"]';a==="image"&&l&&l.imageSrcSet?(p+='[imagesrcset="'+It(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(p+='[imagesizes="'+It(l.imageSizes)+'"]')):p+='[href="'+It(s)+'"]';var y=p;switch(a){case"style":y=Zo(s);break;case"script":y=el(s)}er.has(y)||(s=g({rel:"preload",href:a==="image"&&l&&l.imageSrcSet?void 0:s,as:a},l),er.set(y,s),c.querySelector(p)!==null||a==="style"&&c.querySelector(Qu(y))||a==="script"&&c.querySelector(Xu(y))||(a=c.createElement("link"),nn(a,"link",s),bt(a),c.head.appendChild(a)))}}function X2(s,a){Cs.m(s,a);var l=Jo;if(l&&s){var c=a&&typeof a.as=="string"?a.as:"script",p='link[rel="modulepreload"][as="'+It(c)+'"][href="'+It(s)+'"]',y=p;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=el(s)}if(!er.has(y)&&(s=g({rel:"modulepreload",href:s},a),er.set(y,s),l.querySelector(p)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(Xu(y)))return}c=l.createElement("link"),nn(c,"link",s),bt(c),l.head.appendChild(c)}}}function J2(s,a,l){Cs.S(s,a,l);var c=Jo;if(c&&s){var p=vn(c).hoistableStyles,y=Zo(s);a=a||"default";var T=p.get(y);if(!T){var S={loading:0,preload:null};if(T=c.querySelector(Qu(y)))S.loading=5;else{s=g({rel:"stylesheet",href:s,"data-precedence":a},l),(l=er.get(y))&&pg(s,l);var N=T=c.createElement("link");bt(N),nn(N,"link",s),N._p=new Promise(function(K,ee){N.onload=K,N.onerror=ee}),N.addEventListener("load",function(){S.loading|=1}),N.addEventListener("error",function(){S.loading|=2}),S.loading|=4,Cd(T,a,c)}T={type:"stylesheet",instance:T,count:1,state:S},p.set(y,T)}}}function Z2(s,a){Cs.X(s,a);var l=Jo;if(l&&s){var c=vn(l).hoistableScripts,p=el(s),y=c.get(p);y||(y=l.querySelector(Xu(p)),y||(s=g({src:s,async:!0},a),(a=er.get(p))&&gg(s,a),y=l.createElement("script"),bt(y),nn(y,"link",s),l.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},c.set(p,y))}}function eO(s,a){Cs.M(s,a);var l=Jo;if(l&&s){var c=vn(l).hoistableScripts,p=el(s),y=c.get(p);y||(y=l.querySelector(Xu(p)),y||(s=g({src:s,async:!0,type:"module"},a),(a=er.get(p))&&gg(s,a),y=l.createElement("script"),bt(y),nn(y,"link",s),l.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},c.set(p,y))}}function aT(s,a,l,c){var p=(p=xe.current)?xd(p):null;if(!p)throw Error(r(446));switch(s){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(a=Zo(l.href),l=vn(p).hoistableStyles,c=l.get(a),c||(c={type:"style",instance:null,count:0,state:null},l.set(a,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){s=Zo(l.href);var y=vn(p).hoistableStyles,T=y.get(s);if(T||(p=p.ownerDocument||p,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(s,T),(y=p.querySelector(Qu(s)))&&!y._p&&(T.instance=y,T.state.loading=5),er.has(s)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},er.set(s,l),y||tO(p,s,l,T.state))),a&&c===null)throw Error(r(528,""));return T}if(a&&c!==null)throw Error(r(529,""));return null;case"script":return a=l.async,l=l.src,typeof l=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=el(l),l=vn(p).hoistableScripts,c=l.get(a),c||(c={type:"script",instance:null,count:0,state:null},l.set(a,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,s))}}function Zo(s){return'href="'+It(s)+'"'}function Qu(s){return'link[rel="stylesheet"]['+s+"]"}function oT(s){return g({},s,{"data-precedence":s.precedence,precedence:null})}function tO(s,a,l,c){s.querySelector('link[rel="preload"][as="style"]['+a+"]")?c.loading=1:(a=s.createElement("link"),c.preload=a,a.addEventListener("load",function(){return c.loading|=1}),a.addEventListener("error",function(){return c.loading|=2}),nn(a,"link",l),bt(a),s.head.appendChild(a))}function el(s){return'[src="'+It(s)+'"]'}function Xu(s){return"script[async]"+s}function lT(s,a,l){if(a.count++,a.instance===null)switch(a.type){case"style":var c=s.querySelector('style[data-href~="'+It(l.href)+'"]');if(c)return a.instance=c,bt(c),c;var p=g({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return c=(s.ownerDocument||s).createElement("style"),bt(c),nn(c,"style",p),Cd(c,l.precedence,s),a.instance=c;case"stylesheet":p=Zo(l.href);var y=s.querySelector(Qu(p));if(y)return a.state.loading|=4,a.instance=y,bt(y),y;c=oT(l),(p=er.get(p))&&pg(c,p),y=(s.ownerDocument||s).createElement("link"),bt(y);var T=y;return T._p=new Promise(function(S,N){T.onload=S,T.onerror=N}),nn(y,"link",c),a.state.loading|=4,Cd(y,l.precedence,s),a.instance=y;case"script":return y=el(l.src),(p=s.querySelector(Xu(y)))?(a.instance=p,bt(p),p):(c=l,(p=er.get(y))&&(c=g({},l),gg(c,p)),s=s.ownerDocument||s,p=s.createElement("script"),bt(p),nn(p,"link",c),s.head.appendChild(p),a.instance=p);case"void":return null;default:throw Error(r(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(c=a.instance,a.state.loading|=4,Cd(c,l.precedence,s));return a.instance}function Cd(s,a,l){for(var c=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),p=c.length?c[c.length-1]:null,y=p,T=0;T<c.length;T++){var S=c[T];if(S.dataset.precedence===a)y=S;else if(y!==p)break}y?y.parentNode.insertBefore(s,y.nextSibling):(a=l.nodeType===9?l.head:l,a.insertBefore(s,a.firstChild))}function pg(s,a){s.crossOrigin==null&&(s.crossOrigin=a.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=a.referrerPolicy),s.title==null&&(s.title=a.title)}function gg(s,a){s.crossOrigin==null&&(s.crossOrigin=a.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=a.referrerPolicy),s.integrity==null&&(s.integrity=a.integrity)}var Id=null;function uT(s,a,l){if(Id===null){var c=new Map,p=Id=new Map;p.set(l,c)}else p=Id,c=p.get(l),c||(c=new Map,p.set(l,c));if(c.has(s))return c;for(c.set(s,null),l=l.getElementsByTagName(s),p=0;p<l.length;p++){var y=l[p];if(!(y[ea]||y[Lt]||s==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var T=y.getAttribute(a)||"";T=s+T;var S=c.get(T);S?S.push(y):c.set(T,[y])}}return c}function cT(s,a,l){s=s.ownerDocument||s,s.head.insertBefore(l,a==="title"?s.querySelector("head > title"):null)}function nO(s,a,l){if(l===1||a.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return s=a.disabled,typeof a.precedence=="string"&&s==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function hT(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}var Ju=null;function rO(){}function sO(s,a,l){if(Ju===null)throw Error(r(475));var c=Ju;if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var p=Zo(l.href),y=s.querySelector(Qu(p));if(y){s=y._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(c.count++,c=Od.bind(c),s.then(c,c)),a.state.loading|=4,a.instance=y,bt(y);return}y=s.ownerDocument||s,l=oT(l),(p=er.get(p))&&pg(l,p),y=y.createElement("link"),bt(y);var T=y;T._p=new Promise(function(S,N){T.onload=S,T.onerror=N}),nn(y,"link",l),a.instance=y}c.stylesheets===null&&(c.stylesheets=new Map),c.stylesheets.set(a,s),(s=a.state.preload)&&(a.state.loading&3)===0&&(c.count++,a=Od.bind(c),s.addEventListener("load",a),s.addEventListener("error",a))}}function iO(){if(Ju===null)throw Error(r(475));var s=Ju;return s.stylesheets&&s.count===0&&yg(s,s.stylesheets),0<s.count?function(a){var l=setTimeout(function(){if(s.stylesheets&&yg(s,s.stylesheets),s.unsuspend){var c=s.unsuspend;s.unsuspend=null,c()}},6e4);return s.unsuspend=a,function(){s.unsuspend=null,clearTimeout(l)}}:null}function Od(){if(this.count--,this.count===0){if(this.stylesheets)yg(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var kd=null;function yg(s,a){s.stylesheets=null,s.unsuspend!==null&&(s.count++,kd=new Map,a.forEach(aO,s),kd=null,Od.call(s))}function aO(s,a){if(!(a.state.loading&4)){var l=kd.get(s);if(l)var c=l.get(null);else{l=new Map,kd.set(s,l);for(var p=s.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<p.length;y++){var T=p[y];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(l.set(T.dataset.precedence,T),c=T)}c&&l.set(null,c)}p=a.instance,T=p.getAttribute("data-precedence"),y=l.get(T)||c,y===c&&l.set(null,p),l.set(T,p),this.count++,c=Od.bind(this),p.addEventListener("load",c),p.addEventListener("error",c),y?y.parentNode.insertBefore(p,y.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(p,s.firstChild)),a.state.loading|=4}}var Zu={$$typeof:M,Provider:null,Consumer:null,_currentValue:de,_currentValue2:de,_threadCount:0};function oO(s,a,l,c,p,y,T,S){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ss(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ss(0),this.hiddenUpdates=ss(null),this.identifierPrefix=c,this.onUncaughtError=p,this.onCaughtError=y,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=S,this.incompleteTransitions=new Map}function dT(s,a,l,c,p,y,T,S,N,K,ee,re){return s=new oO(s,a,l,T,S,N,K,re),a=1,y===!0&&(a|=24),y=Dn(3,null,null,a),s.current=y,y.stateNode=s,a=Jm(),a.refCount++,s.pooledCache=a,a.refCount++,y.memoizedState={element:c,isDehydrated:l,cache:a},np(y),s}function fT(s){return s?(s=ko,s):ko}function mT(s,a,l,c,p,y){p=fT(p),c.context===null?c.context=p:c.pendingContext=p,c=ni(a),c.payload={element:l},y=y===void 0?null:y,y!==null&&(c.callback=y),l=ri(s,c,a),l!==null&&(Ln(l,s,a),Iu(l,s,a))}function pT(s,a){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var l=s.retryLane;s.retryLane=l!==0&&l<a?l:a}}function vg(s,a){pT(s,a),(s=s.alternate)&&pT(s,a)}function gT(s){if(s.tag===13){var a=Oo(s,67108864);a!==null&&Ln(a,s,67108864),vg(s,67108864)}}var Dd=!0;function lO(s,a,l,c){var p=Z.T;Z.T=null;var y=ae.p;try{ae.p=2,_g(s,a,l,c)}finally{ae.p=y,Z.T=p}}function uO(s,a,l,c){var p=Z.T;Z.T=null;var y=ae.p;try{ae.p=8,_g(s,a,l,c)}finally{ae.p=y,Z.T=p}}function _g(s,a,l,c){if(Dd){var p=wg(c);if(p===null)ag(s,a,c,Pd,l),vT(s,c);else if(hO(p,s,a,l,c))c.stopPropagation();else if(vT(s,c),a&4&&-1<cO.indexOf(s)){for(;p!==null;){var y=Cr(p);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var T=ar(y.pendingLanes);if(T!==0){var S=y;for(S.pendingLanes|=2,S.entangledLanes|=2;T;){var N=1<<31-cn(T);S.entanglements[1]|=N,T&=~N}qr(y),(Ye&6)===0&&(gd=qn()+500,Gu(0))}}break;case 13:S=Oo(y,2),S!==null&&Ln(S,y,2),vd(),vg(y,2)}if(y=wg(c),y===null&&ag(s,a,c,Pd,l),y===p)break;p=y}p!==null&&c.stopPropagation()}else ag(s,a,c,null,l)}}function wg(s){return s=Hn(s),bg(s)}var Pd=null;function bg(s){if(Pd=null,s=as(s),s!==null){var a=o(s);if(a===null)s=null;else{var l=a.tag;if(l===13){if(s=u(a),s!==null)return s;s=null}else if(l===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;s=null}else a!==s&&(s=null)}}return Pd=s,null}function yT(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Sm()){case Xl:return 2;case lo:return 8;case Yi:case Am:return 32;case uo:return 268435456;default:return 32}default:return 32}}var Tg=!1,gi=null,yi=null,vi=null,ec=new Map,tc=new Map,_i=[],cO="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function vT(s,a){switch(s){case"focusin":case"focusout":gi=null;break;case"dragenter":case"dragleave":yi=null;break;case"mouseover":case"mouseout":vi=null;break;case"pointerover":case"pointerout":ec.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":tc.delete(a.pointerId)}}function nc(s,a,l,c,p,y){return s===null||s.nativeEvent!==y?(s={blockedOn:a,domEventName:l,eventSystemFlags:c,nativeEvent:y,targetContainers:[p]},a!==null&&(a=Cr(a),a!==null&&gT(a)),s):(s.eventSystemFlags|=c,a=s.targetContainers,p!==null&&a.indexOf(p)===-1&&a.push(p),s)}function hO(s,a,l,c,p){switch(a){case"focusin":return gi=nc(gi,s,a,l,c,p),!0;case"dragenter":return yi=nc(yi,s,a,l,c,p),!0;case"mouseover":return vi=nc(vi,s,a,l,c,p),!0;case"pointerover":var y=p.pointerId;return ec.set(y,nc(ec.get(y)||null,s,a,l,c,p)),!0;case"gotpointercapture":return y=p.pointerId,tc.set(y,nc(tc.get(y)||null,s,a,l,c,p)),!0}return!1}function _T(s){var a=as(s.target);if(a!==null){var l=o(a);if(l!==null){if(a=l.tag,a===13){if(a=u(l),a!==null){s.blockedOn=a,vh(s.priority,function(){if(l.tag===13){var c=Mn();c=Ks(c);var p=Oo(l,c);p!==null&&Ln(p,l,c),vg(l,c)}});return}}else if(a===3&&l.stateNode.current.memoizedState.isDehydrated){s.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Nd(s){if(s.blockedOn!==null)return!1;for(var a=s.targetContainers;0<a.length;){var l=wg(s.nativeEvent);if(l===null){l=s.nativeEvent;var c=new l.constructor(l.type,l);cs=c,l.target.dispatchEvent(c),cs=null}else return a=Cr(l),a!==null&&gT(a),s.blockedOn=l,!1;a.shift()}return!0}function wT(s,a,l){Nd(s)&&l.delete(a)}function dO(){Tg=!1,gi!==null&&Nd(gi)&&(gi=null),yi!==null&&Nd(yi)&&(yi=null),vi!==null&&Nd(vi)&&(vi=null),ec.forEach(wT),tc.forEach(wT)}function Vd(s,a){s.blockedOn===a&&(s.blockedOn=null,Tg||(Tg=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,dO)))}var Md=null;function bT(s){Md!==s&&(Md=s,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Md===s&&(Md=null);for(var a=0;a<s.length;a+=3){var l=s[a],c=s[a+1],p=s[a+2];if(typeof c!="function"){if(bg(c||l)===null)continue;break}var y=Cr(l);y!==null&&(s.splice(a,3),a-=3,bp(y,{pending:!0,data:p,method:l.method,action:c},c,p))}}))}function rc(s){function a(N){return Vd(N,s)}gi!==null&&Vd(gi,s),yi!==null&&Vd(yi,s),vi!==null&&Vd(vi,s),ec.forEach(a),tc.forEach(a);for(var l=0;l<_i.length;l++){var c=_i[l];c.blockedOn===s&&(c.blockedOn=null)}for(;0<_i.length&&(l=_i[0],l.blockedOn===null);)_T(l),l.blockedOn===null&&_i.shift();if(l=(s.ownerDocument||s).$$reactFormReplay,l!=null)for(c=0;c<l.length;c+=3){var p=l[c],y=l[c+1],T=p[Ct]||null;if(typeof y=="function")T||bT(l);else if(T){var S=null;if(y&&y.hasAttribute("formAction")){if(p=y,T=y[Ct]||null)S=T.formAction;else if(bg(p)!==null)continue}else S=T.action;typeof S=="function"?l[c+1]=S:(l.splice(c,3),c-=3),bT(l)}}}function Eg(s){this._internalRoot=s}Ld.prototype.render=Eg.prototype.render=function(s){var a=this._internalRoot;if(a===null)throw Error(r(409));var l=a.current,c=Mn();mT(l,c,s,a,null,null)},Ld.prototype.unmount=Eg.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var a=s.containerInfo;mT(s.current,2,null,s,null,null),vd(),a[$n]=null}};function Ld(s){this._internalRoot=s}Ld.prototype.unstable_scheduleHydration=function(s){if(s){var a=Ws();s={blockedOn:null,target:s,priority:a};for(var l=0;l<_i.length&&a!==0&&a<_i[l].priority;l++);_i.splice(l,0,s),l===0&&_T(s)}};var TT=e.version;if(TT!=="19.1.1")throw Error(r(527,TT,"19.1.1"));ae.findDOMNode=function(s){var a=s._reactInternals;if(a===void 0)throw typeof s.render=="function"?Error(r(188)):(s=Object.keys(s).join(","),Error(r(268,s)));return s=d(a),s=s!==null?m(s):null,s=s===null?null:s.stateNode,s};var fO={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:Z,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var jd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!jd.isDisabled&&jd.supportsFiber)try{gt=jd.inject(fO),We=jd}catch{}}return ic.createRoot=function(s,a){if(!i(s))throw Error(r(299));var l=!1,c="",p=jw,y=Uw,T=Bw,S=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(c=a.identifierPrefix),a.onUncaughtError!==void 0&&(p=a.onUncaughtError),a.onCaughtError!==void 0&&(y=a.onCaughtError),a.onRecoverableError!==void 0&&(T=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(S=a.unstable_transitionCallbacks)),a=dT(s,1,!1,null,null,l,c,p,y,T,S,null),s[$n]=a.current,ig(s),new Eg(a)},ic.hydrateRoot=function(s,a,l){if(!i(s))throw Error(r(299));var c=!1,p="",y=jw,T=Uw,S=Bw,N=null,K=null;return l!=null&&(l.unstable_strictMode===!0&&(c=!0),l.identifierPrefix!==void 0&&(p=l.identifierPrefix),l.onUncaughtError!==void 0&&(y=l.onUncaughtError),l.onCaughtError!==void 0&&(T=l.onCaughtError),l.onRecoverableError!==void 0&&(S=l.onRecoverableError),l.unstable_transitionCallbacks!==void 0&&(N=l.unstable_transitionCallbacks),l.formState!==void 0&&(K=l.formState)),a=dT(s,1,!0,a,l??null,c,p,y,T,S,N,K),a.context=fT(null),l=a.current,c=Mn(),c=Ks(c),p=ni(c),p.callback=null,ri(l,p,c),l=c,a.current.lanes=l,is(a,l),qr(a),s[$n]=a.current,ig(s),new Ld(a)},ic.version="19.1.1",ic}var DT;function SO(){if(DT)return Rg.exports;DT=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Rg.exports=EO(),Rg.exports}var AO=SO();const RO=YA(AO);/**
 * react-router v7.8.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var PT="popstate";function xO(t={}){function e(i,o){let{pathname:u="/",search:h="",hash:d=""}=no(i.location.hash.substring(1));return!u.startsWith("/")&&!u.startsWith(".")&&(u="/"+u),my("",{pathname:u,search:h,hash:d},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(i,o){let u=i.document.querySelector("base"),h="";if(u&&u.getAttribute("href")){let d=i.location.href,m=d.indexOf("#");h=m===-1?d:d.slice(0,m)}return h+"#"+(typeof o=="string"?o:xc(o))}function r(i,o){Tr(i.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(o)})`)}return IO(e,n,r,t)}function mt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Tr(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function CO(){return Math.random().toString(36).substring(2,10)}function NT(t,e){return{usr:t.state,key:t.key,idx:e}}function my(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?no(e):e,state:n,key:e&&e.key||r||CO()}}function xc({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function no(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function IO(t,e,n,r={}){let{window:i=document.defaultView,v5Compat:o=!1}=r,u=i.history,h="POP",d=null,m=g();m==null&&(m=0,u.replaceState({...u.state,idx:m},""));function g(){return(u.state||{idx:null}).idx}function _(){h="POP";let I=g(),P=I==null?null:I-m;m=I,d&&d({action:h,location:O.location,delta:P})}function w(I,P){h="PUSH";let V=my(O.location,I,P);n&&n(V,I),m=g()+1;let M=NT(V,m),J=O.createHref(V);try{u.pushState(M,"",J)}catch(X){if(X instanceof DOMException&&X.name==="DataCloneError")throw X;i.location.assign(J)}o&&d&&d({action:h,location:O.location,delta:1})}function E(I,P){h="REPLACE";let V=my(O.location,I,P);n&&n(V,I),m=g();let M=NT(V,m),J=O.createHref(V);u.replaceState(M,"",J),o&&d&&d({action:h,location:O.location,delta:0})}function R(I){return OO(I)}let O={get action(){return h},get location(){return t(i,u)},listen(I){if(d)throw new Error("A history only accepts one active listener");return i.addEventListener(PT,_),d=I,()=>{i.removeEventListener(PT,_),d=null}},createHref(I){return e(i,I)},createURL:R,encodeLocation(I){let P=R(I);return{pathname:P.pathname,search:P.search,hash:P.hash}},push:w,replace:E,go(I){return u.go(I)}};return O}function OO(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),mt(n,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:xc(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function QA(t,e,n="/"){return kO(t,e,n,!1)}function kO(t,e,n,r){let i=typeof e=="string"?no(e):e,o=Ms(i.pathname||"/",n);if(o==null)return null;let u=XA(t);DO(u);let h=null;for(let d=0;h==null&&d<u.length;++d){let m=$O(o);h=zO(u[d],m,r)}return h}function XA(t,e=[],n=[],r="",i=!1){let o=(u,h,d=i,m)=>{let g={relativePath:m===void 0?u.path||"":m,caseSensitive:u.caseSensitive===!0,childrenIndex:h,route:u};if(g.relativePath.startsWith("/")){if(!g.relativePath.startsWith(r)&&d)return;mt(g.relativePath.startsWith(r),`Absolute route path "${g.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),g.relativePath=g.relativePath.slice(r.length)}let _=Ns([r,g.relativePath]),w=n.concat(g);u.children&&u.children.length>0&&(mt(u.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${_}".`),XA(u.children,e,w,_,d)),!(u.path==null&&!u.index)&&e.push({path:_,score:UO(_,u.index),routesMeta:w})};return t.forEach((u,h)=>{if(u.path===""||!u.path?.includes("?"))o(u,h);else for(let d of JA(u.path))o(u,h,!0,d)}),e}function JA(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return i?[o,""]:[o];let u=JA(r.join("/")),h=[];return h.push(...u.map(d=>d===""?o:[o,d].join("/"))),i&&h.push(...u),h.map(d=>t.startsWith("/")&&d===""?"/":d)}function DO(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:BO(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var PO=/^:[\w-]+$/,NO=3,VO=2,MO=1,LO=10,jO=-2,VT=t=>t==="*";function UO(t,e){let n=t.split("/"),r=n.length;return n.some(VT)&&(r+=jO),e&&(r+=VO),n.filter(i=>!VT(i)).reduce((i,o)=>i+(PO.test(o)?NO:o===""?MO:LO),r)}function BO(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function zO(t,e,n=!1){let{routesMeta:r}=t,i={},o="/",u=[];for(let h=0;h<r.length;++h){let d=r[h],m=h===r.length-1,g=o==="/"?e:e.slice(o.length)||"/",_=vf({path:d.relativePath,caseSensitive:d.caseSensitive,end:m},g),w=d.route;if(!_&&m&&n&&!r[r.length-1].route.index&&(_=vf({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},g)),!_)return null;Object.assign(i,_.params),u.push({params:i,pathname:Ns([o,_.pathname]),pathnameBase:KO(Ns([o,_.pathnameBase])),route:w}),_.pathnameBase!=="/"&&(o=Ns([o,_.pathnameBase]))}return u}function vf(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=qO(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let o=i[0],u=o.replace(/(.)\/+$/,"$1"),h=i.slice(1);return{params:r.reduce((m,{paramName:g,isOptional:_},w)=>{if(g==="*"){let R=h[w]||"";u=o.slice(0,o.length-R.length).replace(/(.)\/+$/,"$1")}const E=h[w];return _&&!E?m[g]=void 0:m[g]=(E||"").replace(/%2F/g,"/"),m},{}),pathname:o,pathnameBase:u,pattern:t}}function qO(t,e=!1,n=!0){Tr(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,h,d)=>(r.push({paramName:h,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function $O(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Tr(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Ms(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function FO(t,e="/"){let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?no(t):t;return{pathname:n?n.startsWith("/")?n:HO(n,e):e,search:WO(r),hash:YO(i)}}function HO(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Og(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function GO(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function ZA(t){let e=GO(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function e1(t,e,n,r=!1){let i;typeof t=="string"?i=no(t):(i={...t},mt(!i.pathname||!i.pathname.includes("?"),Og("?","pathname","search",i)),mt(!i.pathname||!i.pathname.includes("#"),Og("#","pathname","hash",i)),mt(!i.search||!i.search.includes("#"),Og("#","search","hash",i)));let o=t===""||i.pathname==="",u=o?"/":i.pathname,h;if(u==null)h=n;else{let _=e.length-1;if(!r&&u.startsWith("..")){let w=u.split("/");for(;w[0]==="..";)w.shift(),_-=1;i.pathname=w.join("/")}h=_>=0?e[_]:"/"}let d=FO(i,h),m=u&&u!=="/"&&u.endsWith("/"),g=(o||u===".")&&n.endsWith("/");return!d.pathname.endsWith("/")&&(m||g)&&(d.pathname+="/"),d}var Ns=t=>t.join("/").replace(/\/\/+/g,"/"),KO=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),WO=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,YO=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function QO(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var t1=["POST","PUT","PATCH","DELETE"];new Set(t1);var XO=["GET",...t1];new Set(XO);var Ml=D.createContext(null);Ml.displayName="DataRouter";var Kf=D.createContext(null);Kf.displayName="DataRouterState";D.createContext(!1);var n1=D.createContext({isTransitioning:!1});n1.displayName="ViewTransition";var JO=D.createContext(new Map);JO.displayName="Fetchers";var ZO=D.createContext(null);ZO.displayName="Await";var ns=D.createContext(null);ns.displayName="Navigation";var Qc=D.createContext(null);Qc.displayName="Location";var Sr=D.createContext({outlet:null,matches:[],isDataRoute:!1});Sr.displayName="Route";var Sv=D.createContext(null);Sv.displayName="RouteError";function ek(t,{relative:e}={}){mt(Xc(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=D.useContext(ns),{hash:i,pathname:o,search:u}=Jc(t,{relative:e}),h=o;return n!=="/"&&(h=o==="/"?n:Ns([n,o])),r.createHref({pathname:h,search:u,hash:i})}function Xc(){return D.useContext(Qc)!=null}function Ar(){return mt(Xc(),"useLocation() may be used only in the context of a <Router> component."),D.useContext(Qc).location}var r1="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function s1(t){D.useContext(ns).static||D.useLayoutEffect(t)}function Ll(){let{isDataRoute:t}=D.useContext(Sr);return t?gk():tk()}function tk(){mt(Xc(),"useNavigate() may be used only in the context of a <Router> component.");let t=D.useContext(Ml),{basename:e,navigator:n}=D.useContext(ns),{matches:r}=D.useContext(Sr),{pathname:i}=Ar(),o=JSON.stringify(ZA(r)),u=D.useRef(!1);return s1(()=>{u.current=!0}),D.useCallback((d,m={})=>{if(Tr(u.current,r1),!u.current)return;if(typeof d=="number"){n.go(d);return}let g=e1(d,JSON.parse(o),i,m.relative==="path");t==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:Ns([e,g.pathname])),(m.replace?n.replace:n.push)(g,m.state,m)},[e,n,o,i,t])}var nk=D.createContext(null);function rk(t){let e=D.useContext(Sr).outlet;return e&&D.createElement(nk.Provider,{value:t},e)}function sk(){let{matches:t}=D.useContext(Sr),e=t[t.length-1];return e?e.params:{}}function Jc(t,{relative:e}={}){let{matches:n}=D.useContext(Sr),{pathname:r}=Ar(),i=JSON.stringify(ZA(n));return D.useMemo(()=>e1(t,JSON.parse(i),r,e==="path"),[t,i,r,e])}function ik(t,e){return i1(t,e)}function i1(t,e,n,r,i){mt(Xc(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=D.useContext(ns),{matches:u}=D.useContext(Sr),h=u[u.length-1],d=h?h.params:{},m=h?h.pathname:"/",g=h?h.pathnameBase:"/",_=h&&h.route;{let V=_&&_.path||"";a1(m,!_||V.endsWith("*")||V.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${m}" (under <Route path="${V}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${V}"> to <Route path="${V==="/"?"*":`${V}/*`}">.`)}let w=Ar(),E;if(e){let V=typeof e=="string"?no(e):e;mt(g==="/"||V.pathname?.startsWith(g),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${g}" but pathname "${V.pathname}" was given in the \`location\` prop.`),E=V}else E=w;let R=E.pathname||"/",O=R;if(g!=="/"){let V=g.replace(/^\//,"").split("/");O="/"+R.replace(/^\//,"").split("/").slice(V.length).join("/")}let I=QA(t,{pathname:O});Tr(_||I!=null,`No routes matched location "${E.pathname}${E.search}${E.hash}" `),Tr(I==null||I[I.length-1].route.element!==void 0||I[I.length-1].route.Component!==void 0||I[I.length-1].route.lazy!==void 0,`Matched leaf route at location "${E.pathname}${E.search}${E.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let P=ck(I&&I.map(V=>Object.assign({},V,{params:Object.assign({},d,V.params),pathname:Ns([g,o.encodeLocation?o.encodeLocation(V.pathname).pathname:V.pathname]),pathnameBase:V.pathnameBase==="/"?g:Ns([g,o.encodeLocation?o.encodeLocation(V.pathnameBase).pathname:V.pathnameBase])})),u,n,r,i);return e&&P?D.createElement(Qc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...E},navigationType:"POP"}},P):P}function ak(){let t=pk(),e=QO(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},o={padding:"2px 4px",backgroundColor:r},u=null;return console.error("Error handled by React Router default ErrorBoundary:",t),u=D.createElement(D.Fragment,null,D.createElement("p",null," Hey developer "),D.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",D.createElement("code",{style:o},"ErrorBoundary")," or"," ",D.createElement("code",{style:o},"errorElement")," prop on your route.")),D.createElement(D.Fragment,null,D.createElement("h2",null,"Unexpected Application Error!"),D.createElement("h3",{style:{fontStyle:"italic"}},e),n?D.createElement("pre",{style:i},n):null,u)}var ok=D.createElement(ak,null),lk=class extends D.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.unstable_onError?this.props.unstable_onError(t,e):console.error("React Router caught the following error during render",t)}render(){return this.state.error!==void 0?D.createElement(Sr.Provider,{value:this.props.routeContext},D.createElement(Sv.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function uk({routeContext:t,match:e,children:n}){let r=D.useContext(Ml);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),D.createElement(Sr.Provider,{value:t},n)}function ck(t,e=[],n=null,r=null,i=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,u=n?.errors;if(u!=null){let m=o.findIndex(g=>g.route.id&&u?.[g.route.id]!==void 0);mt(m>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(u).join(",")}`),o=o.slice(0,Math.min(o.length,m+1))}let h=!1,d=-1;if(n)for(let m=0;m<o.length;m++){let g=o[m];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(d=m),g.route.id){let{loaderData:_,errors:w}=n,E=g.route.loader&&!_.hasOwnProperty(g.route.id)&&(!w||w[g.route.id]===void 0);if(g.route.lazy||E){h=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((m,g,_)=>{let w,E=!1,R=null,O=null;n&&(w=u&&g.route.id?u[g.route.id]:void 0,R=g.route.errorElement||ok,h&&(d<0&&_===0?(a1("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),E=!0,O=null):d===_&&(E=!0,O=g.route.hydrateFallbackElement||null)));let I=e.concat(o.slice(0,_+1)),P=()=>{let V;return w?V=R:E?V=O:g.route.Component?V=D.createElement(g.route.Component,null):g.route.element?V=g.route.element:V=m,D.createElement(uk,{match:g,routeContext:{outlet:m,matches:I,isDataRoute:n!=null},children:V})};return n&&(g.route.ErrorBoundary||g.route.errorElement||_===0)?D.createElement(lk,{location:n.location,revalidation:n.revalidation,component:R,error:w,children:P(),routeContext:{outlet:null,matches:I,isDataRoute:!0},unstable_onError:r}):P()},null)}function Av(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function hk(t){let e=D.useContext(Ml);return mt(e,Av(t)),e}function dk(t){let e=D.useContext(Kf);return mt(e,Av(t)),e}function fk(t){let e=D.useContext(Sr);return mt(e,Av(t)),e}function Rv(t){let e=fk(t),n=e.matches[e.matches.length-1];return mt(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function mk(){return Rv("useRouteId")}function pk(){let t=D.useContext(Sv),e=dk("useRouteError"),n=Rv("useRouteError");return t!==void 0?t:e.errors?.[n]}function gk(){let{router:t}=hk("useNavigate"),e=Rv("useNavigate"),n=D.useRef(!1);return s1(()=>{n.current=!0}),D.useCallback(async(i,o={})=>{Tr(n.current,r1),n.current&&(typeof i=="number"?t.navigate(i):await t.navigate(i,{fromRouteId:e,...o}))},[t,e])}var MT={};function a1(t,e,n){!e&&!MT[t]&&(MT[t]=!0,Tr(!1,n))}D.memo(yk);function yk({routes:t,future:e,state:n,unstable_onError:r}){return i1(t,void 0,n,r,e)}function o1(t){return rk(t.context)}function dr(t){mt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function vk({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:i,static:o=!1}){mt(!Xc(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=t.replace(/^\/*/,"/"),h=D.useMemo(()=>({basename:u,navigator:i,static:o,future:{}}),[u,i,o]);typeof n=="string"&&(n=no(n));let{pathname:d="/",search:m="",hash:g="",state:_=null,key:w="default"}=n,E=D.useMemo(()=>{let R=Ms(d,u);return R==null?null:{location:{pathname:R,search:m,hash:g,state:_,key:w},navigationType:r}},[u,d,m,g,_,w,r]);return Tr(E!=null,`<Router basename="${u}"> is not able to match the URL "${d}${m}${g}" because it does not start with the basename, so the <Router> won't render anything.`),E==null?null:D.createElement(ns.Provider,{value:h},D.createElement(Qc.Provider,{children:e,value:E}))}function _k({children:t,location:e}){return ik(py(t),e)}function py(t,e=[]){let n=[];return D.Children.forEach(t,(r,i)=>{if(!D.isValidElement(r))return;let o=[...e,i];if(r.type===D.Fragment){n.push.apply(n,py(r.props.children,o));return}mt(r.type===dr,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),mt(!r.props.index||!r.props.children,"An index route cannot have child routes.");let u={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(u.children=py(r.props.children,o)),n.push(u)}),n}var ef="get",tf="application/x-www-form-urlencoded";function Wf(t){return t!=null&&typeof t.tagName=="string"}function wk(t){return Wf(t)&&t.tagName.toLowerCase()==="button"}function bk(t){return Wf(t)&&t.tagName.toLowerCase()==="form"}function Tk(t){return Wf(t)&&t.tagName.toLowerCase()==="input"}function Ek(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Sk(t,e){return t.button===0&&(!e||e==="_self")&&!Ek(t)}var Ud=null;function Ak(){if(Ud===null)try{new FormData(document.createElement("form"),0),Ud=!1}catch{Ud=!0}return Ud}var Rk=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function kg(t){return t!=null&&!Rk.has(t)?(Tr(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${tf}"`),null):t}function xk(t,e){let n,r,i,o,u;if(bk(t)){let h=t.getAttribute("action");r=h?Ms(h,e):null,n=t.getAttribute("method")||ef,i=kg(t.getAttribute("enctype"))||tf,o=new FormData(t)}else if(wk(t)||Tk(t)&&(t.type==="submit"||t.type==="image")){let h=t.form;if(h==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=t.getAttribute("formaction")||h.getAttribute("action");if(r=d?Ms(d,e):null,n=t.getAttribute("formmethod")||h.getAttribute("method")||ef,i=kg(t.getAttribute("formenctype"))||kg(h.getAttribute("enctype"))||tf,o=new FormData(h,t),!Ak()){let{name:m,type:g,value:_}=t;if(g==="image"){let w=m?`${m}.`:"";o.append(`${w}x`,"0"),o.append(`${w}y`,"0")}else m&&o.append(m,_)}}else{if(Wf(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=ef,r=null,i=tf,u=t}return o&&i==="text/plain"&&(u=o,o=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:o,body:u}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function xv(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Ck(t,e,n){let r=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return r.pathname==="/"?r.pathname=`_root.${n}`:e&&Ms(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}async function Ik(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Ok(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function kk(t,e,n){let r=await Promise.all(t.map(async i=>{let o=e.routes[i.route.id];if(o){let u=await Ik(o,n);return u.links?u.links():[]}return[]}));return Vk(r.flat(1).filter(Ok).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function LT(t,e,n,r,i,o){let u=(d,m)=>n[m]?d.route.id!==n[m].route.id:!0,h=(d,m)=>n[m].pathname!==d.pathname||n[m].route.path?.endsWith("*")&&n[m].params["*"]!==d.params["*"];return o==="assets"?e.filter((d,m)=>u(d,m)||h(d,m)):o==="data"?e.filter((d,m)=>{let g=r.routes[d.route.id];if(!g||!g.hasLoader)return!1;if(u(d,m)||h(d,m))return!0;if(d.route.shouldRevalidate){let _=d.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(t,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof _=="boolean")return _}return!0}):[]}function Dk(t,e,{includeHydrateFallback:n}={}){return Pk(t.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let o=[i.module];return i.clientActionModule&&(o=o.concat(i.clientActionModule)),i.clientLoaderModule&&(o=o.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(o=o.concat(i.hydrateFallbackModule)),i.imports&&(o=o.concat(i.imports)),o}).flat(1))}function Pk(t){return[...new Set(t)]}function Nk(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function Vk(t,e){let n=new Set;return new Set(e),t.reduce((r,i)=>{let o=JSON.stringify(Nk(i));return n.has(o)||(n.add(o),r.push({key:o,link:i})),r},[])}function l1(){let t=D.useContext(Ml);return xv(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function Mk(){let t=D.useContext(Kf);return xv(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var Cv=D.createContext(void 0);Cv.displayName="FrameworkContext";function u1(){let t=D.useContext(Cv);return xv(t,"You must render this element inside a <HydratedRouter> element"),t}function Lk(t,e){let n=D.useContext(Cv),[r,i]=D.useState(!1),[o,u]=D.useState(!1),{onFocus:h,onBlur:d,onMouseEnter:m,onMouseLeave:g,onTouchStart:_}=e,w=D.useRef(null);D.useEffect(()=>{if(t==="render"&&u(!0),t==="viewport"){let O=P=>{P.forEach(V=>{u(V.isIntersecting)})},I=new IntersectionObserver(O,{threshold:.5});return w.current&&I.observe(w.current),()=>{I.disconnect()}}},[t]),D.useEffect(()=>{if(r){let O=setTimeout(()=>{u(!0)},100);return()=>{clearTimeout(O)}}},[r]);let E=()=>{i(!0)},R=()=>{i(!1),u(!1)};return n?t!=="intent"?[o,w,{}]:[o,w,{onFocus:ac(h,E),onBlur:ac(d,R),onMouseEnter:ac(m,E),onMouseLeave:ac(g,R),onTouchStart:ac(_,E)}]:[!1,w,{}]}function ac(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function jk({page:t,...e}){let{router:n}=l1(),r=D.useMemo(()=>QA(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?D.createElement(Bk,{page:t,matches:r,...e}):null}function Uk(t){let{manifest:e,routeModules:n}=u1(),[r,i]=D.useState([]);return D.useEffect(()=>{let o=!1;return kk(t,e,n).then(u=>{o||i(u)}),()=>{o=!0}},[t,e,n]),r}function Bk({page:t,matches:e,...n}){let r=Ar(),{manifest:i,routeModules:o}=u1(),{basename:u}=l1(),{loaderData:h,matches:d}=Mk(),m=D.useMemo(()=>LT(t,e,d,i,r,"data"),[t,e,d,i,r]),g=D.useMemo(()=>LT(t,e,d,i,r,"assets"),[t,e,d,i,r]),_=D.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let R=new Set,O=!1;if(e.forEach(P=>{let V=i.routes[P.route.id];!V||!V.hasLoader||(!m.some(M=>M.route.id===P.route.id)&&P.route.id in h&&o[P.route.id]?.shouldRevalidate||V.hasClientLoader?O=!0:R.add(P.route.id))}),R.size===0)return[];let I=Ck(t,u,"data");return O&&R.size>0&&I.searchParams.set("_routes",e.filter(P=>R.has(P.route.id)).map(P=>P.route.id).join(",")),[I.pathname+I.search]},[u,h,r,i,m,e,t,o]),w=D.useMemo(()=>Dk(g,i),[g,i]),E=Uk(g);return D.createElement(D.Fragment,null,_.map(R=>D.createElement("link",{key:R,rel:"prefetch",as:"fetch",href:R,...n})),w.map(R=>D.createElement("link",{key:R,rel:"modulepreload",href:R,...n})),E.map(({key:R,link:O})=>D.createElement("link",{key:R,nonce:n.nonce,...O})))}function zk(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var c1=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{c1&&(window.__reactRouterVersion="7.8.2")}catch{}function qk({basename:t,children:e,window:n}){let r=D.useRef();r.current==null&&(r.current=xO({window:n,v5Compat:!0}));let i=r.current,[o,u]=D.useState({action:i.action,location:i.location}),h=D.useCallback(d=>{D.startTransition(()=>u(d))},[u]);return D.useLayoutEffect(()=>i.listen(h),[i,h]),D.createElement(vk,{basename:t,children:e,location:o.location,navigationType:o.action,navigator:i})}var h1=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Iv=D.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:i,reloadDocument:o,replace:u,state:h,target:d,to:m,preventScrollReset:g,viewTransition:_,...w},E){let{basename:R}=D.useContext(ns),O=typeof m=="string"&&h1.test(m),I,P=!1;if(typeof m=="string"&&O&&(I=m,c1))try{let k=new URL(window.location.href),B=m.startsWith("//")?new URL(k.protocol+m):new URL(m),q=Ms(B.pathname,R);B.origin===k.origin&&q!=null?m=q+B.search+B.hash:P=!0}catch{Tr(!1,`<Link to="${m}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let V=ek(m,{relative:i}),[M,J,X]=Lk(r,w),oe=Hk(m,{replace:u,state:h,target:d,preventScrollReset:g,relative:i,viewTransition:_});function L(k){e&&e(k),k.defaultPrevented||oe(k)}let C=D.createElement("a",{...w,...X,href:I||V,onClick:P||o?e:L,ref:zk(E,J),target:d,"data-discover":!O&&n==="render"?"true":void 0});return M&&!O?D.createElement(D.Fragment,null,C,D.createElement(jk,{page:V})):C});Iv.displayName="Link";var Va=D.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:i=!1,style:o,to:u,viewTransition:h,children:d,...m},g){let _=Jc(u,{relative:m.relative}),w=Ar(),E=D.useContext(Kf),{navigator:R,basename:O}=D.useContext(ns),I=E!=null&&Qk(_)&&h===!0,P=R.encodeLocation?R.encodeLocation(_).pathname:_.pathname,V=w.pathname,M=E&&E.navigation&&E.navigation.location?E.navigation.location.pathname:null;n||(V=V.toLowerCase(),M=M?M.toLowerCase():null,P=P.toLowerCase()),M&&O&&(M=Ms(M,O)||M);const J=P!=="/"&&P.endsWith("/")?P.length-1:P.length;let X=V===P||!i&&V.startsWith(P)&&V.charAt(J)==="/",oe=M!=null&&(M===P||!i&&M.startsWith(P)&&M.charAt(P.length)==="/"),L={isActive:X,isPending:oe,isTransitioning:I},C=X?e:void 0,k;typeof r=="function"?k=r(L):k=[r,X?"active":null,oe?"pending":null,I?"transitioning":null].filter(Boolean).join(" ");let B=typeof o=="function"?o(L):o;return D.createElement(Iv,{...m,"aria-current":C,className:k,ref:g,style:B,to:u,viewTransition:h},typeof d=="function"?d(L):d)});Va.displayName="NavLink";var $k=D.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:i,state:o,method:u=ef,action:h,onSubmit:d,relative:m,preventScrollReset:g,viewTransition:_,...w},E)=>{let R=Wk(),O=Yk(h,{relative:m}),I=u.toLowerCase()==="get"?"get":"post",P=typeof h=="string"&&h1.test(h),V=M=>{if(d&&d(M),M.defaultPrevented)return;M.preventDefault();let J=M.nativeEvent.submitter,X=J?.getAttribute("formmethod")||u;R(J||M.currentTarget,{fetcherKey:e,method:X,navigate:n,replace:i,state:o,relative:m,preventScrollReset:g,viewTransition:_})};return D.createElement("form",{ref:E,method:I,action:O,onSubmit:r?d:V,...w,"data-discover":!P&&t==="render"?"true":void 0})});$k.displayName="Form";function Fk(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function d1(t){let e=D.useContext(Ml);return mt(e,Fk(t)),e}function Hk(t,{target:e,replace:n,state:r,preventScrollReset:i,relative:o,viewTransition:u}={}){let h=Ll(),d=Ar(),m=Jc(t,{relative:o});return D.useCallback(g=>{if(Sk(g,e)){g.preventDefault();let _=n!==void 0?n:xc(d)===xc(m);h(t,{replace:_,state:r,preventScrollReset:i,relative:o,viewTransition:u})}},[d,h,m,n,r,e,t,i,o,u])}var Gk=0,Kk=()=>`__${String(++Gk)}__`;function Wk(){let{router:t}=d1("useSubmit"),{basename:e}=D.useContext(ns),n=mk();return D.useCallback(async(r,i={})=>{let{action:o,method:u,encType:h,formData:d,body:m}=xk(r,e);if(i.navigate===!1){let g=i.fetcherKey||Kk();await t.fetch(g,n,i.action||o,{preventScrollReset:i.preventScrollReset,formData:d,body:m,formMethod:i.method||u,formEncType:i.encType||h,flushSync:i.flushSync})}else await t.navigate(i.action||o,{preventScrollReset:i.preventScrollReset,formData:d,body:m,formMethod:i.method||u,formEncType:i.encType||h,replace:i.replace,state:i.state,fromRouteId:n,flushSync:i.flushSync,viewTransition:i.viewTransition})},[t,e,n])}function Yk(t,{relative:e}={}){let{basename:n}=D.useContext(ns),r=D.useContext(Sr);mt(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),o={...Jc(t||".",{relative:e})},u=Ar();if(t==null){o.search=u.search;let h=new URLSearchParams(o.search),d=h.getAll("index");if(d.some(g=>g==="")){h.delete("index"),d.filter(_=>_).forEach(_=>h.append("index",_));let g=h.toString();o.search=g?`?${g}`:""}}return(!t||t===".")&&i.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(o.pathname=o.pathname==="/"?n:Ns([n,o.pathname])),xc(o)}function Qk(t,{relative:e}={}){let n=D.useContext(n1);mt(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=d1("useViewTransitionState"),i=Jc(t,{relative:e});if(!n.isTransitioning)return!1;let o=Ms(n.currentLocation.pathname,r)||n.currentLocation.pathname,u=Ms(n.nextLocation.pathname,r)||n.nextLocation.pathname;return vf(i.pathname,u)!=null||vf(i.pathname,o)!=null}const Xk=()=>{const t=({isActive:n})=>`flex flex-col items-center justify-center p-3 rounded-lg hover:bg-gray-100 md:flex-row md:justify-center ${n?"text-blue-600":"text-gray-500"}`;return x.jsx("nav",{className:`fixed bottom-0 left-0 w-full bg-white shadow-2xl z-10 
    md:fixed md:right-0 md:top-[4rem] md:h-[calc(100vh-4rem)] md:shadow-lg md:rounded-l-lg
    md:flex md:flex-col md:p-4 transition-all duration-500 smooth-transition 
    md:w-20`,children:x.jsxs("div",{className:"flex justify-around items-center h-16 md:h-auto md:flex-col md:items-stretch md:space-y-6",children:[x.jsxs(Va,{to:"/",className:t,children:[x.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:x.jsx("path",{d:"M3 9H21M9 15L11 17L15 13M7 3V5M17 3V5M6.2 21H17.8C18.9201 21 19.4802 21 19.908 20.782C20.2843 20.5903 20.5903 20.2843 20.782 19.908C21 19.4802 21 18.9201 21 17.8V8.2C21 7.07989 21 6.51984 20.782 6.09202C20.5903 5.71569 20.2843 5.40973 19.908 5.21799C19.4802 5 18.9201 5 17.8 5H6.2C5.0799 5 4.51984 5 4.09202 5.21799C3.71569 5.40973 3.40973 5.71569 3.21799 6.09202C3 6.51984 3 7.07989 3 8.2V17.8C3 18.9201 3 19.4802 3.21799 19.908C3.40973 20.2843 3.71569 20.5903 4.09202 20.782C4.51984 21 5.07989 21 6.2 21Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),x.jsx("span",{className:"text-xs mt-1 md:hidden",children:""})]}),x.jsxs(Va,{to:"/evaluations",className:t,children:[x.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 294.023 294.023",children:x.jsx("path",{d:"M124.916,0.002 c-1.649,0.045-3.169,0.9-4.064,2.285l-14.49,21.736h-49.35c-2.761,0-5,2.239-5,5v50c0,2.761,2.239,5,5,5h50c2.761,0,5-2.239,5-5 V39.574l-10,15v19.449h-40v-40h37.682L85.631,55.117l-6.146-12.293c-1.205-2.485-4.196-3.523-6.681-2.318 c-2.485,1.205-3.523,4.196-2.318,6.681c0.018,0.036,0.035,0.072,0.054,0.108l10,20c1.235,2.47,4.238,3.472,6.709,2.237 c0.778-0.389,1.441-0.974,1.924-1.698l40-60c1.565-2.276,0.989-5.389-1.287-6.954C127.013,0.281,125.974-0.027,124.916,0.002 L124.916,0.002z M147.012,44.025c-2.761,0-5,2.239-5,5v10c0,2.761,2.239,5,5,5h90c2.761,0,5-2.239,5-5v-10c0-2.761-2.239-5-5-5 H147.012z M57.012,94.06c-2.761,0-5,2.239-5,5v50c0,2.761,2.239,5,5,5h50c2.761,0,5-2.239,5-5v-50c0-2.761-2.239-5-5-5H57.012z M62.012,104.06h40v40h-40V104.06z M147.012,114.023c-2.761,0-5,2.239-5,5v10c0,2.761,2.239,5,5,5h90c2.761,0,5-2.239,5-5v-10 c0-2.761-2.239-5-5-5H147.012z M57.012,164.023c-2.761,0-5,2.239-5,5v50c0,2.761,2.239,5,5,5h50c2.761,0,5-2.239,5-5v-50 c0-2.761-2.239-5-5-5H57.012z M62.012,174.023h40v40h-40V174.023z M147.012,184.058c-2.761,0-5,2.239-5,5v10c0,2.761,2.239,5,5,5h90 c2.761,0,5-2.239,5-5v-10c0-2.761-2.239-5-5-5H147.012z M57.012,234.023c-2.761,0-5,2.239-5,5v50c0,2.761,2.239,5,5,5h50 c2.761,0,5-2.239,5-5v-50c0-2.761-2.239-5-5-5L57.012,234.023L57.012,234.023z M62.012,244.023h40v40h-40V244.023z M147.012,254.023 c-2.761,0-5,2.239-5,5v10c0,2.761,2.239,5,5,5h90c2.761,0,5-2.239,5-5v-10c0-2.761-2.239-5-5-5H147.012z"})}),x.jsx("span",{className:"text-xs mt-1 md:hidden",children:""})]}),x.jsxs(Va,{to:"/leaderboard",className:`${t} hidden md:flex`,children:[x.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.196-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.783-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})}),x.jsx("span",{className:"text-xs mt-1 md:hidden",children:""})]}),x.jsxs(Va,{to:"/store",className:t,children:[x.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:x.jsx("path",{d:"M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4H6zM3 6h18M16 10a4 4 0 1 1-8 0",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),x.jsx("span",{className:"text-xs mt-1 md:hidden",children:""})]}),x.jsxs(Va,{to:"/profile",className:t,children:[x.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:x.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2M12 11a4 4 0 1 0 0-8 4 4 0 0 0 0 8z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),x.jsx("span",{className:"text-xs mt-1 md:hidden",children:" "})]})]})})},Jk=()=>{};var jT={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f1=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},Zk=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=t[n++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){const o=t[n++],u=t[n++],h=t[n++],d=((i&7)<<18|(o&63)<<12|(u&63)<<6|h&63)-65536;e[r++]=String.fromCharCode(55296+(d>>10)),e[r++]=String.fromCharCode(56320+(d&1023))}else{const o=t[n++],u=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|u&63)}}return e.join("")},m1={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const o=t[i],u=i+1<t.length,h=u?t[i+1]:0,d=i+2<t.length,m=d?t[i+2]:0,g=o>>2,_=(o&3)<<4|h>>4;let w=(h&15)<<2|m>>6,E=m&63;d||(E=64,u||(w=64)),r.push(n[g],n[_],n[w],n[E])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(f1(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Zk(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const o=n[t.charAt(i++)],h=i<t.length?n[t.charAt(i)]:0;++i;const m=i<t.length?n[t.charAt(i)]:64;++i;const _=i<t.length?n[t.charAt(i)]:64;if(++i,o==null||h==null||m==null||_==null)throw new eD;const w=o<<2|h>>4;if(r.push(w),m!==64){const E=h<<4&240|m>>2;if(r.push(E),_!==64){const R=m<<6&192|_;r.push(R)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class eD extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const tD=function(t){const e=f1(t);return m1.encodeByteArray(e,!0)},_f=function(t){return tD(t).replace(/\./g,"")},p1=function(t){try{return m1.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nD(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rD=()=>nD().__FIREBASE_DEFAULTS__,sD=()=>{if(typeof process>"u"||typeof jT>"u")return;const t=jT.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},iD=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&p1(t[1]);return e&&JSON.parse(e)},Yf=()=>{try{return Jk()||rD()||sD()||iD()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},g1=t=>Yf()?.emulatorHosts?.[t],aD=t=>{const e=g1(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},y1=()=>Yf()?.config,v1=t=>Yf()?.[`_${t}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let oD=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jl(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function _1(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lD(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...t};return[_f(JSON.stringify(n)),_f(JSON.stringify(u)),""].join(".")}const mc={};function uD(){const t={prod:[],emulator:[]};for(const e of Object.keys(mc))mc[e]?t.emulator.push(e):t.prod.push(e);return t}function cD(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let UT=!1;function w1(t,e){if(typeof window>"u"||typeof document>"u"||!jl(window.location.host)||mc[t]===e||mc[t]||UT)return;mc[t]=e;function n(w){return`__firebase__banner__${w}`}const r="__firebase__banner",o=uD().prod.length>0;function u(){const w=document.getElementById(r);w&&w.remove()}function h(w){w.style.display="flex",w.style.background="#7faaf0",w.style.position="fixed",w.style.bottom="5px",w.style.left="5px",w.style.padding=".5em",w.style.borderRadius="5px",w.style.alignItems="center"}function d(w,E){w.setAttribute("width","24"),w.setAttribute("id",E),w.setAttribute("height","24"),w.setAttribute("viewBox","0 0 24 24"),w.setAttribute("fill","none"),w.style.marginLeft="-6px"}function m(){const w=document.createElement("span");return w.style.cursor="pointer",w.style.marginLeft="16px",w.style.fontSize="24px",w.innerHTML=" &times;",w.onclick=()=>{UT=!0,u()},w}function g(w,E){w.setAttribute("id",E),w.innerText="Learn more",w.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",w.setAttribute("target","__blank"),w.style.paddingLeft="5px",w.style.textDecoration="underline"}function _(){const w=cD(r),E=n("text"),R=document.getElementById(E)||document.createElement("span"),O=n("learnmore"),I=document.getElementById(O)||document.createElement("a"),P=n("preprendIcon"),V=document.getElementById(P)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(w.created){const M=w.element;h(M),g(I,O);const J=m();d(V,P),M.append(V,R,I,J),document.body.appendChild(M)}o?(R.innerText="Preview backend disconnected.",V.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(V.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,R.innerText="Preview backend running in this workspace."),R.setAttribute("id",E)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",_):_()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function hD(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(yn())}function dD(){const t=Yf()?.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function fD(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function mD(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function pD(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function gD(){const t=yn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function yD(){return!dD()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function vD(){try{return typeof indexedDB=="object"}catch{return!1}}function _D(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wD="FirebaseError";class Fs extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=wD,Object.setPrototypeOf(this,Fs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Zc.prototype.create)}}class Zc{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],u=o?bD(o,r):"Error",h=`${this.serviceName}: ${u} (${i}).`;return new Fs(i,h,r)}}function bD(t,e){return t.replace(TD,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const TD=/\{\$([^}]+)}/g;function ED(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Wa(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const o=t[i],u=e[i];if(BT(o)&&BT(u)){if(!Wa(o,u))return!1}else if(o!==u)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function BT(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eh(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function SD(t,e){const n=new AD(t,e);return n.subscribe.bind(n)}class AD{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");RD(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Dg),i.error===void 0&&(i.error=Dg),i.complete===void 0&&(i.complete=Dg);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function RD(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Dg(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function En(t){return t&&t._delegate?t._delegate:t}class Ya{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Da="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xD{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new oD;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(ID(e))try{this.getOrInitializeService({instanceIdentifier:Da})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=Da){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Da){return this.instances.has(e)}getOptions(e=Da){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[o,u]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(o);r===h&&u.resolve(i)}return i}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:CD(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Da){return this.component?this.component.multipleInstances?e:Da:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function CD(t){return t===Da?void 0:t}function ID(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OD{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new xD(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Le;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Le||(Le={}));const kD={debug:Le.DEBUG,verbose:Le.VERBOSE,info:Le.INFO,warn:Le.WARN,error:Le.ERROR,silent:Le.SILENT},DD=Le.INFO,PD={[Le.DEBUG]:"log",[Le.VERBOSE]:"log",[Le.INFO]:"info",[Le.WARN]:"warn",[Le.ERROR]:"error"},ND=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=PD[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Ov{constructor(e){this.name=e,this._logLevel=DD,this._logHandler=ND,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Le))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?kD[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Le.DEBUG,...e),this._logHandler(this,Le.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Le.VERBOSE,...e),this._logHandler(this,Le.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Le.INFO,...e),this._logHandler(this,Le.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Le.WARN,...e),this._logHandler(this,Le.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Le.ERROR,...e),this._logHandler(this,Le.ERROR,...e)}}const VD=(t,e)=>e.some(n=>t instanceof n);let zT,qT;function MD(){return zT||(zT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function LD(){return qT||(qT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const b1=new WeakMap,gy=new WeakMap,T1=new WeakMap,Pg=new WeakMap,kv=new WeakMap;function jD(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",u)},o=()=>{n(Oi(t.result)),i()},u=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",u)});return e.then(n=>{n instanceof IDBCursor&&b1.set(n,t)}).catch(()=>{}),kv.set(e,t),e}function UD(t){if(gy.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",u),t.removeEventListener("abort",u)},o=()=>{n(),i()},u=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",u),t.addEventListener("abort",u)});gy.set(t,e)}let yy={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return gy.get(t);if(e==="objectStoreNames")return t.objectStoreNames||T1.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Oi(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function BD(t){yy=t(yy)}function zD(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Ng(this),e,...n);return T1.set(r,e.sort?e.sort():[e]),Oi(r)}:LD().includes(t)?function(...e){return t.apply(Ng(this),e),Oi(b1.get(this))}:function(...e){return Oi(t.apply(Ng(this),e))}}function qD(t){return typeof t=="function"?zD(t):(t instanceof IDBTransaction&&UD(t),VD(t,MD())?new Proxy(t,yy):t)}function Oi(t){if(t instanceof IDBRequest)return jD(t);if(Pg.has(t))return Pg.get(t);const e=qD(t);return e!==t&&(Pg.set(t,e),kv.set(e,t)),e}const Ng=t=>kv.get(t);function $D(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){const u=indexedDB.open(t,e),h=Oi(u);return r&&u.addEventListener("upgradeneeded",d=>{r(Oi(u.result),d.oldVersion,d.newVersion,Oi(u.transaction),d)}),n&&u.addEventListener("blocked",d=>n(d.oldVersion,d.newVersion,d)),h.then(d=>{o&&d.addEventListener("close",()=>o()),i&&d.addEventListener("versionchange",m=>i(m.oldVersion,m.newVersion,m))}).catch(()=>{}),h}const FD=["get","getKey","getAll","getAllKeys","count"],HD=["put","add","delete","clear"],Vg=new Map;function $T(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Vg.get(e))return Vg.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=HD.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||FD.includes(n)))return;const o=async function(u,...h){const d=this.transaction(u,i?"readwrite":"readonly");let m=d.store;return r&&(m=m.index(h.shift())),(await Promise.all([m[n](...h),i&&d.done]))[0]};return Vg.set(e,o),o}BD(t=>({...t,get:(e,n,r)=>$T(e,n)||t.get(e,n,r),has:(e,n)=>!!$T(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GD{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(KD(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function KD(t){return t.getComponent()?.type==="VERSION"}const vy="@firebase/app",FT="0.14.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ls=new Ov("@firebase/app"),WD="@firebase/app-compat",YD="@firebase/analytics-compat",QD="@firebase/analytics",XD="@firebase/app-check-compat",JD="@firebase/app-check",ZD="@firebase/auth",eP="@firebase/auth-compat",tP="@firebase/database",nP="@firebase/data-connect",rP="@firebase/database-compat",sP="@firebase/functions",iP="@firebase/functions-compat",aP="@firebase/installations",oP="@firebase/installations-compat",lP="@firebase/messaging",uP="@firebase/messaging-compat",cP="@firebase/performance",hP="@firebase/performance-compat",dP="@firebase/remote-config",fP="@firebase/remote-config-compat",mP="@firebase/storage",pP="@firebase/storage-compat",gP="@firebase/firestore",yP="@firebase/ai",vP="@firebase/firestore-compat",_P="firebase",wP="12.2.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _y="[DEFAULT]",bP={[vy]:"fire-core",[WD]:"fire-core-compat",[QD]:"fire-analytics",[YD]:"fire-analytics-compat",[JD]:"fire-app-check",[XD]:"fire-app-check-compat",[ZD]:"fire-auth",[eP]:"fire-auth-compat",[tP]:"fire-rtdb",[nP]:"fire-data-connect",[rP]:"fire-rtdb-compat",[sP]:"fire-fn",[iP]:"fire-fn-compat",[aP]:"fire-iid",[oP]:"fire-iid-compat",[lP]:"fire-fcm",[uP]:"fire-fcm-compat",[cP]:"fire-perf",[hP]:"fire-perf-compat",[dP]:"fire-rc",[fP]:"fire-rc-compat",[mP]:"fire-gcs",[pP]:"fire-gcs-compat",[gP]:"fire-fst",[vP]:"fire-fst-compat",[yP]:"fire-vertex","fire-js":"fire-js",[_P]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wf=new Map,TP=new Map,wy=new Map;function HT(t,e){try{t.container.addComponent(e)}catch(n){Ls.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Rl(t){const e=t.name;if(wy.has(e))return Ls.debug(`There were multiple attempts to register component ${e}.`),!1;wy.set(e,t);for(const n of wf.values())HT(n,t);for(const n of TP.values())HT(n,t);return!0}function Dv(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function yr(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EP={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ki=new Zc("app","Firebase",EP);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SP{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ya("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ki.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ul=wP;function E1(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:_y,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw ki.create("bad-app-name",{appName:String(i)});if(n||(n=y1()),!n)throw ki.create("no-options");const o=wf.get(i);if(o){if(Wa(n,o.options)&&Wa(r,o.config))return o;throw ki.create("duplicate-app",{appName:i})}const u=new OD(i);for(const d of wy.values())u.addComponent(d);const h=new SP(n,r,u);return wf.set(i,h),h}function S1(t=_y){const e=wf.get(t);if(!e&&t===_y&&y1())return E1();if(!e)throw ki.create("no-app",{appName:t});return e}function Di(t,e,n){let r=bP[t]??t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const u=[`Unable to register library "${r}" with version "${e}":`];i&&u.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&o&&u.push("and"),o&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ls.warn(u.join(" "));return}Rl(new Ya(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AP="firebase-heartbeat-database",RP=1,Cc="firebase-heartbeat-store";let Mg=null;function A1(){return Mg||(Mg=$D(AP,RP,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Cc)}catch(n){console.warn(n)}}}}).catch(t=>{throw ki.create("idb-open",{originalErrorMessage:t.message})})),Mg}async function xP(t){try{const n=(await A1()).transaction(Cc),r=await n.objectStore(Cc).get(R1(t));return await n.done,r}catch(e){if(e instanceof Fs)Ls.warn(e.message);else{const n=ki.create("idb-get",{originalErrorMessage:e?.message});Ls.warn(n.message)}}}async function GT(t,e){try{const r=(await A1()).transaction(Cc,"readwrite");await r.objectStore(Cc).put(e,R1(t)),await r.done}catch(n){if(n instanceof Fs)Ls.warn(n.message);else{const r=ki.create("idb-set",{originalErrorMessage:n?.message});Ls.warn(r.message)}}}function R1(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CP=1024,IP=30;class OP{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new DP(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=KT();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>IP){const i=PP(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Ls.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=KT(),{heartbeatsToSend:n,unsentEntries:r}=kP(this._heartbeatsCache.heartbeats),i=_f(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return Ls.warn(e),""}}}function KT(){return new Date().toISOString().substring(0,10)}function kP(t,e=CP){const n=[];let r=t.slice();for(const i of t){const o=n.find(u=>u.agent===i.agent);if(o){if(o.dates.push(i.date),WT(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),WT(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class DP{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return vD()?_D().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await xP(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return GT(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return GT(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function WT(t){return _f(JSON.stringify({version:2,heartbeats:t})).length}function PP(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NP(t){Rl(new Ya("platform-logger",e=>new GD(e),"PRIVATE")),Rl(new Ya("heartbeat",e=>new OP(e),"PRIVATE")),Di(vy,FT,t),Di(vy,FT,"esm2020"),Di("fire-js","")}NP("");var YT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Pi,x1;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(L,C){function k(){}k.prototype=C.prototype,L.D=C.prototype,L.prototype=new k,L.prototype.constructor=L,L.C=function(B,q,F){for(var j=Array(arguments.length-2),xt=2;xt<arguments.length;xt++)j[xt-2]=arguments[xt];return C.prototype[q].apply(B,j)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(L,C,k){k||(k=0);var B=Array(16);if(typeof C=="string")for(var q=0;16>q;++q)B[q]=C.charCodeAt(k++)|C.charCodeAt(k++)<<8|C.charCodeAt(k++)<<16|C.charCodeAt(k++)<<24;else for(q=0;16>q;++q)B[q]=C[k++]|C[k++]<<8|C[k++]<<16|C[k++]<<24;C=L.g[0],k=L.g[1],q=L.g[2];var F=L.g[3],j=C+(F^k&(q^F))+B[0]+3614090360&4294967295;C=k+(j<<7&4294967295|j>>>25),j=F+(q^C&(k^q))+B[1]+3905402710&4294967295,F=C+(j<<12&4294967295|j>>>20),j=q+(k^F&(C^k))+B[2]+606105819&4294967295,q=F+(j<<17&4294967295|j>>>15),j=k+(C^q&(F^C))+B[3]+3250441966&4294967295,k=q+(j<<22&4294967295|j>>>10),j=C+(F^k&(q^F))+B[4]+4118548399&4294967295,C=k+(j<<7&4294967295|j>>>25),j=F+(q^C&(k^q))+B[5]+1200080426&4294967295,F=C+(j<<12&4294967295|j>>>20),j=q+(k^F&(C^k))+B[6]+2821735955&4294967295,q=F+(j<<17&4294967295|j>>>15),j=k+(C^q&(F^C))+B[7]+4249261313&4294967295,k=q+(j<<22&4294967295|j>>>10),j=C+(F^k&(q^F))+B[8]+1770035416&4294967295,C=k+(j<<7&4294967295|j>>>25),j=F+(q^C&(k^q))+B[9]+2336552879&4294967295,F=C+(j<<12&4294967295|j>>>20),j=q+(k^F&(C^k))+B[10]+4294925233&4294967295,q=F+(j<<17&4294967295|j>>>15),j=k+(C^q&(F^C))+B[11]+2304563134&4294967295,k=q+(j<<22&4294967295|j>>>10),j=C+(F^k&(q^F))+B[12]+1804603682&4294967295,C=k+(j<<7&4294967295|j>>>25),j=F+(q^C&(k^q))+B[13]+4254626195&4294967295,F=C+(j<<12&4294967295|j>>>20),j=q+(k^F&(C^k))+B[14]+2792965006&4294967295,q=F+(j<<17&4294967295|j>>>15),j=k+(C^q&(F^C))+B[15]+1236535329&4294967295,k=q+(j<<22&4294967295|j>>>10),j=C+(q^F&(k^q))+B[1]+4129170786&4294967295,C=k+(j<<5&4294967295|j>>>27),j=F+(k^q&(C^k))+B[6]+3225465664&4294967295,F=C+(j<<9&4294967295|j>>>23),j=q+(C^k&(F^C))+B[11]+643717713&4294967295,q=F+(j<<14&4294967295|j>>>18),j=k+(F^C&(q^F))+B[0]+3921069994&4294967295,k=q+(j<<20&4294967295|j>>>12),j=C+(q^F&(k^q))+B[5]+3593408605&4294967295,C=k+(j<<5&4294967295|j>>>27),j=F+(k^q&(C^k))+B[10]+38016083&4294967295,F=C+(j<<9&4294967295|j>>>23),j=q+(C^k&(F^C))+B[15]+3634488961&4294967295,q=F+(j<<14&4294967295|j>>>18),j=k+(F^C&(q^F))+B[4]+3889429448&4294967295,k=q+(j<<20&4294967295|j>>>12),j=C+(q^F&(k^q))+B[9]+568446438&4294967295,C=k+(j<<5&4294967295|j>>>27),j=F+(k^q&(C^k))+B[14]+3275163606&4294967295,F=C+(j<<9&4294967295|j>>>23),j=q+(C^k&(F^C))+B[3]+4107603335&4294967295,q=F+(j<<14&4294967295|j>>>18),j=k+(F^C&(q^F))+B[8]+1163531501&4294967295,k=q+(j<<20&4294967295|j>>>12),j=C+(q^F&(k^q))+B[13]+2850285829&4294967295,C=k+(j<<5&4294967295|j>>>27),j=F+(k^q&(C^k))+B[2]+4243563512&4294967295,F=C+(j<<9&4294967295|j>>>23),j=q+(C^k&(F^C))+B[7]+1735328473&4294967295,q=F+(j<<14&4294967295|j>>>18),j=k+(F^C&(q^F))+B[12]+2368359562&4294967295,k=q+(j<<20&4294967295|j>>>12),j=C+(k^q^F)+B[5]+4294588738&4294967295,C=k+(j<<4&4294967295|j>>>28),j=F+(C^k^q)+B[8]+2272392833&4294967295,F=C+(j<<11&4294967295|j>>>21),j=q+(F^C^k)+B[11]+1839030562&4294967295,q=F+(j<<16&4294967295|j>>>16),j=k+(q^F^C)+B[14]+4259657740&4294967295,k=q+(j<<23&4294967295|j>>>9),j=C+(k^q^F)+B[1]+2763975236&4294967295,C=k+(j<<4&4294967295|j>>>28),j=F+(C^k^q)+B[4]+1272893353&4294967295,F=C+(j<<11&4294967295|j>>>21),j=q+(F^C^k)+B[7]+4139469664&4294967295,q=F+(j<<16&4294967295|j>>>16),j=k+(q^F^C)+B[10]+3200236656&4294967295,k=q+(j<<23&4294967295|j>>>9),j=C+(k^q^F)+B[13]+681279174&4294967295,C=k+(j<<4&4294967295|j>>>28),j=F+(C^k^q)+B[0]+3936430074&4294967295,F=C+(j<<11&4294967295|j>>>21),j=q+(F^C^k)+B[3]+3572445317&4294967295,q=F+(j<<16&4294967295|j>>>16),j=k+(q^F^C)+B[6]+76029189&4294967295,k=q+(j<<23&4294967295|j>>>9),j=C+(k^q^F)+B[9]+3654602809&4294967295,C=k+(j<<4&4294967295|j>>>28),j=F+(C^k^q)+B[12]+3873151461&4294967295,F=C+(j<<11&4294967295|j>>>21),j=q+(F^C^k)+B[15]+530742520&4294967295,q=F+(j<<16&4294967295|j>>>16),j=k+(q^F^C)+B[2]+3299628645&4294967295,k=q+(j<<23&4294967295|j>>>9),j=C+(q^(k|~F))+B[0]+4096336452&4294967295,C=k+(j<<6&4294967295|j>>>26),j=F+(k^(C|~q))+B[7]+1126891415&4294967295,F=C+(j<<10&4294967295|j>>>22),j=q+(C^(F|~k))+B[14]+2878612391&4294967295,q=F+(j<<15&4294967295|j>>>17),j=k+(F^(q|~C))+B[5]+4237533241&4294967295,k=q+(j<<21&4294967295|j>>>11),j=C+(q^(k|~F))+B[12]+1700485571&4294967295,C=k+(j<<6&4294967295|j>>>26),j=F+(k^(C|~q))+B[3]+2399980690&4294967295,F=C+(j<<10&4294967295|j>>>22),j=q+(C^(F|~k))+B[10]+4293915773&4294967295,q=F+(j<<15&4294967295|j>>>17),j=k+(F^(q|~C))+B[1]+2240044497&4294967295,k=q+(j<<21&4294967295|j>>>11),j=C+(q^(k|~F))+B[8]+1873313359&4294967295,C=k+(j<<6&4294967295|j>>>26),j=F+(k^(C|~q))+B[15]+4264355552&4294967295,F=C+(j<<10&4294967295|j>>>22),j=q+(C^(F|~k))+B[6]+2734768916&4294967295,q=F+(j<<15&4294967295|j>>>17),j=k+(F^(q|~C))+B[13]+1309151649&4294967295,k=q+(j<<21&4294967295|j>>>11),j=C+(q^(k|~F))+B[4]+4149444226&4294967295,C=k+(j<<6&4294967295|j>>>26),j=F+(k^(C|~q))+B[11]+3174756917&4294967295,F=C+(j<<10&4294967295|j>>>22),j=q+(C^(F|~k))+B[2]+718787259&4294967295,q=F+(j<<15&4294967295|j>>>17),j=k+(F^(q|~C))+B[9]+3951481745&4294967295,L.g[0]=L.g[0]+C&4294967295,L.g[1]=L.g[1]+(q+(j<<21&4294967295|j>>>11))&4294967295,L.g[2]=L.g[2]+q&4294967295,L.g[3]=L.g[3]+F&4294967295}r.prototype.u=function(L,C){C===void 0&&(C=L.length);for(var k=C-this.blockSize,B=this.B,q=this.h,F=0;F<C;){if(q==0)for(;F<=k;)i(this,L,F),F+=this.blockSize;if(typeof L=="string"){for(;F<C;)if(B[q++]=L.charCodeAt(F++),q==this.blockSize){i(this,B),q=0;break}}else for(;F<C;)if(B[q++]=L[F++],q==this.blockSize){i(this,B),q=0;break}}this.h=q,this.o+=C},r.prototype.v=function(){var L=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);L[0]=128;for(var C=1;C<L.length-8;++C)L[C]=0;var k=8*this.o;for(C=L.length-8;C<L.length;++C)L[C]=k&255,k/=256;for(this.u(L),L=Array(16),C=k=0;4>C;++C)for(var B=0;32>B;B+=8)L[k++]=this.g[C]>>>B&255;return L};function o(L,C){var k=h;return Object.prototype.hasOwnProperty.call(k,L)?k[L]:k[L]=C(L)}function u(L,C){this.h=C;for(var k=[],B=!0,q=L.length-1;0<=q;q--){var F=L[q]|0;B&&F==C||(k[q]=F,B=!1)}this.g=k}var h={};function d(L){return-128<=L&&128>L?o(L,function(C){return new u([C|0],0>C?-1:0)}):new u([L|0],0>L?-1:0)}function m(L){if(isNaN(L)||!isFinite(L))return _;if(0>L)return I(m(-L));for(var C=[],k=1,B=0;L>=k;B++)C[B]=L/k|0,k*=4294967296;return new u(C,0)}function g(L,C){if(L.length==0)throw Error("number format error: empty string");if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(L.charAt(0)=="-")return I(g(L.substring(1),C));if(0<=L.indexOf("-"))throw Error('number format error: interior "-" character');for(var k=m(Math.pow(C,8)),B=_,q=0;q<L.length;q+=8){var F=Math.min(8,L.length-q),j=parseInt(L.substring(q,q+F),C);8>F?(F=m(Math.pow(C,F)),B=B.j(F).add(m(j))):(B=B.j(k),B=B.add(m(j)))}return B}var _=d(0),w=d(1),E=d(16777216);t=u.prototype,t.m=function(){if(O(this))return-I(this).m();for(var L=0,C=1,k=0;k<this.g.length;k++){var B=this.i(k);L+=(0<=B?B:4294967296+B)*C,C*=4294967296}return L},t.toString=function(L){if(L=L||10,2>L||36<L)throw Error("radix out of range: "+L);if(R(this))return"0";if(O(this))return"-"+I(this).toString(L);for(var C=m(Math.pow(L,6)),k=this,B="";;){var q=J(k,C).g;k=P(k,q.j(C));var F=((0<k.g.length?k.g[0]:k.h)>>>0).toString(L);if(k=q,R(k))return F+B;for(;6>F.length;)F="0"+F;B=F+B}},t.i=function(L){return 0>L?0:L<this.g.length?this.g[L]:this.h};function R(L){if(L.h!=0)return!1;for(var C=0;C<L.g.length;C++)if(L.g[C]!=0)return!1;return!0}function O(L){return L.h==-1}t.l=function(L){return L=P(this,L),O(L)?-1:R(L)?0:1};function I(L){for(var C=L.g.length,k=[],B=0;B<C;B++)k[B]=~L.g[B];return new u(k,~L.h).add(w)}t.abs=function(){return O(this)?I(this):this},t.add=function(L){for(var C=Math.max(this.g.length,L.g.length),k=[],B=0,q=0;q<=C;q++){var F=B+(this.i(q)&65535)+(L.i(q)&65535),j=(F>>>16)+(this.i(q)>>>16)+(L.i(q)>>>16);B=j>>>16,F&=65535,j&=65535,k[q]=j<<16|F}return new u(k,k[k.length-1]&-2147483648?-1:0)};function P(L,C){return L.add(I(C))}t.j=function(L){if(R(this)||R(L))return _;if(O(this))return O(L)?I(this).j(I(L)):I(I(this).j(L));if(O(L))return I(this.j(I(L)));if(0>this.l(E)&&0>L.l(E))return m(this.m()*L.m());for(var C=this.g.length+L.g.length,k=[],B=0;B<2*C;B++)k[B]=0;for(B=0;B<this.g.length;B++)for(var q=0;q<L.g.length;q++){var F=this.i(B)>>>16,j=this.i(B)&65535,xt=L.i(q)>>>16,at=L.i(q)&65535;k[2*B+2*q]+=j*at,V(k,2*B+2*q),k[2*B+2*q+1]+=F*at,V(k,2*B+2*q+1),k[2*B+2*q+1]+=j*xt,V(k,2*B+2*q+1),k[2*B+2*q+2]+=F*xt,V(k,2*B+2*q+2)}for(B=0;B<C;B++)k[B]=k[2*B+1]<<16|k[2*B];for(B=C;B<2*C;B++)k[B]=0;return new u(k,0)};function V(L,C){for(;(L[C]&65535)!=L[C];)L[C+1]+=L[C]>>>16,L[C]&=65535,C++}function M(L,C){this.g=L,this.h=C}function J(L,C){if(R(C))throw Error("division by zero");if(R(L))return new M(_,_);if(O(L))return C=J(I(L),C),new M(I(C.g),I(C.h));if(O(C))return C=J(L,I(C)),new M(I(C.g),C.h);if(30<L.g.length){if(O(L)||O(C))throw Error("slowDivide_ only works with positive integers.");for(var k=w,B=C;0>=B.l(L);)k=X(k),B=X(B);var q=oe(k,1),F=oe(B,1);for(B=oe(B,2),k=oe(k,2);!R(B);){var j=F.add(B);0>=j.l(L)&&(q=q.add(k),F=j),B=oe(B,1),k=oe(k,1)}return C=P(L,q.j(C)),new M(q,C)}for(q=_;0<=L.l(C);){for(k=Math.max(1,Math.floor(L.m()/C.m())),B=Math.ceil(Math.log(k)/Math.LN2),B=48>=B?1:Math.pow(2,B-48),F=m(k),j=F.j(C);O(j)||0<j.l(L);)k-=B,F=m(k),j=F.j(C);R(F)&&(F=w),q=q.add(F),L=P(L,j)}return new M(q,L)}t.A=function(L){return J(this,L).h},t.and=function(L){for(var C=Math.max(this.g.length,L.g.length),k=[],B=0;B<C;B++)k[B]=this.i(B)&L.i(B);return new u(k,this.h&L.h)},t.or=function(L){for(var C=Math.max(this.g.length,L.g.length),k=[],B=0;B<C;B++)k[B]=this.i(B)|L.i(B);return new u(k,this.h|L.h)},t.xor=function(L){for(var C=Math.max(this.g.length,L.g.length),k=[],B=0;B<C;B++)k[B]=this.i(B)^L.i(B);return new u(k,this.h^L.h)};function X(L){for(var C=L.g.length+1,k=[],B=0;B<C;B++)k[B]=L.i(B)<<1|L.i(B-1)>>>31;return new u(k,L.h)}function oe(L,C){var k=C>>5;C%=32;for(var B=L.g.length-k,q=[],F=0;F<B;F++)q[F]=0<C?L.i(F+k)>>>C|L.i(F+k+1)<<32-C:L.i(F+k);return new u(q,L.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,x1=r,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.A,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=m,u.fromString=g,Pi=u}).apply(typeof YT<"u"?YT:typeof self<"u"?self:typeof window<"u"?window:{});var Bd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var C1,lc,I1,nf,by,O1,k1,D1;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(f,v,b){return f==Array.prototype||f==Object.prototype||(f[v]=b.value),f};function n(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof Bd=="object"&&Bd];for(var v=0;v<f.length;++v){var b=f[v];if(b&&b.Math==Math)return b}throw Error("Cannot find global object")}var r=n(this);function i(f,v){if(v)e:{var b=r;f=f.split(".");for(var A=0;A<f.length-1;A++){var H=f[A];if(!(H in b))break e;b=b[H]}f=f[f.length-1],A=b[f],v=v(A),v!=A&&v!=null&&e(b,f,{configurable:!0,writable:!0,value:v})}}function o(f,v){f instanceof String&&(f+="");var b=0,A=!1,H={next:function(){if(!A&&b<f.length){var Q=b++;return{value:v(Q,f[Q]),done:!1}}return A=!0,{done:!0,value:void 0}}};return H[Symbol.iterator]=function(){return H},H}i("Array.prototype.values",function(f){return f||function(){return o(this,function(v,b){return b})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},h=this||self;function d(f){var v=typeof f;return v=v!="object"?v:f?Array.isArray(f)?"array":v:"null",v=="array"||v=="object"&&typeof f.length=="number"}function m(f){var v=typeof f;return v=="object"&&f!=null||v=="function"}function g(f,v,b){return f.call.apply(f.bind,arguments)}function _(f,v,b){if(!f)throw Error();if(2<arguments.length){var A=Array.prototype.slice.call(arguments,2);return function(){var H=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(H,A),f.apply(v,H)}}return function(){return f.apply(v,arguments)}}function w(f,v,b){return w=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?g:_,w.apply(null,arguments)}function E(f,v){var b=Array.prototype.slice.call(arguments,1);return function(){var A=b.slice();return A.push.apply(A,arguments),f.apply(this,A)}}function R(f,v){function b(){}b.prototype=v.prototype,f.aa=v.prototype,f.prototype=new b,f.prototype.constructor=f,f.Qb=function(A,H,Q){for(var ue=Array(arguments.length-2),Be=2;Be<arguments.length;Be++)ue[Be-2]=arguments[Be];return v.prototype[H].apply(A,ue)}}function O(f){const v=f.length;if(0<v){const b=Array(v);for(let A=0;A<v;A++)b[A]=f[A];return b}return[]}function I(f,v){for(let b=1;b<arguments.length;b++){const A=arguments[b];if(d(A)){const H=f.length||0,Q=A.length||0;f.length=H+Q;for(let ue=0;ue<Q;ue++)f[H+ue]=A[ue]}else f.push(A)}}class P{constructor(v,b){this.i=v,this.j=b,this.h=0,this.g=null}get(){let v;return 0<this.h?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function V(f){return/^[\s\xa0]*$/.test(f)}function M(){var f=h.navigator;return f&&(f=f.userAgent)?f:""}function J(f){return J[" "](f),f}J[" "]=function(){};var X=M().indexOf("Gecko")!=-1&&!(M().toLowerCase().indexOf("webkit")!=-1&&M().indexOf("Edge")==-1)&&!(M().indexOf("Trident")!=-1||M().indexOf("MSIE")!=-1)&&M().indexOf("Edge")==-1;function oe(f,v,b){for(const A in f)v.call(b,f[A],A,f)}function L(f,v){for(const b in f)v.call(void 0,f[b],b,f)}function C(f){const v={};for(const b in f)v[b]=f[b];return v}const k="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function B(f,v){let b,A;for(let H=1;H<arguments.length;H++){A=arguments[H];for(b in A)f[b]=A[b];for(let Q=0;Q<k.length;Q++)b=k[Q],Object.prototype.hasOwnProperty.call(A,b)&&(f[b]=A[b])}}function q(f){var v=1;f=f.split(":");const b=[];for(;0<v&&f.length;)b.push(f.shift()),v--;return f.length&&b.push(f.join(":")),b}function F(f){h.setTimeout(()=>{throw f},0)}function j(){var f=ke;let v=null;return f.g&&(v=f.g,f.g=f.g.next,f.g||(f.h=null),v.next=null),v}class xt{constructor(){this.h=this.g=null}add(v,b){const A=at.get();A.set(v,b),this.h?this.h.next=A:this.g=A,this.h=A}}var at=new P(()=>new Z,f=>f.reset());class Z{constructor(){this.next=this.g=this.h=null}set(v,b){this.h=v,this.g=b,this.next=null}reset(){this.next=this.g=this.h=null}}let ae,de=!1,ke=new xt,U=()=>{const f=h.Promise.resolve(void 0);ae=()=>{f.then(ie)}};var ie=()=>{for(var f;f=j();){try{f.h.call(f.g)}catch(b){F(b)}var v=at;v.j(f),100>v.h&&(v.h++,f.next=v.g,v.g=f)}de=!1};function ce(){this.s=this.s,this.C=this.C}ce.prototype.s=!1,ce.prototype.ma=function(){this.s||(this.s=!0,this.N())},ce.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function le(f,v){this.type=f,this.g=this.target=v,this.defaultPrevented=!1}le.prototype.h=function(){this.defaultPrevented=!0};var ve=(function(){if(!h.addEventListener||!Object.defineProperty)return!1;var f=!1,v=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const b=()=>{};h.addEventListener("test",b,v),h.removeEventListener("test",b,v)}catch{}return f})();function Pe(f,v){if(le.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f){var b=this.type=f.type,A=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;if(this.target=f.target||f.srcElement,this.g=v,v=f.relatedTarget){if(X){e:{try{J(v.nodeName);var H=!0;break e}catch{}H=!1}H||(v=null)}}else b=="mouseover"?v=f.fromElement:b=="mouseout"&&(v=f.toElement);this.relatedTarget=v,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=typeof f.pointerType=="string"?f.pointerType:xe[f.pointerType]||"",this.state=f.state,this.i=f,f.defaultPrevented&&Pe.aa.h.call(this)}}R(Pe,le);var xe={2:"touch",3:"pen",4:"mouse"};Pe.prototype.h=function(){Pe.aa.h.call(this);var f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var Ht="closure_listenable_"+(1e6*Math.random()|0),nt=0;function Rr(f,v,b,A,H){this.listener=f,this.proxy=null,this.src=v,this.type=b,this.capture=!!A,this.ha=H,this.key=++nt,this.da=this.fa=!1}function Gs(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function rs(f){this.src=f,this.g={},this.h=0}rs.prototype.add=function(f,v,b,A,H){var Q=f.toString();f=this.g[Q],f||(f=this.g[Q]=[],this.h++);var ue=Ki(f,v,A,H);return-1<ue?(v=f[ue],b||(v.fa=!1)):(v=new Rr(v,this.src,Q,!!A,H),v.fa=b,f.push(v)),v};function Gi(f,v){var b=v.type;if(b in f.g){var A=f.g[b],H=Array.prototype.indexOf.call(A,v,void 0),Q;(Q=0<=H)&&Array.prototype.splice.call(A,H,1),Q&&(Gs(v),f.g[b].length==0&&(delete f.g[b],f.h--))}}function Ki(f,v,b,A){for(var H=0;H<f.length;++H){var Q=f[H];if(!Q.da&&Q.listener==v&&Q.capture==!!b&&Q.ha==A)return H}return-1}var Wi="closure_lm_"+(1e6*Math.random()|0),Ql={};function ph(f,v,b,A,H){if(Array.isArray(v)){for(var Q=0;Q<v.length;Q++)ph(f,v[Q],b,A,H);return null}return b=gh(b),f&&f[Ht]?f.K(v,b,m(A)?!!A.capture:!1,H):qn(f,v,b,!1,A,H)}function qn(f,v,b,A,H,Q){if(!v)throw Error("Invalid event type");var ue=m(H)?!!H.capture:!!H,Be=uo(f);if(Be||(f[Wi]=Be=new rs(f)),b=Be.add(v,b,A,ue,Q),b.proxy)return b;if(A=Sm(),b.proxy=A,A.src=f,A.listener=b,f.addEventListener)ve||(H=ue),H===void 0&&(H=!1),f.addEventListener(v.toString(),A,H);else if(f.attachEvent)f.attachEvent(Yi(v.toString()),A);else if(f.addListener&&f.removeListener)f.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return b}function Sm(){function f(b){return v.call(f.src,f.listener,b)}const v=Am;return f}function Xl(f,v,b,A,H){if(Array.isArray(v))for(var Q=0;Q<v.length;Q++)Xl(f,v[Q],b,A,H);else A=m(A)?!!A.capture:!!A,b=gh(b),f&&f[Ht]?(f=f.i,v=String(v).toString(),v in f.g&&(Q=f.g[v],b=Ki(Q,b,A,H),-1<b&&(Gs(Q[b]),Array.prototype.splice.call(Q,b,1),Q.length==0&&(delete f.g[v],f.h--)))):f&&(f=uo(f))&&(v=f.g[v.toString()],f=-1,v&&(f=Ki(v,b,A,H)),(b=-1<f?v[f]:null)&&lo(b))}function lo(f){if(typeof f!="number"&&f&&!f.da){var v=f.src;if(v&&v[Ht])Gi(v.i,f);else{var b=f.type,A=f.proxy;v.removeEventListener?v.removeEventListener(b,A,f.capture):v.detachEvent?v.detachEvent(Yi(b),A):v.addListener&&v.removeListener&&v.removeListener(A),(b=uo(v))?(Gi(b,f),b.h==0&&(b.src=null,v[Wi]=null)):Gs(f)}}}function Yi(f){return f in Ql?Ql[f]:Ql[f]="on"+f}function Am(f,v){if(f.da)f=!0;else{v=new Pe(v,this);var b=f.listener,A=f.ha||f.src;f.fa&&lo(f),f=b.call(A,v)}return f}function uo(f){return f=f[Wi],f instanceof rs?f:null}var Jl="__closure_events_fn_"+(1e9*Math.random()>>>0);function gh(f){return typeof f=="function"?f:(f[Jl]||(f[Jl]=function(v){return f.handleEvent(v)}),f[Jl])}function gt(){ce.call(this),this.i=new rs(this),this.M=this,this.F=null}R(gt,ce),gt.prototype[Ht]=!0,gt.prototype.removeEventListener=function(f,v,b,A){Xl(this,f,v,b,A)};function We(f,v){var b,A=f.F;if(A)for(b=[];A;A=A.F)b.push(A);if(f=f.M,A=v.type||v,typeof v=="string")v=new le(v,f);else if(v instanceof le)v.target=v.target||f;else{var H=v;v=new le(A,f),B(v,H)}if(H=!0,b)for(var Q=b.length-1;0<=Q;Q--){var ue=v.g=b[Q];H=In(ue,A,!0,v)&&H}if(ue=v.g=f,H=In(ue,A,!0,v)&&H,H=In(ue,A,!1,v)&&H,b)for(Q=0;Q<b.length;Q++)ue=v.g=b[Q],H=In(ue,A,!1,v)&&H}gt.prototype.N=function(){if(gt.aa.N.call(this),this.i){var f=this.i,v;for(v in f.g){for(var b=f.g[v],A=0;A<b.length;A++)Gs(b[A]);delete f.g[v],f.h--}}this.F=null},gt.prototype.K=function(f,v,b,A){return this.i.add(String(f),v,!1,b,A)},gt.prototype.L=function(f,v,b,A){return this.i.add(String(f),v,!0,b,A)};function In(f,v,b,A){if(v=f.i.g[String(v)],!v)return!0;v=v.concat();for(var H=!0,Q=0;Q<v.length;++Q){var ue=v[Q];if(ue&&!ue.da&&ue.capture==b){var Be=ue.listener,jt=ue.ha||ue.src;ue.fa&&Gi(f.i,ue),H=Be.call(jt,A)!==!1&&H}}return H&&!A.defaultPrevented}function cn(f,v,b){if(typeof f=="function")b&&(f=w(f,b));else if(f&&typeof f.handleEvent=="function")f=w(f.handleEvent,f);else throw Error("Invalid listener argument");return 2147483647<Number(v)?-1:h.setTimeout(f,v||0)}function yh(f){f.g=cn(()=>{f.g=null,f.i&&(f.i=!1,yh(f))},f.l);const v=f.h;f.h=null,f.m.apply(null,v)}class Rm extends ce{constructor(v,b){super(),this.m=v,this.l=b,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:yh(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Qi(f){ce.call(this),this.h=f,this.g={}}R(Qi,ce);var Xi=[];function Ji(f){oe(f.g,function(v,b){this.g.hasOwnProperty(b)&&lo(v)},f),f.g={}}Qi.prototype.N=function(){Qi.aa.N.call(this),Ji(this)},Qi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ar=h.JSON.stringify,co=h.JSON.parse,Zi=class{stringify(f){return h.JSON.stringify(f,void 0)}parse(f){return h.JSON.parse(f,void 0)}};function Zl(){}Zl.prototype.h=null;function eu(f){return f.h||(f.h=f.i())}function tu(){}var ss={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function is(){le.call(this,"d")}R(is,le);function nu(){le.call(this,"c")}R(nu,le);var xr={},ru=null;function Ks(){return ru=ru||new gt}xr.La="serverreachability";function ho(f){le.call(this,xr.La,f)}R(ho,le);function Ws(f){const v=Ks();We(v,new ho(v))}xr.STAT_EVENT="statevent";function vh(f,v){le.call(this,xr.STAT_EVENT,f),this.stat=v}R(vh,le);function lt(f){const v=Ks();We(v,new vh(v,f))}xr.Ma="timingevent";function Lt(f,v){le.call(this,xr.Ma,f),this.size=v}R(Lt,le);function Ct(f,v){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){f()},v)}function $n(){this.g=!0}$n.prototype.xa=function(){this.g=!1};function su(f,v,b,A,H,Q){f.info(function(){if(f.g)if(Q)for(var ue="",Be=Q.split("&"),jt=0;jt<Be.length;jt++){var ze=Be[jt].split("=");if(1<ze.length){var Kt=ze[0];ze=ze[1];var Ut=Kt.split("_");ue=2<=Ut.length&&Ut[1]=="type"?ue+(Kt+"="+ze+"&"):ue+(Kt+"=redacted&")}}else ue=null;else ue=Q;return"XMLHTTP REQ ("+A+") [attempt "+H+"]: "+v+`
`+b+`
`+ue})}function xm(f,v,b,A,H,Q,ue){f.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+H+"]: "+v+`
`+b+`
`+Q+" "+ue})}function Ys(f,v,b,A){f.info(function(){return"XMLHTTP TEXT ("+v+"): "+ea(f,b)+(A?" "+A:"")})}function _h(f,v){f.info(function(){return"TIMEOUT: "+v})}$n.prototype.info=function(){};function ea(f,v){if(!f.g)return v;if(!v)return null;try{var b=JSON.parse(v);if(b){for(f=0;f<b.length;f++)if(Array.isArray(b[f])){var A=b[f];if(!(2>A.length)){var H=A[1];if(Array.isArray(H)&&!(1>H.length)){var Q=H[0];if(Q!="noop"&&Q!="stop"&&Q!="close")for(var ue=1;ue<H.length;ue++)H[ue]=""}}}}return ar(b)}catch{return v}}var Qs={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},as={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Cr;function Ir(){}R(Ir,Zl),Ir.prototype.g=function(){return new XMLHttpRequest},Ir.prototype.i=function(){return{}},Cr=new Ir;function vn(f,v,b,A){this.j=f,this.i=v,this.l=b,this.R=A||1,this.U=new Qi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new bt}function bt(){this.i=null,this.g="",this.h=!1}var iu={},fo={};function or(f,v,b){f.L=1,f.v=ia(On(v)),f.m=b,f.P=!0,os(f,null)}function os(f,v){f.F=Date.now(),ta(f),f.A=On(f.v);var b=f.A,A=f.R;Array.isArray(A)||(A=[String(A)]),hu(b.i,"t",A),f.C=0,b=f.j.J,f.h=new bt,f.g=Vh(f.j,b?v:null,!f.m),0<f.O&&(f.M=new Rm(w(f.Y,f,f.g),f.O)),v=f.U,b=f.g,A=f.ca;var H="readystatechange";Array.isArray(H)||(H&&(Xi[0]=H.toString()),H=Xi);for(var Q=0;Q<H.length;Q++){var ue=ph(b,H[Q],A||v.handleEvent,!1,v.h||v);if(!ue)break;v.g[ue.key]=ue}v=f.H?C(f.H):{},f.m?(f.u||(f.u="POST"),v["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.A,f.u,f.m,v)):(f.u="GET",f.g.ea(f.A,f.u,null,v)),Ws(),su(f.i,f.u,f.A,f.l,f.R,f.m)}vn.prototype.ca=function(f){f=f.target;const v=this.M;v&&Kn(f)==3?v.j():this.Y(f)},vn.prototype.Y=function(f){try{if(f==this.g)e:{const Ut=Kn(this.g);var v=this.g.Ba();const ps=this.g.Z();if(!(3>Ut)&&(Ut!=3||this.g&&(this.h.h||this.g.oa()||xh(this.g)))){this.J||Ut!=4||v==7||(v==8||0>=ps?Ws(3):Ws(2)),Xs(this);var b=this.g.Z();this.X=b;t:if(wh(this)){var A=xh(this.g);f="";var H=A.length,Q=Kn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Jt(this),Or(this);var ue="";break t}this.h.i=new h.TextDecoder}for(v=0;v<H;v++)this.h.h=!0,f+=this.h.i.decode(A[v],{stream:!(Q&&v==H-1)});A.length=0,this.h.g+=f,this.C=0,ue=this.h.g}else ue=this.g.oa();if(this.o=b==200,xm(this.i,this.u,this.A,this.l,this.R,Ut,b),this.o){if(this.T&&!this.K){t:{if(this.g){var Be,jt=this.g;if((Be=jt.g?jt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!V(Be)){var ze=Be;break t}}ze=null}if(b=ze)Ys(this.i,this.l,b,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,na(this,b);else{this.o=!1,this.s=3,lt(12),Jt(this),Or(this);break e}}if(this.P){b=!0;let Zt;for(;!this.J&&this.C<ue.length;)if(Zt=bh(this,ue),Zt==fo){Ut==4&&(this.s=4,lt(14),b=!1),Ys(this.i,this.l,null,"[Incomplete Response]");break}else if(Zt==iu){this.s=4,lt(15),Ys(this.i,this.l,ue,"[Invalid Chunk]"),b=!1;break}else Ys(this.i,this.l,Zt,null),na(this,Zt);if(wh(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ut!=4||ue.length!=0||this.h.h||(this.s=1,lt(16),b=!1),this.o=this.o&&b,!b)Ys(this.i,this.l,ue,"[Invalid Chunked Response]"),Jt(this),Or(this);else if(0<ue.length&&!this.W){this.W=!0;var Kt=this.j;Kt.g==this&&Kt.ba&&!Kt.M&&(Kt.j.info("Great, no buffering proxy detected. Bytes received: "+ue.length),fa(Kt),Kt.M=!0,lt(11))}}else Ys(this.i,this.l,ue,null),na(this,ue);Ut==4&&Jt(this),this.o&&!this.J&&(Ut==4?Dh(this.j,this):(this.o=!1,ta(this)))}else Dm(this.g),b==400&&0<ue.indexOf("Unknown SID")?(this.s=3,lt(12)):(this.s=0,lt(13)),Jt(this),Or(this)}}}catch{}finally{}};function wh(f){return f.g?f.u=="GET"&&f.L!=2&&f.j.Ca:!1}function bh(f,v){var b=f.C,A=v.indexOf(`
`,b);return A==-1?fo:(b=Number(v.substring(b,A)),isNaN(b)?iu:(A+=1,A+b>v.length?fo:(v=v.slice(A,A+b),f.C=A+b,v)))}vn.prototype.cancel=function(){this.J=!0,Jt(this)};function ta(f){f.S=Date.now()+f.I,Th(f,f.I)}function Th(f,v){if(f.B!=null)throw Error("WatchDog timer not null");f.B=Ct(w(f.ba,f),v)}function Xs(f){f.B&&(h.clearTimeout(f.B),f.B=null)}vn.prototype.ba=function(){this.B=null;const f=Date.now();0<=f-this.S?(_h(this.i,this.A),this.L!=2&&(Ws(),lt(17)),Jt(this),this.s=2,Or(this)):Th(this,this.S-f)};function Or(f){f.j.G==0||f.J||Dh(f.j,f)}function Jt(f){Xs(f);var v=f.M;v&&typeof v.ma=="function"&&v.ma(),f.M=null,Ji(f.U),f.g&&(v=f.g,f.g=null,v.abort(),v.ma())}function na(f,v){try{var b=f.j;if(b.G!=0&&(b.g==f||au(b.h,f))){if(!f.K&&au(b.h,f)&&b.G==3){try{var A=b.Da.g.parse(v)}catch{A=null}if(Array.isArray(A)&&A.length==3){var H=A;if(H[0]==0){e:if(!b.u){if(b.g)if(b.g.F+3e3<f.F)Ao(b),Eo(b);else break e;gu(b),lt(18)}}else b.za=H[1],0<b.za-b.T&&37500>H[2]&&b.F&&b.v==0&&!b.C&&(b.C=Ct(w(b.Za,b),6e3));if(1>=po(b.h)&&b.ca){try{b.ca()}catch{}b.ca=void 0}}else ms(b,11)}else if((f.K||b.g==f)&&Ao(b),!V(v))for(H=b.Da.g.parse(v),v=0;v<H.length;v++){let ze=H[v];if(b.T=ze[0],ze=ze[1],b.G==2)if(ze[0]=="c"){b.K=ze[1],b.ia=ze[2];const Kt=ze[3];Kt!=null&&(b.la=Kt,b.j.info("VER="+b.la));const Ut=ze[4];Ut!=null&&(b.Aa=Ut,b.j.info("SVER="+b.Aa));const ps=ze[5];ps!=null&&typeof ps=="number"&&0<ps&&(A=1.5*ps,b.L=A,b.j.info("backChannelRequestTimeoutMs_="+A)),A=b;const Zt=f.g;if(Zt){const Lr=Zt.g?Zt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Lr){var Q=A.h;Q.g||Lr.indexOf("spdy")==-1&&Lr.indexOf("quic")==-1&&Lr.indexOf("h2")==-1||(Q.j=Q.l,Q.g=new Set,Q.h&&(go(Q,Q.h),Q.h=null))}if(A.D){const vu=Zt.g?Zt.g.getResponseHeader("X-HTTP-Session-Id"):null;vu&&(A.ya=vu,Xe(A.I,A.D,vu))}}b.G=3,b.l&&b.l.ua(),b.ba&&(b.R=Date.now()-f.F,b.j.info("Handshake RTT: "+b.R+"ms")),A=b;var ue=f;if(A.qa=Nh(A,A.J?A.ia:null,A.W),ue.K){_n(A.h,ue);var Be=ue,jt=A.L;jt&&(Be.I=jt),Be.B&&(Xs(Be),ta(Be)),A.g=ue}else Oh(A);0<b.i.length&&So(b)}else ze[0]!="stop"&&ze[0]!="close"||ms(b,7);else b.G==3&&(ze[0]=="stop"||ze[0]=="close"?ze[0]=="stop"?ms(b,7):mu(b):ze[0]!="noop"&&b.l&&b.l.ta(ze),b.v=0)}}Ws(4)}catch{}}var Eh=class{constructor(f,v){this.g=f,this.map=v}};function ls(f){this.l=f||10,h.PerformanceNavigationTiming?(f=h.performance.getEntriesByType("navigation"),f=0<f.length&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function mo(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function po(f){return f.h?1:f.g?f.g.size:0}function au(f,v){return f.h?f.h==v:f.g?f.g.has(v):!1}function go(f,v){f.g?f.g.add(v):f.h=v}function _n(f,v){f.h&&f.h==v?f.h=null:f.g&&f.g.has(v)&&f.g.delete(v)}ls.prototype.cancel=function(){if(this.i=ou(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const f of this.g.values())f.cancel();this.g.clear()}};function ou(f){if(f.h!=null)return f.i.concat(f.h.D);if(f.g!=null&&f.g.size!==0){let v=f.i;for(const b of f.g.values())v=v.concat(b.D);return v}return O(f.i)}function Cm(f){if(f.V&&typeof f.V=="function")return f.V();if(typeof Map<"u"&&f instanceof Map||typeof Set<"u"&&f instanceof Set)return Array.from(f.values());if(typeof f=="string")return f.split("");if(d(f)){for(var v=[],b=f.length,A=0;A<b;A++)v.push(f[A]);return v}v=[],b=0;for(A in f)v[b++]=f[A];return v}function yo(f){if(f.na&&typeof f.na=="function")return f.na();if(!f.V||typeof f.V!="function"){if(typeof Map<"u"&&f instanceof Map)return Array.from(f.keys());if(!(typeof Set<"u"&&f instanceof Set)){if(d(f)||typeof f=="string"){var v=[];f=f.length;for(var b=0;b<f;b++)v.push(b);return v}v=[],b=0;for(const A in f)v[b++]=A;return v}}}function lu(f,v){if(f.forEach&&typeof f.forEach=="function")f.forEach(v,void 0);else if(d(f)||typeof f=="string")Array.prototype.forEach.call(f,v,void 0);else for(var b=yo(f),A=Cm(f),H=A.length,Q=0;Q<H;Q++)v.call(void 0,A[Q],b&&b[Q],f)}var ra=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Im(f,v){if(f){f=f.split("&");for(var b=0;b<f.length;b++){var A=f[b].indexOf("="),H=null;if(0<=A){var Q=f[b].substring(0,A);H=f[b].substring(A+1)}else Q=f[b];v(Q,H?decodeURIComponent(H.replace(/\+/g," ")):"")}}}function It(f){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,f instanceof It){this.h=f.h,sa(this,f.j),this.o=f.o,this.g=f.g,Js(this,f.s),this.l=f.l;var v=f.i,b=new cs;b.i=v.i,v.g&&(b.g=new Map(v.g),b.h=v.h),us(this,b),this.m=f.m}else f&&(v=String(f).match(ra))?(this.h=!1,sa(this,v[1]||"",!0),this.o=Fn(v[2]||""),this.g=Fn(v[3]||"",!0),Js(this,v[4]),this.l=Fn(v[5]||"",!0),us(this,v[6]||"",!0),this.m=Fn(v[7]||"")):(this.h=!1,this.i=new cs(null,this.h))}It.prototype.toString=function(){var f=[],v=this.j;v&&f.push(aa(v,uu,!0),":");var b=this.g;return(b||v=="file")&&(f.push("//"),(v=this.o)&&f.push(aa(v,uu,!0),"@"),f.push(encodeURIComponent(String(b)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),b=this.s,b!=null&&f.push(":",String(b))),(b=this.l)&&(this.g&&b.charAt(0)!="/"&&f.push("/"),f.push(aa(b,b.charAt(0)=="/"?Om:cu,!0))),(b=this.i.toString())&&f.push("?",b),(b=this.m)&&f.push("#",aa(b,vo)),f.join("")};function On(f){return new It(f)}function sa(f,v,b){f.j=b?Fn(v,!0):v,f.j&&(f.j=f.j.replace(/:$/,""))}function Js(f,v){if(v){if(v=Number(v),isNaN(v)||0>v)throw Error("Bad port number "+v);f.s=v}else f.s=null}function us(f,v,b){v instanceof cs?(f.i=v,Ah(f.i,f.h)):(b||(v=aa(v,km)),f.i=new cs(v,f.h))}function Xe(f,v,b){f.i.set(v,b)}function ia(f){return Xe(f,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),f}function Fn(f,v){return f?v?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function aa(f,v,b){return typeof f=="string"?(f=encodeURI(f).replace(v,Sh),b&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function Sh(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var uu=/[#\/\?@]/g,cu=/[#\?:]/g,Om=/[#\?]/g,km=/[#\?@]/g,vo=/#/g;function cs(f,v){this.h=this.g=null,this.i=f||null,this.j=!!v}function Hn(f){f.g||(f.g=new Map,f.h=0,f.i&&Im(f.i,function(v,b){f.add(decodeURIComponent(v.replace(/\+/g," ")),b)}))}t=cs.prototype,t.add=function(f,v){Hn(this),this.i=null,f=kr(this,f);var b=this.g.get(f);return b||this.g.set(f,b=[]),b.push(v),this.h+=1,this};function hs(f,v){Hn(f),v=kr(f,v),f.g.has(v)&&(f.i=null,f.h-=f.g.get(v).length,f.g.delete(v))}function ds(f,v){return Hn(f),v=kr(f,v),f.g.has(v)}t.forEach=function(f,v){Hn(this),this.g.forEach(function(b,A){b.forEach(function(H){f.call(v,H,A,this)},this)},this)},t.na=function(){Hn(this);const f=Array.from(this.g.values()),v=Array.from(this.g.keys()),b=[];for(let A=0;A<v.length;A++){const H=f[A];for(let Q=0;Q<H.length;Q++)b.push(v[A])}return b},t.V=function(f){Hn(this);let v=[];if(typeof f=="string")ds(this,f)&&(v=v.concat(this.g.get(kr(this,f))));else{f=Array.from(this.g.values());for(let b=0;b<f.length;b++)v=v.concat(f[b])}return v},t.set=function(f,v){return Hn(this),this.i=null,f=kr(this,f),ds(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[v]),this.h+=1,this},t.get=function(f,v){return f?(f=this.V(f),0<f.length?String(f[0]):v):v};function hu(f,v,b){hs(f,v),0<b.length&&(f.i=null,f.g.set(kr(f,v),O(b)),f.h+=b.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],v=Array.from(this.g.keys());for(var b=0;b<v.length;b++){var A=v[b];const Q=encodeURIComponent(String(A)),ue=this.V(A);for(A=0;A<ue.length;A++){var H=Q;ue[A]!==""&&(H+="="+encodeURIComponent(String(ue[A]))),f.push(H)}}return this.i=f.join("&")};function kr(f,v){return v=String(v),f.j&&(v=v.toLowerCase()),v}function Ah(f,v){v&&!f.j&&(Hn(f),f.i=null,f.g.forEach(function(b,A){var H=A.toLowerCase();A!=H&&(hs(this,A),hu(this,H,b))},f)),f.j=v}function oa(f,v){const b=new $n;if(h.Image){const A=new Image;A.onload=E(Gn,b,"TestLoadImage: loaded",!0,v,A),A.onerror=E(Gn,b,"TestLoadImage: error",!1,v,A),A.onabort=E(Gn,b,"TestLoadImage: abort",!1,v,A),A.ontimeout=E(Gn,b,"TestLoadImage: timeout",!1,v,A),h.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=f}else v(!1)}function lr(f,v){const b=new $n,A=new AbortController,H=setTimeout(()=>{A.abort(),Gn(b,"TestPingServer: timeout",!1,v)},1e4);fetch(f,{signal:A.signal}).then(Q=>{clearTimeout(H),Q.ok?Gn(b,"TestPingServer: ok",!0,v):Gn(b,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(H),Gn(b,"TestPingServer: error",!1,v)})}function Gn(f,v,b,A,H){try{H&&(H.onload=null,H.onerror=null,H.onabort=null,H.ontimeout=null),A(b)}catch{}}function la(){this.g=new Zi}function Dr(f,v,b){const A=b||"";try{lu(f,function(H,Q){let ue=H;m(H)&&(ue=ar(H)),v.push(A+Q+"="+encodeURIComponent(ue))})}catch(H){throw v.push(A+"type="+encodeURIComponent("_badmap")),H}}function Zs(f){this.l=f.Ub||null,this.j=f.eb||!1}R(Zs,Zl),Zs.prototype.g=function(){return new fs(this.l,this.j)},Zs.prototype.i=(function(f){return function(){return f}})({});function fs(f,v){gt.call(this),this.D=f,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}R(fs,gt),t=fs.prototype,t.open=function(f,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=f,this.A=v,this.readyState=1,Nr(this)},t.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const v={headers:this.u,method:this.B,credentials:this.m,cache:void 0};f&&(v.body=f),(this.D||h).fetch(new Request(this.A,v)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Pr(this)),this.readyState=0},t.Sa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,Nr(this)),this.g&&(this.readyState=3,Nr(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;du(this)}else f.text().then(this.Ra.bind(this),this.ga.bind(this))};function du(f){f.j.read().then(f.Pa.bind(f)).catch(f.ga.bind(f))}t.Pa=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var v=f.value?f.value:new Uint8Array(0);(v=this.v.decode(v,{stream:!f.done}))&&(this.response=this.responseText+=v)}f.done?Pr(this):Nr(this),this.readyState==3&&du(this)}},t.Ra=function(f){this.g&&(this.response=this.responseText=f,Pr(this))},t.Qa=function(f){this.g&&(this.response=f,Pr(this))},t.ga=function(){this.g&&Pr(this)};function Pr(f){f.readyState=4,f.l=null,f.j=null,f.v=null,Nr(f)}t.setRequestHeader=function(f,v){this.u.append(f,v)},t.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],v=this.h.entries();for(var b=v.next();!b.done;)b=b.value,f.push(b[0]+": "+b[1]),b=v.next();return f.join(`\r
`)};function Nr(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(fs.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function fu(f){let v="";return oe(f,function(b,A){v+=A,v+=":",v+=b,v+=`\r
`}),v}function Gt(f,v,b){e:{for(A in b){var A=!1;break e}A=!0}A||(b=fu(b),typeof f=="string"?b!=null&&encodeURIComponent(String(b)):Xe(f,v,b))}function Ge(f){gt.call(this),this.headers=new Map,this.o=f||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}R(Ge,gt);var _o=/^https?$/i,ua=["POST","PUT"];t=Ge.prototype,t.Ha=function(f){this.J=f},t.ea=function(f,v,b,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);v=v?v.toUpperCase():"GET",this.D=f,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Cr.g(),this.v=this.o?eu(this.o):eu(Cr),this.g.onreadystatechange=w(this.Ea,this);try{this.B=!0,this.g.open(v,String(f),!0),this.B=!1}catch(Q){Rh(this,Q);return}if(f=b||"",b=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var H in A)b.set(H,A[H]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const Q of A.keys())b.set(Q,A.get(Q));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(b.keys()).find(Q=>Q.toLowerCase()=="content-type"),H=h.FormData&&f instanceof h.FormData,!(0<=Array.prototype.indexOf.call(ua,v,void 0))||A||H||b.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Q,ue]of b)this.g.setRequestHeader(Q,ue);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ca(this),this.u=!0,this.g.send(f),this.u=!1}catch(Q){Rh(this,Q)}};function Rh(f,v){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=v,f.m=5,wo(f),Vr(f)}function wo(f){f.A||(f.A=!0,We(f,"complete"),We(f,"error"))}t.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=f||7,We(this,"complete"),We(this,"abort"),Vr(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Vr(this,!0)),Ge.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?bo(this):this.bb())},t.bb=function(){bo(this)};function bo(f){if(f.h&&typeof u<"u"&&(!f.v[1]||Kn(f)!=4||f.Z()!=2)){if(f.u&&Kn(f)==4)cn(f.Ea,0,f);else if(We(f,"readystatechange"),Kn(f)==4){f.h=!1;try{const ue=f.Z();e:switch(ue){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var b;if(!(b=v)){var A;if(A=ue===0){var H=String(f.D).match(ra)[1]||null;!H&&h.self&&h.self.location&&(H=h.self.location.protocol.slice(0,-1)),A=!_o.test(H?H.toLowerCase():"")}b=A}if(b)We(f,"complete"),We(f,"success");else{f.m=6;try{var Q=2<Kn(f)?f.g.statusText:""}catch{Q=""}f.l=Q+" ["+f.Z()+"]",wo(f)}}finally{Vr(f)}}}}function Vr(f,v){if(f.g){ca(f);const b=f.g,A=f.v[0]?()=>{}:null;f.g=null,f.v=null,v||We(f,"ready");try{b.onreadystatechange=A}catch{}}}function ca(f){f.I&&(h.clearTimeout(f.I),f.I=null)}t.isActive=function(){return!!this.g};function Kn(f){return f.g?f.g.readyState:0}t.Z=function(){try{return 2<Kn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(f){if(this.g){var v=this.g.responseText;return f&&v.indexOf(f)==0&&(v=v.substring(f.length)),co(v)}};function xh(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.H){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function Dm(f){const v={};f=(f.g&&2<=Kn(f)&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<f.length;A++){if(V(f[A]))continue;var b=q(f[A]);const H=b[0];if(b=b[1],typeof b!="string")continue;b=b.trim();const Q=v[H]||[];v[H]=Q,Q.push(b)}L(v,function(A){return A.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ha(f,v,b){return b&&b.internalChannelParams&&b.internalChannelParams[f]||v}function To(f){this.Aa=0,this.i=[],this.j=new $n,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ha("failFast",!1,f),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ha("baseRetryDelayMs",5e3,f),this.cb=ha("retryDelaySeedMs",1e4,f),this.Wa=ha("forwardChannelMaxRetries",2,f),this.wa=ha("forwardChannelRequestTimeoutMs",2e4,f),this.pa=f&&f.xmlHttpFactory||void 0,this.Xa=f&&f.Tb||void 0,this.Ca=f&&f.useFetchStreams||!1,this.L=void 0,this.J=f&&f.supportsCrossDomainXhr||!1,this.K="",this.h=new ls(f&&f.concurrentRequestLimit),this.Da=new la,this.P=f&&f.fastHandshake||!1,this.O=f&&f.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=f&&f.Rb||!1,f&&f.xa&&this.j.xa(),f&&f.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&f&&f.detectBufferingProxy||!1,this.ja=void 0,f&&f.longPollingTimeout&&0<f.longPollingTimeout&&(this.ja=f.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=To.prototype,t.la=8,t.G=1,t.connect=function(f,v,b,A){lt(0),this.W=f,this.H=v||{},b&&A!==void 0&&(this.H.OSID=b,this.H.OAID=A),this.F=this.X,this.I=Nh(this,null,this.W),So(this)};function mu(f){if(Ch(f),f.G==3){var v=f.U++,b=On(f.I);if(Xe(b,"SID",f.K),Xe(b,"RID",v),Xe(b,"TYPE","terminate"),da(f,b),v=new vn(f,f.j,v),v.L=2,v.v=ia(On(b)),b=!1,h.navigator&&h.navigator.sendBeacon)try{b=h.navigator.sendBeacon(v.v.toString(),"")}catch{}!b&&h.Image&&(new Image().src=v.v,b=!0),b||(v.g=Vh(v.j,null),v.g.ea(v.v)),v.F=Date.now(),ta(v)}Ph(f)}function Eo(f){f.g&&(fa(f),f.g.cancel(),f.g=null)}function Ch(f){Eo(f),f.u&&(h.clearTimeout(f.u),f.u=null),Ao(f),f.h.cancel(),f.s&&(typeof f.s=="number"&&h.clearTimeout(f.s),f.s=null)}function So(f){if(!mo(f.h)&&!f.s){f.s=!0;var v=f.Ga;ae||U(),de||(ae(),de=!0),ke.add(v,f),f.B=0}}function Pm(f,v){return po(f.h)>=f.h.j-(f.s?1:0)?!1:f.s?(f.i=v.D.concat(f.i),!0):f.G==1||f.G==2||f.B>=(f.Va?0:f.Wa)?!1:(f.s=Ct(w(f.Ga,f,v),yu(f,f.B)),f.B++,!0)}t.Ga=function(f){if(this.s)if(this.s=null,this.G==1){if(!f){this.U=Math.floor(1e5*Math.random()),f=this.U++;const H=new vn(this,this.j,f);let Q=this.o;if(this.S&&(Q?(Q=C(Q),B(Q,this.S)):Q=this.S),this.m!==null||this.O||(H.H=Q,Q=null),this.P)e:{for(var v=0,b=0;b<this.i.length;b++){t:{var A=this.i[b];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(v+=A,4096<v){v=b;break e}if(v===4096||b===this.i.length-1){v=b+1;break e}}v=1e3}else v=1e3;v=Ih(this,H,v),b=On(this.I),Xe(b,"RID",f),Xe(b,"CVER",22),this.D&&Xe(b,"X-HTTP-Session-Id",this.D),da(this,b),Q&&(this.O?v="headers="+encodeURIComponent(String(fu(Q)))+"&"+v:this.m&&Gt(b,this.m,Q)),go(this.h,H),this.Ua&&Xe(b,"TYPE","init"),this.P?(Xe(b,"$req",v),Xe(b,"SID","null"),H.T=!0,or(H,b,null)):or(H,b,v),this.G=2}}else this.G==3&&(f?pu(this,f):this.i.length==0||mo(this.h)||pu(this))};function pu(f,v){var b;v?b=v.l:b=f.U++;const A=On(f.I);Xe(A,"SID",f.K),Xe(A,"RID",b),Xe(A,"AID",f.T),da(f,A),f.m&&f.o&&Gt(A,f.m,f.o),b=new vn(f,f.j,b,f.B+1),f.m===null&&(b.H=f.o),v&&(f.i=v.D.concat(f.i)),v=Ih(f,b,1e3),b.I=Math.round(.5*f.wa)+Math.round(.5*f.wa*Math.random()),go(f.h,b),or(b,A,v)}function da(f,v){f.H&&oe(f.H,function(b,A){Xe(v,A,b)}),f.l&&lu({},function(b,A){Xe(v,A,b)})}function Ih(f,v,b){b=Math.min(f.i.length,b);var A=f.l?w(f.l.Na,f.l,f):null;e:{var H=f.i;let Q=-1;for(;;){const ue=["count="+b];Q==-1?0<b?(Q=H[0].g,ue.push("ofs="+Q)):Q=0:ue.push("ofs="+Q);let Be=!0;for(let jt=0;jt<b;jt++){let ze=H[jt].g;const Kt=H[jt].map;if(ze-=Q,0>ze)Q=Math.max(0,H[jt].g-100),Be=!1;else try{Dr(Kt,ue,"req"+ze+"_")}catch{A&&A(Kt)}}if(Be){A=ue.join("&");break e}}}return f=f.i.splice(0,b),v.D=f,A}function Oh(f){if(!f.g&&!f.u){f.Y=1;var v=f.Fa;ae||U(),de||(ae(),de=!0),ke.add(v,f),f.v=0}}function gu(f){return f.g||f.u||3<=f.v?!1:(f.Y++,f.u=Ct(w(f.Fa,f),yu(f,f.v)),f.v++,!0)}t.Fa=function(){if(this.u=null,kh(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var f=2*this.R;this.j.info("BP detection timer enabled: "+f),this.A=Ct(w(this.ab,this),f)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,lt(10),Eo(this),kh(this))};function fa(f){f.A!=null&&(h.clearTimeout(f.A),f.A=null)}function kh(f){f.g=new vn(f,f.j,"rpc",f.Y),f.m===null&&(f.g.H=f.o),f.g.O=0;var v=On(f.qa);Xe(v,"RID","rpc"),Xe(v,"SID",f.K),Xe(v,"AID",f.T),Xe(v,"CI",f.F?"0":"1"),!f.F&&f.ja&&Xe(v,"TO",f.ja),Xe(v,"TYPE","xmlhttp"),da(f,v),f.m&&f.o&&Gt(v,f.m,f.o),f.L&&(f.g.I=f.L);var b=f.g;f=f.ia,b.L=1,b.v=ia(On(v)),b.m=null,b.P=!0,os(b,f)}t.Za=function(){this.C!=null&&(this.C=null,Eo(this),gu(this),lt(19))};function Ao(f){f.C!=null&&(h.clearTimeout(f.C),f.C=null)}function Dh(f,v){var b=null;if(f.g==v){Ao(f),fa(f),f.g=null;var A=2}else if(au(f.h,v))b=v.D,_n(f.h,v),A=1;else return;if(f.G!=0){if(v.o)if(A==1){b=v.m?v.m.length:0,v=Date.now()-v.F;var H=f.B;A=Ks(),We(A,new Lt(A,b)),So(f)}else Oh(f);else if(H=v.s,H==3||H==0&&0<v.X||!(A==1&&Pm(f,v)||A==2&&gu(f)))switch(b&&0<b.length&&(v=f.h,v.i=v.i.concat(b)),H){case 1:ms(f,5);break;case 4:ms(f,10);break;case 3:ms(f,6);break;default:ms(f,2)}}}function yu(f,v){let b=f.Ta+Math.floor(Math.random()*f.cb);return f.isActive()||(b*=2),b*v}function ms(f,v){if(f.j.info("Error code "+v),v==2){var b=w(f.fb,f),A=f.Xa;const H=!A;A=new It(A||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||sa(A,"https"),ia(A),H?oa(A.toString(),b):lr(A.toString(),b)}else lt(2);f.G=0,f.l&&f.l.sa(v),Ph(f),Ch(f)}t.fb=function(f){f?(this.j.info("Successfully pinged google.com"),lt(2)):(this.j.info("Failed to ping google.com"),lt(1))};function Ph(f){if(f.G=0,f.ka=[],f.l){const v=ou(f.h);(v.length!=0||f.i.length!=0)&&(I(f.ka,v),I(f.ka,f.i),f.h.i.length=0,O(f.i),f.i.length=0),f.l.ra()}}function Nh(f,v,b){var A=b instanceof It?On(b):new It(b);if(A.g!="")v&&(A.g=v+"."+A.g),Js(A,A.s);else{var H=h.location;A=H.protocol,v=v?v+"."+H.hostname:H.hostname,H=+H.port;var Q=new It(null);A&&sa(Q,A),v&&(Q.g=v),H&&Js(Q,H),b&&(Q.l=b),A=Q}return b=f.D,v=f.ya,b&&v&&Xe(A,b,v),Xe(A,"VER",f.la),da(f,A),A}function Vh(f,v,b){if(v&&!f.J)throw Error("Can't create secondary domain capable XhrIo object.");return v=f.Ca&&!f.pa?new Ge(new Zs({eb:b})):new Ge(f.pa),v.Ha(f.J),v}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Mh(){}t=Mh.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Ro(){}Ro.prototype.g=function(f,v){return new wn(f,v)};function wn(f,v){gt.call(this),this.g=new To(v),this.l=f,this.h=v&&v.messageUrlParams||null,f=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(f?f["X-WebChannel-Content-Type"]=v.messageContentType:f={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.va&&(f?f["X-WebChannel-Client-Profile"]=v.va:f={"X-WebChannel-Client-Profile":v.va}),this.g.S=f,(f=v&&v.Sb)&&!V(f)&&(this.g.m=f),this.v=v&&v.supportsCrossDomainXhr||!1,this.u=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!V(v)&&(this.g.D=v,f=this.h,f!==null&&v in f&&(f=this.h,v in f&&delete f[v])),this.j=new Mr(this)}R(wn,gt),wn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},wn.prototype.close=function(){mu(this.g)},wn.prototype.o=function(f){var v=this.g;if(typeof f=="string"){var b={};b.__data__=f,f=b}else this.u&&(b={},b.__data__=ar(f),f=b);v.i.push(new Eh(v.Ya++,f)),v.G==3&&So(v)},wn.prototype.N=function(){this.g.l=null,delete this.j,mu(this.g),delete this.g,wn.aa.N.call(this)};function Lh(f){is.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var v=f.__sm__;if(v){e:{for(const b in v){f=b;break e}f=void 0}(this.i=f)&&(f=this.i,v=v!==null&&f in v?v[f]:void 0),this.data=v}else this.data=f}R(Lh,is);function jh(){nu.call(this),this.status=1}R(jh,nu);function Mr(f){this.g=f}R(Mr,Mh),Mr.prototype.ua=function(){We(this.g,"a")},Mr.prototype.ta=function(f){We(this.g,new Lh(f))},Mr.prototype.sa=function(f){We(this.g,new jh)},Mr.prototype.ra=function(){We(this.g,"b")},Ro.prototype.createWebChannel=Ro.prototype.g,wn.prototype.send=wn.prototype.o,wn.prototype.open=wn.prototype.m,wn.prototype.close=wn.prototype.close,D1=function(){return new Ro},k1=function(){return Ks()},O1=xr,by={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Qs.NO_ERROR=0,Qs.TIMEOUT=8,Qs.HTTP_ERROR=6,nf=Qs,as.COMPLETE="complete",I1=as,tu.EventType=ss,ss.OPEN="a",ss.CLOSE="b",ss.ERROR="c",ss.MESSAGE="d",gt.prototype.listen=gt.prototype.K,lc=tu,Ge.prototype.listenOnce=Ge.prototype.L,Ge.prototype.getLastError=Ge.prototype.Ka,Ge.prototype.getLastErrorCode=Ge.prototype.Ba,Ge.prototype.getStatus=Ge.prototype.Z,Ge.prototype.getResponseJson=Ge.prototype.Oa,Ge.prototype.getResponseText=Ge.prototype.oa,Ge.prototype.send=Ge.prototype.ea,Ge.prototype.setWithCredentials=Ge.prototype.Ha,C1=Ge}).apply(typeof Bd<"u"?Bd:typeof self<"u"?self:typeof window<"u"?window:{});const QT="@firebase/firestore",XT="4.9.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}mn.UNAUTHENTICATED=new mn(null),mn.GOOGLE_CREDENTIALS=new mn("google-credentials-uid"),mn.FIRST_PARTY=new mn("first-party-uid"),mn.MOCK_USER=new mn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bl="12.2.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qa=new Ov("@firebase/firestore");function ol(){return Qa.logLevel}function fe(t,...e){if(Qa.logLevel<=Le.DEBUG){const n=e.map(Pv);Qa.debug(`Firestore (${Bl}): ${t}`,...n)}}function js(t,...e){if(Qa.logLevel<=Le.ERROR){const n=e.map(Pv);Qa.error(`Firestore (${Bl}): ${t}`,...n)}}function xl(t,...e){if(Qa.logLevel<=Le.WARN){const n=e.map(Pv);Qa.warn(`Firestore (${Bl}): ${t}`,...n)}}function Pv(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ee(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,P1(t,r,n)}function P1(t,e,n){let r=`FIRESTORE (${Bl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw js(r),new Error(r)}function Ke(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||P1(e,i,r)}function Ie(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ne={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class he extends Fs{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N1{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class VP{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(mn.UNAUTHENTICATED)))}shutdown(){}}class MP{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class LP{constructor(e){this.t=e,this.currentUser=mn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ke(this.o===void 0,42304);let r=this.i;const i=d=>this.i!==r?(r=this.i,n(d)):Promise.resolve();let o=new Vs;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Vs,e.enqueueRetryable((()=>i(this.currentUser)))};const u=()=>{const d=o;e.enqueueRetryable((async()=>{await d.promise,await i(this.currentUser)}))},h=d=>{fe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((d=>h(d))),setTimeout((()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?h(d):(fe("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Vs)}}),0),u()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==e?(fe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ke(typeof r.accessToken=="string",31837,{l:r}),new N1(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ke(e===null||typeof e=="string",2055,{h:e}),new mn(e)}}class jP{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=mn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class UP{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new jP(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(mn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class JT{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class BP{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,yr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Ke(this.o===void 0,3512);const r=o=>{o.error!=null&&fe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const u=o.token!==this.m;return this.m=o.token,fe("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable((()=>r(o)))};const i=o=>{fe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((o=>i(o))),setTimeout((()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?i(o):fe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new JT(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(Ke(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new JT(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zP(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nv{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=zP(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%62))}return r}}function je(t,e){return t<e?-1:t>e?1:0}function Ty(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const i=t.charAt(r),o=e.charAt(r);if(i!==o)return Lg(i)===Lg(o)?je(i,o):Lg(i)?1:-1}return je(t.length,e.length)}const qP=55296,$P=57343;function Lg(t){const e=t.charCodeAt(0);return e>=qP&&e<=$P}function Cl(t,e,n){return t.length===e.length&&t.every(((r,i)=>n(r,e[i])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZT="__name__";class $r{constructor(e,n,r){n===void 0?n=0:n>e.length&&Ee(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Ee(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return $r.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof $r?e.forEach((r=>{n.push(r)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const o=$r.compareSegments(e.get(i),n.get(i));if(o!==0)return o}return je(e.length,n.length)}static compareSegments(e,n){const r=$r.isNumericId(e),i=$r.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?$r.extractNumericId(e).compare($r.extractNumericId(n)):Ty(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Pi.fromString(e.substring(4,e.length-2))}}class it extends $r{construct(e,n,r){return new it(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new he(ne.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((i=>i.length>0)))}return new it(n)}static emptyPath(){return new it([])}}const FP=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ln extends $r{construct(e,n,r){return new ln(e,n,r)}static isValidIdentifier(e){return FP.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ln.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===ZT}static keyField(){return new ln([ZT])}static fromServerFormat(e){const n=[];let r="",i=0;const o=()=>{if(r.length===0)throw new he(ne.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let u=!1;for(;i<e.length;){const h=e[i];if(h==="\\"){if(i+1===e.length)throw new he(ne.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[i+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new he(ne.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=d,i+=2}else h==="`"?(u=!u,i++):h!=="."||u?(r+=h,i++):(o(),i++)}if(o(),u)throw new he(ne.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ln(n)}static emptyPath(){return new ln([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ye{constructor(e){this.path=e}static fromPath(e){return new ye(it.fromString(e))}static fromName(e){return new ye(it.fromString(e).popFirst(5))}static empty(){return new ye(it.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&it.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return it.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ye(new it(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V1(t,e,n){if(!n)throw new he(ne.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function HP(t,e,n,r){if(e===!0&&r===!0)throw new he(ne.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function eE(t){if(!ye.isDocumentKey(t))throw new he(ne.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function tE(t){if(ye.isDocumentKey(t))throw new he(ne.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function M1(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Qf(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Ee(12329,{type:typeof t})}function wr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new he(ne.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Qf(t);throw new he(ne.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mt(t,e){const n={typeString:t};return e&&(n.value=e),n}function th(t,e){if(!M1(t))throw new he(ne.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const u=t[r];if(i&&typeof u!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&u!==o.value){n=`Expected '${r}' field to equal '${o.value}'`;break}}if(n)throw new he(ne.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nE=-62135596800,rE=1e6;class ot{static now(){return ot.fromMillis(Date.now())}static fromDate(e){return ot.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*rE);return new ot(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new he(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new he(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<nE)throw new he(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new he(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/rE}_compareTo(e){return this.seconds===e.seconds?je(this.nanoseconds,e.nanoseconds):je(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ot._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(th(e,ot._jsonSchema))return new ot(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-nE;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ot._jsonSchemaVersion="firestore/timestamp/1.0",ot._jsonSchema={type:Mt("string",ot._jsonSchemaVersion),seconds:Mt("number"),nanoseconds:Mt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ce{static fromTimestamp(e){return new Ce(e)}static min(){return new Ce(new ot(0,0))}static max(){return new Ce(new ot(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ic=-1;function GP(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Ce.fromTimestamp(r===1e9?new ot(n+1,0):new ot(n,r));return new Vi(i,ye.empty(),e)}function KP(t){return new Vi(t.readTime,t.key,Ic)}class Vi{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Vi(Ce.min(),ye.empty(),Ic)}static max(){return new Vi(Ce.max(),ye.empty(),Ic)}}function WP(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ye.comparator(t.documentKey,e.documentKey),n!==0?n:je(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YP="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class QP{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zl(t){if(t.code!==ne.FAILED_PRECONDITION||t.message!==YP)throw t;fe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ee(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new se(((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof se?n:se.resolve(n)}catch(n){return se.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):se.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):se.reject(n)}static resolve(e){return new se(((n,r)=>{n(e)}))}static reject(e){return new se(((n,r)=>{r(e)}))}static waitFor(e){return new se(((n,r)=>{let i=0,o=0,u=!1;e.forEach((h=>{++i,h.next((()=>{++o,u&&o===i&&n()}),(d=>r(d)))})),u=!0,o===i&&n()}))}static or(e){let n=se.resolve(!1);for(const r of e)n=n.next((i=>i?se.resolve(i):r()));return n}static forEach(e,n){const r=[];return e.forEach(((i,o)=>{r.push(n.call(this,i,o))})),this.waitFor(r)}static mapArray(e,n){return new se(((r,i)=>{const o=e.length,u=new Array(o);let h=0;for(let d=0;d<o;d++){const m=d;n(e[m]).next((g=>{u[m]=g,++h,h===o&&r(u)}),(g=>i(g)))}}))}static doWhile(e,n){return new se(((r,i)=>{const o=()=>{e()===!0?n().next((()=>{o()}),i):r()};o()}))}}function XP(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ql(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xf{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Xf.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vv=-1;function Jf(t){return t==null}function bf(t){return t===0&&1/t==-1/0}function JP(t){return typeof t=="number"&&Number.isInteger(t)&&!bf(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L1="";function ZP(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=sE(e)),e=eN(t.get(n),e);return sE(e)}function eN(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const o=t.charAt(i);switch(o){case"\0":n+="";break;case L1:n+="";break;default:n+=o}}return n}function sE(t){return t+L1+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iE(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ro(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function j1(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt{constructor(e,n){this.comparator=e,this.root=n||on.EMPTY}insert(e,n){return new pt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,on.BLACK,null,null))}remove(e){return new pt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,on.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,r)=>(e(n,r),!1)))}toString(){const e=[];return this.inorderTraversal(((n,r)=>(e.push(`${n}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new zd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new zd(this.root,e,this.comparator,!1)}getReverseIterator(){return new zd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new zd(this.root,e,this.comparator,!0)}}class zd{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class on{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??on.RED,this.left=i??on.EMPTY,this.right=o??on.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new on(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return on.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return on.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,on.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,on.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ee(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ee(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ee(27949);return e+(this.isRed()?0:1)}}on.EMPTY=null,on.RED=!0,on.BLACK=!1;on.EMPTY=new class{constructor(){this.size=0}get key(){throw Ee(57766)}get value(){throw Ee(16141)}get color(){throw Ee(16727)}get left(){throw Ee(29726)}get right(){throw Ee(36894)}copy(e,n,r,i,o){return this}insert(e,n,r){return new on(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(e){this.comparator=e,this.data=new pt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,r)=>(e(n),!1)))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new aE(this.data.getIterator())}getIteratorFrom(e){return new aE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((r=>{n=n.add(r)})),n}isEqual(e){if(!(e instanceof Ft)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Ft(this.comparator);return n.data=e,n}}class aE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr{constructor(e){this.fields=e,e.sort(ln.comparator)}static empty(){return new vr([])}unionWith(e){let n=new Ft(ln.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new vr(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Cl(this.fields,e.fields,((n,r)=>n.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U1 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new U1("Invalid base64 string: "+o):o}})(e);return new un(n)}static fromUint8Array(e){const n=(function(i){let o="";for(let u=0;u<i.length;++u)o+=String.fromCharCode(i[u]);return o})(e);return new un(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return je(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}un.EMPTY_BYTE_STRING=new un("");const tN=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Mi(t){if(Ke(!!t,39018),typeof t=="string"){let e=0;const n=tN.exec(t);if(Ke(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:At(t.seconds),nanos:At(t.nanos)}}function At(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Li(t){return typeof t=="string"?un.fromBase64String(t):un.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B1="server_timestamp",z1="__type__",q1="__previous_value__",$1="__local_write_time__";function Mv(t){return(t?.mapValue?.fields||{})[z1]?.stringValue===B1}function Zf(t){const e=t.mapValue.fields[q1];return Mv(e)?Zf(e):e}function Oc(t){const e=Mi(t.mapValue.fields[$1].timestampValue);return new ot(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nN{constructor(e,n,r,i,o,u,h,d,m,g){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=u,this.autoDetectLongPolling=h,this.longPollingOptions=d,this.useFetchStreams=m,this.isUsingEmulator=g}}const Tf="(default)";class kc{constructor(e,n){this.projectId=e,this.database=n||Tf}static empty(){return new kc("","")}get isDefaultDatabase(){return this.database===Tf}isEqual(e){return e instanceof kc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F1="__type__",rN="__max__",qd={mapValue:{}},H1="__vector__",Ef="value";function ji(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Mv(t)?4:iN(t)?9007199254740991:sN(t)?10:11:Ee(28295,{value:t})}function es(t,e){if(t===e)return!0;const n=ji(t);if(n!==ji(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Oc(t).isEqual(Oc(e));case 3:return(function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const u=Mi(i.timestampValue),h=Mi(o.timestampValue);return u.seconds===h.seconds&&u.nanos===h.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(i,o){return Li(i.bytesValue).isEqual(Li(o.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(i,o){return At(i.geoPointValue.latitude)===At(o.geoPointValue.latitude)&&At(i.geoPointValue.longitude)===At(o.geoPointValue.longitude)})(t,e);case 2:return(function(i,o){if("integerValue"in i&&"integerValue"in o)return At(i.integerValue)===At(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const u=At(i.doubleValue),h=At(o.doubleValue);return u===h?bf(u)===bf(h):isNaN(u)&&isNaN(h)}return!1})(t,e);case 9:return Cl(t.arrayValue.values||[],e.arrayValue.values||[],es);case 10:case 11:return(function(i,o){const u=i.mapValue.fields||{},h=o.mapValue.fields||{};if(iE(u)!==iE(h))return!1;for(const d in u)if(u.hasOwnProperty(d)&&(h[d]===void 0||!es(u[d],h[d])))return!1;return!0})(t,e);default:return Ee(52216,{left:t})}}function Dc(t,e){return(t.values||[]).find((n=>es(n,e)))!==void 0}function Il(t,e){if(t===e)return 0;const n=ji(t),r=ji(e);if(n!==r)return je(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return je(t.booleanValue,e.booleanValue);case 2:return(function(o,u){const h=At(o.integerValue||o.doubleValue),d=At(u.integerValue||u.doubleValue);return h<d?-1:h>d?1:h===d?0:isNaN(h)?isNaN(d)?0:-1:1})(t,e);case 3:return oE(t.timestampValue,e.timestampValue);case 4:return oE(Oc(t),Oc(e));case 5:return Ty(t.stringValue,e.stringValue);case 6:return(function(o,u){const h=Li(o),d=Li(u);return h.compareTo(d)})(t.bytesValue,e.bytesValue);case 7:return(function(o,u){const h=o.split("/"),d=u.split("/");for(let m=0;m<h.length&&m<d.length;m++){const g=je(h[m],d[m]);if(g!==0)return g}return je(h.length,d.length)})(t.referenceValue,e.referenceValue);case 8:return(function(o,u){const h=je(At(o.latitude),At(u.latitude));return h!==0?h:je(At(o.longitude),At(u.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return lE(t.arrayValue,e.arrayValue);case 10:return(function(o,u){const h=o.fields||{},d=u.fields||{},m=h[Ef]?.arrayValue,g=d[Ef]?.arrayValue,_=je(m?.values?.length||0,g?.values?.length||0);return _!==0?_:lE(m,g)})(t.mapValue,e.mapValue);case 11:return(function(o,u){if(o===qd.mapValue&&u===qd.mapValue)return 0;if(o===qd.mapValue)return 1;if(u===qd.mapValue)return-1;const h=o.fields||{},d=Object.keys(h),m=u.fields||{},g=Object.keys(m);d.sort(),g.sort();for(let _=0;_<d.length&&_<g.length;++_){const w=Ty(d[_],g[_]);if(w!==0)return w;const E=Il(h[d[_]],m[g[_]]);if(E!==0)return E}return je(d.length,g.length)})(t.mapValue,e.mapValue);default:throw Ee(23264,{he:n})}}function oE(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return je(t,e);const n=Mi(t),r=Mi(e),i=je(n.seconds,r.seconds);return i!==0?i:je(n.nanos,r.nanos)}function lE(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const o=Il(n[i],r[i]);if(o)return o}return je(n.length,r.length)}function Ol(t){return Ey(t)}function Ey(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const r=Mi(n);return`time(${r.seconds},${r.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return Li(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return ye.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let r="[",i=!0;for(const o of n.values||[])i?i=!1:r+=",",r+=Ey(o);return r+"]"})(t.arrayValue):"mapValue"in t?(function(n){const r=Object.keys(n.fields||{}).sort();let i="{",o=!0;for(const u of r)o?o=!1:i+=",",i+=`${u}:${Ey(n.fields[u])}`;return i+"}"})(t.mapValue):Ee(61005,{value:t})}function rf(t){switch(ji(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Zf(t);return e?16+rf(e):16;case 5:return 2*t.stringValue.length;case 6:return Li(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((i,o)=>i+rf(o)),0)})(t.arrayValue);case 10:case 11:return(function(r){let i=0;return ro(r.fields,((o,u)=>{i+=o.length+rf(u)})),i})(t.mapValue);default:throw Ee(13486,{value:t})}}function uE(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Sy(t){return!!t&&"integerValue"in t}function Lv(t){return!!t&&"arrayValue"in t}function cE(t){return!!t&&"nullValue"in t}function hE(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function sf(t){return!!t&&"mapValue"in t}function sN(t){return(t?.mapValue?.fields||{})[F1]?.stringValue===H1}function pc(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return ro(t.mapValue.fields,((n,r)=>e.mapValue.fields[n]=pc(r))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=pc(t.arrayValue.values[n]);return e}return{...t}}function iN(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===rN}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rr{constructor(e){this.value=e}static empty(){return new rr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!sf(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=pc(n)}setAll(e){let n=ln.emptyPath(),r={},i=[];e.forEach(((u,h)=>{if(!n.isImmediateParentOf(h)){const d=this.getFieldsMap(n);this.applyChanges(d,r,i),r={},i=[],n=h.popLast()}u?r[h.lastSegment()]=pc(u):i.push(h.lastSegment())}));const o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){const n=this.field(e.popLast());sf(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return es(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];sf(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){ro(n,((i,o)=>e[i]=o));for(const i of r)delete e[i]}clone(){return new rr(pc(this.value))}}function G1(t){const e=[];return ro(t.fields,((n,r)=>{const i=new ln([n]);if(sf(r)){const o=G1(r.mapValue).fields;if(o.length===0)e.push(i);else for(const u of o)e.push(i.child(u))}else e.push(i)})),new vr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(e,n,r,i,o,u,h){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=u,this.documentState=h}static newInvalidDocument(e){return new pn(e,0,Ce.min(),Ce.min(),Ce.min(),rr.empty(),0)}static newFoundDocument(e,n,r,i){return new pn(e,1,n,Ce.min(),r,i,0)}static newNoDocument(e,n){return new pn(e,2,n,Ce.min(),Ce.min(),rr.empty(),0)}static newUnknownDocument(e,n){return new pn(e,3,n,Ce.min(),Ce.min(),rr.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ce.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=rr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=rr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ce.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof pn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new pn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sf{constructor(e,n){this.position=e,this.inclusive=n}}function dE(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const o=e[i],u=t.position[i];if(o.field.isKeyField()?r=ye.comparator(ye.fromName(u.referenceValue),n.key):r=Il(u,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function fE(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!es(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pc{constructor(e,n="asc"){this.field=e,this.dir=n}}function aN(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K1{}class Vt extends K1{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new lN(e,n,r):n==="array-contains"?new hN(e,r):n==="in"?new dN(e,r):n==="not-in"?new fN(e,r):n==="array-contains-any"?new mN(e,r):new Vt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new uN(e,r):new cN(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Il(n,this.value)):n!==null&&ji(this.value)===ji(n)&&this.matchesComparison(Il(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ee(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Er extends K1{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Er(e,n)}matches(e){return W1(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function W1(t){return t.op==="and"}function Y1(t){return oN(t)&&W1(t)}function oN(t){for(const e of t.filters)if(e instanceof Er)return!1;return!0}function Ay(t){if(t instanceof Vt)return t.field.canonicalString()+t.op.toString()+Ol(t.value);if(Y1(t))return t.filters.map((e=>Ay(e))).join(",");{const e=t.filters.map((n=>Ay(n))).join(",");return`${t.op}(${e})`}}function Q1(t,e){return t instanceof Vt?(function(r,i){return i instanceof Vt&&r.op===i.op&&r.field.isEqual(i.field)&&es(r.value,i.value)})(t,e):t instanceof Er?(function(r,i){return i instanceof Er&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce(((o,u,h)=>o&&Q1(u,i.filters[h])),!0):!1})(t,e):void Ee(19439)}function X1(t){return t instanceof Vt?(function(n){return`${n.field.canonicalString()} ${n.op} ${Ol(n.value)}`})(t):t instanceof Er?(function(n){return n.op.toString()+" {"+n.getFilters().map(X1).join(" ,")+"}"})(t):"Filter"}class lN extends Vt{constructor(e,n,r){super(e,n,r),this.key=ye.fromName(r.referenceValue)}matches(e){const n=ye.comparator(e.key,this.key);return this.matchesComparison(n)}}class uN extends Vt{constructor(e,n){super(e,"in",n),this.keys=J1("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class cN extends Vt{constructor(e,n){super(e,"not-in",n),this.keys=J1("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function J1(t,e){return(e.arrayValue?.values||[]).map((n=>ye.fromName(n.referenceValue)))}class hN extends Vt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Lv(n)&&Dc(n.arrayValue,this.value)}}class dN extends Vt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Dc(this.value.arrayValue,n)}}class fN extends Vt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Dc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Dc(this.value.arrayValue,n)}}class mN extends Vt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Lv(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>Dc(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pN{constructor(e,n=null,r=[],i=[],o=null,u=null,h=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=u,this.endAt=h,this.Te=null}}function mE(t,e=null,n=[],r=[],i=null,o=null,u=null){return new pN(t,e,n,r,i,o,u)}function jv(t){const e=Ie(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((r=>Ay(r))).join(","),n+="|ob:",n+=e.orderBy.map((r=>(function(o){return o.field.canonicalString()+o.dir})(r))).join(","),Jf(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((r=>Ol(r))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((r=>Ol(r))).join(",")),e.Te=n}return e.Te}function Uv(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!aN(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Q1(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!fE(t.startAt,e.startAt)&&fE(t.endAt,e.endAt)}function Ry(t){return ye.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $l{constructor(e,n=null,r=[],i=[],o=null,u="F",h=null,d=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=u,this.startAt=h,this.endAt=d,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function gN(t,e,n,r,i,o,u,h){return new $l(t,e,n,r,i,o,u,h)}function em(t){return new $l(t)}function pE(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Z1(t){return t.collectionGroup!==null}function gc(t){const e=Ie(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const o of e.explicitOrderBy)e.Ie.push(o),n.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let h=new Ft(ln.comparator);return u.filters.forEach((d=>{d.getFlattenedFilters().forEach((m=>{m.isInequality()&&(h=h.add(m.field))}))})),h})(e).forEach((o=>{n.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new Pc(o,r))})),n.has(ln.keyField().canonicalString())||e.Ie.push(new Pc(ln.keyField(),r))}return e.Ie}function Hr(t){const e=Ie(t);return e.Ee||(e.Ee=yN(e,gc(t))),e.Ee}function yN(t,e){if(t.limitType==="F")return mE(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((i=>{const o=i.dir==="desc"?"asc":"desc";return new Pc(i.field,o)}));const n=t.endAt?new Sf(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Sf(t.startAt.position,t.startAt.inclusive):null;return mE(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function xy(t,e){const n=t.filters.concat([e]);return new $l(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Cy(t,e,n){return new $l(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function tm(t,e){return Uv(Hr(t),Hr(e))&&t.limitType===e.limitType}function eR(t){return`${jv(Hr(t))}|lt:${t.limitType}`}function ll(t){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((i=>X1(i))).join(", ")}]`),Jf(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((i=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(i))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((i=>Ol(i))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((i=>Ol(i))).join(",")),`Target(${r})`})(Hr(t))}; limitType=${t.limitType})`}function nm(t,e){return e.isFoundDocument()&&(function(r,i){const o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):ye.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)})(t,e)&&(function(r,i){for(const o of gc(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0})(t,e)&&(function(r,i){for(const o of r.filters)if(!o.matches(i))return!1;return!0})(t,e)&&(function(r,i){return!(r.startAt&&!(function(u,h,d){const m=dE(u,h,d);return u.inclusive?m<=0:m<0})(r.startAt,gc(r),i)||r.endAt&&!(function(u,h,d){const m=dE(u,h,d);return u.inclusive?m>=0:m>0})(r.endAt,gc(r),i))})(t,e)}function vN(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function tR(t){return(e,n)=>{let r=!1;for(const i of gc(t)){const o=_N(i,e,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function _N(t,e,n){const r=t.field.isKeyField()?ye.comparator(e.key,n.key):(function(o,u,h){const d=u.data.field(o),m=h.data.field(o);return d!==null&&m!==null?Il(d,m):Ee(42886)})(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Ee(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class so{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ro(this.inner,((n,r)=>{for(const[i,o]of r)e(i,o)}))}isEmpty(){return j1(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wN=new pt(ye.comparator);function Us(){return wN}const nR=new pt(ye.comparator);function uc(...t){let e=nR;for(const n of t)e=e.insert(n.key,n);return e}function rR(t){let e=nR;return t.forEach(((n,r)=>e=e.insert(n,r.overlayedDocument))),e}function ja(){return yc()}function sR(){return yc()}function yc(){return new so((t=>t.toString()),((t,e)=>t.isEqual(e)))}const bN=new pt(ye.comparator),TN=new Ft(ye.comparator);function Ue(...t){let e=TN;for(const n of t)e=e.add(n);return e}const EN=new Ft(je);function SN(){return EN}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bv(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:bf(e)?"-0":e}}function iR(t){return{integerValue:""+t}}function AN(t,e){return JP(e)?iR(e):Bv(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rm{constructor(){this._=void 0}}function RN(t,e,n){return t instanceof Nc?(function(i,o){const u={fields:{[z1]:{stringValue:B1},[$1]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&Mv(o)&&(o=Zf(o)),o&&(u.fields[q1]=o),{mapValue:u}})(n,e):t instanceof Vc?oR(t,e):t instanceof Mc?lR(t,e):(function(i,o){const u=aR(i,o),h=gE(u)+gE(i.Ae);return Sy(u)&&Sy(i.Ae)?iR(h):Bv(i.serializer,h)})(t,e)}function xN(t,e,n){return t instanceof Vc?oR(t,e):t instanceof Mc?lR(t,e):n}function aR(t,e){return t instanceof Af?(function(r){return Sy(r)||(function(o){return!!o&&"doubleValue"in o})(r)})(e)?e:{integerValue:0}:null}class Nc extends rm{}class Vc extends rm{constructor(e){super(),this.elements=e}}function oR(t,e){const n=uR(e);for(const r of t.elements)n.some((i=>es(i,r)))||n.push(r);return{arrayValue:{values:n}}}class Mc extends rm{constructor(e){super(),this.elements=e}}function lR(t,e){let n=uR(e);for(const r of t.elements)n=n.filter((i=>!es(i,r)));return{arrayValue:{values:n}}}class Af extends rm{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function gE(t){return At(t.integerValue||t.doubleValue)}function uR(t){return Lv(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CN{constructor(e,n){this.field=e,this.transform=n}}function IN(t,e){return t.field.isEqual(e.field)&&(function(r,i){return r instanceof Vc&&i instanceof Vc||r instanceof Mc&&i instanceof Mc?Cl(r.elements,i.elements,es):r instanceof Af&&i instanceof Af?es(r.Ae,i.Ae):r instanceof Nc&&i instanceof Nc})(t.transform,e.transform)}class ON{constructor(e,n){this.version=e,this.transformResults=n}}class Gr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Gr}static exists(e){return new Gr(void 0,e)}static updateTime(e){return new Gr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function af(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class sm{}function cR(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new dR(t.key,Gr.none()):new nh(t.key,t.data,Gr.none());{const n=t.data,r=rr.empty();let i=new Ft(ln.comparator);for(let o of e.fields)if(!i.has(o)){let u=n.field(o);u===null&&o.length>1&&(o=o.popLast(),u=n.field(o)),u===null?r.delete(o):r.set(o,u),i=i.add(o)}return new io(t.key,r,new vr(i.toArray()),Gr.none())}}function kN(t,e,n){t instanceof nh?(function(i,o,u){const h=i.value.clone(),d=vE(i.fieldTransforms,o,u.transformResults);h.setAll(d),o.convertToFoundDocument(u.version,h).setHasCommittedMutations()})(t,e,n):t instanceof io?(function(i,o,u){if(!af(i.precondition,o))return void o.convertToUnknownDocument(u.version);const h=vE(i.fieldTransforms,o,u.transformResults),d=o.data;d.setAll(hR(i)),d.setAll(h),o.convertToFoundDocument(u.version,d).setHasCommittedMutations()})(t,e,n):(function(i,o,u){o.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,n)}function vc(t,e,n,r){return t instanceof nh?(function(o,u,h,d){if(!af(o.precondition,u))return h;const m=o.value.clone(),g=_E(o.fieldTransforms,d,u);return m.setAll(g),u.convertToFoundDocument(u.version,m).setHasLocalMutations(),null})(t,e,n,r):t instanceof io?(function(o,u,h,d){if(!af(o.precondition,u))return h;const m=_E(o.fieldTransforms,d,u),g=u.data;return g.setAll(hR(o)),g.setAll(m),u.convertToFoundDocument(u.version,g).setHasLocalMutations(),h===null?null:h.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map((_=>_.field)))})(t,e,n,r):(function(o,u,h){return af(o.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):h})(t,e,n)}function DN(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),o=aR(r.transform,i||null);o!=null&&(n===null&&(n=rr.empty()),n.set(r.field,o))}return n||null}function yE(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Cl(r,i,((o,u)=>IN(o,u)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class nh extends sm{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class io extends sm{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function hR(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}})),e}function vE(t,e,n){const r=new Map;Ke(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let i=0;i<n.length;i++){const o=t[i],u=o.transform,h=e.data.field(o.field);r.set(o.field,xN(u,h,n[i]))}return r}function _E(t,e,n){const r=new Map;for(const i of t){const o=i.transform,u=n.data.field(i.field);r.set(i.field,RN(o,u,e))}return r}class dR extends sm{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class PN extends sm{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NN{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&kN(o,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=vc(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=vc(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=sR();return this.mutations.forEach((i=>{const o=e.get(i.key),u=o.overlayedDocument;let h=this.applyToLocalView(u,o.mutatedFields);h=n.has(i.key)?null:h;const d=cR(u,h);d!==null&&r.set(i.key,d),u.isValidDocument()||u.convertToNoDocument(Ce.min())})),r}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Ue())}isEqual(e){return this.batchId===e.batchId&&Cl(this.mutations,e.mutations,((n,r)=>yE(n,r)))&&Cl(this.baseMutations,e.baseMutations,((n,r)=>yE(n,r)))}}class zv{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Ke(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=(function(){return bN})();const o=e.mutations;for(let u=0;u<o.length;u++)i=i.insert(o[u].key,r[u].version);return new zv(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VN{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MN{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Dt,$e;function LN(t){switch(t){case ne.OK:return Ee(64938);case ne.CANCELLED:case ne.UNKNOWN:case ne.DEADLINE_EXCEEDED:case ne.RESOURCE_EXHAUSTED:case ne.INTERNAL:case ne.UNAVAILABLE:case ne.UNAUTHENTICATED:return!1;case ne.INVALID_ARGUMENT:case ne.NOT_FOUND:case ne.ALREADY_EXISTS:case ne.PERMISSION_DENIED:case ne.FAILED_PRECONDITION:case ne.ABORTED:case ne.OUT_OF_RANGE:case ne.UNIMPLEMENTED:case ne.DATA_LOSS:return!0;default:return Ee(15467,{code:t})}}function fR(t){if(t===void 0)return js("GRPC error has no .code"),ne.UNKNOWN;switch(t){case Dt.OK:return ne.OK;case Dt.CANCELLED:return ne.CANCELLED;case Dt.UNKNOWN:return ne.UNKNOWN;case Dt.DEADLINE_EXCEEDED:return ne.DEADLINE_EXCEEDED;case Dt.RESOURCE_EXHAUSTED:return ne.RESOURCE_EXHAUSTED;case Dt.INTERNAL:return ne.INTERNAL;case Dt.UNAVAILABLE:return ne.UNAVAILABLE;case Dt.UNAUTHENTICATED:return ne.UNAUTHENTICATED;case Dt.INVALID_ARGUMENT:return ne.INVALID_ARGUMENT;case Dt.NOT_FOUND:return ne.NOT_FOUND;case Dt.ALREADY_EXISTS:return ne.ALREADY_EXISTS;case Dt.PERMISSION_DENIED:return ne.PERMISSION_DENIED;case Dt.FAILED_PRECONDITION:return ne.FAILED_PRECONDITION;case Dt.ABORTED:return ne.ABORTED;case Dt.OUT_OF_RANGE:return ne.OUT_OF_RANGE;case Dt.UNIMPLEMENTED:return ne.UNIMPLEMENTED;case Dt.DATA_LOSS:return ne.DATA_LOSS;default:return Ee(39323,{code:t})}}($e=Dt||(Dt={}))[$e.OK=0]="OK",$e[$e.CANCELLED=1]="CANCELLED",$e[$e.UNKNOWN=2]="UNKNOWN",$e[$e.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",$e[$e.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",$e[$e.NOT_FOUND=5]="NOT_FOUND",$e[$e.ALREADY_EXISTS=6]="ALREADY_EXISTS",$e[$e.PERMISSION_DENIED=7]="PERMISSION_DENIED",$e[$e.UNAUTHENTICATED=16]="UNAUTHENTICATED",$e[$e.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",$e[$e.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",$e[$e.ABORTED=10]="ABORTED",$e[$e.OUT_OF_RANGE=11]="OUT_OF_RANGE",$e[$e.UNIMPLEMENTED=12]="UNIMPLEMENTED",$e[$e.INTERNAL=13]="INTERNAL",$e[$e.UNAVAILABLE=14]="UNAVAILABLE",$e[$e.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jN(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UN=new Pi([4294967295,4294967295],0);function wE(t){const e=jN().encode(t),n=new x1;return n.update(e),new Uint8Array(n.digest())}function bE(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Pi([n,r],0),new Pi([i,o],0)]}class qv{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new cc(`Invalid padding: ${n}`);if(r<0)throw new cc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new cc(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new cc(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Pi.fromNumber(this.ge)}ye(e,n,r){let i=e.add(n.multiply(Pi.fromNumber(r)));return i.compare(UN)===1&&(i=new Pi([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=wE(e),[r,i]=bE(n);for(let o=0;o<this.hashCount;o++){const u=this.ye(r,i,o);if(!this.we(u))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),u=new qv(o,i,n);return r.forEach((h=>u.insert(h))),u}insert(e){if(this.ge===0)return;const n=wE(e),[r,i]=bE(n);for(let o=0;o<this.hashCount;o++){const u=this.ye(r,i,o);this.Se(u)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class cc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class im{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,rh.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new im(Ce.min(),i,new pt(je),Us(),Ue())}}class rh{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new rh(r,n,Ue(),Ue(),Ue())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class of{constructor(e,n,r,i){this.be=e,this.removedTargetIds=n,this.key=r,this.De=i}}class mR{constructor(e,n){this.targetId=e,this.Ce=n}}class pR{constructor(e,n,r=un.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class TE{constructor(){this.ve=0,this.Fe=EE(),this.Me=un.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ue(),n=Ue(),r=Ue();return this.Fe.forEach(((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Ee(38017,{changeType:o})}})),new rh(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=EE()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ke(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class BN{constructor(e){this.Ge=e,this.ze=new Map,this.je=Us(),this.Je=$d(),this.He=$d(),this.Ye=new pt(je)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:Ee(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((r,i)=>{this.rt(i)&&n(i)}))}st(e){const n=e.targetId,r=e.Ce.count,i=this.ot(n);if(i){const o=i.target;if(Ry(o))if(r===0){const u=new ye(o.path);this.et(n,u,pn.newNoDocument(u,Ce.min()))}else Ke(r===1,20013,{expectedCount:r});else{const u=this._t(n);if(u!==r){const h=this.ut(e),d=h?this.ct(h,e,u):1;if(d!==0){this.it(n);const m=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,m)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n;let u,h;try{u=Li(r).toUint8Array()}catch(d){if(d instanceof U1)return xl("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{h=new qv(u,i,o)}catch(d){return xl(d instanceof cc?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return h.ge===0?null:h}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let i=0;return r.forEach((o=>{const u=this.Ge.ht(),h=`projects/${u.projectId}/databases/${u.database}/documents/${o.path.canonicalString()}`;e.mightContain(h)||(this.et(n,o,null),i++)})),i}Tt(e){const n=new Map;this.ze.forEach(((o,u)=>{const h=this.ot(u);if(h){if(o.current&&Ry(h.target)){const d=new ye(h.target.path);this.It(d).has(u)||this.Et(u,d)||this.et(u,d,pn.newNoDocument(d,e))}o.Be&&(n.set(u,o.ke()),o.qe())}}));let r=Ue();this.He.forEach(((o,u)=>{let h=!0;u.forEachWhile((d=>{const m=this.ot(d);return!m||m.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)})),h&&(r=r.add(o))})),this.je.forEach(((o,u)=>u.setReadTime(e)));const i=new im(e,n,this.Ye,this.je,r);return this.je=Us(),this.Je=$d(),this.He=$d(),this.Ye=new pt(je),i}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,n)?i.Qe(n,1):i.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new TE,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Ft(je),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Ft(je),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||fe("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new TE),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function $d(){return new pt(ye.comparator)}function EE(){return new pt(ye.comparator)}const zN={asc:"ASCENDING",desc:"DESCENDING"},qN={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},$N={and:"AND",or:"OR"};class FN{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Iy(t,e){return t.useProto3Json||Jf(e)?e:{value:e}}function Rf(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function gR(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function HN(t,e){return Rf(t,e.toTimestamp())}function Kr(t){return Ke(!!t,49232),Ce.fromTimestamp((function(n){const r=Mi(n);return new ot(r.seconds,r.nanos)})(t))}function $v(t,e){return Oy(t,e).canonicalString()}function Oy(t,e){const n=(function(i){return new it(["projects",i.projectId,"databases",i.database])})(t).child("documents");return e===void 0?n:n.child(e)}function yR(t){const e=it.fromString(t);return Ke(TR(e),10190,{key:e.toString()}),e}function ky(t,e){return $v(t.databaseId,e.path)}function jg(t,e){const n=yR(e);if(n.get(1)!==t.databaseId.projectId)throw new he(ne.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new he(ne.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ye(_R(n))}function vR(t,e){return $v(t.databaseId,e)}function GN(t){const e=yR(t);return e.length===4?it.emptyPath():_R(e)}function Dy(t){return new it(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function _R(t){return Ke(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function SE(t,e,n){return{name:ky(t,e),fields:n.value.mapValue.fields}}function KN(t,e){let n;if("targetChange"in e){e.targetChange;const r=(function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:Ee(39313,{state:m})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=(function(m,g){return m.useProto3Json?(Ke(g===void 0||typeof g=="string",58123),un.fromBase64String(g||"")):(Ke(g===void 0||g instanceof Buffer||g instanceof Uint8Array,16193),un.fromUint8Array(g||new Uint8Array))})(t,e.targetChange.resumeToken),u=e.targetChange.cause,h=u&&(function(m){const g=m.code===void 0?ne.UNKNOWN:fR(m.code);return new he(g,m.message||"")})(u);n=new pR(r,i,o,h||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=jg(t,r.document.name),o=Kr(r.document.updateTime),u=r.document.createTime?Kr(r.document.createTime):Ce.min(),h=new rr({mapValue:{fields:r.document.fields}}),d=pn.newFoundDocument(i,o,u,h),m=r.targetIds||[],g=r.removedTargetIds||[];n=new of(m,g,d.key,d)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=jg(t,r.document),o=r.readTime?Kr(r.readTime):Ce.min(),u=pn.newNoDocument(i,o),h=r.removedTargetIds||[];n=new of([],h,u.key,u)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=jg(t,r.document),o=r.removedTargetIds||[];n=new of([],o,i,null)}else{if(!("filter"in e))return Ee(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:o}=r,u=new MN(i,o),h=r.targetId;n=new mR(h,u)}}return n}function WN(t,e){let n;if(e instanceof nh)n={update:SE(t,e.key,e.value)};else if(e instanceof dR)n={delete:ky(t,e.key)};else if(e instanceof io)n={update:SE(t,e.key,e.data),updateMask:rV(e.fieldMask)};else{if(!(e instanceof PN))return Ee(16599,{Vt:e.type});n={verify:ky(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((r=>(function(o,u){const h=u.transform;if(h instanceof Nc)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof Vc)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof Mc)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof Af)return{fieldPath:u.field.canonicalString(),increment:h.Ae};throw Ee(20930,{transform:u.transform})})(0,r)))),e.precondition.isNone||(n.currentDocument=(function(i,o){return o.updateTime!==void 0?{updateTime:HN(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Ee(27497)})(t,e.precondition)),n}function YN(t,e){return t&&t.length>0?(Ke(e!==void 0,14353),t.map((n=>(function(i,o){let u=i.updateTime?Kr(i.updateTime):Kr(o);return u.isEqual(Ce.min())&&(u=Kr(o)),new ON(u,i.transformResults||[])})(n,e)))):[]}function QN(t,e){return{documents:[vR(t,e.path)]}}function XN(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=vR(t,i);const o=(function(m){if(m.length!==0)return bR(Er.create(m,"and"))})(e.filters);o&&(n.structuredQuery.where=o);const u=(function(m){if(m.length!==0)return m.map((g=>(function(w){return{field:ul(w.field),direction:eV(w.dir)}})(g)))})(e.orderBy);u&&(n.structuredQuery.orderBy=u);const h=Iy(t,e.limit);return h!==null&&(n.structuredQuery.limit=h),e.startAt&&(n.structuredQuery.startAt=(function(m){return{before:m.inclusive,values:m.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(m){return{before:!m.inclusive,values:m.position}})(e.endAt)),{ft:n,parent:i}}function JN(t){let e=GN(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Ke(r===1,65062);const g=n.from[0];g.allDescendants?i=g.collectionId:e=e.child(g.collectionId)}let o=[];n.where&&(o=(function(_){const w=wR(_);return w instanceof Er&&Y1(w)?w.getFilters():[w]})(n.where));let u=[];n.orderBy&&(u=(function(_){return _.map((w=>(function(R){return new Pc(cl(R.field),(function(I){switch(I){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(R.direction))})(w)))})(n.orderBy));let h=null;n.limit&&(h=(function(_){let w;return w=typeof _=="object"?_.value:_,Jf(w)?null:w})(n.limit));let d=null;n.startAt&&(d=(function(_){const w=!!_.before,E=_.values||[];return new Sf(E,w)})(n.startAt));let m=null;return n.endAt&&(m=(function(_){const w=!_.before,E=_.values||[];return new Sf(E,w)})(n.endAt)),gN(e,i,u,o,h,"F",d,m)}function ZN(t,e){const n=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ee(28987,{purpose:i})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function wR(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=cl(n.unaryFilter.field);return Vt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=cl(n.unaryFilter.field);return Vt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=cl(n.unaryFilter.field);return Vt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=cl(n.unaryFilter.field);return Vt.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ee(61313);default:return Ee(60726)}})(t):t.fieldFilter!==void 0?(function(n){return Vt.create(cl(n.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ee(58110);default:return Ee(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return Er.create(n.compositeFilter.filters.map((r=>wR(r))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Ee(1026)}})(n.compositeFilter.op))})(t):Ee(30097,{filter:t})}function eV(t){return zN[t]}function tV(t){return qN[t]}function nV(t){return $N[t]}function ul(t){return{fieldPath:t.canonicalString()}}function cl(t){return ln.fromServerFormat(t.fieldPath)}function bR(t){return t instanceof Vt?(function(n){if(n.op==="=="){if(hE(n.value))return{unaryFilter:{field:ul(n.field),op:"IS_NAN"}};if(cE(n.value))return{unaryFilter:{field:ul(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(hE(n.value))return{unaryFilter:{field:ul(n.field),op:"IS_NOT_NAN"}};if(cE(n.value))return{unaryFilter:{field:ul(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ul(n.field),op:tV(n.op),value:n.value}}})(t):t instanceof Er?(function(n){const r=n.getFilters().map((i=>bR(i)));return r.length===1?r[0]:{compositeFilter:{op:nV(n.op),filters:r}}})(t):Ee(54877,{filter:t})}function rV(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function TR(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii{constructor(e,n,r,i,o=Ce.min(),u=Ce.min(),h=un.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=h,this.expectedCount=d}withSequenceNumber(e){return new Ii(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ii(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ii(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ii(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sV{constructor(e){this.yt=e}}function iV(t){const e=JN({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Cy(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aV{constructor(){this.Cn=new oV}addToCollectionParentIndex(e,n){return this.Cn.add(n),se.resolve()}getCollectionParents(e,n){return se.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return se.resolve()}deleteFieldIndex(e,n){return se.resolve()}deleteAllFieldIndexes(e){return se.resolve()}createTargetIndexes(e,n){return se.resolve()}getDocumentsMatchingTarget(e,n){return se.resolve(null)}getIndexType(e,n){return se.resolve(0)}getFieldIndexes(e,n){return se.resolve([])}getNextCollectionGroupToUpdate(e){return se.resolve(null)}getMinOffset(e,n){return se.resolve(Vi.min())}getMinOffsetFromCollectionGroup(e,n){return se.resolve(Vi.min())}updateCollectionGroup(e,n,r){return se.resolve()}updateIndexEntries(e,n){return se.resolve()}}class oV{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Ft(it.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ft(it.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},ER=41943040;class xn{static withCacheSize(e){return new xn(e,xn.DEFAULT_COLLECTION_PERCENTILE,xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */xn.DEFAULT_COLLECTION_PERCENTILE=10,xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,xn.DEFAULT=new xn(ER,xn.DEFAULT_COLLECTION_PERCENTILE,xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),xn.DISABLED=new xn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kl{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new kl(0)}static cr(){return new kl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RE="LruGarbageCollector",lV=1048576;function xE([t,e],[n,r]){const i=je(t,n);return i===0?je(e,r):i}class uV{constructor(e){this.Ir=e,this.buffer=new Ft(xE),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();xE(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class cV{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){fe(RE,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){ql(n)?fe(RE,"Ignoring IndexedDB error during garbage collection: ",n):await zl(n)}await this.Vr(3e5)}))}}class hV{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((r=>Math.floor(n/100*r)))}nthSequenceNumber(e,n){if(n===0)return se.resolve(Xf.ce);const r=new uV(n);return this.mr.forEachTarget(e,(i=>r.Ar(i.sequenceNumber))).next((()=>this.mr.pr(e,(i=>r.Ar(i))))).next((()=>r.maxValue))}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(fe("LruGarbageCollector","Garbage collection skipped; disabled"),se.resolve(AE)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(fe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),AE):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,i,o,u,h,d,m;const g=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((_=>(_>this.params.maximumSequenceNumbersToCollect?(fe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${_}`),i=this.params.maximumSequenceNumbersToCollect):i=_,u=Date.now(),this.nthSequenceNumber(e,i)))).next((_=>(r=_,h=Date.now(),this.removeTargets(e,r,n)))).next((_=>(o=_,d=Date.now(),this.removeOrphanedDocuments(e,r)))).next((_=>(m=Date.now(),ol()<=Le.DEBUG&&fe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-g}ms
	Determined least recently used ${i} in `+(h-u)+`ms
	Removed ${o} targets in `+(d-h)+`ms
	Removed ${_} documents in `+(m-d)+`ms
Total Duration: ${m-g}ms`),se.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:_}))))}}function dV(t,e){return new hV(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fV{constructor(){this.changes=new so((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,pn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?se.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mV{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pV{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next((i=>(r=i,this.remoteDocumentCache.getEntry(e,n)))).next((i=>(r!==null&&vc(r.mutation,i,vr.empty(),ot.now()),i)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.getLocalViewOfDocuments(e,r,Ue()).next((()=>r))))}getLocalViewOfDocuments(e,n,r=Ue()){const i=ja();return this.populateOverlays(e,i,n).next((()=>this.computeViews(e,n,i,r).next((o=>{let u=uc();return o.forEach(((h,d)=>{u=u.insert(h,d.overlayedDocument)})),u}))))}getOverlayedDocuments(e,n){const r=ja();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,Ue())))}populateOverlays(e,n,r){const i=[];return r.forEach((o=>{n.has(o)||i.push(o)})),this.documentOverlayCache.getOverlays(e,i).next((o=>{o.forEach(((u,h)=>{n.set(u,h)}))}))}computeViews(e,n,r,i){let o=Us();const u=yc(),h=(function(){return yc()})();return n.forEach(((d,m)=>{const g=r.get(m.key);i.has(m.key)&&(g===void 0||g.mutation instanceof io)?o=o.insert(m.key,m):g!==void 0?(u.set(m.key,g.mutation.getFieldMask()),vc(g.mutation,m,g.mutation.getFieldMask(),ot.now())):u.set(m.key,vr.empty())})),this.recalculateAndSaveOverlays(e,o).next((d=>(d.forEach(((m,g)=>u.set(m,g))),n.forEach(((m,g)=>h.set(m,new mV(g,u.get(m)??null)))),h)))}recalculateAndSaveOverlays(e,n){const r=yc();let i=new pt(((u,h)=>u-h)),o=Ue();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((u=>{for(const h of u)h.keys().forEach((d=>{const m=n.get(d);if(m===null)return;let g=r.get(d)||vr.empty();g=h.applyToLocalView(m,g),r.set(d,g);const _=(i.get(h.batchId)||Ue()).add(d);i=i.insert(h.batchId,_)}))})).next((()=>{const u=[],h=i.getReverseIterator();for(;h.hasNext();){const d=h.getNext(),m=d.key,g=d.value,_=sR();g.forEach((w=>{if(!o.has(w)){const E=cR(n.get(w),r.get(w));E!==null&&_.set(w,E),o=o.add(w)}})),u.push(this.documentOverlayCache.saveOverlays(e,m,_))}return se.waitFor(u)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,n,r,i){return(function(u){return ye.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Z1(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next((o=>{const u=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):se.resolve(ja());let h=Ic,d=o;return u.next((m=>se.forEach(m,((g,_)=>(h<_.largestBatchId&&(h=_.largestBatchId),o.get(g)?se.resolve():this.remoteDocumentCache.getEntry(e,g).next((w=>{d=d.insert(g,w)}))))).next((()=>this.populateOverlays(e,m,o))).next((()=>this.computeViews(e,d,m,Ue()))).next((g=>({batchId:h,changes:rR(g)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ye(n)).next((r=>{let i=uc();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i}))}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const o=n.collectionGroup;let u=uc();return this.indexManager.getCollectionParents(e,o).next((h=>se.forEach(h,(d=>{const m=(function(_,w){return new $l(w,null,_.explicitOrderBy.slice(),_.filters.slice(),_.limit,_.limitType,_.startAt,_.endAt)})(n,d.child(o));return this.getDocumentsMatchingCollectionQuery(e,m,r,i).next((g=>{g.forEach(((_,w)=>{u=u.insert(_,w)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next((u=>(o=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i)))).next((u=>{o.forEach(((d,m)=>{const g=m.getKey();u.get(g)===null&&(u=u.insert(g,pn.newInvalidDocument(g)))}));let h=uc();return u.forEach(((d,m)=>{const g=o.get(d);g!==void 0&&vc(g.mutation,m,vr.empty(),ot.now()),nm(n,m)&&(h=h.insert(d,m))})),h}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gV{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return se.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(i){return{id:i.id,version:i.version,createTime:Kr(i.createTime)}})(n)),se.resolve()}getNamedQuery(e,n){return se.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(i){return{name:i.name,query:iV(i.bundledQuery),readTime:Kr(i.readTime)}})(n)),se.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yV{constructor(){this.overlays=new pt(ye.comparator),this.qr=new Map}getOverlay(e,n){return se.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ja();return se.forEach(n,(i=>this.getOverlay(e,i).next((o=>{o!==null&&r.set(i,o)})))).next((()=>r))}saveOverlays(e,n,r){return r.forEach(((i,o)=>{this.St(e,n,o)})),se.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach((o=>this.overlays=this.overlays.remove(o))),this.qr.delete(r)),se.resolve()}getOverlaysForCollection(e,n,r){const i=ja(),o=n.length+1,u=new ye(n.child("")),h=this.overlays.getIteratorFrom(u);for(;h.hasNext();){const d=h.getNext().value,m=d.getKey();if(!n.isPrefixOf(m.path))break;m.path.length===o&&d.largestBatchId>r&&i.set(d.getKey(),d)}return se.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new pt(((m,g)=>m-g));const u=this.overlays.getIterator();for(;u.hasNext();){const m=u.getNext().value;if(m.getKey().getCollectionGroup()===n&&m.largestBatchId>r){let g=o.get(m.largestBatchId);g===null&&(g=ja(),o=o.insert(m.largestBatchId,g)),g.set(m.getKey(),m)}}const h=ja(),d=o.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach(((m,g)=>h.set(m,g))),!(h.size()>=i)););return se.resolve(h)}St(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const u=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,u)}this.overlays=this.overlays.insert(r.key,new VN(n,r));let o=this.qr.get(n);o===void 0&&(o=Ue(),this.qr.set(n,o)),this.qr.set(n,o.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vV{constructor(){this.sessionToken=un.EMPTY_BYTE_STRING}getSessionToken(e){return se.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,se.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fv{constructor(){this.Qr=new Ft(Xt.$r),this.Ur=new Ft(Xt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new Xt(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach((r=>this.addReference(r,n)))}removeReference(e,n){this.Gr(new Xt(e,n))}zr(e,n){e.forEach((r=>this.removeReference(r,n)))}jr(e){const n=new ye(new it([])),r=new Xt(n,e),i=new Xt(n,e+1),o=[];return this.Ur.forEachInRange([r,i],(u=>{this.Gr(u),o.push(u.key)})),o}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new ye(new it([])),r=new Xt(n,e),i=new Xt(n,e+1);let o=Ue();return this.Ur.forEachInRange([r,i],(u=>{o=o.add(u.key)})),o}containsKey(e){const n=new Xt(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Xt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return ye.comparator(e.key,n.key)||je(e.Yr,n.Yr)}static Kr(e,n){return je(e.Yr,n.Yr)||ye.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _V{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Ft(Xt.$r)}checkEmpty(e){return se.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new NN(o,n,r,i);this.mutationQueue.push(u);for(const h of i)this.Zr=this.Zr.add(new Xt(h.key,o)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return se.resolve(u)}lookupMutationBatch(e,n){return se.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.ei(r),o=i<0?0:i;return se.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return se.resolve(this.mutationQueue.length===0?Vv:this.tr-1)}getAllMutationBatches(e){return se.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Xt(n,0),i=new Xt(n,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([r,i],(u=>{const h=this.Xr(u.Yr);o.push(h)})),se.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ft(je);return n.forEach((i=>{const o=new Xt(i,0),u=new Xt(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,u],(h=>{r=r.add(h.Yr)}))})),se.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let o=r;ye.isDocumentKey(o)||(o=o.child(""));const u=new Xt(new ye(o),0);let h=new Ft(je);return this.Zr.forEachWhile((d=>{const m=d.key.path;return!!r.isPrefixOf(m)&&(m.length===i&&(h=h.add(d.Yr)),!0)}),u),se.resolve(this.ti(h))}ti(e){const n=[];return e.forEach((r=>{const i=this.Xr(r);i!==null&&n.push(i)})),n}removeMutationBatch(e,n){Ke(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return se.forEach(n.mutations,(i=>{const o=new Xt(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,n){const r=new Xt(n,0),i=this.Zr.firstAfterOrEqual(r);return se.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,se.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wV{constructor(e){this.ri=e,this.docs=(function(){return new pt(ye.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),o=i?i.size:0,u=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:u}),this.size+=u-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return se.resolve(r?r.document.mutableCopy():pn.newInvalidDocument(n))}getEntries(e,n){let r=Us();return n.forEach((i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():pn.newInvalidDocument(i))})),se.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=Us();const u=n.path,h=new ye(u.child("__id-9223372036854775808__")),d=this.docs.getIteratorFrom(h);for(;d.hasNext();){const{key:m,value:{document:g}}=d.getNext();if(!u.isPrefixOf(m.path))break;m.path.length>u.length+1||WP(KP(g),r)<=0||(i.has(g.key)||nm(n,g))&&(o=o.insert(g.key,g.mutableCopy()))}return se.resolve(o)}getAllFromCollectionGroup(e,n,r,i){Ee(9500)}ii(e,n){return se.forEach(this.docs,(r=>n(r)))}newChangeBuffer(e){return new bV(this)}getSize(e){return se.resolve(this.size)}}class bV extends fV{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((r,i)=>{i.isValidDocument()?n.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)})),se.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TV{constructor(e){this.persistence=e,this.si=new so((n=>jv(n)),Uv),this.lastRemoteSnapshotVersion=Ce.min(),this.highestTargetId=0,this.oi=0,this._i=new Fv,this.targetCount=0,this.ai=kl.ur()}forEachTarget(e,n){return this.si.forEach(((r,i)=>n(i))),se.resolve()}getLastRemoteSnapshotVersion(e){return se.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return se.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),se.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),se.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new kl(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,se.resolve()}updateTargetData(e,n){return this.Pr(n),se.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,se.resolve()}removeTargets(e,n,r){let i=0;const o=[];return this.si.forEach(((u,h)=>{h.sequenceNumber<=n&&r.get(h.targetId)===null&&(this.si.delete(u),o.push(this.removeMatchingKeysForTargetId(e,h.targetId)),i++)})),se.waitFor(o).next((()=>i))}getTargetCount(e){return se.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return se.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),se.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const i=this.persistence.referenceDelegate,o=[];return i&&n.forEach((u=>{o.push(i.markPotentiallyOrphaned(e,u))})),se.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),se.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return se.resolve(r)}containsKey(e,n){return se.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SR{constructor(e,n){this.ui={},this.overlays={},this.ci=new Xf(0),this.li=!1,this.li=!0,this.hi=new vV,this.referenceDelegate=e(this),this.Pi=new TV(this),this.indexManager=new aV,this.remoteDocumentCache=(function(i){return new wV(i)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new sV(n),this.Ii=new gV(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new yV,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new _V(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){fe("MemoryPersistence","Starting transaction:",e);const i=new EV(this.ci.next());return this.referenceDelegate.Ei(),r(i).next((o=>this.referenceDelegate.di(i).next((()=>o)))).toPromise().then((o=>(i.raiseOnCommittedEvent(),o)))}Ai(e,n){return se.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,n))))}}class EV extends QP{constructor(e){super(),this.currentSequenceNumber=e}}class Hv{constructor(e){this.persistence=e,this.Ri=new Fv,this.Vi=null}static mi(e){return new Hv(e)}get fi(){if(this.Vi)return this.Vi;throw Ee(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),se.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),se.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),se.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((i=>this.fi.add(i.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next((i=>{i.forEach((o=>this.fi.add(o.toString())))})).next((()=>r.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return se.forEach(this.fi,(r=>{const i=ye.fromPath(r);return this.gi(e,i).next((o=>{o||n.removeEntry(i,Ce.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return se.or([()=>se.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class xf{constructor(e,n){this.persistence=e,this.pi=new so((r=>ZP(r.path)),((r,i)=>r.isEqual(i))),this.garbageCollector=dV(this,n)}static mi(e,n){return new xf(e,n)}Ei(){}di(e){return se.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>n.next((i=>r+i))))}wr(e){let n=0;return this.pr(e,(r=>{n++})).next((()=>n))}pr(e,n){return se.forEach(this.pi,((r,i)=>this.br(e,r,i).next((o=>o?se.resolve():n(i)))))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ii(e,(u=>this.br(e,u,n).next((h=>{h||(r++,o.removeEntry(u,Ce.min()))})))).next((()=>o.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),se.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),se.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),se.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),se.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=rf(e.data.value)),n}br(e,n,r){return se.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.pi.get(n);return se.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gv{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=i}static As(e,n){let r=Ue(),i=Ue();for(const o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new Gv(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SV{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AV{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return yD()?8:XP(yn())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,i){const o={result:null};return this.ys(e,n).next((u=>{o.result=u})).next((()=>{if(!o.result)return this.ws(e,n,i,r).next((u=>{o.result=u}))})).next((()=>{if(o.result)return;const u=new SV;return this.Ss(e,n,u).next((h=>{if(o.result=h,this.Vs)return this.bs(e,n,u,h.size)}))})).next((()=>o.result))}bs(e,n,r,i){return r.documentReadCount<this.fs?(ol()<=Le.DEBUG&&fe("QueryEngine","SDK will not create cache indexes for query:",ll(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),se.resolve()):(ol()<=Le.DEBUG&&fe("QueryEngine","Query:",ll(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(ol()<=Le.DEBUG&&fe("QueryEngine","The SDK decides to create cache indexes for query:",ll(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Hr(n))):se.resolve())}ys(e,n){if(pE(n))return se.resolve(null);let r=Hr(n);return this.indexManager.getIndexType(e,r).next((i=>i===0?null:(n.limit!==null&&i===1&&(n=Cy(n,null,"F"),r=Hr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next((o=>{const u=Ue(...o);return this.ps.getDocuments(e,u).next((h=>this.indexManager.getMinOffset(e,r).next((d=>{const m=this.Ds(n,h);return this.Cs(n,m,u,d.readTime)?this.ys(e,Cy(n,null,"F")):this.vs(e,m,n,d)}))))})))))}ws(e,n,r,i){return pE(n)||i.isEqual(Ce.min())?se.resolve(null):this.ps.getDocuments(e,r).next((o=>{const u=this.Ds(n,o);return this.Cs(n,u,r,i)?se.resolve(null):(ol()<=Le.DEBUG&&fe("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ll(n)),this.vs(e,u,n,GP(i,Ic)).next((h=>h)))}))}Ds(e,n){let r=new Ft(tR(e));return n.forEach(((i,o)=>{nm(e,o)&&(r=r.add(o))})),r}Cs(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Ss(e,n,r){return ol()<=Le.DEBUG&&fe("QueryEngine","Using full collection scan to execute query:",ll(n)),this.ps.getDocumentsMatchingQuery(e,n,Vi.min(),r)}vs(e,n,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next((o=>(n.forEach((u=>{o=o.insert(u.key,u)})),o)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kv="LocalStore",RV=3e8;class xV{constructor(e,n,r,i){this.persistence=e,this.Fs=n,this.serializer=i,this.Ms=new pt(je),this.xs=new so((o=>jv(o)),Uv),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new pV(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function CV(t,e,n,r){return new xV(t,e,n,r)}async function AR(t,e){const n=Ie(t);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next((o=>(i=o,n.Bs(e),n.mutationQueue.getAllMutationBatches(r)))).next((o=>{const u=[],h=[];let d=Ue();for(const m of i){u.push(m.batchId);for(const g of m.mutations)d=d.add(g.key)}for(const m of o){h.push(m.batchId);for(const g of m.mutations)d=d.add(g.key)}return n.localDocuments.getDocuments(r,d).next((m=>({Ls:m,removedBatchIds:u,addedBatchIds:h})))}))}))}function IV(t,e){const n=Ie(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const i=e.batch.keys(),o=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(h,d,m,g){const _=m.batch,w=_.keys();let E=se.resolve();return w.forEach((R=>{E=E.next((()=>g.getEntry(d,R))).next((O=>{const I=m.docVersions.get(R);Ke(I!==null,48541),O.version.compareTo(I)<0&&(_.applyToRemoteDocument(O,m),O.isValidDocument()&&(O.setReadTime(m.commitVersion),g.addEntry(O)))}))})),E.next((()=>h.mutationQueue.removeMutationBatch(d,_)))})(n,r,e,o).next((()=>o.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(h){let d=Ue();for(let m=0;m<h.mutationResults.length;++m)h.mutationResults[m].transformResults.length>0&&(d=d.add(h.batch.mutations[m].key));return d})(e)))).next((()=>n.localDocuments.getDocuments(r,i)))}))}function RR(t){const e=Ie(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function OV(t,e){const n=Ie(t),r=e.snapshotVersion;let i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(o=>{const u=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;const h=[];e.targetChanges.forEach(((g,_)=>{const w=i.get(_);if(!w)return;h.push(n.Pi.removeMatchingKeys(o,g.removedDocuments,_).next((()=>n.Pi.addMatchingKeys(o,g.addedDocuments,_))));let E=w.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(_)!==null?E=E.withResumeToken(un.EMPTY_BYTE_STRING,Ce.min()).withLastLimboFreeSnapshotVersion(Ce.min()):g.resumeToken.approximateByteSize()>0&&(E=E.withResumeToken(g.resumeToken,r)),i=i.insert(_,E),(function(O,I,P){return O.resumeToken.approximateByteSize()===0||I.snapshotVersion.toMicroseconds()-O.snapshotVersion.toMicroseconds()>=RV?!0:P.addedDocuments.size+P.modifiedDocuments.size+P.removedDocuments.size>0})(w,E,g)&&h.push(n.Pi.updateTargetData(o,E))}));let d=Us(),m=Ue();if(e.documentUpdates.forEach((g=>{e.resolvedLimboDocuments.has(g)&&h.push(n.persistence.referenceDelegate.updateLimboDocument(o,g))})),h.push(kV(o,u,e.documentUpdates).next((g=>{d=g.ks,m=g.qs}))),!r.isEqual(Ce.min())){const g=n.Pi.getLastRemoteSnapshotVersion(o).next((_=>n.Pi.setTargetsMetadata(o,o.currentSequenceNumber,r)));h.push(g)}return se.waitFor(h).next((()=>u.apply(o))).next((()=>n.localDocuments.getLocalViewOfDocuments(o,d,m))).next((()=>d))})).then((o=>(n.Ms=i,o)))}function kV(t,e,n){let r=Ue(),i=Ue();return n.forEach((o=>r=r.add(o))),e.getEntries(t,r).next((o=>{let u=Us();return n.forEach(((h,d)=>{const m=o.get(h);d.isFoundDocument()!==m.isFoundDocument()&&(i=i.add(h)),d.isNoDocument()&&d.version.isEqual(Ce.min())?(e.removeEntry(h,d.readTime),u=u.insert(h,d)):!m.isValidDocument()||d.version.compareTo(m.version)>0||d.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(d),u=u.insert(h,d)):fe(Kv,"Ignoring outdated watch update for ",h,". Current version:",m.version," Watch version:",d.version)})),{ks:u,qs:i}}))}function DV(t,e){const n=Ie(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=Vv),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function PV(t,e){const n=Ie(t);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let i;return n.Pi.getTargetData(r,e).next((o=>o?(i=o,se.resolve(i)):n.Pi.allocateTargetId(r).next((u=>(i=new Ii(e,u,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,i).next((()=>i)))))))})).then((r=>{const i=n.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r}))}async function Py(t,e,n){const r=Ie(t),i=r.Ms.get(e),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,(u=>r.persistence.referenceDelegate.removeTarget(u,i)))}catch(u){if(!ql(u))throw u;fe(Kv,`Failed to update sequence numbers for target ${e}: ${u}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function CE(t,e,n){const r=Ie(t);let i=Ce.min(),o=Ue();return r.persistence.runTransaction("Execute query","readwrite",(u=>(function(d,m,g){const _=Ie(d),w=_.xs.get(g);return w!==void 0?se.resolve(_.Ms.get(w)):_.Pi.getTargetData(m,g)})(r,u,Hr(e)).next((h=>{if(h)return i=h.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(u,h.targetId).next((d=>{o=d}))})).next((()=>r.Fs.getDocumentsMatchingQuery(u,e,n?i:Ce.min(),n?o:Ue()))).next((h=>(NV(r,vN(e),h),{documents:h,Qs:o})))))}function NV(t,e,n){let r=t.Os.get(e)||Ce.min();n.forEach(((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)})),t.Os.set(e,r)}class IE{constructor(){this.activeTargetIds=SN()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class VV{constructor(){this.Mo=new IE,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new IE,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MV{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OE="ConnectivityMonitor";class kE{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){fe(OE,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){fe(OE,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fd=null;function Ny(){return Fd===null?Fd=(function(){return 268435456+Math.round(2147483648*Math.random())})():Fd++,"0x"+Fd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ug="RestConnection",LV={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class jV{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===Tf?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,n,r,i,o){const u=Ny(),h=this.zo(e,n.toUriEncodedString());fe(Ug,`Sending RPC '${e}' ${u}:`,h,r);const d={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(d,i,o);const{host:m}=new URL(h),g=jl(m);return this.Jo(e,h,d,r,g).then((_=>(fe(Ug,`Received RPC '${e}' ${u}: `,_),_)),(_=>{throw xl(Ug,`RPC '${e}' ${u} failed with error: `,_,"url: ",h,"request:",r),_}))}Ho(e,n,r,i,o,u){return this.Go(e,n,r,i,o)}jo(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Bl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((i,o)=>e[o]=i)),r&&r.headers.forEach(((i,o)=>e[o]=i))}zo(e,n){const r=LV[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UV{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fn="WebChannelConnection";class BV extends jV{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,i,o){const u=Ny();return new Promise(((h,d)=>{const m=new C1;m.setWithCredentials(!0),m.listenOnce(I1.COMPLETE,(()=>{try{switch(m.getLastErrorCode()){case nf.NO_ERROR:const _=m.getResponseJson();fe(fn,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(_)),h(_);break;case nf.TIMEOUT:fe(fn,`RPC '${e}' ${u} timed out`),d(new he(ne.DEADLINE_EXCEEDED,"Request time out"));break;case nf.HTTP_ERROR:const w=m.getStatus();if(fe(fn,`RPC '${e}' ${u} failed with status:`,w,"response text:",m.getResponseText()),w>0){let E=m.getResponseJson();Array.isArray(E)&&(E=E[0]);const R=E?.error;if(R&&R.status&&R.message){const O=(function(P){const V=P.toLowerCase().replace(/_/g,"-");return Object.values(ne).indexOf(V)>=0?V:ne.UNKNOWN})(R.status);d(new he(O,R.message))}else d(new he(ne.UNKNOWN,"Server responded with status "+m.getStatus()))}else d(new he(ne.UNAVAILABLE,"Connection failed."));break;default:Ee(9055,{l_:e,streamId:u,h_:m.getLastErrorCode(),P_:m.getLastError()})}}finally{fe(fn,`RPC '${e}' ${u} completed.`)}}));const g=JSON.stringify(i);fe(fn,`RPC '${e}' ${u} sending request:`,i),m.send(n,"POST",g,r,15)}))}T_(e,n,r){const i=Ny(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=D1(),h=k1(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(d.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(d.useFetchStreams=!0),this.jo(d.initMessageHeaders,n,r),d.encodeInitMessageHeaders=!0;const g=o.join("");fe(fn,`Creating RPC '${e}' stream ${i}: ${g}`,d);const _=u.createWebChannel(g,d);this.I_(_);let w=!1,E=!1;const R=new UV({Yo:I=>{E?fe(fn,`Not sending because RPC '${e}' stream ${i} is closed:`,I):(w||(fe(fn,`Opening RPC '${e}' stream ${i} transport.`),_.open(),w=!0),fe(fn,`RPC '${e}' stream ${i} sending:`,I),_.send(I))},Zo:()=>_.close()}),O=(I,P,V)=>{I.listen(P,(M=>{try{V(M)}catch(J){setTimeout((()=>{throw J}),0)}}))};return O(_,lc.EventType.OPEN,(()=>{E||(fe(fn,`RPC '${e}' stream ${i} transport opened.`),R.o_())})),O(_,lc.EventType.CLOSE,(()=>{E||(E=!0,fe(fn,`RPC '${e}' stream ${i} transport closed`),R.a_(),this.E_(_))})),O(_,lc.EventType.ERROR,(I=>{E||(E=!0,xl(fn,`RPC '${e}' stream ${i} transport errored. Name:`,I.name,"Message:",I.message),R.a_(new he(ne.UNAVAILABLE,"The operation could not be completed")))})),O(_,lc.EventType.MESSAGE,(I=>{if(!E){const P=I.data[0];Ke(!!P,16349);const V=P,M=V?.error||V[0]?.error;if(M){fe(fn,`RPC '${e}' stream ${i} received error:`,M);const J=M.status;let X=(function(C){const k=Dt[C];if(k!==void 0)return fR(k)})(J),oe=M.message;X===void 0&&(X=ne.INTERNAL,oe="Unknown error status: "+J+" with message "+M.message),E=!0,R.a_(new he(X,oe)),_.close()}else fe(fn,`RPC '${e}' stream ${i} received:`,P),R.u_(P)}})),O(h,O1.STAT_EVENT,(I=>{I.stat===by.PROXY?fe(fn,`RPC '${e}' stream ${i} detected buffering proxy`):I.stat===by.NOPROXY&&fe(fn,`RPC '${e}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{R.__()}),0),R}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function Bg(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function am(t){return new FN(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xR{constructor(e,n,r=1e3,i=1.5,o=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=i,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-r);i>0&&fe("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DE="PersistentStream";class CR{constructor(e,n,r,i,o,u,h,d){this.Mi=e,this.S_=r,this.b_=i,this.connection=o,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=h,this.listener=d,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new xR(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===ne.RESOURCE_EXHAUSTED?(js(n.toString()),js("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===ne.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,i])=>{this.D_===n&&this.G_(r,i)}),(r=>{e((()=>{const i=new he(ne.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)}))}))}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((i=>{r((()=>this.z_(i)))})),this.stream.onMessage((i=>{r((()=>++this.F_==1?this.J_(i):this.onNext(i)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return fe(DE,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(fe(DE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class zV extends CR{constructor(e,n,r,i,o,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,u),this.serializer=o}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=KN(this.serializer,e),r=(function(o){if(!("targetChange"in o))return Ce.min();const u=o.targetChange;return u.targetIds&&u.targetIds.length?Ce.min():u.readTime?Kr(u.readTime):Ce.min()})(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=Dy(this.serializer),n.addTarget=(function(o,u){let h;const d=u.target;if(h=Ry(d)?{documents:QN(o,d)}:{query:XN(o,d).ft},h.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){h.resumeToken=gR(o,u.resumeToken);const m=Iy(o,u.expectedCount);m!==null&&(h.expectedCount=m)}else if(u.snapshotVersion.compareTo(Ce.min())>0){h.readTime=Rf(o,u.snapshotVersion.toTimestamp());const m=Iy(o,u.expectedCount);m!==null&&(h.expectedCount=m)}return h})(this.serializer,e);const r=ZN(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=Dy(this.serializer),n.removeTarget=e,this.q_(n)}}class qV extends CR{constructor(e,n,r,i,o,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,u),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Ke(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ke(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ke(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=YN(e.writeResults,e.commitTime),r=Kr(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=Dy(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((r=>WN(this.serializer,r)))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $V{}class FV extends $V{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new he(ne.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,u])=>this.connection.Go(e,Oy(n,r),i,o,u))).catch((o=>{throw o.name==="FirebaseError"?(o.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new he(ne.UNKNOWN,o.toString())}))}Ho(e,n,r,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,h])=>this.connection.Ho(e,Oy(n,r),i,u,h,o))).catch((u=>{throw u.name==="FirebaseError"?(u.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new he(ne.UNKNOWN,u.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class HV{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(js(n),this.aa=!1):fe("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xa="RemoteStore";class GV{constructor(e,n,r,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo((u=>{r.enqueueAndForget((async()=>{ao(this)&&(fe(Xa,"Restarting streams for network reachability change."),await(async function(d){const m=Ie(d);m.Ea.add(4),await sh(m),m.Ra.set("Unknown"),m.Ea.delete(4),await om(m)})(this))}))})),this.Ra=new HV(r,i)}}async function om(t){if(ao(t))for(const e of t.da)await e(!0)}async function sh(t){for(const e of t.da)await e(!1)}function IR(t,e){const n=Ie(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Xv(n)?Qv(n):Fl(n).O_()&&Yv(n,e))}function Wv(t,e){const n=Ie(t),r=Fl(n);n.Ia.delete(e),r.O_()&&OR(n,e),n.Ia.size===0&&(r.O_()?r.L_():ao(n)&&n.Ra.set("Unknown"))}function Yv(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ce.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Fl(t).Y_(e)}function OR(t,e){t.Va.Ue(e),Fl(t).Z_(e)}function Qv(t){t.Va=new BN({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Fl(t).start(),t.Ra.ua()}function Xv(t){return ao(t)&&!Fl(t).x_()&&t.Ia.size>0}function ao(t){return Ie(t).Ea.size===0}function kR(t){t.Va=void 0}async function KV(t){t.Ra.set("Online")}async function WV(t){t.Ia.forEach(((e,n)=>{Yv(t,e)}))}async function YV(t,e){kR(t),Xv(t)?(t.Ra.ha(e),Qv(t)):t.Ra.set("Unknown")}async function QV(t,e,n){if(t.Ra.set("Online"),e instanceof pR&&e.state===2&&e.cause)try{await(async function(i,o){const u=o.cause;for(const h of o.targetIds)i.Ia.has(h)&&(await i.remoteSyncer.rejectListen(h,u),i.Ia.delete(h),i.Va.removeTarget(h))})(t,e)}catch(r){fe(Xa,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Cf(t,r)}else if(e instanceof of?t.Va.Ze(e):e instanceof mR?t.Va.st(e):t.Va.tt(e),!n.isEqual(Ce.min()))try{const r=await RR(t.localStore);n.compareTo(r)>=0&&await(function(o,u){const h=o.Va.Tt(u);return h.targetChanges.forEach(((d,m)=>{if(d.resumeToken.approximateByteSize()>0){const g=o.Ia.get(m);g&&o.Ia.set(m,g.withResumeToken(d.resumeToken,u))}})),h.targetMismatches.forEach(((d,m)=>{const g=o.Ia.get(d);if(!g)return;o.Ia.set(d,g.withResumeToken(un.EMPTY_BYTE_STRING,g.snapshotVersion)),OR(o,d);const _=new Ii(g.target,d,m,g.sequenceNumber);Yv(o,_)})),o.remoteSyncer.applyRemoteEvent(h)})(t,n)}catch(r){fe(Xa,"Failed to raise snapshot:",r),await Cf(t,r)}}async function Cf(t,e,n){if(!ql(e))throw e;t.Ea.add(1),await sh(t),t.Ra.set("Offline"),n||(n=()=>RR(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{fe(Xa,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await om(t)}))}function DR(t,e){return e().catch((n=>Cf(t,n,e)))}async function lm(t){const e=Ie(t),n=Ui(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Vv;for(;XV(e);)try{const i=await DV(e.localStore,r);if(i===null){e.Ta.length===0&&n.L_();break}r=i.batchId,JV(e,i)}catch(i){await Cf(e,i)}PR(e)&&NR(e)}function XV(t){return ao(t)&&t.Ta.length<10}function JV(t,e){t.Ta.push(e);const n=Ui(t);n.O_()&&n.X_&&n.ea(e.mutations)}function PR(t){return ao(t)&&!Ui(t).x_()&&t.Ta.length>0}function NR(t){Ui(t).start()}async function ZV(t){Ui(t).ra()}async function eM(t){const e=Ui(t);for(const n of t.Ta)e.ea(n.mutations)}async function tM(t,e,n){const r=t.Ta.shift(),i=zv.from(r,e,n);await DR(t,(()=>t.remoteSyncer.applySuccessfulWrite(i))),await lm(t)}async function nM(t,e){e&&Ui(t).X_&&await(async function(r,i){if((function(u){return LN(u)&&u!==ne.ABORTED})(i.code)){const o=r.Ta.shift();Ui(r).B_(),await DR(r,(()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i))),await lm(r)}})(t,e),PR(t)&&NR(t)}async function PE(t,e){const n=Ie(t);n.asyncQueue.verifyOperationInProgress(),fe(Xa,"RemoteStore received new credentials");const r=ao(n);n.Ea.add(3),await sh(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await om(n)}async function rM(t,e){const n=Ie(t);e?(n.Ea.delete(2),await om(n)):e||(n.Ea.add(2),await sh(n),n.Ra.set("Unknown"))}function Fl(t){return t.ma||(t.ma=(function(n,r,i){const o=Ie(n);return o.sa(),new zV(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(t.datastore,t.asyncQueue,{Xo:KV.bind(null,t),t_:WV.bind(null,t),r_:YV.bind(null,t),H_:QV.bind(null,t)}),t.da.push((async e=>{e?(t.ma.B_(),Xv(t)?Qv(t):t.Ra.set("Unknown")):(await t.ma.stop(),kR(t))}))),t.ma}function Ui(t){return t.fa||(t.fa=(function(n,r,i){const o=Ie(n);return o.sa(),new qV(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:ZV.bind(null,t),r_:nM.bind(null,t),ta:eM.bind(null,t),na:tM.bind(null,t)}),t.da.push((async e=>{e?(t.fa.B_(),await lm(t)):(await t.fa.stop(),t.Ta.length>0&&(fe(Xa,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))}))),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jv{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Vs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){const u=Date.now()+r,h=new Jv(e,n,u,i,o);return h.start(r),h}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new he(ne.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Zv(t,e){if(js("AsyncQueue",`${e}: ${t}`),ql(t))return new he(ne.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wl{static emptySet(e){return new wl(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||ye.comparator(n.key,r.key):(n,r)=>ye.comparator(n.key,r.key),this.keyedMap=uc(),this.sortedSet=new pt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,r)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof wl)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new wl;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NE{constructor(){this.ga=new pt(ye.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Ee(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,r)=>{e.push(r)})),e}}class Dl{constructor(e,n,r,i,o,u,h,d,m){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=u,this.syncStateChanged=h,this.excludesMetadataChanges=d,this.hasCachedResults=m}static fromInitialDocuments(e,n,r,i,o){const u=[];return n.forEach((h=>{u.push({type:0,doc:h})})),new Dl(e,n,wl.emptySet(n),u,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&tm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sM{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class iM{constructor(){this.queries=VE(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const i=Ie(n),o=i.queries;i.queries=VE(),o.forEach(((u,h)=>{for(const d of h.Sa)d.onError(r)}))})(this,new he(ne.ABORTED,"Firestore shutting down"))}}function VE(){return new so((t=>eR(t)),tm)}async function e_(t,e){const n=Ie(t);let r=3;const i=e.query;let o=n.queries.get(i);o?!o.ba()&&e.Da()&&(r=2):(o=new sM,r=e.Da()?0:1);try{switch(r){case 0:o.wa=await n.onListen(i,!0);break;case 1:o.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(u){const h=Zv(u,`Initialization of query '${ll(e.query)}' failed`);return void e.onError(h)}n.queries.set(i,o),o.Sa.push(e),e.va(n.onlineState),o.wa&&e.Fa(o.wa)&&n_(n)}async function t_(t,e){const n=Ie(t),r=e.query;let i=3;const o=n.queries.get(r);if(o){const u=o.Sa.indexOf(e);u>=0&&(o.Sa.splice(u,1),o.Sa.length===0?i=e.Da()?0:1:!o.ba()&&e.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function aM(t,e){const n=Ie(t);let r=!1;for(const i of e){const o=i.query,u=n.queries.get(o);if(u){for(const h of u.Sa)h.Fa(i)&&(r=!0);u.wa=i}}r&&n_(n)}function oM(t,e,n){const r=Ie(t),i=r.queries.get(e);if(i)for(const o of i.Sa)o.onError(n);r.queries.delete(e)}function n_(t){t.Ca.forEach((e=>{e.next()}))}var Vy,ME;(ME=Vy||(Vy={})).Ma="default",ME.Cache="cache";class r_{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Dl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Dl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Vy.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VR{constructor(e){this.key=e}}class MR{constructor(e){this.key=e}}class lM{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ue(),this.mutatedKeys=Ue(),this.eu=tR(e),this.tu=new wl(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new NE,i=n?n.tu:this.tu;let o=n?n.mutatedKeys:this.mutatedKeys,u=i,h=!1;const d=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,m=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((g,_)=>{const w=i.get(g),E=nm(this.query,_)?_:null,R=!!w&&this.mutatedKeys.has(w.key),O=!!E&&(E.hasLocalMutations||this.mutatedKeys.has(E.key)&&E.hasCommittedMutations);let I=!1;w&&E?w.data.isEqual(E.data)?R!==O&&(r.track({type:3,doc:E}),I=!0):this.su(w,E)||(r.track({type:2,doc:E}),I=!0,(d&&this.eu(E,d)>0||m&&this.eu(E,m)<0)&&(h=!0)):!w&&E?(r.track({type:0,doc:E}),I=!0):w&&!E&&(r.track({type:1,doc:w}),I=!0,(d||m)&&(h=!0)),I&&(E?(u=u.add(E),o=O?o.add(g):o.delete(g)):(u=u.delete(g),o=o.delete(g)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const g=this.query.limitType==="F"?u.last():u.first();u=u.delete(g.key),o=o.delete(g.key),r.track({type:1,doc:g})}return{tu:u,iu:r,Cs:h,mutatedKeys:o}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const u=e.iu.ya();u.sort(((g,_)=>(function(E,R){const O=I=>{switch(I){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ee(20277,{Rt:I})}};return O(E)-O(R)})(g.type,_.type)||this.eu(g.doc,_.doc))),this.ou(r),i=i??!1;const h=n&&!i?this._u():[],d=this.Xa.size===0&&this.current&&!i?1:0,m=d!==this.Za;return this.Za=d,u.length!==0||m?{snapshot:new Dl(this.query,e.tu,o,u,e.mutatedKeys,d===0,m,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:h}:{au:h}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new NE,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ue(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const n=[];return e.forEach((r=>{this.Xa.has(r)||n.push(new MR(r))})),this.Xa.forEach((r=>{e.has(r)||n.push(new VR(r))})),n}cu(e){this.Ya=e.Qs,this.Xa=Ue();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Dl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const s_="SyncEngine";class uM{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class cM{constructor(e){this.key=e,this.hu=!1}}class hM{constructor(e,n,r,i,o,u){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=u,this.Pu={},this.Tu=new so((h=>eR(h)),tm),this.Iu=new Map,this.Eu=new Set,this.du=new pt(ye.comparator),this.Au=new Map,this.Ru=new Fv,this.Vu={},this.mu=new Map,this.fu=kl.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function dM(t,e,n=!0){const r=qR(t);let i;const o=r.Tu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.lu()):i=await LR(r,e,n,!0),i}async function fM(t,e){const n=qR(t);await LR(n,e,!0,!1)}async function LR(t,e,n,r){const i=await PV(t.localStore,Hr(e)),o=i.targetId,u=t.sharedClientState.addLocalQueryTarget(o,n);let h;return r&&(h=await mM(t,e,o,u==="current",i.resumeToken)),t.isPrimaryClient&&n&&IR(t.remoteStore,i),h}async function mM(t,e,n,r,i){t.pu=(_,w,E)=>(async function(O,I,P,V){let M=I.view.ru(P);M.Cs&&(M=await CE(O.localStore,I.query,!1).then((({documents:L})=>I.view.ru(L,M))));const J=V&&V.targetChanges.get(I.targetId),X=V&&V.targetMismatches.get(I.targetId)!=null,oe=I.view.applyChanges(M,O.isPrimaryClient,J,X);return jE(O,I.targetId,oe.au),oe.snapshot})(t,_,w,E);const o=await CE(t.localStore,e,!0),u=new lM(e,o.Qs),h=u.ru(o.documents),d=rh.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),m=u.applyChanges(h,t.isPrimaryClient,d);jE(t,n,m.au);const g=new uM(e,n,u);return t.Tu.set(e,g),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),m.snapshot}async function pM(t,e,n){const r=Ie(t),i=r.Tu.get(e),o=r.Iu.get(i.targetId);if(o.length>1)return r.Iu.set(i.targetId,o.filter((u=>!tm(u,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Py(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Wv(r.remoteStore,i.targetId),My(r,i.targetId)})).catch(zl)):(My(r,i.targetId),await Py(r.localStore,i.targetId,!0))}async function gM(t,e){const n=Ie(t),r=n.Tu.get(e),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Wv(n.remoteStore,r.targetId))}async function yM(t,e,n){const r=SM(t);try{const i=await(function(u,h){const d=Ie(u),m=ot.now(),g=h.reduce(((E,R)=>E.add(R.key)),Ue());let _,w;return d.persistence.runTransaction("Locally write mutations","readwrite",(E=>{let R=Us(),O=Ue();return d.Ns.getEntries(E,g).next((I=>{R=I,R.forEach(((P,V)=>{V.isValidDocument()||(O=O.add(P))}))})).next((()=>d.localDocuments.getOverlayedDocuments(E,R))).next((I=>{_=I;const P=[];for(const V of h){const M=DN(V,_.get(V.key).overlayedDocument);M!=null&&P.push(new io(V.key,M,G1(M.value.mapValue),Gr.exists(!0)))}return d.mutationQueue.addMutationBatch(E,m,P,h)})).next((I=>{w=I;const P=I.applyToLocalDocumentSet(_,O);return d.documentOverlayCache.saveOverlays(E,I.batchId,P)}))})).then((()=>({batchId:w.batchId,changes:rR(_)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(u,h,d){let m=u.Vu[u.currentUser.toKey()];m||(m=new pt(je)),m=m.insert(h,d),u.Vu[u.currentUser.toKey()]=m})(r,i.batchId,n),await ih(r,i.changes),await lm(r.remoteStore)}catch(i){const o=Zv(i,"Failed to persist write");n.reject(o)}}async function jR(t,e){const n=Ie(t);try{const r=await OV(n.localStore,e);e.targetChanges.forEach(((i,o)=>{const u=n.Au.get(o);u&&(Ke(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?u.hu=!0:i.modifiedDocuments.size>0?Ke(u.hu,14607):i.removedDocuments.size>0&&(Ke(u.hu,42227),u.hu=!1))})),await ih(n,r,e)}catch(r){await zl(r)}}function LE(t,e,n){const r=Ie(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Tu.forEach(((o,u)=>{const h=u.view.va(e);h.snapshot&&i.push(h.snapshot)})),(function(u,h){const d=Ie(u);d.onlineState=h;let m=!1;d.queries.forEach(((g,_)=>{for(const w of _.Sa)w.va(h)&&(m=!0)})),m&&n_(d)})(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function vM(t,e,n){const r=Ie(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Au.get(e),o=i&&i.key;if(o){let u=new pt(ye.comparator);u=u.insert(o,pn.newNoDocument(o,Ce.min()));const h=Ue().add(o),d=new im(Ce.min(),new Map,new pt(je),u,h);await jR(r,d),r.du=r.du.remove(o),r.Au.delete(e),i_(r)}else await Py(r.localStore,e,!1).then((()=>My(r,e,n))).catch(zl)}async function _M(t,e){const n=Ie(t),r=e.batch.batchId;try{const i=await IV(n.localStore,e);BR(n,r,null),UR(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await ih(n,i)}catch(i){await zl(i)}}async function wM(t,e,n){const r=Ie(t);try{const i=await(function(u,h){const d=Ie(u);return d.persistence.runTransaction("Reject batch","readwrite-primary",(m=>{let g;return d.mutationQueue.lookupMutationBatch(m,h).next((_=>(Ke(_!==null,37113),g=_.keys(),d.mutationQueue.removeMutationBatch(m,_)))).next((()=>d.mutationQueue.performConsistencyCheck(m))).next((()=>d.documentOverlayCache.removeOverlaysForBatchId(m,g,h))).next((()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,g))).next((()=>d.localDocuments.getDocuments(m,g)))}))})(r.localStore,e);BR(r,e,n),UR(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await ih(r,i)}catch(i){await zl(i)}}function UR(t,e){(t.mu.get(e)||[]).forEach((n=>{n.resolve()})),t.mu.delete(e)}function BR(t,e,n){const r=Ie(t);let i=r.Vu[r.currentUser.toKey()];if(i){const o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function My(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach((r=>{t.Ru.containsKey(r)||zR(t,r)}))}function zR(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Wv(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),i_(t))}function jE(t,e,n){for(const r of n)r instanceof VR?(t.Ru.addReference(r.key,e),bM(t,r)):r instanceof MR?(fe(s_,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||zR(t,r.key)):Ee(19791,{wu:r})}function bM(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(fe(s_,"New document in limbo: "+n),t.Eu.add(r),i_(t))}function i_(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new ye(it.fromString(e)),r=t.fu.next();t.Au.set(r,new cM(n)),t.du=t.du.insert(n,r),IR(t.remoteStore,new Ii(Hr(em(n.path)),r,"TargetPurposeLimboResolution",Xf.ce))}}async function ih(t,e,n){const r=Ie(t),i=[],o=[],u=[];r.Tu.isEmpty()||(r.Tu.forEach(((h,d)=>{u.push(r.pu(d,e,n).then((m=>{if((m||n)&&r.isPrimaryClient){const g=m?!m.fromCache:n?.targetChanges.get(d.targetId)?.current;r.sharedClientState.updateQueryState(d.targetId,g?"current":"not-current")}if(m){i.push(m);const g=Gv.As(d.targetId,m);o.push(g)}})))})),await Promise.all(u),r.Pu.H_(i),await(async function(d,m){const g=Ie(d);try{await g.persistence.runTransaction("notifyLocalViewChanges","readwrite",(_=>se.forEach(m,(w=>se.forEach(w.Es,(E=>g.persistence.referenceDelegate.addReference(_,w.targetId,E))).next((()=>se.forEach(w.ds,(E=>g.persistence.referenceDelegate.removeReference(_,w.targetId,E)))))))))}catch(_){if(!ql(_))throw _;fe(Kv,"Failed to update sequence numbers: "+_)}for(const _ of m){const w=_.targetId;if(!_.fromCache){const E=g.Ms.get(w),R=E.snapshotVersion,O=E.withLastLimboFreeSnapshotVersion(R);g.Ms=g.Ms.insert(w,O)}}})(r.localStore,o))}async function TM(t,e){const n=Ie(t);if(!n.currentUser.isEqual(e)){fe(s_,"User change. New user:",e.toKey());const r=await AR(n.localStore,e);n.currentUser=e,(function(o,u){o.mu.forEach((h=>{h.forEach((d=>{d.reject(new he(ne.CANCELLED,u))}))})),o.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await ih(n,r.Ls)}}function EM(t,e){const n=Ie(t),r=n.Au.get(e);if(r&&r.hu)return Ue().add(r.key);{let i=Ue();const o=n.Iu.get(e);if(!o)return i;for(const u of o){const h=n.Tu.get(u);i=i.unionWith(h.view.nu)}return i}}function qR(t){const e=Ie(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=jR.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=EM.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=vM.bind(null,e),e.Pu.H_=aM.bind(null,e.eventManager),e.Pu.yu=oM.bind(null,e.eventManager),e}function SM(t){const e=Ie(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=_M.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=wM.bind(null,e),e}class If{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=am(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return CV(this.persistence,new AV,e.initialUser,this.serializer)}Cu(e){return new SR(Hv.mi,this.serializer)}Du(e){return new VV}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}If.provider={build:()=>new If};class AM extends If{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Ke(this.persistence.referenceDelegate instanceof xf,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new cV(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?xn.withCacheSize(this.cacheSizeBytes):xn.DEFAULT;return new SR((r=>xf.mi(r,n)),this.serializer)}}class Ly{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>LE(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=TM.bind(null,this.syncEngine),await rM(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new iM})()}createDatastore(e){const n=am(e.databaseInfo.databaseId),r=(function(o){return new BV(o)})(e.databaseInfo);return(function(o,u,h,d){return new FV(o,u,h,d)})(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return(function(r,i,o,u,h){return new GV(r,i,o,u,h)})(this.localStore,this.datastore,e.asyncQueue,(n=>LE(this.syncEngine,n,0)),(function(){return kE.v()?new kE:new MV})())}createSyncEngine(e,n){return(function(i,o,u,h,d,m,g){const _=new hM(i,o,u,h,d,m);return g&&(_.gu=!0),_})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const r=Ie(n);fe(Xa,"RemoteStore shutting down."),r.Ea.add(5),await sh(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Ly.provider={build:()=>new Ly};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a_{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):js("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bi="FirestoreClient";class RM{constructor(e,n,r,i,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=mn.UNAUTHENTICATED,this.clientId=Nv.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,(async u=>{fe(Bi,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(r,(u=>(fe(Bi,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Vs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Zv(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function zg(t,e){t.asyncQueue.verifyOperationInProgress(),fe(Bi,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener((async i=>{r.isEqual(i)||(await AR(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function UE(t,e){t.asyncQueue.verifyOperationInProgress();const n=await xM(t);fe(Bi,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((r=>PE(e.remoteStore,r))),t.setAppCheckTokenChangeListener(((r,i)=>PE(e.remoteStore,i))),t._onlineComponents=e}async function xM(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){fe(Bi,"Using user provided OfflineComponentProvider");try{await zg(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(i){return i.name==="FirebaseError"?i.code===ne.FAILED_PRECONDITION||i.code===ne.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(n))throw n;xl("Error using user provided cache. Falling back to memory cache: "+n),await zg(t,new If)}}else fe(Bi,"Using default OfflineComponentProvider"),await zg(t,new AM(void 0));return t._offlineComponents}async function $R(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(fe(Bi,"Using user provided OnlineComponentProvider"),await UE(t,t._uninitializedComponentsProvider._online)):(fe(Bi,"Using default OnlineComponentProvider"),await UE(t,new Ly))),t._onlineComponents}function CM(t){return $R(t).then((e=>e.syncEngine))}async function Of(t){const e=await $R(t),n=e.eventManager;return n.onListen=dM.bind(null,e.syncEngine),n.onUnlisten=pM.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=fM.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=gM.bind(null,e.syncEngine),n}function IM(t,e,n={}){const r=new Vs;return t.asyncQueue.enqueueAndForget((async()=>(function(o,u,h,d,m){const g=new a_({next:w=>{g.Nu(),u.enqueueAndForget((()=>t_(o,_)));const E=w.docs.has(h);!E&&w.fromCache?m.reject(new he(ne.UNAVAILABLE,"Failed to get document because the client is offline.")):E&&w.fromCache&&d&&d.source==="server"?m.reject(new he(ne.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(w)},error:w=>m.reject(w)}),_=new r_(em(h.path),g,{includeMetadataChanges:!0,qa:!0});return e_(o,_)})(await Of(t),t.asyncQueue,e,n,r))),r.promise}function OM(t,e,n={}){const r=new Vs;return t.asyncQueue.enqueueAndForget((async()=>(function(o,u,h,d,m){const g=new a_({next:w=>{g.Nu(),u.enqueueAndForget((()=>t_(o,_))),w.fromCache&&d.source==="server"?m.reject(new he(ne.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(w)},error:w=>m.reject(w)}),_=new r_(h,g,{includeMetadataChanges:!0,qa:!0});return e_(o,_)})(await Of(t),t.asyncQueue,e,n,r))),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FR(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BE=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HR="firestore.googleapis.com",zE=!0;class qE{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new he(ne.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=HR,this.ssl=zE}else this.host=e.host,this.ssl=e.ssl??zE;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=ER;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<lV)throw new he(ne.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}HP("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=FR(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new he(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new he(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new he(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class um{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new qE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new he(ne.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new he(ne.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new qE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new VP;switch(r.type){case"firstParty":return new UP(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new he(ne.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=BE.get(n);r&&(fe("ComponentProvider","Removing Datastore"),BE.delete(n),r.terminate())})(this),Promise.resolve()}}function kM(t,e,n,r={}){t=wr(t,um);const i=jl(e),o=t._getSettings(),u={...o,emulatorOptions:t._getEmulatorOptions()},h=`${e}:${n}`;i&&(_1(`https://${h}`),w1("Firestore",!0)),o.host!==HR&&o.host!==h&&xl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const d={...o,host:h,ssl:i,emulatorOptions:r};if(!Wa(d,u)&&(t._setSettings(d),r.mockUserToken)){let m,g;if(typeof r.mockUserToken=="string")m=r.mockUserToken,g=mn.MOCK_USER;else{m=lD(r.mockUserToken,t._app?.options.projectId);const _=r.mockUserToken.sub||r.mockUserToken.user_id;if(!_)throw new he(ne.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new mn(_)}t._authCredentials=new MP(new N1(m,g))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $i{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new $i(this.firestore,e,this._query)}}class Rt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ni(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Rt(this.firestore,e,this._key)}toJSON(){return{type:Rt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(th(n,Rt._jsonSchema))return new Rt(e,r||null,new ye(it.fromString(n.referencePath)))}}Rt._jsonSchemaVersion="firestore/documentReference/1.0",Rt._jsonSchema={type:Mt("string",Rt._jsonSchemaVersion),referencePath:Mt("string")};class Ni extends $i{constructor(e,n,r){super(e,n,em(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Rt(this.firestore,null,new ye(e))}withConverter(e){return new Ni(this.firestore,e,this._path)}}function Ja(t,e,...n){if(t=En(t),V1("collection","path",e),t instanceof um){const r=it.fromString(e,...n);return tE(r),new Ni(t,null,r)}{if(!(t instanceof Rt||t instanceof Ni))throw new he(ne.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(it.fromString(e,...n));return tE(r),new Ni(t.firestore,null,r)}}function Za(t,e,...n){if(t=En(t),arguments.length===1&&(e=Nv.newId()),V1("doc","path",e),t instanceof um){const r=it.fromString(e,...n);return eE(r),new Rt(t,null,new ye(r))}{if(!(t instanceof Rt||t instanceof Ni))throw new he(ne.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(it.fromString(e,...n));return eE(r),new Rt(t.firestore,t instanceof Ni?t.converter:null,new ye(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $E="AsyncQueue";class FE{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new xR(this,"async_queue_retry"),this._c=()=>{const r=Bg();r&&fe($E,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=Bg();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Bg();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new Vs;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!ql(e))throw e;fe($E,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,js("INTERNAL UNHANDLED ERROR: ",HE(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const i=Jv.createAndSchedule(this,e,n,r,(o=>this.hc(o)));return this.tc.push(i),i}uc(){this.nc&&Ee(47125,{Pc:HE(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function HE(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GE(t){return(function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const o of r)if(o in i&&typeof i[o]=="function")return!0;return!1})(t,["next","error","complete"])}class eo extends um{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new FE,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new FE(e),this._firestoreClient=void 0,await e}}}function DM(t,e){const n=typeof t=="object"?t:S1(),r=typeof t=="string"?t:Tf,i=Dv(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const o=aD("firestore");o&&kM(i,...o)}return i}function cm(t){if(t._terminated)throw new he(ne.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||PM(t),t._firestoreClient}function PM(t){const e=t._freezeSettings(),n=(function(i,o,u,h){return new nN(i,o,u,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,FR(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)})(t._databaseId,t._app?.options.appId||"",t._persistenceKey,e);t._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new RM(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&(function(i){const o=i?._online.build();return{_offline:i?._offline.build(o),_online:o}})(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new sr(un.fromBase64String(e))}catch(n){throw new he(ne.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new sr(un.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:sr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(th(e,sr._jsonSchema))return sr.fromBase64String(e.bytes)}}sr._jsonSchemaVersion="firestore/bytes/1.0",sr._jsonSchema={type:Mt("string",sr._jsonSchemaVersion),bytes:Mt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o_{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new he(ne.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ln(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l_{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new he(ne.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new he(ne.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return je(this._lat,e._lat)||je(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Wr._jsonSchemaVersion}}static fromJSON(e){if(th(e,Wr._jsonSchema))return new Wr(e.latitude,e.longitude)}}Wr._jsonSchemaVersion="firestore/geoPoint/1.0",Wr._jsonSchema={type:Mt("string",Wr._jsonSchemaVersion),latitude:Mt("number"),longitude:Mt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yr{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Yr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(th(e,Yr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new Yr(e.vectorValues);throw new he(ne.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Yr._jsonSchemaVersion="firestore/vectorValue/1.0",Yr._jsonSchema={type:Mt("string",Yr._jsonSchemaVersion),vectorValues:Mt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NM=/^__.*__$/;class VM{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new io(e,this.data,this.fieldMask,n,this.fieldTransforms):new nh(e,this.data,n,this.fieldTransforms)}}function GR(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ee(40011,{Ac:t})}}class u_{constructor(e,n,r,i,o,u){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new u_({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){const n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return kf(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(GR(this.Ac)&&NM.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class MM{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||am(e)}Cc(e,n,r,i=!1){return new u_({Ac:e,methodName:n,Dc:r,path:ln.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function c_(t){const e=t._freezeSettings(),n=am(t._databaseId);return new MM(t._databaseId,!!e.ignoreUndefinedProperties,n)}function KR(t,e,n,r,i,o={}){const u=t.Cc(o.merge||o.mergeFields?2:0,e,n,i);QR("Data must be an object, but it was:",u,r);const h=WR(r,u);let d,m;if(o.merge)d=new vr(u.fieldMask),m=u.fieldTransforms;else if(o.mergeFields){const g=[];for(const _ of o.mergeFields){const w=jM(e,_,n);if(!u.contains(w))throw new he(ne.INVALID_ARGUMENT,`Field '${w}' is specified in your field mask but missing from your input data.`);BM(g,w)||g.push(w)}d=new vr(g),m=u.fieldTransforms.filter((_=>d.covers(_.field)))}else d=null,m=u.fieldTransforms;return new VM(new rr(h),d,m)}class h_ extends l_{_toFieldTransform(e){return new CN(e.path,new Nc)}isEqual(e){return e instanceof h_}}function LM(t,e,n,r=!1){return d_(n,t.Cc(r?4:3,e))}function d_(t,e){if(YR(t=En(t)))return QR("Unsupported field value:",e,t),WR(t,e);if(t instanceof l_)return(function(r,i){if(!GR(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,i){const o=[];let u=0;for(const h of r){let d=d_(h,i.wc(u));d==null&&(d={nullValue:"NULL_VALUE"}),o.push(d),u++}return{arrayValue:{values:o}}})(t,e)}return(function(r,i){if((r=En(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return AN(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=ot.fromDate(r);return{timestampValue:Rf(i.serializer,o)}}if(r instanceof ot){const o=new ot(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Rf(i.serializer,o)}}if(r instanceof Wr)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof sr)return{bytesValue:gR(i.serializer,r._byteString)};if(r instanceof Rt){const o=i.databaseId,u=r.firestore._databaseId;if(!u.isEqual(o))throw i.Sc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:$v(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Yr)return(function(u,h){return{mapValue:{fields:{[F1]:{stringValue:H1},[Ef]:{arrayValue:{values:u.toArray().map((m=>{if(typeof m!="number")throw h.Sc("VectorValues must only contain numeric values.");return Bv(h.serializer,m)}))}}}}}})(r,i);throw i.Sc(`Unsupported field value: ${Qf(r)}`)})(t,e)}function WR(t,e){const n={};return j1(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ro(t,((r,i)=>{const o=d_(i,e.mc(r));o!=null&&(n[r]=o)})),{mapValue:{fields:n}}}function YR(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ot||t instanceof Wr||t instanceof sr||t instanceof Rt||t instanceof l_||t instanceof Yr)}function QR(t,e,n){if(!YR(n)||!M1(n)){const r=Qf(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function jM(t,e,n){if((e=En(e))instanceof o_)return e._internalPath;if(typeof e=="string")return XR(t,e);throw kf("Field path arguments must be of type string or ",t,!1,void 0,n)}const UM=new RegExp("[~\\*/\\[\\]]");function XR(t,e,n){if(e.search(UM)>=0)throw kf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new o_(...e.split("."))._internalPath}catch{throw kf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function kf(t,e,n,r,i){const o=r&&!r.isEmpty(),u=i!==void 0;let h=`Function ${e}() called with invalid data`;n&&(h+=" (via `toFirestore()`)"),h+=". ";let d="";return(o||u)&&(d+=" (found",o&&(d+=` in field ${r}`),u&&(d+=` in document ${i}`),d+=")"),new he(ne.INVALID_ARGUMENT,h+t+d)}function BM(t,e){return t.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JR{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Rt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new zM(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(hm("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class zM extends JR{data(){return super.data()}}function hm(t,e){return typeof e=="string"?XR(t,e):e instanceof o_?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZR(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new he(ne.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class f_{}class ex extends f_{}function m_(t,e,...n){let r=[];e instanceof f_&&r.push(e),r=r.concat(n),(function(o){const u=o.filter((d=>d instanceof p_)).length,h=o.filter((d=>d instanceof dm)).length;if(u>1||u>0&&h>0)throw new he(ne.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const i of r)t=i._apply(t);return t}class dm extends ex{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new dm(e,n,r)}_apply(e){const n=this._parse(e);return nx(e._query,n),new $i(e.firestore,e.converter,xy(e._query,n))}_parse(e){const n=c_(e.firestore);return(function(o,u,h,d,m,g,_){let w;if(m.isKeyField()){if(g==="array-contains"||g==="array-contains-any")throw new he(ne.INVALID_ARGUMENT,`Invalid Query. You can't perform '${g}' queries on documentId().`);if(g==="in"||g==="not-in"){WE(_,g);const R=[];for(const O of _)R.push(KE(d,o,O));w={arrayValue:{values:R}}}else w=KE(d,o,_)}else g!=="in"&&g!=="not-in"&&g!=="array-contains-any"||WE(_,g),w=LM(h,u,_,g==="in"||g==="not-in");return Vt.create(m,g,w)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function qM(t,e,n){const r=e,i=hm("where",t);return dm._create(i,r,n)}class p_ extends f_{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new p_(e,n)}_parse(e){const n=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return n.length===1?n[0]:Er.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(i,o){let u=i;const h=o.getFlattenedFilters();for(const d of h)nx(u,d),u=xy(u,d)})(e._query,n),new $i(e.firestore,e.converter,xy(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class g_ extends ex{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new g_(e,n)}_apply(e){const n=(function(i,o,u){if(i.startAt!==null)throw new he(ne.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new he(ne.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Pc(o,u)})(e._query,this._field,this._direction);return new $i(e.firestore,e.converter,(function(i,o){const u=i.explicitOrderBy.concat([o]);return new $l(i.path,i.collectionGroup,u,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)})(e._query,n))}}function tx(t,e="asc"){const n=e,r=hm("orderBy",t);return g_._create(r,n)}function KE(t,e,n){if(typeof(n=En(n))=="string"){if(n==="")throw new he(ne.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Z1(e)&&n.indexOf("/")!==-1)throw new he(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(it.fromString(n));if(!ye.isDocumentKey(r))throw new he(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return uE(t,new ye(r))}if(n instanceof Rt)return uE(t,n._key);throw new he(ne.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Qf(n)}.`)}function WE(t,e){if(!Array.isArray(t)||t.length===0)throw new he(ne.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function nx(t,e){const n=(function(i,o){for(const u of i)for(const h of u.getFlattenedFilters())if(o.indexOf(h.op)>=0)return h.op;return null})(t.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new he(ne.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new he(ne.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class $M{convertValue(e,n="none"){switch(ji(e)){case 0:return null;case 1:return e.booleanValue;case 2:return At(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Li(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ee(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return ro(e,((i,o)=>{r[i]=this.convertValue(o,n)})),r}convertVectorValue(e){const n=e.fields?.[Ef].arrayValue?.values?.map((r=>At(r.doubleValue)));return new Yr(n)}convertGeoPoint(e){return new Wr(At(e.latitude),At(e.longitude))}convertArray(e,n){return(e.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Zf(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Oc(e));default:return null}}convertTimestamp(e){const n=Mi(e);return new ot(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=it.fromString(e);Ke(TR(r),9688,{name:e});const i=new kc(r.get(1),r.get(3)),o=new ye(r.popFirst(5));return i.isEqual(n)||js(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rx(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class hc{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class $a extends JR{constructor(e,n,r,i,o,u){super(e,n,r,i,u),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new lf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(hm("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new he(ne.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=$a._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}$a._jsonSchemaVersion="firestore/documentSnapshot/1.0",$a._jsonSchema={type:Mt("string",$a._jsonSchemaVersion),bundleSource:Mt("string","DocumentSnapshot"),bundleName:Mt("string"),bundle:Mt("string")};class lf extends $a{data(e={}){return super.data(e)}}class Fa{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new hc(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((r=>{e.call(n,new lf(this._firestore,this._userDataWriter,r.key,r,new hc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new he(ne.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(i,o){if(i._snapshot.oldDocs.isEmpty()){let u=0;return i._snapshot.docChanges.map((h=>{const d=new lf(i._firestore,i._userDataWriter,h.doc.key,h.doc,new hc(i._snapshot.mutatedKeys.has(h.doc.key),i._snapshot.fromCache),i.query.converter);return h.doc,{type:"added",doc:d,oldIndex:-1,newIndex:u++}}))}{let u=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((h=>o||h.type!==3)).map((h=>{const d=new lf(i._firestore,i._userDataWriter,h.doc.key,h.doc,new hc(i._snapshot.mutatedKeys.has(h.doc.key),i._snapshot.fromCache),i.query.converter);let m=-1,g=-1;return h.type!==0&&(m=u.indexOf(h.doc.key),u=u.delete(h.doc.key)),h.type!==1&&(u=u.add(h.doc),g=u.indexOf(h.doc.key)),{type:FM(h.type),doc:d,oldIndex:m,newIndex:g}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new he(ne.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Fa._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Nv.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach((o=>{o._document!==null&&(n.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function FM(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ee(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y_(t){t=wr(t,Rt);const e=wr(t.firestore,eo);return IM(cm(e),t._key).then((n=>ix(e,t,n)))}Fa._jsonSchemaVersion="firestore/querySnapshot/1.0",Fa._jsonSchema={type:Mt("string",Fa._jsonSchemaVersion),bundleSource:Mt("string","QuerySnapshot"),bundleName:Mt("string"),bundle:Mt("string")};class v_ extends $M{constructor(e){super(),this.firestore=e}convertBytes(e){return new sr(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Rt(this.firestore,null,n)}}function HM(t){t=wr(t,$i);const e=wr(t.firestore,eo),n=cm(e),r=new v_(e);return ZR(t._query),OM(n,t._query).then((i=>new Fa(e,r,t,i)))}function jy(t,e,n){t=wr(t,Rt);const r=wr(t.firestore,eo),i=rx(t.converter,e,n);return sx(r,[KR(c_(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Gr.none())])}function GM(t,e){const n=wr(t.firestore,eo),r=Za(t),i=rx(t.converter,e);return sx(n,[KR(c_(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Gr.exists(!1))]).then((()=>r))}function Hl(t,...e){t=En(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||GE(e[r])||(n=e[r++]);const i={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(GE(e[r])){const d=e[r];e[r]=d.next?.bind(d),e[r+1]=d.error?.bind(d),e[r+2]=d.complete?.bind(d)}let o,u,h;if(t instanceof Rt)u=wr(t.firestore,eo),h=em(t._key.path),o={next:d=>{e[r]&&e[r](ix(u,t,d))},error:e[r+1],complete:e[r+2]};else{const d=wr(t,$i);u=wr(d.firestore,eo),h=d._query;const m=new v_(u);o={next:g=>{e[r]&&e[r](new Fa(u,m,d,g))},error:e[r+1],complete:e[r+2]},ZR(t._query)}return(function(m,g,_,w){const E=new a_(w),R=new r_(g,E,_);return m.asyncQueue.enqueueAndForget((async()=>e_(await Of(m),R))),()=>{E.Nu(),m.asyncQueue.enqueueAndForget((async()=>t_(await Of(m),R)))}})(cm(u),h,i,o)}function sx(t,e){return(function(r,i){const o=new Vs;return r.asyncQueue.enqueueAndForget((async()=>yM(await CM(r),i,o))),o.promise})(cm(t),e)}function ix(t,e,n){const r=n.docs.get(e._key),i=new v_(t);return new $a(t,i,e._key,r,new hc(n.hasPendingWrites,n.fromCache),e.converter)}function KM(){return new h_("serverTimestamp")}(function(e,n=!0){(function(i){Bl=i})(Ul),Rl(new Ya("firestore",((r,{instanceIdentifier:i,options:o})=>{const u=r.getProvider("app").getImmediate(),h=new eo(new LP(r.getProvider("auth-internal")),new BP(u,r.getProvider("app-check-internal")),(function(m,g){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new he(ne.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new kc(m.options.projectId,g)})(u,i),u);return o={useFetchStreams:n,...o},h._setSettings(o),h}),"PUBLIC").setMultipleInstances(!0)),Di(QT,XT,e),Di(QT,XT,"esm2020")})();var WM="firebase",YM="12.2.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Di(WM,YM,"app");function ax(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const QM=ax,ox=new Zc("auth","Firebase",ax());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Df=new Ov("@firebase/auth");function XM(t,...e){Df.logLevel<=Le.WARN&&Df.warn(`Auth (${Ul}): ${t}`,...e)}function uf(t,...e){Df.logLevel<=Le.ERROR&&Df.error(`Auth (${Ul}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ts(t,...e){throw w_(t,...e)}function br(t,...e){return w_(t,...e)}function __(t,e,n){const r={...QM(),[e]:n};return new Zc("auth","Firebase",r).create(e,{appName:t.name})}function Ha(t){return __(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function JM(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&ts(t,"argument-error"),__(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function w_(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return ox.create(t,...e)}function Re(t,e,...n){if(!t)throw w_(e,...n)}function Ds(t){const e="INTERNAL ASSERTION FAILED: "+t;throw uf(e),new Error(e)}function Bs(t,e){t||Ds(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uy(){return typeof self<"u"&&self.location?.href||""}function ZM(){return YE()==="http:"||YE()==="https:"}function YE(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e4(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(ZM()||mD()||"connection"in navigator)?navigator.onLine:!0}function t4(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ah{constructor(e,n){this.shortDelay=e,this.longDelay=n,Bs(n>e,"Short delay should be less than long delay!"),this.isMobile=hD()||pD()}get(){return e4()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b_(t,e){Bs(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lx{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ds("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ds("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ds("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n4={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r4=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],s4=new ah(3e4,6e4);function T_(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Gl(t,e,n,r,i={}){return ux(t,i,async()=>{let o={},u={};r&&(e==="GET"?u=r:o={body:JSON.stringify(r)});const h=eh({key:t.config.apiKey,...u}).slice(1),d=await t._getAdditionalHeaders();d["Content-Type"]="application/json",t.languageCode&&(d["X-Firebase-Locale"]=t.languageCode);const m={method:e,headers:d,...o};return fD()||(m.referrerPolicy="no-referrer"),t.emulatorConfig&&jl(t.emulatorConfig.host)&&(m.credentials="include"),lx.fetch()(await cx(t,t.config.apiHost,n,h),m)})}async function ux(t,e,n){t._canInitEmulator=!1;const r={...n4,...e};try{const i=new a4(t),o=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const u=await o.json();if("needConfirmation"in u)throw Hd(t,"account-exists-with-different-credential",u);if(o.ok&&!("errorMessage"in u))return u;{const h=o.ok?u.errorMessage:u.error.message,[d,m]=h.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw Hd(t,"credential-already-in-use",u);if(d==="EMAIL_EXISTS")throw Hd(t,"email-already-in-use",u);if(d==="USER_DISABLED")throw Hd(t,"user-disabled",u);const g=r[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw __(t,g,m);ts(t,g)}}catch(i){if(i instanceof Fs)throw i;ts(t,"network-request-failed",{message:String(i)})}}async function i4(t,e,n,r,i={}){const o=await Gl(t,e,n,r,i);return"mfaPendingCredential"in o&&ts(t,"multi-factor-auth-required",{_serverResponse:o}),o}async function cx(t,e,n,r){const i=`${e}${n}?${r}`,o=t,u=o.config.emulator?b_(t.config,i):`${t.config.apiScheme}://${i}`;return r4.includes(n)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(u).toString():u}class a4{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(br(this.auth,"network-request-failed")),s4.get())})}}function Hd(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=br(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function o4(t,e){return Gl(t,"POST","/v1/accounts:delete",e)}async function Pf(t,e){return Gl(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _c(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function l4(t,e=!1){const n=En(t),r=await n.getIdToken(e),i=E_(r);Re(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const o=typeof i.firebase=="object"?i.firebase:void 0,u=o?.sign_in_provider;return{claims:i,token:r,authTime:_c(qg(i.auth_time)),issuedAtTime:_c(qg(i.iat)),expirationTime:_c(qg(i.exp)),signInProvider:u||null,signInSecondFactor:o?.sign_in_second_factor||null}}function qg(t){return Number(t)*1e3}function E_(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return uf("JWT malformed, contained fewer than 3 sections"),null;try{const i=p1(n);return i?JSON.parse(i):(uf("Failed to decode base64 JWT payload"),null)}catch(i){return uf("Caught error parsing JWT payload as JSON",i?.toString()),null}}function QE(t){const e=E_(t);return Re(e,"internal-error"),Re(typeof e.exp<"u","internal-error"),Re(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lc(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Fs&&u4(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function u4({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c4{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class By{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=_c(this.lastLoginAt),this.creationTime=_c(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nf(t){const e=t.auth,n=await t.getIdToken(),r=await Lc(t,Pf(e,{idToken:n}));Re(r?.users.length,e,"internal-error");const i=r.users[0];t._notifyReloadListener(i);const o=i.providerUserInfo?.length?hx(i.providerUserInfo):[],u=d4(t.providerData,o),h=t.isAnonymous,d=!(t.email&&i.passwordHash)&&!u?.length,m=h?d:!1,g={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:u,metadata:new By(i.createdAt,i.lastLoginAt),isAnonymous:m};Object.assign(t,g)}async function h4(t){const e=En(t);await Nf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function d4(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function hx(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function f4(t,e){const n=await ux(t,{},async()=>{const r=eh({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=t.config,u=await cx(t,i,"/v1/token",`key=${o}`),h=await t._getAdditionalHeaders();h["Content-Type"]="application/x-www-form-urlencoded";const d={method:"POST",headers:h,body:r};return t.emulatorConfig&&jl(t.emulatorConfig.host)&&(d.credentials="include"),lx.fetch()(u,d)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function m4(t,e){return Gl(t,"POST","/v2/accounts:revokeToken",T_(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Re(e.idToken,"internal-error"),Re(typeof e.idToken<"u","internal-error"),Re(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):QE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Re(e.length!==0,"internal-error");const n=QE(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Re(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:o}=await f4(e,n);this.updateTokensAndExpiration(r,i,Number(o))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:o}=n,u=new bl;return r&&(Re(typeof r=="string","internal-error",{appName:e}),u.refreshToken=r),i&&(Re(typeof i=="string","internal-error",{appName:e}),u.accessToken=i),o&&(Re(typeof o=="number","internal-error",{appName:e}),u.expirationTime=o),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new bl,this.toJSON())}_performRefresh(){return Ds("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bi(t,e){Re(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class _r{constructor({uid:e,auth:n,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new c4(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new By(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await Lc(this,this.stsTokenManager.getToken(this.auth,e));return Re(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return l4(this,e)}reload(){return h4(this)}_assign(e){this!==e&&(Re(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new _r({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Re(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Nf(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(yr(this.auth.app))return Promise.reject(Ha(this.auth));const e=await this.getIdToken();return await Lc(this,o4(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,i=n.email??void 0,o=n.phoneNumber??void 0,u=n.photoURL??void 0,h=n.tenantId??void 0,d=n._redirectEventId??void 0,m=n.createdAt??void 0,g=n.lastLoginAt??void 0,{uid:_,emailVerified:w,isAnonymous:E,providerData:R,stsTokenManager:O}=n;Re(_&&O,e,"internal-error");const I=bl.fromJSON(this.name,O);Re(typeof _=="string",e,"internal-error"),bi(r,e.name),bi(i,e.name),Re(typeof w=="boolean",e,"internal-error"),Re(typeof E=="boolean",e,"internal-error"),bi(o,e.name),bi(u,e.name),bi(h,e.name),bi(d,e.name),bi(m,e.name),bi(g,e.name);const P=new _r({uid:_,auth:e,email:i,emailVerified:w,displayName:r,isAnonymous:E,photoURL:u,phoneNumber:o,tenantId:h,stsTokenManager:I,createdAt:m,lastLoginAt:g});return R&&Array.isArray(R)&&(P.providerData=R.map(V=>({...V}))),d&&(P._redirectEventId=d),P}static async _fromIdTokenResponse(e,n,r=!1){const i=new bl;i.updateFromServerResponse(n);const o=new _r({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Nf(o),o}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];Re(i.localId!==void 0,"internal-error");const o=i.providerUserInfo!==void 0?hx(i.providerUserInfo):[],u=!(i.email&&i.passwordHash)&&!o?.length,h=new bl;h.updateFromIdToken(r);const d=new _r({uid:i.localId,auth:e,stsTokenManager:h,isAnonymous:u}),m={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new By(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(d,m),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XE=new Map;function Ps(t){Bs(t instanceof Function,"Expected a class definition");let e=XE.get(t);return e?(Bs(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,XE.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dx{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}dx.type="NONE";const JE=dx;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cf(t,e,n){return`firebase:${t}:${e}:${n}`}class Tl{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:o}=this.auth;this.fullUserKey=cf(this.userKey,i.apiKey,o),this.fullPersistenceKey=cf("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Pf(this.auth,{idToken:e}).catch(()=>{});return n?_r._fromGetAccountInfoResponse(this.auth,n,e):null}return _r._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Tl(Ps(JE),e,r);const i=(await Promise.all(n.map(async m=>{if(await m._isAvailable())return m}))).filter(m=>m);let o=i[0]||Ps(JE);const u=cf(r,e.config.apiKey,e.name);let h=null;for(const m of n)try{const g=await m._get(u);if(g){let _;if(typeof g=="string"){const w=await Pf(e,{idToken:g}).catch(()=>{});if(!w)break;_=await _r._fromGetAccountInfoResponse(e,w,g)}else _=_r._fromJSON(e,g);m!==o&&(h=_),o=m;break}}catch{}const d=i.filter(m=>m._shouldAllowMigration);return!o._shouldAllowMigration||!d.length?new Tl(o,e,r):(o=d[0],h&&await o._set(u,h.toJSON()),await Promise.all(n.map(async m=>{if(m!==o)try{await m._remove(u)}catch{}})),new Tl(o,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZE(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(gx(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(fx(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(vx(e))return"Blackberry";if(_x(e))return"Webos";if(mx(e))return"Safari";if((e.includes("chrome/")||px(e))&&!e.includes("edge/"))return"Chrome";if(yx(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function fx(t=yn()){return/firefox\//i.test(t)}function mx(t=yn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function px(t=yn()){return/crios\//i.test(t)}function gx(t=yn()){return/iemobile/i.test(t)}function yx(t=yn()){return/android/i.test(t)}function vx(t=yn()){return/blackberry/i.test(t)}function _x(t=yn()){return/webos/i.test(t)}function S_(t=yn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function p4(t=yn()){return S_(t)&&!!window.navigator?.standalone}function g4(){return gD()&&document.documentMode===10}function wx(t=yn()){return S_(t)||yx(t)||_x(t)||vx(t)||/windows phone/i.test(t)||gx(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bx(t,e=[]){let n;switch(t){case"Browser":n=ZE(yn());break;case"Worker":n=`${ZE(yn())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ul}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y4{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=o=>new Promise((u,h)=>{try{const d=e(o);u(d)}catch(d){h(d)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function v4(t,e={}){return Gl(t,"GET","/v2/passwordPolicy",T_(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _4=6;class w4{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??_4,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b4{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new eS(this),this.idTokenSubscription=new eS(this),this.beforeStateQueue=new y4(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ox,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Ps(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Tl.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Pf(this,{idToken:e}),r=await _r._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(yr(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(u,u))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=this.redirectUser?._redirectEventId,u=r?._redirectEventId,h=await this.tryRedirectSignIn(e);(!o||o===u)&&h?.user&&(r=h.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Re(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Nf(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=t4()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(yr(this.app))return Promise.reject(Ha(this));const n=e?En(e):null;return n&&Re(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Re(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return yr(this.app)?Promise.reject(Ha(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return yr(this.app)?Promise.reject(Ha(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ps(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await v4(this),n=new w4(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Zc("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await m4(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Ps(e)||this._popupRedirectResolver;Re(n,this,"argument-error"),this.redirectPersistenceManager=await Tl.create(this,[Ps(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let u=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(Re(h,this,"internal-error"),h.then(()=>{u||o(this.currentUser)}),typeof n=="function"){const d=e.addObserver(n,r,i);return()=>{u=!0,d()}}else{const d=e.addObserver(n);return()=>{u=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Re(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=bx(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(yr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&XM(`Error while retrieving App Check token: ${e.error}`),e?.token}}function fm(t){return En(t)}class eS{constructor(e){this.auth=e,this.observer=null,this.addObserver=SD(n=>this.observer=n)}get next(){return Re(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let A_={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function T4(t){A_=t}function E4(t){return A_.loadJS(t)}function S4(){return A_.gapiScript}function A4(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R4(t,e){const n=Dv(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),o=n.getOptions();if(Wa(o,e??{}))return i;ts(i,"already-initialized")}return n.initialize({options:e})}function x4(t,e){const n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Ps);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function C4(t,e,n){const r=fm(t);Re(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,o=Tx(e),{host:u,port:h}=I4(e),d=h===null?"":`:${h}`,m={url:`${o}//${u}${d}/`},g=Object.freeze({host:u,port:h,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){Re(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Re(Wa(m,r.config.emulator)&&Wa(g,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=m,r.emulatorConfig=g,r.settings.appVerificationDisabledForTesting=!0,jl(u)?(_1(`${o}//${u}${d}`),w1("Auth",!0)):O4()}function Tx(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function I4(t){const e=Tx(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const o=i[1];return{host:o,port:tS(r.substr(o.length+1))}}else{const[o,u]=r.split(":");return{host:o,port:tS(u)}}}function tS(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function O4(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ex{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Ds("not implemented")}_getIdTokenResponse(e){return Ds("not implemented")}_linkToIdToken(e,n){return Ds("not implemented")}_getReauthenticationResolver(e){return Ds("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function El(t,e){return i4(t,"POST","/v1/accounts:signInWithIdp",T_(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k4="http://localhost";class to extends Ex{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new to(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):ts("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...o}=n;if(!r||!i)return null;const u=new to(r,i);return u.idToken=o.idToken||void 0,u.accessToken=o.accessToken||void 0,u.secret=o.secret,u.nonce=o.nonce,u.pendingToken=o.pendingToken||null,u}_getIdTokenResponse(e){const n=this.buildRequest();return El(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,El(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,El(e,n)}buildRequest(){const e={requestUri:k4,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=eh(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R_{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oh extends R_{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Si extends oh{constructor(){super("facebook.com")}static credential(e){return to._fromParams({providerId:Si.PROVIDER_ID,signInMethod:Si.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Si.credentialFromTaggedObject(e)}static credentialFromError(e){return Si.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Si.credential(e.oauthAccessToken)}catch{return null}}}Si.FACEBOOK_SIGN_IN_METHOD="facebook.com";Si.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ks extends oh{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return to._fromParams({providerId:ks.PROVIDER_ID,signInMethod:ks.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return ks.credentialFromTaggedObject(e)}static credentialFromError(e){return ks.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return ks.credential(n,r)}catch{return null}}}ks.GOOGLE_SIGN_IN_METHOD="google.com";ks.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai extends oh{constructor(){super("github.com")}static credential(e){return to._fromParams({providerId:Ai.PROVIDER_ID,signInMethod:Ai.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ai.credentialFromTaggedObject(e)}static credentialFromError(e){return Ai.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ai.credential(e.oauthAccessToken)}catch{return null}}}Ai.GITHUB_SIGN_IN_METHOD="github.com";Ai.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ri extends oh{constructor(){super("twitter.com")}static credential(e,n){return to._fromParams({providerId:Ri.PROVIDER_ID,signInMethod:Ri.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Ri.credentialFromTaggedObject(e)}static credentialFromError(e){return Ri.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Ri.credential(n,r)}catch{return null}}}Ri.TWITTER_SIGN_IN_METHOD="twitter.com";Ri.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const o=await _r._fromIdTokenResponse(e,r,i),u=nS(r);return new Pl({user:o,providerId:u,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=nS(r);return new Pl({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function nS(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vf extends Fs{constructor(e,n,r,i){super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Vf.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Vf(e,n,r,i)}}function Sx(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Vf._fromErrorAndOperation(t,o,e,r):o})}async function D4(t,e,n=!1){const r=await Lc(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Pl._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function P4(t,e,n=!1){const{auth:r}=t;if(yr(r.app))return Promise.reject(Ha(r));const i="reauthenticate";try{const o=await Lc(t,Sx(r,i,e,t),n);Re(o.idToken,r,"internal-error");const u=E_(o.idToken);Re(u,r,"internal-error");const{sub:h}=u;return Re(t.uid===h,r,"user-mismatch"),Pl._forOperation(t,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&ts(r,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function N4(t,e,n=!1){if(yr(t.app))return Promise.reject(Ha(t));const r="signIn",i=await Sx(t,r,e),o=await Pl._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(o.user),o}function V4(t,e,n,r){return En(t).onIdTokenChanged(e,n,r)}function M4(t,e,n){return En(t).beforeAuthStateChanged(e,n)}function L4(t,e,n,r){return En(t).onAuthStateChanged(e,n,r)}function j4(t){return En(t).signOut()}const Mf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ax{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Mf,"1"),this.storage.removeItem(Mf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U4=1e3,B4=10;class Rx extends Ax{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=wx(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((u,h,d)=>{this.notifyListeners(u,d)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const u=this.storage.getItem(r);!n&&this.localCache[r]===u||this.notifyListeners(r,u)},o=this.storage.getItem(r);g4()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,B4):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},U4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Rx.type="LOCAL";const z4=Rx;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xx extends Ax{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}xx.type="SESSION";const Cx=xx;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q4(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mm{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new mm(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:o}=n.data,u=this.handlersMap[i];if(!u?.size)return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const h=Array.from(u).map(async m=>m(n.origin,o)),d=await q4(h);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:d})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}mm.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x_(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $4{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,u;return new Promise((h,d)=>{const m=x_("",20);i.port1.start();const g=setTimeout(()=>{d(new Error("unsupported_event"))},r);u={messageChannel:i,onMessage(_){const w=_;if(w.data.eventId===m)switch(w.data.status){case"ack":clearTimeout(g),o=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),h(w.data.response);break;default:clearTimeout(g),clearTimeout(o),d(new Error("invalid_response"));break}}},this.handlers.add(u),i.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:m,data:n},[i.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qr(){return window}function F4(t){Qr().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ix(){return typeof Qr().WorkerGlobalScope<"u"&&typeof Qr().importScripts=="function"}async function H4(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function G4(){return navigator?.serviceWorker?.controller||null}function K4(){return Ix()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ox="firebaseLocalStorageDb",W4=1,Lf="firebaseLocalStorage",kx="fbase_key";class lh{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function pm(t,e){return t.transaction([Lf],e?"readwrite":"readonly").objectStore(Lf)}function Y4(){const t=indexedDB.deleteDatabase(Ox);return new lh(t).toPromise()}function zy(){const t=indexedDB.open(Ox,W4);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Lf,{keyPath:kx})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Lf)?e(r):(r.close(),await Y4(),e(await zy()))})})}async function rS(t,e,n){const r=pm(t,!0).put({[kx]:e,value:n});return new lh(r).toPromise()}async function Q4(t,e){const n=pm(t,!1).get(e),r=await new lh(n).toPromise();return r===void 0?null:r.value}function sS(t,e){const n=pm(t,!0).delete(e);return new lh(n).toPromise()}const X4=800,J4=3;class Dx{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await zy(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>J4)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Ix()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=mm._getInstance(K4()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await H4(),!this.activeServiceWorker)return;this.sender=new $4(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||G4()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await zy();return await rS(e,Mf,"1"),await sS(e,Mf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>rS(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>Q4(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>sS(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const o=pm(i,!1).getAll();return new lh(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:o}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(o)&&(this.notifyListeners(i,o),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),X4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Dx.type="LOCAL";const Z4=Dx;new ah(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Px(t,e){return e?Ps(e):(Re(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C_ extends Ex{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return El(e,this._buildIdpRequest())}_linkToIdToken(e,n){return El(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return El(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function eL(t){return N4(t.auth,new C_(t),t.bypassAuthState)}function tL(t){const{auth:e,user:n}=t;return Re(n,e,"internal-error"),P4(n,new C_(t),t.bypassAuthState)}async function nL(t){const{auth:e,user:n}=t;return Re(n,e,"internal-error"),D4(n,new C_(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nx{constructor(e,n,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:o,error:u,type:h}=e;if(u){this.reject(u);return}const d={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(d))}catch(m){this.reject(m)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return eL;case"linkViaPopup":case"linkViaRedirect":return nL;case"reauthViaPopup":case"reauthViaRedirect":return tL;default:ts(this.auth,"internal-error")}}resolve(e){Bs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Bs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rL=new ah(2e3,1e4);async function sL(t,e,n){if(yr(t.app))return Promise.reject(br(t,"operation-not-supported-in-this-environment"));const r=fm(t);JM(t,e,R_);const i=Px(r,n);return new Ua(r,"signInViaPopup",e,i).executeNotNull()}class Ua extends Nx{constructor(e,n,r,i,o){super(e,n,i,o),this.provider=r,this.authWindow=null,this.pollId=null,Ua.currentPopupAction&&Ua.currentPopupAction.cancel(),Ua.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Re(e,this.auth,"internal-error"),e}async onExecution(){Bs(this.filter.length===1,"Popup operations only handle one event");const e=x_();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(br(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(br(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ua.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(br(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,rL.get())};e()}}Ua.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iL="pendingRedirect",hf=new Map;class aL extends Nx{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=hf.get(this.auth._key());if(!e){try{const r=await oL(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}hf.set(this.auth._key(),e)}return this.bypassAuthState||hf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function oL(t,e){const n=cL(e),r=uL(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function lL(t,e){hf.set(t._key(),e)}function uL(t){return Ps(t._redirectPersistence)}function cL(t){return cf(iL,t.config.apiKey,t.name)}async function hL(t,e,n=!1){if(yr(t.app))return Promise.reject(Ha(t));const r=fm(t),i=Px(r,e),u=await new aL(r,i,n).execute();return u&&!n&&(delete u.user._redirectEventId,await r._persistUserIfCurrent(u.user),await r._setRedirectUser(null,e)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dL=600*1e3;class fL{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!mL(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!Vx(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";n.onError(br(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=dL&&this.cachedEventUids.clear(),this.cachedEventUids.has(iS(e))}saveEventToCache(e){this.cachedEventUids.add(iS(e)),this.lastProcessedEventTime=Date.now()}}function iS(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Vx({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function mL(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Vx(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pL(t,e={}){return Gl(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gL=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,yL=/^https?/;async function vL(t){if(t.config.emulator)return;const{authorizedDomains:e}=await pL(t);for(const n of e)try{if(_L(n))return}catch{}ts(t,"unauthorized-domain")}function _L(t){const e=Uy(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const u=new URL(t);return u.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&u.hostname===r}if(!yL.test(n))return!1;if(gL.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wL=new ah(3e4,6e4);function aS(){const t=Qr().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function bL(t){return new Promise((e,n)=>{function r(){aS(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{aS(),n(br(t,"network-request-failed"))},timeout:wL.get()})}if(Qr().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Qr().gapi?.load)r();else{const i=A4("iframefcb");return Qr()[i]=()=>{gapi.load?r():n(br(t,"network-request-failed"))},E4(`${S4()}?onload=${i}`).catch(o=>n(o))}}).catch(e=>{throw df=null,e})}let df=null;function TL(t){return df=df||bL(t),df}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EL=new ah(5e3,15e3),SL="__/auth/iframe",AL="emulator/auth/iframe",RL={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},xL=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function CL(t){const e=t.config;Re(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?b_(e,AL):`https://${t.config.authDomain}/${SL}`,r={apiKey:e.apiKey,appName:t.name,v:Ul},i=xL.get(t.config.apiHost);i&&(r.eid=i);const o=t._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${eh(r).slice(1)}`}async function IL(t){const e=await TL(t),n=Qr().gapi;return Re(n,t,"internal-error"),e.open({where:document.body,url:CL(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:RL,dontclear:!0},r=>new Promise(async(i,o)=>{await r.restyle({setHideOnLeave:!1});const u=br(t,"network-request-failed"),h=Qr().setTimeout(()=>{o(u)},EL.get());function d(){Qr().clearTimeout(h),i(r)}r.ping(d).then(d,()=>{o(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OL={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},kL=500,DL=600,PL="_blank",NL="http://localhost";class oS{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function VL(t,e,n,r=kL,i=DL){const o=Math.max((window.screen.availHeight-i)/2,0).toString(),u=Math.max((window.screen.availWidth-r)/2,0).toString();let h="";const d={...OL,width:r.toString(),height:i.toString(),top:o,left:u},m=yn().toLowerCase();n&&(h=px(m)?PL:n),fx(m)&&(e=e||NL,d.scrollbars="yes");const g=Object.entries(d).reduce((w,[E,R])=>`${w}${E}=${R},`,"");if(p4(m)&&h!=="_self")return ML(e||"",h),new oS(null);const _=window.open(e||"",h,g);Re(_,t,"popup-blocked");try{_.focus()}catch{}return new oS(_)}function ML(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LL="__/auth/handler",jL="emulator/auth/handler",UL=encodeURIComponent("fac");async function lS(t,e,n,r,i,o){Re(t.config.authDomain,t,"auth-domain-config-required"),Re(t.config.apiKey,t,"invalid-api-key");const u={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Ul,eventId:i};if(e instanceof R_){e.setDefaultLanguage(t.languageCode),u.providerId=e.providerId||"",ED(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[g,_]of Object.entries({}))u[g]=_}if(e instanceof oh){const g=e.getScopes().filter(_=>_!=="");g.length>0&&(u.scopes=g.join(","))}t.tenantId&&(u.tid=t.tenantId);const h=u;for(const g of Object.keys(h))h[g]===void 0&&delete h[g];const d=await t._getAppCheckToken(),m=d?`#${UL}=${encodeURIComponent(d)}`:"";return`${BL(t)}?${eh(h).slice(1)}${m}`}function BL({config:t}){return t.emulator?b_(t,jL):`https://${t.authDomain}/${LL}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $g="webStorageSupport";class zL{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Cx,this._completeRedirectFn=hL,this._overrideRedirectResult=lL}async _openPopup(e,n,r,i){Bs(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const o=await lS(e,n,r,Uy(),i);return VL(e,o,x_())}async _openRedirect(e,n,r,i){await this._originValidation(e);const o=await lS(e,n,r,Uy(),i);return F4(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:o}=this.eventManagers[n];return i?Promise.resolve(i):(Bs(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await IL(e),r=new fL(e);return n.register("authEvent",i=>(Re(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send($g,{type:$g},i=>{const o=i?.[0]?.[$g];o!==void 0&&n(!!o),ts(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=vL(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return wx()||mx()||S_()}}const qL=zL;var uS="@firebase/auth",cS="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $L{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Re(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FL(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function HL(t){Rl(new Ya("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:u,authDomain:h}=r.options;Re(u&&!u.includes(":"),"invalid-api-key",{appName:r.name});const d={apiKey:u,authDomain:h,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:bx(t)},m=new b4(r,i,o,d);return x4(m,n),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Rl(new Ya("auth-internal",e=>{const n=fm(e.getProvider("auth").getImmediate());return(r=>new $L(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Di(uS,cS,FL(t)),Di(uS,cS,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GL=300,KL=v1("authIdTokenMaxAge")||GL;let hS=null;const WL=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>KL)return;const i=n?.token;hS!==i&&(hS=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function YL(t=S1()){const e=Dv(t,"auth");if(e.isInitialized())return e.getImmediate();const n=R4(t,{popupRedirectResolver:qL,persistence:[Z4,z4,Cx]}),r=v1("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const u=WL(o.toString());M4(n,u,()=>u(n.currentUser)),V4(n,h=>u(h))}}const i=g1("auth");return i&&C4(n,`http://${i}`),n}function QL(){return document.getElementsByTagName("head")?.[0]??document}T4({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const o=br("internal-error");o.customData=i,n(o)},r.type="text/javascript",r.charset="UTF-8",QL().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});HL("Browser");const XL={apiKey:"AIzaSyBvROuv4CkJyfUby87owjFAmYvpyf8UU_c",authDomain:"test-3054c.firebaseapp.com",projectId:"test-3054c",storageBucket:"test-3054c.firebasestorage.app",messagingSenderId:"536496457232",appId:"1:536496457232:web:ad63fed147ce0f53f92c95",measurementId:"G-ZHT05S70E5"},Mx=E1(XL),zn=DM(Mx),qy=YL(Mx),Lx=D.createContext(),JL=({children:t})=>{const[e,n]=D.useState(null),[r,i]=D.useState(!1);D.useEffect(()=>{const u=L4(qy,h=>{n(h),r||i(!0)});return()=>u()},[r]);const o={user:e,initialAuthChecked:r};return x.jsx(Lx.Provider,{value:o,children:t})},oo=()=>D.useContext(Lx),jx=()=>{const{user:t}=oo(),[e,n]=D.useState(0),[r,i]=D.useState(!0);return D.useEffect(()=>{if(t){const o=Za(zn,"users",t.uid),u=Hl(o,h=>{h.exists()?n(h.data().points||0):n(0),i(!1)},h=>{console.error("Error fetching user points:",h),i(!1)});return()=>u()}else n(0),i(!1)},[t]),{points:e,loading:r}},ZL=()=>{const{points:t,loading:e}=jx();return e?x.jsx("div",{className:"text-gray-800",children:"..."}):x.jsxs("div",{className:"flex items-center bg-yellow-400 text-white font-bold py-1 px-3 rounded-full shadow-md",children:[x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"w-5 h-5 mr-1",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.48 3.499a.562.562 0 011.04 0l2.125 5.111a.563.563 0 00.475.345l5.518.442c.499.04.701.663.321.988l-4.204 3.602a.563.563 0 00-.182.557l1.285 5.385c.12.501-.414.923-.877.683l-4.72-2.881a.563.563 0 00-.586 0l-4.72 2.881c-.463.24-.997-.182-.877-.683l1.285-5.385a.562.562 0 00-.182-.557L3.92 9.34a.562.562 0 01.32-.988l5.518-.442a.563.563 0 00.475-.345L11.48 3.5z"})}),x.jsx("span",{className:"text-base",children:t}),x.jsx("span",{className:"mr-2 text-sm",children:""})]})},Ux=D.createContext(),Bx=()=>D.useContext(Ux),zx=({children:t})=>{const[e,n]=D.useState(""),[r,i]=D.useState(null),[o,u]=D.useState(null),h={title:e,setTitle:n,rightContent:r,setRightContent:i,leftContent:o,setLeftContent:u};return x.jsx(Ux.Provider,{value:h,children:t})},qx=({showBackButton:t,backButtonLink:e})=>{const n=Ar(),r=Ll(),{title:i,leftContent:o,rightContent:u}=Bx()||{},h=n.pathname==="/",d=()=>{r(e||-1)},m=t?x.jsx("button",{onClick:d,className:"p-2 rounded-full hover:bg-gray-100",children:x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17 8l4 4m0 0l-4 4m4-4H3"})})}):x.jsx(ZL,{}),g=h?x.jsxs(Va,{to:"/leaderboard",className:"flex flex-col items-center text-gray-500 hover:text-blue-600 md:hidden",children:[x.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.196-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.783-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})}),x.jsx("span",{className:"text-xs",children:""})]}):null;return x.jsxs("div",{className:"fixed top-0 left-0 w-full bg-white shadow-md z-10 p-4 h-16 flex justify-between items-center md:mr-20",dir:"rtl",children:[x.jsxs("div",{className:"flex items-center gap-2",children:[o||m,i&&x.jsx("h1",{className:"text-base font-bold whitespace-nowrap",children:i})]}),x.jsx("div",{children:u||g})]})},ej=()=>{const[t,e]=D.useState([]),[n,r]=D.useState(!0);D.useEffect(()=>{const u=Ja(zn,"exams"),h=Hl(u,d=>{const m=d.docs.map(g=>({id:g.id,...g.data()}));e(m),r(!1)},d=>{console.error("Error fetching exams:",d),r(!1)});return()=>h()},[]);const i=()=>x.jsx("div",{className:"skeleton-card",children:x.jsxs("div",{className:"space-y-3",children:[x.jsx("div",{className:"skeleton-line w-3/4 mx-auto"}),x.jsx("div",{className:"skeleton-line w-1/2 mx-auto"})]})}),o=({exam:u})=>{const h=u.questions.reduce((d,m)=>d+(m.points||1),0);return x.jsx(Iv,{to:`/exam/${u.id}`,className:"bg-white p-6 md:p-8 rounded-xl shadow-lg cursor-pointer flex flex-col justify-between no-underline",children:x.jsxs("div",{children:[x.jsx("h3",{className:"text-xl md:text-2xl font-bold text-gray-800 text-center",children:u.name||` ${u.id}`}),x.jsxs("p",{className:"text-center text-gray-500 mt-4 text-base md:text-lg",children:[u.questions.length," "]}),x.jsxs("p",{className:"text-center text-blue-600 font-bold mt-2 text-base md:text-lg",children:[" : ",h]})]})})};return x.jsx("div",{className:"container mx-auto p-4 flex-grow",children:x.jsx("div",{id:"exams-list",className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:n?x.jsxs(x.Fragment,{children:[x.jsx(i,{}),x.jsx(i,{}),x.jsx(i,{})]}):t.length===0?x.jsx("p",{className:"col-span-full text-center text-gray-500",children:"    ."}):t.map(u=>x.jsx(o,{exam:u},u.id))})})};let tj={data:""},nj=t=>{if(typeof window=="object"){let e=(t?t.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return e.nonce=window.__nonce__,e.parentNode||(t||document.head).appendChild(e),e.firstChild}return t||tj},rj=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,sj=/\/\*[^]*?\*\/|  +/g,dS=/\n+/g,xi=(t,e)=>{let n="",r="",i="";for(let o in t){let u=t[o];o[0]=="@"?o[1]=="i"?n=o+" "+u+";":r+=o[1]=="f"?xi(u,o):o+"{"+xi(u,o[1]=="k"?"":e)+"}":typeof u=="object"?r+=xi(u,e?e.replace(/([^,])+/g,h=>o.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,d=>/&/.test(d)?d.replace(/&/g,h):h?h+" "+d:d)):o):u!=null&&(o=/^--/.test(o)?o:o.replace(/[A-Z]/g,"-$&").toLowerCase(),i+=xi.p?xi.p(o,u):o+":"+u+";")}return n+(e&&i?e+"{"+i+"}":i)+r},Is={},$x=t=>{if(typeof t=="object"){let e="";for(let n in t)e+=n+$x(t[n]);return e}return t},ij=(t,e,n,r,i)=>{let o=$x(t),u=Is[o]||(Is[o]=(d=>{let m=0,g=11;for(;m<d.length;)g=101*g+d.charCodeAt(m++)>>>0;return"go"+g})(o));if(!Is[u]){let d=o!==t?t:(m=>{let g,_,w=[{}];for(;g=rj.exec(m.replace(sj,""));)g[4]?w.shift():g[3]?(_=g[3].replace(dS," ").trim(),w.unshift(w[0][_]=w[0][_]||{})):w[0][g[1]]=g[2].replace(dS," ").trim();return w[0]})(t);Is[u]=xi(i?{["@keyframes "+u]:d}:d,n?"":"."+u)}let h=n&&Is.g?Is.g:null;return n&&(Is.g=Is[u]),((d,m,g,_)=>{_?m.data=m.data.replace(_,d):m.data.indexOf(d)===-1&&(m.data=g?d+m.data:m.data+d)})(Is[u],e,r,h),u},aj=(t,e,n)=>t.reduce((r,i,o)=>{let u=e[o];if(u&&u.call){let h=u(n),d=h&&h.props&&h.props.className||/^go/.test(h)&&h;u=d?"."+d:h&&typeof h=="object"?h.props?"":xi(h,""):h===!1?"":h}return r+i+(u??"")},"");function gm(t){let e=this||{},n=t.call?t(e.p):t;return ij(n.unshift?n.raw?aj(n,[].slice.call(arguments,1),e.p):n.reduce((r,i)=>Object.assign(r,i&&i.call?i(e.p):i),{}):n,nj(e.target),e.g,e.o,e.k)}let Fx,$y,Fy;gm.bind({g:1});let zs=gm.bind({k:1});function oj(t,e,n,r){xi.p=e,Fx=t,$y=n,Fy=r}function Fi(t,e){let n=this||{};return function(){let r=arguments;function i(o,u){let h=Object.assign({},o),d=h.className||i.className;n.p=Object.assign({theme:$y&&$y()},h),n.o=/ *go\d+/.test(d),h.className=gm.apply(n,r)+(d?" "+d:"");let m=t;return t[0]&&(m=h.as||t,delete h.as),Fy&&m[0]&&Fy(h),Fx(m,h)}return i}}var lj=t=>typeof t=="function",jf=(t,e)=>lj(t)?t(e):t,uj=(()=>{let t=0;return()=>(++t).toString()})(),Hx=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");t=!e||e.matches}return t}})(),cj=20,I_="default",Gx=(t,e)=>{let{toastLimit:n}=t.settings;switch(e.type){case 0:return{...t,toasts:[e.toast,...t.toasts].slice(0,n)};case 1:return{...t,toasts:t.toasts.map(u=>u.id===e.toast.id?{...u,...e.toast}:u)};case 2:let{toast:r}=e;return Gx(t,{type:t.toasts.find(u=>u.id===r.id)?1:0,toast:r});case 3:let{toastId:i}=e;return{...t,toasts:t.toasts.map(u=>u.id===i||i===void 0?{...u,dismissed:!0,visible:!1}:u)};case 4:return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(u=>u.id!==e.toastId)};case 5:return{...t,pausedAt:e.time};case 6:let o=e.time-(t.pausedAt||0);return{...t,pausedAt:void 0,toasts:t.toasts.map(u=>({...u,pauseDuration:u.pauseDuration+o}))}}},ff=[],Kx={toasts:[],pausedAt:void 0,settings:{toastLimit:cj}},Fr={},Wx=(t,e=I_)=>{Fr[e]=Gx(Fr[e]||Kx,t),ff.forEach(([n,r])=>{n===e&&r(Fr[e])})},Yx=t=>Object.keys(Fr).forEach(e=>Wx(t,e)),hj=t=>Object.keys(Fr).find(e=>Fr[e].toasts.some(n=>n.id===t)),ym=(t=I_)=>e=>{Wx(e,t)},dj={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},fj=(t={},e=I_)=>{let[n,r]=D.useState(Fr[e]||Kx),i=D.useRef(Fr[e]);D.useEffect(()=>(i.current!==Fr[e]&&r(Fr[e]),ff.push([e,r]),()=>{let u=ff.findIndex(([h])=>h===e);u>-1&&ff.splice(u,1)}),[e]);let o=n.toasts.map(u=>{var h,d,m;return{...t,...t[u.type],...u,removeDelay:u.removeDelay||((h=t[u.type])==null?void 0:h.removeDelay)||t?.removeDelay,duration:u.duration||((d=t[u.type])==null?void 0:d.duration)||t?.duration||dj[u.type],style:{...t.style,...(m=t[u.type])==null?void 0:m.style,...u.style}}});return{...n,toasts:o}},mj=(t,e="blank",n)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:e,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,...n,id:n?.id||uj()}),uh=t=>(e,n)=>{let r=mj(e,t,n);return ym(r.toasterId||hj(r.id))({type:2,toast:r}),r.id},$t=(t,e)=>uh("blank")(t,e);$t.error=uh("error");$t.success=uh("success");$t.loading=uh("loading");$t.custom=uh("custom");$t.dismiss=(t,e)=>{let n={type:3,toastId:t};e?ym(e)(n):Yx(n)};$t.dismissAll=t=>$t.dismiss(void 0,t);$t.remove=(t,e)=>{let n={type:4,toastId:t};e?ym(e)(n):Yx(n)};$t.removeAll=t=>$t.remove(void 0,t);$t.promise=(t,e,n)=>{let r=$t.loading(e.loading,{...n,...n?.loading});return typeof t=="function"&&(t=t()),t.then(i=>{let o=e.success?jf(e.success,i):void 0;return o?$t.success(o,{id:r,...n,...n?.success}):$t.dismiss(r),i}).catch(i=>{let o=e.error?jf(e.error,i):void 0;o?$t.error(o,{id:r,...n,...n?.error}):$t.dismiss(r)}),t};var pj=1e3,gj=(t,e="default")=>{let{toasts:n,pausedAt:r}=fj(t,e),i=D.useRef(new Map).current,o=D.useCallback((_,w=pj)=>{if(i.has(_))return;let E=setTimeout(()=>{i.delete(_),u({type:4,toastId:_})},w);i.set(_,E)},[]);D.useEffect(()=>{if(r)return;let _=Date.now(),w=n.map(E=>{if(E.duration===1/0)return;let R=(E.duration||0)+E.pauseDuration-(_-E.createdAt);if(R<0){E.visible&&$t.dismiss(E.id);return}return setTimeout(()=>$t.dismiss(E.id,e),R)});return()=>{w.forEach(E=>E&&clearTimeout(E))}},[n,r,e]);let u=D.useCallback(ym(e),[e]),h=D.useCallback(()=>{u({type:5,time:Date.now()})},[u]),d=D.useCallback((_,w)=>{u({type:1,toast:{id:_,height:w}})},[u]),m=D.useCallback(()=>{r&&u({type:6,time:Date.now()})},[r,u]),g=D.useCallback((_,w)=>{let{reverseOrder:E=!1,gutter:R=8,defaultPosition:O}=w||{},I=n.filter(M=>(M.position||O)===(_.position||O)&&M.height),P=I.findIndex(M=>M.id===_.id),V=I.filter((M,J)=>J<P&&M.visible).length;return I.filter(M=>M.visible).slice(...E?[V+1]:[0,V]).reduce((M,J)=>M+(J.height||0)+R,0)},[n]);return D.useEffect(()=>{n.forEach(_=>{if(_.dismissed)o(_.id,_.removeDelay);else{let w=i.get(_.id);w&&(clearTimeout(w),i.delete(_.id))}})},[n,o]),{toasts:n,handlers:{updateHeight:d,startPause:h,endPause:m,calculateOffset:g}}},yj=zs`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,vj=zs`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,_j=zs`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,wj=Fi("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${yj} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${vj} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${t=>t.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${_j} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,bj=zs`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,Tj=Fi("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${t=>t.secondary||"#e0e0e0"};
  border-right-color: ${t=>t.primary||"#616161"};
  animation: ${bj} 1s linear infinite;
`,Ej=zs`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,Sj=zs`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,Aj=Fi("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Ej} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${Sj} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${t=>t.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,Rj=Fi("div")`
  position: absolute;
`,xj=Fi("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,Cj=zs`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Ij=Fi("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${Cj} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,Oj=({toast:t})=>{let{icon:e,type:n,iconTheme:r}=t;return e!==void 0?typeof e=="string"?D.createElement(Ij,null,e):e:n==="blank"?null:D.createElement(xj,null,D.createElement(Tj,{...r}),n!=="loading"&&D.createElement(Rj,null,n==="error"?D.createElement(wj,{...r}):D.createElement(Aj,{...r})))},kj=t=>`
0% {transform: translate3d(0,${t*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,Dj=t=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${t*-150}%,-1px) scale(.6); opacity:0;}
`,Pj="0%{opacity:0;} 100%{opacity:1;}",Nj="0%{opacity:1;} 100%{opacity:0;}",Vj=Fi("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,Mj=Fi("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,Lj=(t,e)=>{let n=t.includes("top")?1:-1,[r,i]=Hx()?[Pj,Nj]:[kj(n),Dj(n)];return{animation:e?`${zs(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${zs(i)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},jj=D.memo(({toast:t,position:e,style:n,children:r})=>{let i=t.height?Lj(t.position||e||"top-center",t.visible):{opacity:0},o=D.createElement(Oj,{toast:t}),u=D.createElement(Mj,{...t.ariaProps},jf(t.message,t));return D.createElement(Vj,{className:t.className,style:{...i,...n,...t.style}},typeof r=="function"?r({icon:o,message:u}):D.createElement(D.Fragment,null,o,u))});oj(D.createElement);var Uj=({id:t,className:e,style:n,onHeightUpdate:r,children:i})=>{let o=D.useCallback(u=>{if(u){let h=()=>{let d=u.getBoundingClientRect().height;r(t,d)};h(),new MutationObserver(h).observe(u,{subtree:!0,childList:!0,characterData:!0})}},[t,r]);return D.createElement("div",{ref:o,className:e,style:n},i)},Bj=(t,e)=>{let n=t.includes("top"),r=n?{top:0}:{bottom:0},i=t.includes("center")?{justifyContent:"center"}:t.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:Hx()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${e*(n?1:-1)}px)`,...r,...i}},zj=gm`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Gd=16,qj=({reverseOrder:t,position:e="top-center",toastOptions:n,gutter:r,children:i,toasterId:o,containerStyle:u,containerClassName:h})=>{let{toasts:d,handlers:m}=gj(n,o);return D.createElement("div",{"data-rht-toaster":o||"",style:{position:"fixed",zIndex:9999,top:Gd,left:Gd,right:Gd,bottom:Gd,pointerEvents:"none",...u},className:h,onMouseEnter:m.startPause,onMouseLeave:m.endPause},d.map(g=>{let _=g.position||e,w=m.calculateOffset(g,{reverseOrder:t,gutter:r,defaultPosition:e}),E=Bj(_,w);return D.createElement(Uj,{id:g.id,key:g.id,onHeightUpdate:m.updateHeight,className:g.visible?zj:"",style:E},g.type==="custom"?jf(g.message,g):i?i(g):D.createElement(jj,{toast:g,position:_}))}))},$j=$t;const Fj=()=>{const[t,e]=D.useState([]),[n,r]=D.useState(!0);return D.useEffect(()=>{const i=Ja(zn,"subjects"),o=Hl(i,u=>{const h=u.docs.map(d=>d.data());e(h),r(!1)},u=>{console.error("Error fetching subjects:",u),r(!1)});return()=>o()},[]),{subjects:t,loading:n}};function vm(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function Hj(t,e,n,r){function i(o){return o instanceof n?o:new n(function(u){u(o)})}return new(n||(n=Promise))(function(o,u){function h(g){try{m(r.next(g))}catch(_){u(_)}}function d(g){try{m(r.throw(g))}catch(_){u(_)}}function m(g){g.done?o(g.value):i(g.value).then(h,d)}m((r=r.apply(t,e||[])).next())})}const Gj=t=>t?(...e)=>t(...e):(...e)=>fetch(...e);class O_ extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class Kj extends O_{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class fS extends O_{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class mS extends O_{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Hy;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Hy||(Hy={}));class Wj{constructor(e,{headers:n={},customFetch:r,region:i=Hy.Any}={}){this.url=e,this.headers=n,this.region=i,this.fetch=Gj(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return Hj(this,arguments,void 0,function*(n,r={}){var i;let o,u;try{const{headers:h,method:d,body:m,signal:g,timeout:_}=r;let w={},{region:E}=r;E||(E=this.region);const R=new URL(`${this.url}/${n}`);E&&E!=="any"&&(w["x-region"]=E,R.searchParams.set("forceFunctionRegion",E));let O;m&&(h&&!Object.prototype.hasOwnProperty.call(h,"Content-Type")||!h)?typeof Blob<"u"&&m instanceof Blob||m instanceof ArrayBuffer?(w["Content-Type"]="application/octet-stream",O=m):typeof m=="string"?(w["Content-Type"]="text/plain",O=m):typeof FormData<"u"&&m instanceof FormData?O=m:(w["Content-Type"]="application/json",O=JSON.stringify(m)):m&&typeof m!="string"&&!(typeof Blob<"u"&&m instanceof Blob)&&!(m instanceof ArrayBuffer)&&!(typeof FormData<"u"&&m instanceof FormData)?O=JSON.stringify(m):O=m;let I=g;_&&(u=new AbortController,o=setTimeout(()=>u.abort(),_),g?(I=u.signal,g.addEventListener("abort",()=>u.abort())):I=u.signal);const P=yield this.fetch(R.toString(),{method:d||"POST",headers:Object.assign(Object.assign(Object.assign({},w),this.headers),h),body:O,signal:I}).catch(X=>{throw new Kj(X)}),V=P.headers.get("x-relay-error");if(V&&V==="true")throw new fS(P);if(!P.ok)throw new mS(P);let M=((i=P.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),J;return M==="application/json"?J=yield P.json():M==="application/octet-stream"||M==="application/pdf"?J=yield P.blob():M==="text/event-stream"?J=P:M==="multipart/form-data"?J=yield P.formData():J=yield P.text(),{data:J,error:null,response:P}}catch(h){return{data:null,error:h,response:h instanceof mS||h instanceof fS?h.context:void 0}}finally{o&&clearTimeout(o)}})}}var Yj=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}},Qj=class{constructor(t){var e,n;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(e=t.shouldThrowOnError)!==null&&e!==void 0?e:!1,this.signal=t.signal,this.isMaybeSingle=(n=t.isMaybeSingle)!==null&&n!==void 0?n:!1,t.fetch?this.fetch=t.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,e){return this.headers=new Headers(this.headers),this.headers.set(t,e),this}then(t,e){var n=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let i=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async o=>{let u=null,h=null,d=null,m=o.status,g=o.statusText;if(o.ok){var _,w;if(n.method!=="HEAD"){var E;const P=await o.text();P===""||(n.headers.get("Accept")==="text/csv"||n.headers.get("Accept")&&(!((E=n.headers.get("Accept"))===null||E===void 0)&&E.includes("application/vnd.pgrst.plan+text"))?h=P:h=JSON.parse(P))}const O=(_=n.headers.get("Prefer"))===null||_===void 0?void 0:_.match(/count=(exact|planned|estimated)/),I=(w=o.headers.get("content-range"))===null||w===void 0?void 0:w.split("/");O&&I&&I.length>1&&(d=parseInt(I[1])),n.isMaybeSingle&&n.method==="GET"&&Array.isArray(h)&&(h.length>1?(u={code:"PGRST116",details:`Results contain ${h.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},h=null,d=null,m=406,g="Not Acceptable"):h.length===1?h=h[0]:h=null)}else{var R;const O=await o.text();try{u=JSON.parse(O),Array.isArray(u)&&o.status===404&&(h=[],u=null,m=200,g="OK")}catch{o.status===404&&O===""?(m=204,g="No Content"):u={message:O}}if(u&&n.isMaybeSingle&&(!(u==null||(R=u.details)===null||R===void 0)&&R.includes("0 rows"))&&(u=null,m=200,g="OK"),u&&n.shouldThrowOnError)throw new Yj(u)}return{error:u,data:h,count:d,status:m,statusText:g}});return this.shouldThrowOnError||(i=i.catch(o=>{var u;let h="";const d=o?.cause;if(d){var m,g,_,w;const R=(m=d?.message)!==null&&m!==void 0?m:"",O=(g=d?.code)!==null&&g!==void 0?g:"";h=`${(_=o?.name)!==null&&_!==void 0?_:"FetchError"}: ${o?.message}`,h+=`

Caused by: ${(w=d?.name)!==null&&w!==void 0?w:"Error"}: ${R}`,O&&(h+=` (${O})`),d?.stack&&(h+=`
${d.stack}`)}else{var E;h=(E=o?.stack)!==null&&E!==void 0?E:""}return{error:{message:`${(u=o?.name)!==null&&u!==void 0?u:"FetchError"}: ${o?.message}`,details:h,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),i.then(t,e)}returns(){return this}overrideTypes(){return this}},Xj=class extends Qj{select(t){let e=!1;const n=(t??"*").split("").map(r=>/\s/.test(r)&&!e?"":(r==='"'&&(e=!e),r)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:e=!0,nullsFirst:n,foreignTable:r,referencedTable:i=r}={}){const o=i?`${i}.order`:"order",u=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${u?`${u},`:""}${t}.${e?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:e,referencedTable:n=e}={}){const r=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(r,`${t}`),this}range(t,e,{foreignTable:n,referencedTable:r=n}={}){const i=typeof r>"u"?"offset":`${r}.offset`,o=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${t}`),this.url.searchParams.set(o,`${e-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:e=!1,settings:n=!1,buffers:r=!1,wal:i=!1,format:o="text"}={}){var u;const h=[t?"analyze":null,e?"verbose":null,n?"settings":null,r?"buffers":null,i?"wal":null].filter(Boolean).join("|"),d=(u=this.headers.get("Accept"))!==null&&u!==void 0?u:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${o}; for="${d}"; options=${h};`),o==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};const pS=new RegExp("[,()]");var hl=class extends Xj{eq(t,e){return this.url.searchParams.append(t,`eq.${e}`),this}neq(t,e){return this.url.searchParams.append(t,`neq.${e}`),this}gt(t,e){return this.url.searchParams.append(t,`gt.${e}`),this}gte(t,e){return this.url.searchParams.append(t,`gte.${e}`),this}lt(t,e){return this.url.searchParams.append(t,`lt.${e}`),this}lte(t,e){return this.url.searchParams.append(t,`lte.${e}`),this}like(t,e){return this.url.searchParams.append(t,`like.${e}`),this}likeAllOf(t,e){return this.url.searchParams.append(t,`like(all).{${e.join(",")}}`),this}likeAnyOf(t,e){return this.url.searchParams.append(t,`like(any).{${e.join(",")}}`),this}ilike(t,e){return this.url.searchParams.append(t,`ilike.${e}`),this}ilikeAllOf(t,e){return this.url.searchParams.append(t,`ilike(all).{${e.join(",")}}`),this}ilikeAnyOf(t,e){return this.url.searchParams.append(t,`ilike(any).{${e.join(",")}}`),this}regexMatch(t,e){return this.url.searchParams.append(t,`match.${e}`),this}regexIMatch(t,e){return this.url.searchParams.append(t,`imatch.${e}`),this}is(t,e){return this.url.searchParams.append(t,`is.${e}`),this}isDistinct(t,e){return this.url.searchParams.append(t,`isdistinct.${e}`),this}in(t,e){const n=Array.from(new Set(e)).map(r=>typeof r=="string"&&pS.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(t,`in.(${n})`),this}notIn(t,e){const n=Array.from(new Set(e)).map(r=>typeof r=="string"&&pS.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(t,`not.in.(${n})`),this}contains(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cs.{${e.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(e)}`),this}containedBy(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cd.{${e.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(e)}`),this}rangeGt(t,e){return this.url.searchParams.append(t,`sr.${e}`),this}rangeGte(t,e){return this.url.searchParams.append(t,`nxl.${e}`),this}rangeLt(t,e){return this.url.searchParams.append(t,`sl.${e}`),this}rangeLte(t,e){return this.url.searchParams.append(t,`nxr.${e}`),this}rangeAdjacent(t,e){return this.url.searchParams.append(t,`adj.${e}`),this}overlaps(t,e){return typeof e=="string"?this.url.searchParams.append(t,`ov.${e}`):this.url.searchParams.append(t,`ov.{${e.join(",")}}`),this}textSearch(t,e,{config:n,type:r}={}){let i="";r==="plain"?i="pl":r==="phrase"?i="ph":r==="websearch"&&(i="w");const o=n===void 0?"":`(${n})`;return this.url.searchParams.append(t,`${i}fts${o}.${e}`),this}match(t){return Object.entries(t).forEach(([e,n])=>{this.url.searchParams.append(e,`eq.${n}`)}),this}not(t,e,n){return this.url.searchParams.append(t,`not.${e}.${n}`),this}or(t,{foreignTable:e,referencedTable:n=e}={}){const r=n?`${n}.or`:"or";return this.url.searchParams.append(r,`(${t})`),this}filter(t,e,n){return this.url.searchParams.append(t,`${e}.${n}`),this}},Jj=class{constructor(t,{headers:e={},schema:n,fetch:r}){this.url=t,this.headers=new Headers(e),this.schema=n,this.fetch=r}select(t,e){const{head:n=!1,count:r}=e??{},i=n?"HEAD":"GET";let o=!1;const u=(t??"*").split("").map(h=>/\s/.test(h)&&!o?"":(h==='"'&&(o=!o),h)).join("");return this.url.searchParams.set("select",u),r&&this.headers.append("Prefer",`count=${r}`),new hl({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(t,{count:e,defaultToNull:n=!0}={}){var r;const i="POST";if(e&&this.headers.append("Prefer",`count=${e}`),n||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const o=t.reduce((u,h)=>u.concat(Object.keys(h)),[]);if(o.length>0){const u=[...new Set(o)].map(h=>`"${h}"`);this.url.searchParams.set("columns",u.join(","))}}return new hl({method:i,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}upsert(t,{onConflict:e,ignoreDuplicates:n=!1,count:r,defaultToNull:i=!0}={}){var o;const u="POST";if(this.headers.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),e!==void 0&&this.url.searchParams.set("on_conflict",e),r&&this.headers.append("Prefer",`count=${r}`),i||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const h=t.reduce((d,m)=>d.concat(Object.keys(m)),[]);if(h.length>0){const d=[...new Set(h)].map(m=>`"${m}"`);this.url.searchParams.set("columns",d.join(","))}}return new hl({method:u,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}update(t,{count:e}={}){var n;const r="PATCH";return e&&this.headers.append("Prefer",`count=${e}`),new hl({method:r,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}delete({count:t}={}){var e;const n="DELETE";return t&&this.headers.append("Prefer",`count=${t}`),new hl({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:(e=this.fetch)!==null&&e!==void 0?e:fetch})}},Zj=class Qx{constructor(e,{headers:n={},schema:r,fetch:i}={}){this.url=e,this.headers=new Headers(n),this.schemaName=r,this.fetch=i}from(e){if(!e||typeof e!="string"||e.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new Jj(new URL(`${this.url}/${e}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new Qx(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,n={},{head:r=!1,get:i=!1,count:o}={}){var u;let h;const d=new URL(`${this.url}/rpc/${e}`);let m;const g=E=>E!==null&&typeof E=="object"&&(!Array.isArray(E)||E.some(g)),_=r&&Object.values(n).some(g);_?(h="POST",m=n):r||i?(h=r?"HEAD":"GET",Object.entries(n).filter(([E,R])=>R!==void 0).map(([E,R])=>[E,Array.isArray(R)?`{${R.join(",")}}`:`${R}`]).forEach(([E,R])=>{d.searchParams.append(E,R)})):(h="POST",m=n);const w=new Headers(this.headers);return _?w.set("Prefer",o?`count=${o},return=minimal`:"return=minimal"):o&&w.set("Prefer",`count=${o}`),new hl({method:h,url:d,headers:w,schema:this.schemaName,body:m,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}};class eU{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const n=globalThis.process;if(n){const r=n.versions;if(r&&r.node){const i=r.node,o=parseInt(i.replace(/^v/,"").split(".")[0]);return o>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${o} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${o} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let n=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(n+=`

Suggested solution: ${e.workaround}`),new Error(n)}static createWebSocket(e,n){const r=this.getWebSocketConstructor();return new r(e,n)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const tU="2.90.0",nU=`realtime-js/${tU}`,Xx="1.0.0",rU="2.0.0",gS=Xx,Gy=1e4,sU=1e3,iU=100;var Ei;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Ei||(Ei={}));var qt;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(qt||(qt={}));var gr;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(gr||(gr={}));var Ky;(function(t){t.websocket="websocket"})(Ky||(Ky={}));var Ma;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Ma||(Ma={}));class aU{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,n){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return n(this._binaryEncodeUserBroadcastPush(e));let r=[e.join_ref,e.ref,e.topic,e.event,e.payload];return n(JSON.stringify(r))}_binaryEncodeUserBroadcastPush(e){var n;return this._isArrayBuffer((n=e.payload)===null||n===void 0?void 0:n.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var n,r;const i=(r=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,i)}_encodeJsonUserBroadcastPush(e){var n,r;const i=(r=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:{},u=new TextEncoder().encode(JSON.stringify(i)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,u)}_encodeUserBroadcastPush(e,n,r){var i,o;const u=e.topic,h=(i=e.ref)!==null&&i!==void 0?i:"",d=(o=e.join_ref)!==null&&o!==void 0?o:"",m=e.payload.event,g=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},_=Object.keys(g).length===0?"":JSON.stringify(g);if(d.length>255)throw new Error(`joinRef length ${d.length} exceeds maximum of 255`);if(h.length>255)throw new Error(`ref length ${h.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`topic length ${u.length} exceeds maximum of 255`);if(m.length>255)throw new Error(`userEvent length ${m.length} exceeds maximum of 255`);if(_.length>255)throw new Error(`metadata length ${_.length} exceeds maximum of 255`);const w=this.USER_BROADCAST_PUSH_META_LENGTH+d.length+h.length+u.length+m.length+_.length,E=new ArrayBuffer(this.HEADER_LENGTH+w);let R=new DataView(E),O=0;R.setUint8(O++,this.KINDS.userBroadcastPush),R.setUint8(O++,d.length),R.setUint8(O++,h.length),R.setUint8(O++,u.length),R.setUint8(O++,m.length),R.setUint8(O++,_.length),R.setUint8(O++,n),Array.from(d,P=>R.setUint8(O++,P.charCodeAt(0))),Array.from(h,P=>R.setUint8(O++,P.charCodeAt(0))),Array.from(u,P=>R.setUint8(O++,P.charCodeAt(0))),Array.from(m,P=>R.setUint8(O++,P.charCodeAt(0))),Array.from(_,P=>R.setUint8(O++,P.charCodeAt(0)));var I=new Uint8Array(E.byteLength+r.byteLength);return I.set(new Uint8Array(E),0),I.set(new Uint8Array(r),E.byteLength),I.buffer}decode(e,n){if(this._isArrayBuffer(e)){let r=this._binaryDecode(e);return n(r)}if(typeof e=="string"){const r=JSON.parse(e),[i,o,u,h,d]=r;return n({join_ref:i,ref:o,topic:u,event:h,payload:d})}return n({})}_binaryDecode(e){const n=new DataView(e),r=n.getUint8(0),i=new TextDecoder;switch(r){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,n,i)}}_decodeUserBroadcast(e,n,r){const i=n.getUint8(1),o=n.getUint8(2),u=n.getUint8(3),h=n.getUint8(4);let d=this.HEADER_LENGTH+4;const m=r.decode(e.slice(d,d+i));d=d+i;const g=r.decode(e.slice(d,d+o));d=d+o;const _=r.decode(e.slice(d,d+u));d=d+u;const w=e.slice(d,e.byteLength),E=h===this.JSON_ENCODING?JSON.parse(r.decode(w)):w,R={type:this.BROADCAST_EVENT,event:g,payload:E};return u>0&&(R.meta=JSON.parse(_)),{join_ref:null,ref:null,topic:m,event:this.BROADCAST_EVENT,payload:R}}_isArrayBuffer(e){var n;return e instanceof ArrayBuffer||((n=e?.constructor)===null||n===void 0?void 0:n.name)==="ArrayBuffer"}_pick(e,n){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([r])=>n.includes(r)))}}class Jx{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var st;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(st||(st={}));const yS=(t,e,n={})=>{var r;const i=(r=n.skipTypes)!==null&&r!==void 0?r:[];return e?Object.keys(e).reduce((o,u)=>(o[u]=oU(u,t,e,i),o),{}):{}},oU=(t,e,n,r)=>{const i=e.find(h=>h.name===t),o=i?.type,u=n[t];return o&&!r.includes(o)?Zx(o,u):Wy(u)},Zx=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return hU(e,n)}switch(t){case st.bool:return lU(e);case st.float4:case st.float8:case st.int2:case st.int4:case st.int8:case st.numeric:case st.oid:return uU(e);case st.json:case st.jsonb:return cU(e);case st.timestamp:return dU(e);case st.abstime:case st.date:case st.daterange:case st.int4range:case st.int8range:case st.money:case st.reltime:case st.text:case st.time:case st.timestamptz:case st.timetz:case st.tsrange:case st.tstzrange:return Wy(e);default:return Wy(e)}},Wy=t=>t,lU=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},uU=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},cU=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch{return t}return t},hU=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let o;const u=t.slice(1,n);try{o=JSON.parse("["+u+"]")}catch{o=u?u.split(","):[]}return o.map(h=>Zx(e,h))}return t},dU=t=>typeof t=="string"?t.replace(" ","T"):t,eC=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class Fg{constructor(e,n,r={},i=Gy){this.channel=e,this.event=n,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var vS;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(vS||(vS={}));class wc{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=n?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:o,onLeave:u,onSync:h}=this.caller;this.joinRef=this.channel._joinRef(),this.state=wc.syncState(this.state,i,o,u),this.pendingDiffs.forEach(d=>{this.state=wc.syncDiff(this.state,d,o,u)}),this.pendingDiffs=[],h()}),this.channel._on(r.diff,{},i=>{const{onJoin:o,onLeave:u,onSync:h}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=wc.syncDiff(this.state,i,o,u),h())}),this.onJoin((i,o,u)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:o,newPresences:u})}),this.onLeave((i,o,u)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:o,leftPresences:u})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,i){const o=this.cloneDeep(e),u=this.transformState(n),h={},d={};return this.map(o,(m,g)=>{u[m]||(d[m]=g)}),this.map(u,(m,g)=>{const _=o[m];if(_){const w=g.map(I=>I.presence_ref),E=_.map(I=>I.presence_ref),R=g.filter(I=>E.indexOf(I.presence_ref)<0),O=_.filter(I=>w.indexOf(I.presence_ref)<0);R.length>0&&(h[m]=R),O.length>0&&(d[m]=O)}else h[m]=g}),this.syncDiff(o,{joins:h,leaves:d},r,i)}static syncDiff(e,n,r,i){const{joins:o,leaves:u}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(o,(h,d)=>{var m;const g=(m=e[h])!==null&&m!==void 0?m:[];if(e[h]=this.cloneDeep(d),g.length>0){const _=e[h].map(E=>E.presence_ref),w=g.filter(E=>_.indexOf(E.presence_ref)<0);e[h].unshift(...w)}r(h,g,d)}),this.map(u,(h,d)=>{let m=e[h];if(!m)return;const g=d.map(_=>_.presence_ref);m=m.filter(_=>g.indexOf(_.presence_ref)<0),e[h]=m,i(h,m,d),m.length===0&&delete e[h]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const i=e[r];return"metas"in i?n[r]=i.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):n[r]=i,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var _S;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(_S||(_S={}));var bc;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(bc||(bc={}));var Os;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Os||(Os={}));class ml{constructor(e,n={config:{}},r){var i,o;if(this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=qt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Fg(this,gr.join,this.params,this.timeout),this.rejoinTimer=new Jx(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=qt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(u=>u.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=qt.closed,this.socket._remove(this)}),this._onError(u=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,u),this.state=qt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=qt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",u=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,u),this.state=qt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(gr.reply,{},(u,h)=>{this._trigger(this._replyEventName(h),u)}),this.presence=new wc(this),this.broadcastEndpointURL=eC(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((o=(i=this.params.config)===null||i===void 0?void 0:i.broadcast)===null||o===void 0)&&o.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,n=this.timeout){var r,i,o;if(this.socket.isConnected()||this.socket.connect(),this.state==qt.closed){const{config:{broadcast:u,presence:h,private:d}}=this.params,m=(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(E=>E.filter))!==null&&i!==void 0?i:[],g=!!this.bindings[bc.PRESENCE]&&this.bindings[bc.PRESENCE].length>0||((o=this.params.config.presence)===null||o===void 0?void 0:o.enabled)===!0,_={},w={broadcast:u,presence:Object.assign(Object.assign({},h),{enabled:g}),postgres_changes:m,private:d};this.socket.accessTokenValue&&(_.access_token=this.socket.accessTokenValue),this._onError(E=>e?.(Os.CHANNEL_ERROR,E)),this._onClose(()=>e?.(Os.CLOSED)),this.updateJoinPayload(Object.assign({config:w},_)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:E})=>{var R;if(this.socket._isManualToken()||this.socket.setAuth(),E===void 0){e?.(Os.SUBSCRIBED);return}else{const O=this.bindings.postgres_changes,I=(R=O?.length)!==null&&R!==void 0?R:0,P=[];for(let V=0;V<I;V++){const M=O[V],{filter:{event:J,schema:X,table:oe,filter:L}}=M,C=E&&E[V];if(C&&C.event===J&&ml.isFilterValueEqual(C.schema,X)&&ml.isFilterValueEqual(C.table,oe)&&ml.isFilterValueEqual(C.filter,L))P.push(Object.assign(Object.assign({},M),{id:C.id}));else{this.unsubscribe(),this.state=qt.errored,e?.(Os.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=P,e&&e(Os.SUBSCRIBED);return}}).receive("error",E=>{this.state=qt.errored,e?.(Os.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(E).join(", ")||"error")))}).receive("timeout",()=>{e?.(Os.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this.state===qt.joined&&e===bc.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(e,n,r)}async httpSend(e,n,r={}){var i;if(n==null)return Promise.reject("Payload is required for httpSend()");const o={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(o.Authorization=`Bearer ${this.socket.accessTokenValue}`);const u={method:"POST",headers:o,body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:n,private:this.private}]})},h=await this._fetchWithTimeout(this.broadcastEndpointURL,u,(i=r.timeout)!==null&&i!==void 0?i:this.timeout);if(h.status===202)return{success:!0};let d=h.statusText;try{const m=await h.json();d=m.error||m.message||d}catch{}return Promise.reject(new Error(d))}async send(e,n={}){var r,i;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:o,payload:u}=e,h={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(h.Authorization=`Bearer ${this.socket.accessTokenValue}`);const d={method:"POST",headers:h,body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:u,private:this.private}]})};try{const m=await this._fetchWithTimeout(this.broadcastEndpointURL,d,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=m.body)===null||i===void 0?void 0:i.cancel()),m.ok?"ok":"error"}catch(m){return m.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var u,h,d;const m=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((d=(h=(u=this.params)===null||u===void 0?void 0:u.config)===null||h===void 0?void 0:h.broadcast)===null||d===void 0)&&d.ack)&&o("ok"),m.receive("ok",()=>o("ok")),m.receive("error",()=>o("error")),m.receive("timeout",()=>o("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=qt.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(gr.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(i=>{r=new Fg(this,gr.leave,{},e),r.receive("ok",()=>{n(),i("ok")}).receive("timeout",()=>{n(),i("timed out")}).receive("error",()=>{i("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r?.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=qt.closed,this.bindings={}}async _fetchWithTimeout(e,n,r){const i=new AbortController,o=setTimeout(()=>i.abort(),r),u=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:i.signal}));return clearTimeout(o),u}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new Fg(this,e,n,r);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>iU){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var i,o;const u=e.toLocaleLowerCase(),{close:h,error:d,leave:m,join:g}=gr;if(r&&[h,d,m,g].indexOf(u)>=0&&r!==this._joinRef())return;let w=this._onMessage(u,n,r);if(n&&!w)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(u)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(E=>{var R,O,I;return((R=E.filter)===null||R===void 0?void 0:R.event)==="*"||((I=(O=E.filter)===null||O===void 0?void 0:O.event)===null||I===void 0?void 0:I.toLocaleLowerCase())===u}).map(E=>E.callback(w,r)):(o=this.bindings[u])===null||o===void 0||o.filter(E=>{var R,O,I,P,V,M;if(["broadcast","presence","postgres_changes"].includes(u))if("id"in E){const J=E.id,X=(R=E.filter)===null||R===void 0?void 0:R.event;return J&&((O=n.ids)===null||O===void 0?void 0:O.includes(J))&&(X==="*"||X?.toLocaleLowerCase()===((I=n.data)===null||I===void 0?void 0:I.type.toLocaleLowerCase()))}else{const J=(V=(P=E?.filter)===null||P===void 0?void 0:P.event)===null||V===void 0?void 0:V.toLocaleLowerCase();return J==="*"||J===((M=n?.event)===null||M===void 0?void 0:M.toLocaleLowerCase())}else return E.type.toLocaleLowerCase()===u}).map(E=>{if(typeof w=="object"&&"ids"in w){const R=w.data,{schema:O,table:I,commit_timestamp:P,type:V,errors:M}=R;w=Object.assign(Object.assign({},{schema:O,table:I,commit_timestamp:P,eventType:V,new:{},old:{},errors:M}),this._getPayloadRecords(R))}E.callback(w,r)})}_isClosed(){return this.state===qt.closed}_isJoined(){return this.state===qt.joined}_isJoining(){return this.state===qt.joining}_isLeaving(){return this.state===qt.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const i=e.toLocaleLowerCase(),o={type:i,filter:n,callback:r};return this.bindings[i]?this.bindings[i].push(o):this.bindings[i]=[o],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(i=>{var o;return!(((o=i.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===r&&ml.isEqual(i.filter,n))})),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}static isFilterValueEqual(e,n){return(e??void 0)===(n??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(gr.close,{},e)}_onError(e){this._on(gr.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=qt.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=yS(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=yS(e.columns,e.old_record)),n}}const Hg=()=>{},Kd={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},fU=[1e3,2e3,5e3,1e4],mU=1e4,pU=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class gU{constructor(e,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Gy,this.transport=null,this.heartbeatIntervalMs=Kd.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Hg,this.ref=0,this.reconnectTimer=null,this.vsn=gS,this.logger=Hg,this.conn=null,this.sendBuffer=[],this.serializer=new aU,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=i=>i?(...o)=>i(...o):(...o)=>fetch(...o),!(!((r=n?.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${e}/${Ky.websocket}`,this.httpEndpoint=eC(e),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=eU.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const n=e.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,n??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Ei.connecting:return Ma.Connecting;case Ei.open:return Ma.Open;case Ei.closing:return Ma.Closing;default:return Ma.Closed}}isConnected(){return this.connectionState()===Ma.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,n={config:{}}){const r=`realtime:${e}`,i=this.getChannels().find(o=>o.topic===r);if(i)return i;{const o=new ml(`realtime:${e}`,n,this);return this.channels.push(o),o}}push(e){const{topic:n,event:r,payload:i,ref:o}=e,u=()=>{this.encode(e,h=>{var d;(d=this.conn)===null||d===void 0||d.send(h)})};this.log("push",`${n} ${r} (${o})`,i),this.isConnected()?u():this.sendBuffer.push(u)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(sU,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},Kd.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply"&&n.ref&&n.ref===this.pendingHeartbeatRef){const m=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error",m)}catch(g){this.log("error","error in heartbeat callback",g)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:r,event:i,payload:o,ref:u}=n,h=u?`(${u})`:"",d=o.status||"";this.log("receive",`${d} ${r} ${i} ${h}`.trim(),o),this.channels.filter(m=>m._isMember(r)).forEach(m=>m._trigger(i,o,u)),this._triggerStateCallbacks("message",n)})}_clearTimer(e){var n;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e),this.conn.readyState===Ei.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===Ei.open||this.conn.readyState===Ei.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(n=>{this.log("error","error waiting for auth on connect",n),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this._terminateWorker()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(e){var n;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(gr.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",i=new URLSearchParams(n);return`${e}${r}${i}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([pU],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(e,n=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(e=null){let n,r=!1;if(e)n=e,r=!0;else if(this.accessToken)try{n=await this.accessToken()}catch(i){this.log("error","Error fetching access token from callback",i),n=this.accessTokenValue}else n=this.accessTokenValue;r?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(i=>{const o={access_token:n,version:nU};n&&i.updateJoinPayload(o),i.joinedOnce&&i._isJoined()&&i._push(gr.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this._isManualToken()||this.setAuth().catch(n=>{this.log("error",`Error setting auth in ${e}`,n)})}_triggerStateCallbacks(e,n){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(n)}catch(i){this.log("error",`error in ${e} callback`,i)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new Jx(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Kd.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var n,r,i,o,u,h,d,m,g,_,w,E;switch(this.transport=(n=e?.transport)!==null&&n!==void 0?n:null,this.timeout=(r=e?.timeout)!==null&&r!==void 0?r:Gy,this.heartbeatIntervalMs=(i=e?.heartbeatIntervalMs)!==null&&i!==void 0?i:Kd.HEARTBEAT_INTERVAL,this.worker=(o=e?.worker)!==null&&o!==void 0?o:!1,this.accessToken=(u=e?.accessToken)!==null&&u!==void 0?u:null,this.heartbeatCallback=(h=e?.heartbeatCallback)!==null&&h!==void 0?h:Hg,this.vsn=(d=e?.vsn)!==null&&d!==void 0?d:gS,e?.params&&(this.params=e.params),e?.logger&&(this.logger=e.logger),(e?.logLevel||e?.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(m=e?.reconnectAfterMs)!==null&&m!==void 0?m:(R=>fU[R-1]||mU),this.vsn){case Xx:this.encode=(g=e?.encode)!==null&&g!==void 0?g:((R,O)=>O(JSON.stringify(R))),this.decode=(_=e?.decode)!==null&&_!==void 0?_:((R,O)=>O(JSON.parse(R)));break;case rU:this.encode=(w=e?.encode)!==null&&w!==void 0?w:this.serializer.encode.bind(this.serializer),this.decode=(E=e?.decode)!==null&&E!==void 0?E:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e?.workerUrl}}}var jc=class extends Error{constructor(t,e){super(t),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&e.icebergType?.includes("CommitState")===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function yU(t,e,n){const r=new URL(e,t);if(n)for(const[i,o]of Object.entries(n))o!==void 0&&r.searchParams.set(i,o);return r.toString()}async function vU(t){return!t||t.type==="none"?{}:t.type==="bearer"?{Authorization:`Bearer ${t.token}`}:t.type==="header"?{[t.name]:t.value}:t.type==="custom"?await t.getHeaders():{}}function _U(t){const e=t.fetchImpl??globalThis.fetch;return{async request({method:n,path:r,query:i,body:o,headers:u}){const h=yU(t.baseUrl,r,i),d=await vU(t.auth),m=await e(h,{method:n,headers:{...o?{"Content-Type":"application/json"}:{},...d,...u},body:o?JSON.stringify(o):void 0}),g=await m.text(),_=(m.headers.get("content-type")||"").includes("application/json"),w=_&&g?JSON.parse(g):g;if(!m.ok){const E=_?w:void 0,R=E?.error;throw new jc(R?.message??`Request failed with status ${m.status}`,{status:m.status,icebergType:R?.type,icebergCode:R?.code,details:E})}return{status:m.status,headers:m.headers,data:w}}}}function Wd(t){return t.join("")}var wU=class{constructor(t,e=""){this.client=t,this.prefix=e}async listNamespaces(t){const e=t?{parent:Wd(t.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(r=>({namespace:r}))}async createNamespace(t,e){const n={namespace:t.namespace,properties:e?.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:n})).data}async dropNamespace(t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Wd(t.namespace)}`})}async loadNamespaceMetadata(t){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Wd(t.namespace)}`})).data.properties}}async namespaceExists(t){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Wd(t.namespace)}`}),!0}catch(e){if(e instanceof jc&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(t,e){try{return await this.createNamespace(t,e)}catch(n){if(n instanceof jc&&n.status===409)return;throw n}}};function tl(t){return t.join("")}var bU=class{constructor(t,e="",n){this.client=t,this.prefix=e,this.accessDelegation=n}async listTables(t){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${tl(t.namespace)}/tables`})).data.identifiers}async createTable(t,e){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${tl(t.namespace)}/tables`,body:e,headers:n})).data.metadata}async updateTable(t,e){const n=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${tl(t.namespace)}/tables/${t.name}`,body:e});return{"metadata-location":n.data["metadata-location"],metadata:n.data.metadata}}async dropTable(t,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${tl(t.namespace)}/tables/${t.name}`,query:{purgeRequested:String(e?.purge??!1)}})}async loadTable(t){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${tl(t.namespace)}/tables/${t.name}`,headers:e})).data.metadata}async tableExists(t){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${tl(t.namespace)}/tables/${t.name}`,headers:e}),!0}catch(n){if(n instanceof jc&&n.status===404)return!1;throw n}}async createTableIfNotExists(t,e){try{return await this.createTable(t,e)}catch(n){if(n instanceof jc&&n.status===409)return await this.loadTable({namespace:t.namespace,name:e.name});throw n}}},TU=class{constructor(t){let e="v1";t.catalogName&&(e+=`/${t.catalogName}`);const n=t.baseUrl.endsWith("/")?t.baseUrl:`${t.baseUrl}/`;this.client=_U({baseUrl:n,auth:t.auth,fetchImpl:t.fetch}),this.accessDelegation=t.accessDelegation?.join(","),this.namespaceOps=new wU(this.client,e),this.tableOps=new bU(this.client,e,this.accessDelegation)}async listNamespaces(t){return this.namespaceOps.listNamespaces(t)}async createNamespace(t,e){return this.namespaceOps.createNamespace(t,e)}async dropNamespace(t){await this.namespaceOps.dropNamespace(t)}async loadNamespaceMetadata(t){return this.namespaceOps.loadNamespaceMetadata(t)}async listTables(t){return this.tableOps.listTables(t)}async createTable(t,e){return this.tableOps.createTable(t,e)}async updateTable(t,e){return this.tableOps.updateTable(t,e)}async dropTable(t,e){await this.tableOps.dropTable(t,e)}async loadTable(t){return this.tableOps.loadTable(t)}async namespaceExists(t){return this.namespaceOps.namespaceExists(t)}async tableExists(t){return this.tableOps.tableExists(t)}async createNamespaceIfNotExists(t,e){return this.namespaceOps.createNamespaceIfNotExists(t,e)}async createTableIfNotExists(t,e){return this.tableOps.createTableIfNotExists(t,e)}},_m=class extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}};function dt(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}var EU=class extends _m{constructor(t,e,n){super(t),this.name="StorageApiError",this.status=e,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},Yy=class extends _m{constructor(t,e){super(t),this.name="StorageUnknownError",this.originalError=e}};const k_=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),SU=()=>Response,Qy=t=>{if(Array.isArray(t))return t.map(n=>Qy(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const i=n.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));e[i]=Qy(r)}),e},AU=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},RU=t=>!t||typeof t!="string"||t.length===0||t.length>100||t.trim()!==t||t.includes("/")||t.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(t);function Uc(t){"@babel/helpers - typeof";return Uc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Uc(t)}function xU(t,e){if(Uc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Uc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function CU(t){var e=xU(t,"string");return Uc(e)=="symbol"?e:e+""}function IU(t,e,n){return(e=CU(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function wS(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Te(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?wS(Object(n),!0).forEach(function(r){IU(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):wS(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}const Gg=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},OU=async(t,e,n)=>{t instanceof await SU()&&!n?.noResolveJson?t.json().then(r=>{const i=t.status||500,o=r?.statusCode||i+"";e(new EU(Gg(r),i,o))}).catch(r=>{e(new Yy(Gg(r),r))}):e(new Yy(Gg(t),t))},kU=(t,e,n,r)=>{const i={method:t,headers:e?.headers||{}};return t==="GET"||!r?i:(AU(r)?(i.headers=Te({"Content-Type":"application/json"},e?.headers),i.body=JSON.stringify(r)):i.body=r,e?.duplex&&(i.duplex=e.duplex),Te(Te({},i),n))};async function ch(t,e,n,r,i,o){return new Promise((u,h)=>{t(n,kU(e,r,i,o)).then(d=>{if(!d.ok)throw d;return r?.noResolveJson?d:d.json()}).then(d=>u(d)).catch(d=>OU(d,h,r))})}async function Bc(t,e,n,r){return ch(t,"GET",e,n,r)}async function pr(t,e,n,r,i){return ch(t,"POST",e,r,i,n)}async function Xy(t,e,n,r,i){return ch(t,"PUT",e,r,i,n)}async function DU(t,e,n,r){return ch(t,"HEAD",e,Te(Te({},n),{},{noResolveJson:!0}),r)}async function D_(t,e,n,r,i){return ch(t,"DELETE",e,r,i,n)}var PU=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e}then(t,e){return this.execute().then(t,e)}async execute(){var t=this;try{return{data:(await t.downloadFn()).body,error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(dt(e))return{data:null,error:e};throw e}}};let tC;tC=Symbol.toStringTag;var NU=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e,this[tC]="BlobDownloadBuilder",this.promise=null}asStream(){return new PU(this.downloadFn,this.shouldThrowOnError)}then(t,e){return this.getPromise().then(t,e)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var t=this;try{return{data:await(await t.downloadFn()).blob(),error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(dt(e))return{data:null,error:e};throw e}}};const VU={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},bS={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var MU=class{constructor(t,e={},n,r){this.shouldThrowOnError=!1,this.url=t,this.headers=e,this.bucketId=n,this.fetch=k_(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(t,e,n,r){var i=this;try{let o;const u=Te(Te({},bS),r);let h=Te(Te({},i.headers),t==="POST"&&{"x-upsert":String(u.upsert)});const d=u.metadata;typeof Blob<"u"&&n instanceof Blob?(o=new FormData,o.append("cacheControl",u.cacheControl),d&&o.append("metadata",i.encodeMetadata(d)),o.append("",n)):typeof FormData<"u"&&n instanceof FormData?(o=n,o.has("cacheControl")||o.append("cacheControl",u.cacheControl),d&&!o.has("metadata")&&o.append("metadata",i.encodeMetadata(d))):(o=n,h["cache-control"]=`max-age=${u.cacheControl}`,h["content-type"]=u.contentType,d&&(h["x-metadata"]=i.toBase64(i.encodeMetadata(d))),(typeof ReadableStream<"u"&&o instanceof ReadableStream||o&&typeof o=="object"&&"pipe"in o&&typeof o.pipe=="function")&&!u.duplex&&(u.duplex="half")),r?.headers&&(h=Te(Te({},h),r.headers));const m=i._removeEmptyFolders(e),g=i._getFinalPath(m),_=await(t=="PUT"?Xy:pr)(i.fetch,`${i.url}/object/${g}`,o,Te({headers:h},u?.duplex?{duplex:u.duplex}:{}));return{data:{path:m,id:_.Id,fullPath:_.Key},error:null}}catch(o){if(i.shouldThrowOnError)throw o;if(dt(o))return{data:null,error:o};throw o}}async upload(t,e,n){return this.uploadOrUpdate("POST",t,e,n)}async uploadToSignedUrl(t,e,n,r){var i=this;const o=i._removeEmptyFolders(t),u=i._getFinalPath(o),h=new URL(i.url+`/object/upload/sign/${u}`);h.searchParams.set("token",e);try{let d;const m=Te({upsert:bS.upsert},r),g=Te(Te({},i.headers),{"x-upsert":String(m.upsert)});return typeof Blob<"u"&&n instanceof Blob?(d=new FormData,d.append("cacheControl",m.cacheControl),d.append("",n)):typeof FormData<"u"&&n instanceof FormData?(d=n,d.append("cacheControl",m.cacheControl)):(d=n,g["cache-control"]=`max-age=${m.cacheControl}`,g["content-type"]=m.contentType),{data:{path:o,fullPath:(await Xy(i.fetch,h.toString(),d,{headers:g})).Key},error:null}}catch(d){if(i.shouldThrowOnError)throw d;if(dt(d))return{data:null,error:d};throw d}}async createSignedUploadUrl(t,e){var n=this;try{let r=n._getFinalPath(t);const i=Te({},n.headers);e?.upsert&&(i["x-upsert"]="true");const o=await pr(n.fetch,`${n.url}/object/upload/sign/${r}`,{},{headers:i}),u=new URL(n.url+o.url),h=u.searchParams.get("token");if(!h)throw new _m("No token returned by API");return{data:{signedUrl:u.toString(),path:t,token:h},error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(dt(r))return{data:null,error:r};throw r}}async update(t,e,n){return this.uploadOrUpdate("PUT",t,e,n)}async move(t,e,n){var r=this;try{return{data:await pr(r.fetch,`${r.url}/object/move`,{bucketId:r.bucketId,sourceKey:t,destinationKey:e,destinationBucket:n?.destinationBucket},{headers:r.headers}),error:null}}catch(i){if(r.shouldThrowOnError)throw i;if(dt(i))return{data:null,error:i};throw i}}async copy(t,e,n){var r=this;try{return{data:{path:(await pr(r.fetch,`${r.url}/object/copy`,{bucketId:r.bucketId,sourceKey:t,destinationKey:e,destinationBucket:n?.destinationBucket},{headers:r.headers})).Key},error:null}}catch(i){if(r.shouldThrowOnError)throw i;if(dt(i))return{data:null,error:i};throw i}}async createSignedUrl(t,e,n){var r=this;try{let i=r._getFinalPath(t),o=await pr(r.fetch,`${r.url}/object/sign/${i}`,Te({expiresIn:e},n?.transform?{transform:n.transform}:{}),{headers:r.headers});const u=n?.download?`&download=${n.download===!0?"":n.download}`:"";return o={signedUrl:encodeURI(`${r.url}${o.signedURL}${u}`)},{data:o,error:null}}catch(i){if(r.shouldThrowOnError)throw i;if(dt(i))return{data:null,error:i};throw i}}async createSignedUrls(t,e,n){var r=this;try{const i=await pr(r.fetch,`${r.url}/object/sign/${r.bucketId}`,{expiresIn:e,paths:t},{headers:r.headers}),o=n?.download?`&download=${n.download===!0?"":n.download}`:"";return{data:i.map(u=>Te(Te({},u),{},{signedUrl:u.signedURL?encodeURI(`${r.url}${u.signedURL}${o}`):null})),error:null}}catch(i){if(r.shouldThrowOnError)throw i;if(dt(i))return{data:null,error:i};throw i}}download(t,e){const n=typeof e?.transform<"u"?"render/image/authenticated":"object",r=this.transformOptsToQueryString(e?.transform||{}),i=r?`?${r}`:"",o=this._getFinalPath(t),u=()=>Bc(this.fetch,`${this.url}/${n}/${o}${i}`,{headers:this.headers,noResolveJson:!0});return new NU(u,this.shouldThrowOnError)}async info(t){var e=this;const n=e._getFinalPath(t);try{return{data:Qy(await Bc(e.fetch,`${e.url}/object/info/${n}`,{headers:e.headers})),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(dt(r))return{data:null,error:r};throw r}}async exists(t){var e=this;const n=e._getFinalPath(t);try{return await DU(e.fetch,`${e.url}/object/${n}`,{headers:e.headers}),{data:!0,error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(dt(r)&&r instanceof Yy){const i=r.originalError;if([400,404].includes(i?.status))return{data:!1,error:r}}throw r}}getPublicUrl(t,e){const n=this._getFinalPath(t),r=[],i=e?.download?`download=${e.download===!0?"":e.download}`:"";i!==""&&r.push(i);const o=typeof e?.transform<"u"?"render/image":"object",u=this.transformOptsToQueryString(e?.transform||{});u!==""&&r.push(u);let h=r.join("&");return h!==""&&(h=`?${h}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${n}${h}`)}}}async remove(t){var e=this;try{return{data:await D_(e.fetch,`${e.url}/object/${e.bucketId}`,{prefixes:t},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(dt(n))return{data:null,error:n};throw n}}async list(t,e,n){var r=this;try{const i=Te(Te(Te({},VU),e),{},{prefix:t||""});return{data:await pr(r.fetch,`${r.url}/object/list/${r.bucketId}`,i,{headers:r.headers},n),error:null}}catch(i){if(r.shouldThrowOnError)throw i;if(dt(i))return{data:null,error:i};throw i}}async listV2(t,e){var n=this;try{const r=Te({},t);return{data:await pr(n.fetch,`${n.url}/object/list-v2/${n.bucketId}`,r,{headers:n.headers},e),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(dt(r))return{data:null,error:r};throw r}}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const e=[];return t.width&&e.push(`width=${t.width}`),t.height&&e.push(`height=${t.height}`),t.resize&&e.push(`resize=${t.resize}`),t.format&&e.push(`format=${t.format}`),t.quality&&e.push(`quality=${t.quality}`),e.join("&")}};const nC="2.90.0",rC={"X-Client-Info":`storage-js/${nC}`};var LU=class{constructor(t,e={},n,r){this.shouldThrowOnError=!1;const i=new URL(t);r?.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href.replace(/\/$/,""),this.headers=Te(Te({},rC),e),this.fetch=k_(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(t){var e=this;try{const n=e.listBucketOptionsToQueryString(t);return{data:await Bc(e.fetch,`${e.url}/bucket${n}`,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(dt(n))return{data:null,error:n};throw n}}async getBucket(t){var e=this;try{return{data:await Bc(e.fetch,`${e.url}/bucket/${t}`,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(dt(n))return{data:null,error:n};throw n}}async createBucket(t,e={public:!1}){var n=this;try{return{data:await pr(n.fetch,`${n.url}/bucket`,{id:t,name:t,type:e.type,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(dt(r))return{data:null,error:r};throw r}}async updateBucket(t,e){var n=this;try{return{data:await Xy(n.fetch,`${n.url}/bucket/${t}`,{id:t,name:t,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(dt(r))return{data:null,error:r};throw r}}async emptyBucket(t){var e=this;try{return{data:await pr(e.fetch,`${e.url}/bucket/${t}/empty`,{},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(dt(n))return{data:null,error:n};throw n}}async deleteBucket(t){var e=this;try{return{data:await D_(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(dt(n))return{data:null,error:n};throw n}}listBucketOptionsToQueryString(t){const e={};return t&&("limit"in t&&(e.limit=String(t.limit)),"offset"in t&&(e.offset=String(t.offset)),t.search&&(e.search=t.search),t.sortColumn&&(e.sortColumn=t.sortColumn),t.sortOrder&&(e.sortOrder=t.sortOrder)),Object.keys(e).length>0?"?"+new URLSearchParams(e).toString():""}},jU=class{constructor(t,e={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Te(Te({},rC),e),this.fetch=k_(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(t){var e=this;try{return{data:await pr(e.fetch,`${e.url}/bucket`,{name:t},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(dt(n))return{data:null,error:n};throw n}}async listBuckets(t){var e=this;try{const n=new URLSearchParams;t?.limit!==void 0&&n.set("limit",t.limit.toString()),t?.offset!==void 0&&n.set("offset",t.offset.toString()),t?.sortColumn&&n.set("sortColumn",t.sortColumn),t?.sortOrder&&n.set("sortOrder",t.sortOrder),t?.search&&n.set("search",t.search);const r=n.toString(),i=r?`${e.url}/bucket?${r}`:`${e.url}/bucket`;return{data:await Bc(e.fetch,i,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(dt(n))return{data:null,error:n};throw n}}async deleteBucket(t){var e=this;try{return{data:await D_(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(dt(n))return{data:null,error:n};throw n}}from(t){var e=this;if(!RU(t))throw new _m("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const n=new TU({baseUrl:this.url,catalogName:t,auth:{type:"custom",getHeaders:async()=>e.headers},fetch:this.fetch}),r=this.shouldThrowOnError;return new Proxy(n,{get(i,o){const u=i[o];return typeof u!="function"?u:async(...h)=>{try{return{data:await u.apply(i,h),error:null}}catch(d){if(r)throw d;return{data:null,error:d}}}}})}};const P_={"X-Client-Info":`storage-js/${nC}`,"Content-Type":"application/json"};var sC=class extends Error{constructor(t){super(t),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function Un(t){return typeof t=="object"&&t!==null&&"__isStorageVectorsError"in t}var Kg=class extends sC{constructor(t,e,n){super(t),this.name="StorageVectorsApiError",this.status=e,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},UU=class extends sC{constructor(t,e){super(t),this.name="StorageVectorsUnknownError",this.originalError=e}};const N_=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),BU=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},TS=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),zU=async(t,e,n)=>{if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!n?.noResolveJson){const r=t.status||500,i=t;if(typeof i.json=="function")i.json().then(o=>{const u=o?.statusCode||o?.code||r+"";e(new Kg(TS(o),r,u))}).catch(()=>{const o=r+"";e(new Kg(i.statusText||`HTTP ${r} error`,r,o))});else{const o=r+"";e(new Kg(i.statusText||`HTTP ${r} error`,r,o))}}else e(new UU(TS(t),t))},qU=(t,e,n,r)=>{const i={method:t,headers:e?.headers||{}};return r?(BU(r)?(i.headers=Te({"Content-Type":"application/json"},e?.headers),i.body=JSON.stringify(r)):i.body=r,Te(Te({},i),n)):i};async function $U(t,e,n,r,i,o){return new Promise((u,h)=>{t(n,qU(e,r,i,o)).then(d=>{if(!d.ok)throw d;if(r?.noResolveJson)return d;const m=d.headers.get("content-type");return!m||!m.includes("application/json")?{}:d.json()}).then(d=>u(d)).catch(d=>zU(d,h,r))})}async function Bn(t,e,n,r,i){return $U(t,"POST",e,r,i,n)}var FU=class{constructor(t,e={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Te(Te({},P_),e),this.fetch=N_(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(t){var e=this;try{return{data:await Bn(e.fetch,`${e.url}/CreateIndex`,t,{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Un(n))return{data:null,error:n};throw n}}async getIndex(t,e){var n=this;try{return{data:await Bn(n.fetch,`${n.url}/GetIndex`,{vectorBucketName:t,indexName:e},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Un(r))return{data:null,error:r};throw r}}async listIndexes(t){var e=this;try{return{data:await Bn(e.fetch,`${e.url}/ListIndexes`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Un(n))return{data:null,error:n};throw n}}async deleteIndex(t,e){var n=this;try{return{data:await Bn(n.fetch,`${n.url}/DeleteIndex`,{vectorBucketName:t,indexName:e},{headers:n.headers})||{},error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Un(r))return{data:null,error:r};throw r}}},HU=class{constructor(t,e={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Te(Te({},P_),e),this.fetch=N_(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(t){var e=this;try{if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await Bn(e.fetch,`${e.url}/PutVectors`,t,{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Un(n))return{data:null,error:n};throw n}}async getVectors(t){var e=this;try{return{data:await Bn(e.fetch,`${e.url}/GetVectors`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Un(n))return{data:null,error:n};throw n}}async listVectors(t){var e=this;try{if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return{data:await Bn(e.fetch,`${e.url}/ListVectors`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Un(n))return{data:null,error:n};throw n}}async queryVectors(t){var e=this;try{return{data:await Bn(e.fetch,`${e.url}/QueryVectors`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Un(n))return{data:null,error:n};throw n}}async deleteVectors(t){var e=this;try{if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await Bn(e.fetch,`${e.url}/DeleteVectors`,t,{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Un(n))return{data:null,error:n};throw n}}},GU=class{constructor(t,e={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Te(Te({},P_),e),this.fetch=N_(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(t){var e=this;try{return{data:await Bn(e.fetch,`${e.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Un(n))return{data:null,error:n};throw n}}async getBucket(t){var e=this;try{return{data:await Bn(e.fetch,`${e.url}/GetVectorBucket`,{vectorBucketName:t},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Un(n))return{data:null,error:n};throw n}}async listBuckets(t={}){var e=this;try{return{data:await Bn(e.fetch,`${e.url}/ListVectorBuckets`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Un(n))return{data:null,error:n};throw n}}async deleteBucket(t){var e=this;try{return{data:await Bn(e.fetch,`${e.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Un(n))return{data:null,error:n};throw n}}},KU=class extends GU{constructor(t,e={}){super(t,e.headers||{},e.fetch)}from(t){return new WU(this.url,this.headers,t,this.fetch)}async createBucket(t){var e=()=>super.createBucket,n=this;return e().call(n,t)}async getBucket(t){var e=()=>super.getBucket,n=this;return e().call(n,t)}async listBuckets(t={}){var e=()=>super.listBuckets,n=this;return e().call(n,t)}async deleteBucket(t){var e=()=>super.deleteBucket,n=this;return e().call(n,t)}},WU=class extends FU{constructor(t,e,n,r){super(t,e,r),this.vectorBucketName=n}async createIndex(t){var e=()=>super.createIndex,n=this;return e().call(n,Te(Te({},t),{},{vectorBucketName:n.vectorBucketName}))}async listIndexes(t={}){var e=()=>super.listIndexes,n=this;return e().call(n,Te(Te({},t),{},{vectorBucketName:n.vectorBucketName}))}async getIndex(t){var e=()=>super.getIndex,n=this;return e().call(n,n.vectorBucketName,t)}async deleteIndex(t){var e=()=>super.deleteIndex,n=this;return e().call(n,n.vectorBucketName,t)}index(t){return new YU(this.url,this.headers,this.vectorBucketName,t,this.fetch)}},YU=class extends HU{constructor(t,e,n,r,i){super(t,e,i),this.vectorBucketName=n,this.indexName=r}async putVectors(t){var e=()=>super.putVectors,n=this;return e().call(n,Te(Te({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async getVectors(t){var e=()=>super.getVectors,n=this;return e().call(n,Te(Te({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async listVectors(t={}){var e=()=>super.listVectors,n=this;return e().call(n,Te(Te({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async queryVectors(t){var e=()=>super.queryVectors,n=this;return e().call(n,Te(Te({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async deleteVectors(t){var e=()=>super.deleteVectors,n=this;return e().call(n,Te(Te({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}},QU=class extends LU{constructor(t,e={},n,r){super(t,e,n,r)}from(t){return new MU(this.url,this.headers,t,this.fetch)}get vectors(){return new KU(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new jU(this.url+"/iceberg",this.headers,this.fetch)}};const iC="2.90.0",dl=30*1e3,Jy=3,Wg=Jy*dl,XU="http://localhost:9999",JU="supabase.auth.token",ZU={"X-Client-Info":`gotrue-js/${iC}`},Zy="X-Supabase-Api-Version",aC={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},e3=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,t3=600*1e3;class zc extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function pe(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class n3 extends zc{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function r3(t){return pe(t)&&t.name==="AuthApiError"}class La extends zc{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class Hs extends zc{constructor(e,n,r,i){super(e,r,i),this.name=n,this.status=r}}class jn extends Hs{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function s3(t){return pe(t)&&t.name==="AuthSessionMissingError"}class nl extends Hs{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Yd extends Hs{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Qd extends Hs{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function i3(t){return pe(t)&&t.name==="AuthImplicitGrantRedirectError"}class ES extends Hs{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class a3 extends Hs{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class ev extends Hs{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function Yg(t){return pe(t)&&t.name==="AuthRetryableFetchError"}class SS extends Hs{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class tv extends Hs{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Uf="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),AS=` 	
\r=`.split(""),o3=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<AS.length;e+=1)t[AS[e].charCodeAt(0)]=-2;for(let e=0;e<Uf.length;e+=1)t[Uf[e].charCodeAt(0)]=e;return t})();function RS(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(Uf[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(Uf[r]),e.queuedBits-=6}}function oC(t,e,n){const r=o3[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function xS(t){const e=[],n=u=>{e.push(String.fromCodePoint(u))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},o=u=>{c3(u,r,n)};for(let u=0;u<t.length;u+=1)oC(t.charCodeAt(u),i,o);return e.join("")}function l3(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function u3(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){const i=(r-55296)*1024&65535;r=(t.charCodeAt(n+1)-56320&65535|i)+65536,n+=1}l3(r,e)}}function c3(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let r=1;r<6;r+=1)if((t>>7-r&1)===0){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function Sl(t){const e=[],n={queue:0,queuedBits:0},r=i=>{e.push(i)};for(let i=0;i<t.length;i+=1)oC(t.charCodeAt(i),n,r);return new Uint8Array(e)}function h3(t){const e=[];return u3(t,n=>e.push(n)),new Uint8Array(e)}function Ba(t){const e=[],n={queue:0,queuedBits:0},r=i=>{e.push(i)};return t.forEach(i=>RS(i,n,r)),RS(null,n,r),e.join("")}function d3(t){return Math.round(Date.now()/1e3)+t}function f3(){return Symbol("auth-callback")}const sn=()=>typeof window<"u"&&typeof document<"u",Ia={tested:!1,writable:!1},lC=()=>{if(!sn())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Ia.tested)return Ia.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Ia.tested=!0,Ia.writable=!0}catch{Ia.tested=!0,Ia.writable=!1}return Ia.writable};function m3(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((i,o)=>{e[o]=i})}catch{}return n.searchParams.forEach((r,i)=>{e[i]=r}),e}const uC=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),p3=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",fl=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},Oa=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},rn=async(t,e)=>{await t.removeItem(e)};class wm{constructor(){this.promise=new wm.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}wm.promiseConstructor=Promise;function Qg(t){const e=t.split(".");if(e.length!==3)throw new tv("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!e3.test(e[r]))throw new tv("JWT not in base64url format");return{header:JSON.parse(xS(e[0])),payload:JSON.parse(xS(e[1])),signature:Sl(e[2]),raw:{header:e[0],payload:e[1]}}}async function g3(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function y3(t,e){return new Promise((r,i)=>{(async()=>{for(let o=0;o<1/0;o++)try{const u=await t(o);if(!e(o,null,u)){r(u);return}}catch(u){if(!e(o,u)){i(u);return}}})()})}function v3(t){return("0"+t.toString(16)).substr(-2)}function _3(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let i="";for(let o=0;o<56;o++)i+=n.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(e),Array.from(e,v3).join("")}async function w3(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),i=new Uint8Array(r);return Array.from(i).map(o=>String.fromCharCode(o)).join("")}async function b3(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await w3(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function rl(t,e,n=!1){const r=_3();let i=r;n&&(i+="/PASSWORD_RECOVERY"),await fl(t,`${e}-code-verifier`,i);const o=await b3(r);return[o,r===o?"plain":"s256"]}const T3=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function E3(t){const e=t.headers.get(Zy);if(!e||!e.match(T3))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function S3(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function A3(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const R3=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function sl(t){if(!R3.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Xg(){const t={};return new Proxy(t,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function x3(t,e){return new Proxy(t,{get:(n,r,i)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){const o=r.toString();if(o==="Symbol(Symbol.toPrimitive)"||o==="Symbol(Symbol.toStringTag)"||o==="Symbol(util.inspect.custom)"||o==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,r,i)}return!e.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(n,r,i)}})}function CS(t){return JSON.parse(JSON.stringify(t))}const Pa=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),C3=[502,503,504];async function IS(t){var e;if(!p3(t))throw new ev(Pa(t),0);if(C3.includes(t.status))throw new ev(Pa(t),t.status);let n;try{n=await t.json()}catch(o){throw new La(Pa(o),o)}let r;const i=E3(t);if(i&&i.getTime()>=aC["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new SS(Pa(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new jn}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((o,u)=>o&&typeof u=="string",!0))throw new SS(Pa(n),t.status,n.weak_password.reasons);throw new n3(Pa(n),t.status||500,r)}const I3=(t,e,n,r)=>{const i={method:t,headers:e?.headers||{}};return t==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e?.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),n))};async function be(t,e,n,r){var i;const o=Object.assign({},r?.headers);o[Zy]||(o[Zy]=aC["2024-01-01"].name),r?.jwt&&(o.Authorization=`Bearer ${r.jwt}`);const u=(i=r?.query)!==null&&i!==void 0?i:{};r?.redirectTo&&(u.redirect_to=r.redirectTo);const h=Object.keys(u).length?"?"+new URLSearchParams(u).toString():"",d=await O3(t,e,n+h,{headers:o,noResolveJson:r?.noResolveJson},{},r?.body);return r?.xform?r?.xform(d):{data:Object.assign({},d),error:null}}async function O3(t,e,n,r,i,o){const u=I3(e,r,i,o);let h;try{h=await t(n,Object.assign({},u))}catch(d){throw console.error(d),new ev(Pa(d),0)}if(h.ok||await IS(h),r?.noResolveJson)return h;try{return await h.json()}catch(d){await IS(d)}}function fr(t){var e;let n=null;P3(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=d3(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function OS(t){const e=fr(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Ci(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function k3(t){return{data:t,error:null}}function D3(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:i,verification_type:o}=t,u=vm(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),h={action_link:e,email_otp:n,hashed_token:r,redirect_to:i,verification_type:o},d=Object.assign({},u);return{data:{properties:h,user:d},error:null}}function kS(t){return t}function P3(t){return t.access_token&&t.refresh_token&&t.expires_in}const Jg=["global","local","others"];class N3{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=uC(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,n=Jg[0]){if(Jg.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Jg.join(", ")}`);try{return await be(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(pe(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await be(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Ci})}catch(r){if(pe(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=vm(e,["options"]),i=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(i.new_email=r?.newEmail,delete i.newEmail),await be(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:D3,redirectTo:n?.redirectTo})}catch(n){if(pe(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await be(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Ci})}catch(n){if(pe(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,i,o,u,h,d;try{const m={nextPage:null,lastPage:0,total:0},g=await be(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e?.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(o=(i=e?.perPage)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:""},xform:kS});if(g.error)throw g.error;const _=await g.json(),w=(u=g.headers.get("x-total-count"))!==null&&u!==void 0?u:0,E=(d=(h=g.headers.get("link"))===null||h===void 0?void 0:h.split(","))!==null&&d!==void 0?d:[];return E.length>0&&(E.forEach(R=>{const O=parseInt(R.split(";")[0].split("=")[1].substring(0,1)),I=JSON.parse(R.split(";")[1].split("=")[1]);m[`${I}Page`]=O}),m.total=parseInt(w)),{data:Object.assign(Object.assign({},_),m),error:null}}catch(m){if(pe(m))return{data:{users:[]},error:m};throw m}}async getUserById(e){sl(e);try{return await be(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Ci})}catch(n){if(pe(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){sl(e);try{return await be(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:Ci})}catch(r){if(pe(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){sl(e);try{return await be(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:Ci})}catch(r){if(pe(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){sl(e.userId);try{const{data:n,error:r}=await be(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:n,error:r}}catch(n){if(pe(n))return{data:null,error:n};throw n}}async _deleteFactor(e){sl(e.userId),sl(e.id);try{return{data:await be(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(pe(n))return{data:null,error:n};throw n}}async _listOAuthClients(e){var n,r,i,o,u,h,d;try{const m={nextPage:null,lastPage:0,total:0},g=await be(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e?.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(o=(i=e?.perPage)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:""},xform:kS});if(g.error)throw g.error;const _=await g.json(),w=(u=g.headers.get("x-total-count"))!==null&&u!==void 0?u:0,E=(d=(h=g.headers.get("link"))===null||h===void 0?void 0:h.split(","))!==null&&d!==void 0?d:[];return E.length>0&&(E.forEach(R=>{const O=parseInt(R.split(";")[0].split("=")[1].substring(0,1)),I=JSON.parse(R.split(";")[1].split("=")[1]);m[`${I}Page`]=O}),m.total=parseInt(w)),{data:Object.assign(Object.assign({},_),m),error:null}}catch(m){if(pe(m))return{data:{clients:[]},error:m};throw m}}async _createOAuthClient(e){try{return await be(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(pe(n))return{data:null,error:n};throw n}}async _getOAuthClient(e){try{return await be(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(pe(n))return{data:null,error:n};throw n}}async _updateOAuthClient(e,n){try{return await be(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:n,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(pe(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(e){try{return await be(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(pe(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(e){try{return await be(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(pe(n))return{data:null,error:n};throw n}}}function DS(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}const il={debug:!!(globalThis&&lC()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class cC extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class V3 extends cC{}async function M3(t,e,n){il.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),il.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){il.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,i.name);try{return await n()}finally{il.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,i.name)}}else{if(e===0)throw il.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new V3(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(il.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function L3(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function hC(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function j3(t){return parseInt(t,16)}function U3(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,r=>r.toString(16).padStart(2,"0")).join("")}function B3(t){var e;const{chainId:n,domain:r,expirationTime:i,issuedAt:o=new Date,nonce:u,notBefore:h,requestId:d,resources:m,scheme:g,uri:_,version:w}=t;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(u&&u.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${u}`);if(!_)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(w!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${w}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const E=hC(t.address),R=g?`${g}://${r}`:r,O=t.statement?`${t.statement}
`:"",I=`${R} wants you to sign in with your Ethereum account:
${E}

${O}`;let P=`URI: ${_}
Version: ${w}
Chain ID: ${n}${u?`
Nonce: ${u}`:""}
Issued At: ${o.toISOString()}`;if(i&&(P+=`
Expiration Time: ${i.toISOString()}`),h&&(P+=`
Not Before: ${h.toISOString()}`),d&&(P+=`
Request ID: ${d}`),m){let V=`
Resources:`;for(const M of m){if(!M||typeof M!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${M}`);V+=`
- ${M}`}P+=V}return`${I}
${P}`}class Pt extends Error{constructor({message:e,code:n,cause:r,name:i}){var o;super(e,{cause:r}),this.__isWebAuthnError=!0,this.name=(o=i??(r instanceof Error?r.name:void 0))!==null&&o!==void 0?o:"Unknown Error",this.code=n}}class Bf extends Pt{constructor(e,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:e}),this.name="WebAuthnUnknownError",this.originalError=n}}function z3({error:t,options:e}){var n,r,i;const{publicKey:o}=e;if(!o)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Pt({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((n=o.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new Pt({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((r=o.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new Pt({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((i=o.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new Pt({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new Pt({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new Pt({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return o.pubKeyCredParams.filter(h=>h.type==="public-key").length===0?new Pt({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new Pt({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const u=window.location.hostname;if(dC(u)){if(o.rp.id!==u)return new Pt({message:`The RP ID "${o.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new Pt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(o.user.id.byteLength<1||o.user.id.byteLength>64)return new Pt({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new Pt({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Pt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function q3({error:t,options:e}){const{publicKey:n}=e;if(!n)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Pt({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new Pt({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const r=window.location.hostname;if(dC(r)){if(n.rpId!==r)return new Pt({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new Pt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new Pt({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Pt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class $3{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const F3=new $3;function H3(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:n,excludeCredentials:r}=t,i=vm(t,["challenge","user","excludeCredentials"]),o=Sl(e).buffer,u=Object.assign(Object.assign({},n),{id:Sl(n.id).buffer}),h=Object.assign(Object.assign({},i),{challenge:o,user:u});if(r&&r.length>0){h.excludeCredentials=new Array(r.length);for(let d=0;d<r.length;d++){const m=r[d];h.excludeCredentials[d]=Object.assign(Object.assign({},m),{id:Sl(m.id).buffer,type:m.type||"public-key",transports:m.transports})}}return h}function G3(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:n}=t,r=vm(t,["challenge","allowCredentials"]),i=Sl(e).buffer,o=Object.assign(Object.assign({},r),{challenge:i});if(n&&n.length>0){o.allowCredentials=new Array(n.length);for(let u=0;u<n.length;u++){const h=n[u];o.allowCredentials[u]=Object.assign(Object.assign({},h),{id:Sl(h.id).buffer,type:h.type||"public-key",transports:h.transports})}}return o}function K3(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t;return{id:t.id,rawId:t.id,response:{attestationObject:Ba(new Uint8Array(t.response.attestationObject)),clientDataJSON:Ba(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function W3(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t,r=t.getClientExtensionResults(),i=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:Ba(new Uint8Array(i.authenticatorData)),clientDataJSON:Ba(new Uint8Array(i.clientDataJSON)),signature:Ba(new Uint8Array(i.signature)),userHandle:i.userHandle?Ba(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function dC(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function PS(){var t,e;return!!(sn()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator?.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator?.credentials)===null||e===void 0?void 0:e.get)=="function")}async function Y3(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Bf("Browser returned unexpected credential type",e)}:{data:null,error:new Bf("Empty credential response",e)}}catch(e){return{data:null,error:z3({error:e,options:t})}}}async function Q3(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Bf("Browser returned unexpected credential type",e)}:{data:null,error:new Bf("Empty credential response",e)}}catch(e){return{data:null,error:q3({error:e,options:t})}}}const X3={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},J3={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function zf(...t){const e=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),n=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),r={};for(const i of t)if(i)for(const o in i){const u=i[o];if(u!==void 0)if(Array.isArray(u))r[o]=u;else if(n(u))r[o]=u;else if(e(u)){const h=r[o];e(h)?r[o]=zf(h,u):r[o]=zf(u)}else r[o]=u}return r}function Z3(t,e){return zf(X3,t,e||{})}function e6(t,e){return zf(J3,t,e||{})}class t6{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:n,friendlyName:r,signal:i},o){try{const{data:u,error:h}=await this.client.mfa.challenge({factorId:e,webauthn:n});if(!u)return{data:null,error:h};const d=i??F3.createNewAbortSignal();if(u.webauthn.type==="create"){const{user:m}=u.webauthn.credential_options.publicKey;m.name||(m.name=`${m.id}:${r}`),m.displayName||(m.displayName=m.name)}switch(u.webauthn.type){case"create":{const m=Z3(u.webauthn.credential_options.publicKey,o?.create),{data:g,error:_}=await Y3({publicKey:m,signal:d});return g?{data:{factorId:e,challengeId:u.id,webauthn:{type:u.webauthn.type,credential_response:g}},error:null}:{data:null,error:_}}case"request":{const m=e6(u.webauthn.credential_options.publicKey,o?.request),{data:g,error:_}=await Q3(Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:m,signal:d}));return g?{data:{factorId:e,challengeId:u.id,webauthn:{type:u.webauthn.type,credential_response:g}},error:null}:{data:null,error:_}}}}catch(u){return pe(u)?{data:null,error:u}:{data:null,error:new La("Unexpected error in challenge",u)}}}async _verify({challengeId:e,factorId:n,webauthn:r}){return this.client.mfa.verify({factorId:n,challengeId:e,webauthn:r})}async _authenticate({factorId:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},o){if(!n)return{data:null,error:new zc("rpId is required for WebAuthn authentication")};try{if(!PS())return{data:null,error:new La("Browser does not support WebAuthn",null)};const{data:u,error:h}=await this.challenge({factorId:e,webauthn:{rpId:n,rpOrigins:r},signal:i},{request:o});if(!u)return{data:null,error:h};const{webauthn:d}=u;return this._verify({factorId:e,challengeId:u.challengeId,webauthn:{type:d.type,rpId:n,rpOrigins:r,credential_response:d.credential_response}})}catch(u){return pe(u)?{data:null,error:u}:{data:null,error:new La("Unexpected error in authenticate",u)}}}async _register({friendlyName:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},o){if(!n)return{data:null,error:new zc("rpId is required for WebAuthn registration")};try{if(!PS())return{data:null,error:new La("Browser does not support WebAuthn",null)};const{data:u,error:h}=await this._enroll({friendlyName:e});if(!u)return await this.client.mfa.listFactors().then(g=>{var _;return(_=g.data)===null||_===void 0?void 0:_.all.find(w=>w.factor_type==="webauthn"&&w.friendly_name===e&&w.status!=="unverified")}).then(g=>g?this.client.mfa.unenroll({factorId:g?.id}):void 0),{data:null,error:h};const{data:d,error:m}=await this._challenge({factorId:u.id,friendlyName:u.friendly_name,webauthn:{rpId:n,rpOrigins:r},signal:i},{create:o});return d?this._verify({factorId:u.id,challengeId:d.challengeId,webauthn:{rpId:n,rpOrigins:r,type:d.webauthn.type,credential_response:d.webauthn.credential_response}}):{data:null,error:m}}catch(u){return pe(u)?{data:null,error:u}:{data:null,error:new La("Unexpected error in register",u)}}}}L3();const n6={url:XU,storageKey:JU,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:ZU,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function NS(t,e,n){return await n()}const al={};class qc{get jwks(){var e,n;return(n=(e=al[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){al[this.storageKey]=Object.assign(Object.assign({},al[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=al[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){al[this.storageKey]=Object.assign(Object.assign({},al[this.storageKey]),{cachedAt:e})}constructor(e){var n,r,i;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const o=Object.assign(Object.assign({},n6),e);if(this.storageKey=o.storageKey,this.instanceID=(n=qc.nextInstanceID[this.storageKey])!==null&&n!==void 0?n:0,qc.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!o.debug,typeof o.debug=="function"&&(this.logger=o.debug),this.instanceID>0&&sn()){const u=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(u),this.logDebugMessages&&console.trace(u)}if(this.persistSession=o.persistSession,this.autoRefreshToken=o.autoRefreshToken,this.admin=new N3({url:o.url,headers:o.headers,fetch:o.fetch}),this.url=o.url,this.headers=o.headers,this.fetch=uC(o.fetch),this.lock=o.lock||NS,this.detectSessionInUrl=o.detectSessionInUrl,this.flowType=o.flowType,this.hasCustomAuthorizationHeader=o.hasCustomAuthorizationHeader,this.throwOnError=o.throwOnError,this.lockAcquireTimeout=o.lockAcquireTimeout,o.lock?this.lock=o.lock:this.persistSession&&sn()&&(!((r=globalThis?.navigator)===null||r===void 0)&&r.locks)?this.lock=M3:this.lock=NS,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new t6(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(o.storage?this.storage=o.storage:lC()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=DS(this.memoryStorage)),o.userStorage&&(this.userStorage=o.userStorage)):(this.memoryStorage={},this.storage=DS(this.memoryStorage)),sn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(u){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",u)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async u=>{this._debug("received broadcast notification from other tab or client",u),await this._notifyAllSubscribers(u.data.event,u.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${iC}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let n={},r="none";if(sn()&&(n=m3(window.location.href),this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce")),sn()&&this.detectSessionInUrl&&r!=="none"){const{data:i,error:o}=await this._getSessionFromURL(n,r);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),i3(o)){const d=(e=o.details)===null||e===void 0?void 0:e.code;if(d==="identity_already_exists"||d==="identity_not_found"||d==="single_identity_not_deletable")return{error:o}}return{error:o}}const{session:u,redirectType:h}=i;return this._debug("#_initialize()","detected session in URL",u,"redirect type",h),await this._saveSession(u),setTimeout(async()=>{h==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",u):await this._notifyAllSubscribers("SIGNED_IN",u)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return pe(n)?this._returnResult({error:n}):this._returnResult({error:new La("Unexpected error during initialization",n)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,i;try{const o=await be(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e?.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(i=e?.options)===null||i===void 0?void 0:i.captchaToken}},xform:fr}),{data:u,error:h}=o;if(h||!u)return this._returnResult({data:{user:null,session:null},error:h});const d=u.session,m=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",d)),this._returnResult({data:{user:m,session:d},error:null})}catch(o){if(pe(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signUp(e){var n,r,i;try{let o;if("email"in e){const{email:g,password:_,options:w}=e;let E=null,R=null;this.flowType==="pkce"&&([E,R]=await rl(this.storage,this.storageKey)),o=await be(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:w?.emailRedirectTo,body:{email:g,password:_,data:(n=w?.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:w?.captchaToken},code_challenge:E,code_challenge_method:R},xform:fr})}else if("phone"in e){const{phone:g,password:_,options:w}=e;o=await be(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:g,password:_,data:(r=w?.data)!==null&&r!==void 0?r:{},channel:(i=w?.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:w?.captchaToken}},xform:fr})}else throw new Yd("You must provide either an email or phone number and a password");const{data:u,error:h}=o;if(h||!u)return await rn(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:h});const d=u.session,m=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",d)),this._returnResult({data:{user:m,session:d},error:null})}catch(o){if(await rn(this.storage,`${this.storageKey}-code-verifier`),pe(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signInWithPassword(e){try{let n;if("email"in e){const{email:o,password:u,options:h}=e;n=await be(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:u,gotrue_meta_security:{captcha_token:h?.captchaToken}},xform:OS})}else if("phone"in e){const{phone:o,password:u,options:h}=e;n=await be(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:u,gotrue_meta_security:{captcha_token:h?.captchaToken}},xform:OS})}else throw new Yd("You must provide either an email or phone number and a password");const{data:r,error:i}=n;if(i)return this._returnResult({data:{user:null,session:null},error:i});if(!r||!r.session||!r.user){const o=new nl;return this._returnResult({data:{user:null,session:null},error:o})}return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),this._returnResult({data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:i})}catch(n){if(pe(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOAuth(e){var n,r,i,o;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(o=e.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;switch(n){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(e){var n,r,i,o,u,h,d,m,g,_,w;let E,R;if("message"in e)E=e.message,R=e.signature;else{const{chain:O,wallet:I,statement:P,options:V}=e;let M;if(sn())if(typeof I=="object")M=I;else{const k=window;if("ethereum"in k&&typeof k.ethereum=="object"&&"request"in k.ethereum&&typeof k.ethereum.request=="function")M=k.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof I!="object"||!V?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");M=I}const J=new URL((n=V?.url)!==null&&n!==void 0?n:window.location.href),X=await M.request({method:"eth_requestAccounts"}).then(k=>k).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!X||X.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const oe=hC(X[0]);let L=(r=V?.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!L){const k=await M.request({method:"eth_chainId"});L=j3(k)}const C={domain:J.host,address:oe,statement:P,uri:J.href,version:"1",chainId:L,nonce:(i=V?.signInWithEthereum)===null||i===void 0?void 0:i.nonce,issuedAt:(u=(o=V?.signInWithEthereum)===null||o===void 0?void 0:o.issuedAt)!==null&&u!==void 0?u:new Date,expirationTime:(h=V?.signInWithEthereum)===null||h===void 0?void 0:h.expirationTime,notBefore:(d=V?.signInWithEthereum)===null||d===void 0?void 0:d.notBefore,requestId:(m=V?.signInWithEthereum)===null||m===void 0?void 0:m.requestId,resources:(g=V?.signInWithEthereum)===null||g===void 0?void 0:g.resources};E=B3(C),R=await M.request({method:"personal_sign",params:[U3(E),oe]})}try{const{data:O,error:I}=await be(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:E,signature:R},!((_=e.options)===null||_===void 0)&&_.captchaToken?{gotrue_meta_security:{captcha_token:(w=e.options)===null||w===void 0?void 0:w.captchaToken}}:null),xform:fr});if(I)throw I;if(!O||!O.session||!O.user){const P=new nl;return this._returnResult({data:{user:null,session:null},error:P})}return O.session&&(await this._saveSession(O.session),await this._notifyAllSubscribers("SIGNED_IN",O.session)),this._returnResult({data:Object.assign({},O),error:I})}catch(O){if(pe(O))return this._returnResult({data:{user:null,session:null},error:O});throw O}}async signInWithSolana(e){var n,r,i,o,u,h,d,m,g,_,w,E;let R,O;if("message"in e)R=e.message,O=e.signature;else{const{chain:I,wallet:P,statement:V,options:M}=e;let J;if(sn())if(typeof P=="object")J=P;else{const oe=window;if("solana"in oe&&typeof oe.solana=="object"&&("signIn"in oe.solana&&typeof oe.solana.signIn=="function"||"signMessage"in oe.solana&&typeof oe.solana.signMessage=="function"))J=oe.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof P!="object"||!M?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");J=P}const X=new URL((n=M?.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in J&&J.signIn){const oe=await J.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},M?.signInWithSolana),{version:"1",domain:X.host,uri:X.href}),V?{statement:V}:null));let L;if(Array.isArray(oe)&&oe[0]&&typeof oe[0]=="object")L=oe[0];else if(oe&&typeof oe=="object"&&"signedMessage"in oe&&"signature"in oe)L=oe;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in L&&"signature"in L&&(typeof L.signedMessage=="string"||L.signedMessage instanceof Uint8Array)&&L.signature instanceof Uint8Array)R=typeof L.signedMessage=="string"?L.signedMessage:new TextDecoder().decode(L.signedMessage),O=L.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in J)||typeof J.signMessage!="function"||!("publicKey"in J)||typeof J!="object"||!J.publicKey||!("toBase58"in J.publicKey)||typeof J.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");R=[`${X.host} wants you to sign in with your Solana account:`,J.publicKey.toBase58(),...V?["",V,""]:[""],"Version: 1",`URI: ${X.href}`,`Issued At: ${(i=(r=M?.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((o=M?.signInWithSolana)===null||o===void 0)&&o.notBefore?[`Not Before: ${M.signInWithSolana.notBefore}`]:[],...!((u=M?.signInWithSolana)===null||u===void 0)&&u.expirationTime?[`Expiration Time: ${M.signInWithSolana.expirationTime}`]:[],...!((h=M?.signInWithSolana)===null||h===void 0)&&h.chainId?[`Chain ID: ${M.signInWithSolana.chainId}`]:[],...!((d=M?.signInWithSolana)===null||d===void 0)&&d.nonce?[`Nonce: ${M.signInWithSolana.nonce}`]:[],...!((m=M?.signInWithSolana)===null||m===void 0)&&m.requestId?[`Request ID: ${M.signInWithSolana.requestId}`]:[],...!((_=(g=M?.signInWithSolana)===null||g===void 0?void 0:g.resources)===null||_===void 0)&&_.length?["Resources",...M.signInWithSolana.resources.map(L=>`- ${L}`)]:[]].join(`
`);const oe=await J.signMessage(new TextEncoder().encode(R),"utf8");if(!oe||!(oe instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");O=oe}}try{const{data:I,error:P}=await be(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:R,signature:Ba(O)},!((w=e.options)===null||w===void 0)&&w.captchaToken?{gotrue_meta_security:{captcha_token:(E=e.options)===null||E===void 0?void 0:E.captchaToken}}:null),xform:fr});if(P)throw P;if(!I||!I.session||!I.user){const V=new nl;return this._returnResult({data:{user:null,session:null},error:V})}return I.session&&(await this._saveSession(I.session),await this._notifyAllSubscribers("SIGNED_IN",I.session)),this._returnResult({data:Object.assign({},I),error:P})}catch(I){if(pe(I))return this._returnResult({data:{user:null,session:null},error:I});throw I}}async _exchangeCodeForSession(e){const n=await Oa(this.storage,`${this.storageKey}-code-verifier`),[r,i]=(n??"").split("/");try{if(!r&&this.flowType==="pkce")throw new a3;const{data:o,error:u}=await be(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:fr});if(await rn(this.storage,`${this.storageKey}-code-verifier`),u)throw u;if(!o||!o.session||!o.user){const h=new nl;return this._returnResult({data:{user:null,session:null,redirectType:null},error:h})}return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),this._returnResult({data:Object.assign(Object.assign({},o),{redirectType:i??null}),error:u})}catch(o){if(await rn(this.storage,`${this.storageKey}-code-verifier`),pe(o))return this._returnResult({data:{user:null,session:null,redirectType:null},error:o});throw o}}async signInWithIdToken(e){try{const{options:n,provider:r,token:i,access_token:o,nonce:u}=e,h=await be(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:o,nonce:u,gotrue_meta_security:{captcha_token:n?.captchaToken}},xform:fr}),{data:d,error:m}=h;if(m)return this._returnResult({data:{user:null,session:null},error:m});if(!d||!d.session||!d.user){const g=new nl;return this._returnResult({data:{user:null,session:null},error:g})}return d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",d.session)),this._returnResult({data:d,error:m})}catch(n){if(pe(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOtp(e){var n,r,i,o,u;try{if("email"in e){const{email:h,options:d}=e;let m=null,g=null;this.flowType==="pkce"&&([m,g]=await rl(this.storage,this.storageKey));const{error:_}=await be(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:h,data:(n=d?.data)!==null&&n!==void 0?n:{},create_user:(r=d?.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:d?.captchaToken},code_challenge:m,code_challenge_method:g},redirectTo:d?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:_})}if("phone"in e){const{phone:h,options:d}=e,{data:m,error:g}=await be(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:h,data:(i=d?.data)!==null&&i!==void 0?i:{},create_user:(o=d?.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:d?.captchaToken},channel:(u=d?.channel)!==null&&u!==void 0?u:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:m?.message_id},error:g})}throw new Yd("You must provide either an email or phone number.")}catch(h){if(await rn(this.storage,`${this.storageKey}-code-verifier`),pe(h))return this._returnResult({data:{user:null,session:null},error:h});throw h}}async verifyOtp(e){var n,r;try{let i,o;"options"in e&&(i=(n=e.options)===null||n===void 0?void 0:n.redirectTo,o=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:u,error:h}=await be(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:o}}),redirectTo:i,xform:fr});if(h)throw h;if(!u)throw new Error("An error occurred on token verification.");const d=u.session,m=u.user;return d?.access_token&&(await this._saveSession(d),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",d)),this._returnResult({data:{user:m,session:d},error:null})}catch(i){if(pe(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithSSO(e){var n,r,i,o,u;try{let h=null,d=null;this.flowType==="pkce"&&([h,d]=await rl(this.storage,this.storageKey));const m=await be(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=e?.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:h,code_challenge_method:d}),headers:this.headers,xform:k3});return!((o=m.data)===null||o===void 0)&&o.url&&sn()&&!(!((u=e.options)===null||u===void 0)&&u.skipBrowserRedirect)&&window.location.assign(m.data.url),this._returnResult(m)}catch(h){if(await rn(this.storage,`${this.storageKey}-code-verifier`),pe(h))return this._returnResult({data:null,error:h});throw h}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new jn;const{error:i}=await be(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return this._returnResult({data:{user:null,session:null},error:i})})}catch(e){if(pe(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:i,options:o}=e,{error:u}=await be(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:o?.captchaToken}},redirectTo:o?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:u})}else if("phone"in e){const{phone:r,type:i,options:o}=e,{data:u,error:h}=await be(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:o?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:u?.message_id},error:h})}throw new Yd("You must provide either an email or phone number and a type")}catch(n){if(pe(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await Oa(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<Wg:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const u=await Oa(this.userStorage,this.storageKey+"-user");u?.user?e.user=u.user:e.user=Xg()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const u={value:this.suppressGetSessionWarning};e.user=x3(e.user,u),u.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:i,error:o}=await this._callRefreshToken(e.refresh_token);return o?this._returnResult({data:{session:null},error:o}):this._returnResult({data:{session:i},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const n=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return n.data.user&&(this.suppressGetSessionWarning=!0),n}async _getUser(e){try{return e?await be(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Ci}):await this._useSession(async n=>{var r,i,o;const{data:u,error:h}=n;if(h)throw h;return!(!((r=u.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new jn}:await be(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(i=u.session)===null||i===void 0?void 0:i.access_token)!==null&&o!==void 0?o:void 0,xform:Ci})})}catch(n){if(pe(n))return s3(n)&&(await this._removeSession(),await rn(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:n});throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:i,error:o}=r;if(o)throw o;if(!i.session)throw new jn;const u=i.session;let h=null,d=null;this.flowType==="pkce"&&e.email!=null&&([h,d]=await rl(this.storage,this.storageKey));const{data:m,error:g}=await be(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n?.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:h,code_challenge_method:d}),jwt:u.access_token,xform:Ci});if(g)throw g;return u.user=m.user,await this._saveSession(u),await this._notifyAllSubscribers("USER_UPDATED",u),this._returnResult({data:{user:u.user},error:null})})}catch(r){if(await rn(this.storage,`${this.storageKey}-code-verifier`),pe(r))return this._returnResult({data:{user:null},error:r});throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new jn;const n=Date.now()/1e3;let r=n,i=!0,o=null;const{payload:u}=Qg(e.access_token);if(u.exp&&(r=u.exp,i=r<=n),i){const{data:h,error:d}=await this._callRefreshToken(e.refresh_token);if(d)return this._returnResult({data:{user:null,session:null},error:d});if(!h)return{data:{user:null,session:null},error:null};o=h}else{const{data:h,error:d}=await this._getUser(e.access_token);if(d)throw d;o={access_token:e.access_token,refresh_token:e.refresh_token,user:h.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return this._returnResult({data:{user:o.user,session:o},error:null})}catch(n){if(pe(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:u,error:h}=n;if(h)throw h;e=(r=u.session)!==null&&r!==void 0?r:void 0}if(!e?.refresh_token)throw new jn;const{data:i,error:o}=await this._callRefreshToken(e.refresh_token);return o?this._returnResult({data:{user:null,session:null},error:o}):i?this._returnResult({data:{user:i.user,session:i},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(n){if(pe(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async _getSessionFromURL(e,n){try{if(!sn())throw new Qd("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Qd(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new ES("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Qd("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new ES("No code detected.");const{data:V,error:M}=await this._exchangeCodeForSession(e.code);if(M)throw M;const J=new URL(window.location.href);return J.searchParams.delete("code"),window.history.replaceState(window.history.state,"",J.toString()),{data:{session:V.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:i,access_token:o,refresh_token:u,expires_in:h,expires_at:d,token_type:m}=e;if(!o||!h||!u||!m)throw new Qd("No session defined in URL");const g=Math.round(Date.now()/1e3),_=parseInt(h);let w=g+_;d&&(w=parseInt(d));const E=w-g;E*1e3<=dl&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${E}s, should have been closer to ${_}s`);const R=w-_;g-R>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",R,w,g):g-R<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",R,w,g);const{data:O,error:I}=await this._getUser(o);if(I)throw I;const P={provider_token:r,provider_refresh_token:i,access_token:o,expires_in:_,expires_at:w,refresh_token:u,token_type:m,user:O.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:P,redirectType:e.type},error:null})}catch(r){if(pe(r))return this._returnResult({data:{session:null,redirectType:null},error:r});throw r}}_isImplicitGrantCallback(e){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),e):!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await Oa(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:i,error:o}=n;if(o)return this._returnResult({error:o});const u=(r=i.session)===null||r===void 0?void 0:r.access_token;if(u){const{error:h}=await this.admin.signOut(u,e);if(h&&!(r3(h)&&(h.status===404||h.status===401||h.status===403)))return this._returnResult({error:h})}return e!=="others"&&(await this._removeSession(),await rn(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const n=f3(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,i;try{const{data:{session:o},error:u}=n;if(u)throw u;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",e,"session",o)}catch(o){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",o),console.error(o)}})}async resetPasswordForEmail(e,n={}){let r=null,i=null;this.flowType==="pkce"&&([r,i]=await rl(this.storage,this.storageKey,!0));try{return await be(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(o){if(await rn(this.storage,`${this.storageKey}-code-verifier`),pe(o))return this._returnResult({data:null,error:o});throw o}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return this._returnResult({data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(n){if(pe(n))return this._returnResult({data:null,error:n});throw n}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var n;try{const{data:r,error:i}=await this._useSession(async o=>{var u,h,d,m,g;const{data:_,error:w}=o;if(w)throw w;const E=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(u=e.options)===null||u===void 0?void 0:u.redirectTo,scopes:(h=e.options)===null||h===void 0?void 0:h.scopes,queryParams:(d=e.options)===null||d===void 0?void 0:d.queryParams,skipBrowserRedirect:!0});return await be(this.fetch,"GET",E,{headers:this.headers,jwt:(g=(m=_.session)===null||m===void 0?void 0:m.access_token)!==null&&g!==void 0?g:void 0})});if(i)throw i;return sn()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r?.url),this._returnResult({data:{provider:e.provider,url:r?.url},error:null})}catch(r){if(pe(r))return this._returnResult({data:{provider:e.provider,url:null},error:r});throw r}}async linkIdentityIdToken(e){return await this._useSession(async n=>{var r;try{const{error:i,data:{session:o}}=n;if(i)throw i;const{options:u,provider:h,token:d,access_token:m,nonce:g}=e,_=await be(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=o?.access_token)!==null&&r!==void 0?r:void 0,body:{provider:h,id_token:d,access_token:m,nonce:g,link_identity:!0,gotrue_meta_security:{captcha_token:u?.captchaToken}},xform:fr}),{data:w,error:E}=_;return E?this._returnResult({data:{user:null,session:null},error:E}):!w||!w.session||!w.user?this._returnResult({data:{user:null,session:null},error:new nl}):(w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("USER_UPDATED",w.session)),this._returnResult({data:w,error:E}))}catch(i){if(await rn(this.storage,`${this.storageKey}-code-verifier`),pe(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}})}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,i;const{data:o,error:u}=n;if(u)throw u;return await be(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(r=o.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0})})}catch(n){if(pe(n))return this._returnResult({data:null,error:n});throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await y3(async i=>(i>0&&await g3(200*Math.pow(2,i-1)),this._debug(n,"refreshing attempt",i),await be(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:fr})),(i,o)=>{const u=200*Math.pow(2,i);return o&&Yg(o)&&Date.now()+u-r<dl})}catch(r){if(this._debug(n,"error",r),pe(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),sn()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const i=await Oa(this.storage,this.storageKey);if(i&&this.userStorage){let u=await Oa(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!u&&(u={user:i.user},await fl(this.userStorage,this.storageKey+"-user",u)),i.user=(e=u?.user)!==null&&e!==void 0?e:Xg()}else if(i&&!i.user&&!i.user){const u=await Oa(this.storage,this.storageKey+"-user");u&&u?.user?(i.user=u.user,await rn(this.storage,this.storageKey+"-user"),await fl(this.storage,this.storageKey,i)):i.user=Xg()}if(this._debug(r,"session from storage",i),!this._isValidSession(i)){this._debug(r,"session is not valid"),i!==null&&await this._removeSession();return}const o=((n=i.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<Wg;if(this._debug(r,`session has${o?"":" not"} expired with margin of ${Wg}s`),o){if(this.autoRefreshToken&&i.refresh_token){const{error:u}=await this._callRefreshToken(i.refresh_token);u&&(console.error(u),Yg(u)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",u),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:u,error:h}=await this._getUser(i.access_token);!h&&u?.user?(i.user=u.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(u){console.error("Error getting user data:",u),this._debug(r,"error getting user data, skipping SIGNED_IN notification",u)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(r,"error",i),console.error(i);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new jn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new wm;const{data:o,error:u}=await this._refreshAccessToken(e);if(u)throw u;if(!o.session)throw new jn;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const h={data:o.session,error:null};return this.refreshingDeferred.resolve(h),h}catch(o){if(this._debug(i,"error",o),pe(o)){const u={data:null,error:o};return Yg(o)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(u),u}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(o),o}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,n,r=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const o=[],u=Array.from(this.stateChangeEmitters.values()).map(async h=>{try{await h.callback(e,n)}catch(d){o.push(d)}});if(await Promise.all(u),o.length>0){for(let h=0;h<o.length;h+=1)console.error(o[h]);throw o[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await rn(this.storage,`${this.storageKey}-code-verifier`);const n=Object.assign({},e),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await fl(this.userStorage,this.storageKey+"-user",{user:n.user});const i=Object.assign({},n);delete i.user;const o=CS(i);await fl(this.storage,this.storageKey,o)}else{const i=CS(n);await fl(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await rn(this.storage,this.storageKey),await rn(this.storage,this.storageKey+"-code-verifier"),await rn(this.storage,this.storageKey+"-user"),this.userStorage&&await rn(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&sn()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),dl);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e);const n=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=n,n&&typeof n=="object"&&typeof n.unref=="function"?n.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(n)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e);const n=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,n&&clearTimeout(n)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((r.expires_at*1e3-e)/dl);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${dl}ms, refresh threshold is ${Jy} ticks`),i<=Jy&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof cC)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!sn()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const i=[`provider=${encodeURIComponent(n)}`];if(r?.redirectTo&&i.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r?.scopes&&i.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[o,u]=await rl(this.storage,this.storageKey),h=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(u)}`});i.push(h.toString())}if(r?.queryParams){const o=new URLSearchParams(r.queryParams);i.push(o.toString())}return r?.skipBrowserRedirect&&i.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:i,error:o}=n;return o?this._returnResult({data:null,error:o}):await be(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=i?.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(pe(n))return this._returnResult({data:null,error:n});throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,i;const{data:o,error:u}=n;if(u)return this._returnResult({data:null,error:u});const h=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:d,error:m}=await be(this.fetch,"POST",`${this.url}/factors`,{body:h,headers:this.headers,jwt:(r=o?.session)===null||r===void 0?void 0:r.access_token});return m?this._returnResult({data:null,error:m}):(e.factorType==="totp"&&d.type==="totp"&&(!((i=d?.totp)===null||i===void 0)&&i.qr_code)&&(d.totp.qr_code=`data:image/svg+xml;utf-8,${d.totp.qr_code}`),this._returnResult({data:d,error:null}))})}catch(n){if(pe(n))return this._returnResult({data:null,error:n});throw n}}async _verify(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:o}=n;if(o)return this._returnResult({data:null,error:o});const u=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?K3(e.webauthn.credential_response):W3(e.webauthn.credential_response)})}:{code:e.code}),{data:h,error:d}=await be(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:u,headers:this.headers,jwt:(r=i?.session)===null||r===void 0?void 0:r.access_token});return d?this._returnResult({data:null,error:d}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+h.expires_in},h)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",h),this._returnResult({data:h,error:d}))})}catch(n){if(pe(n))return this._returnResult({data:null,error:n});throw n}})}async _challenge(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:o}=n;if(o)return this._returnResult({data:null,error:o});const u=await be(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(r=i?.session)===null||r===void 0?void 0:r.access_token});if(u.error)return u;const{data:h}=u;if(h.type!=="webauthn")return{data:h,error:null};switch(h.webauthn.type){case"create":return{data:Object.assign(Object.assign({},h),{webauthn:Object.assign(Object.assign({},h.webauthn),{credential_options:Object.assign(Object.assign({},h.webauthn.credential_options),{publicKey:H3(h.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},h),{webauthn:Object.assign(Object.assign({},h.webauthn),{credential_options:Object.assign(Object.assign({},h.webauthn.credential_options),{publicKey:G3(h.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(pe(n))return this._returnResult({data:null,error:n});throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?this._returnResult({data:null,error:r}):await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){var e;const{data:{user:n},error:r}=await this.getUser();if(r)return{data:null,error:r};const i={all:[],phone:[],totp:[],webauthn:[]};for(const o of(e=n?.factors)!==null&&e!==void 0?e:[])i.all.push(o),o.status==="verified"&&i[o.factor_type].push(o);return{data:i,error:null}}async _getAuthenticatorAssuranceLevel(){var e,n;const{data:{session:r},error:i}=await this.getSession();if(i)return this._returnResult({data:null,error:i});if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=Qg(r.access_token);let u=null;o.aal&&(u=o.aal);let h=u;((n=(e=r.user.factors)===null||e===void 0?void 0:e.filter(g=>g.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(h="aal2");const m=o.amr||[];return{data:{currentLevel:u,nextLevel:h,currentAuthenticationMethods:m},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async n=>{const{data:{session:r},error:i}=n;return i?this._returnResult({data:null,error:i}):r?await be(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:r.access_token,xform:o=>({data:o,error:null})}):this._returnResult({data:null,error:new jn})})}catch(n){if(pe(n))return this._returnResult({data:null,error:n});throw n}}async _approveAuthorization(e,n){try{return await this._useSession(async r=>{const{data:{session:i},error:o}=r;if(o)return this._returnResult({data:null,error:o});if(!i)return this._returnResult({data:null,error:new jn});const u=await be(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"approve"},xform:h=>({data:h,error:null})});return u.data&&u.data.redirect_url&&sn()&&!n?.skipBrowserRedirect&&window.location.assign(u.data.redirect_url),u})}catch(r){if(pe(r))return this._returnResult({data:null,error:r});throw r}}async _denyAuthorization(e,n){try{return await this._useSession(async r=>{const{data:{session:i},error:o}=r;if(o)return this._returnResult({data:null,error:o});if(!i)return this._returnResult({data:null,error:new jn});const u=await be(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"deny"},xform:h=>({data:h,error:null})});return u.data&&u.data.redirect_url&&sn()&&!n?.skipBrowserRedirect&&window.location.assign(u.data.redirect_url),u})}catch(r){if(pe(r))return this._returnResult({data:null,error:r});throw r}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;return r?this._returnResult({data:null,error:r}):n?await be(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new jn})})}catch(e){if(pe(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async n=>{const{data:{session:r},error:i}=n;return i?this._returnResult({data:null,error:i}):r?(await be(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new jn})})}catch(n){if(pe(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(e,n={keys:[]}){let r=n.keys.find(h=>h.kid===e);if(r)return r;const i=Date.now();if(r=this.jwks.keys.find(h=>h.kid===e),r&&this.jwks_cached_at+t3>i)return r;const{data:o,error:u}=await be(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(u)throw u;return!o.keys||o.keys.length===0||(this.jwks=o,this.jwks_cached_at=i,r=o.keys.find(h=>h.kid===e),!r)?null:r}async getClaims(e,n={}){try{let r=e;if(!r){const{data:E,error:R}=await this.getSession();if(R||!E.session)return this._returnResult({data:null,error:R});r=E.session.access_token}const{header:i,payload:o,signature:u,raw:{header:h,payload:d}}=Qg(r);n?.allowExpired||S3(o.exp);const m=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,n?.keys?{keys:n.keys}:n?.jwks);if(!m){const{error:E}=await this.getUser(r);if(E)throw E;return{data:{claims:o,header:i,signature:u},error:null}}const g=A3(i.alg),_=await crypto.subtle.importKey("jwk",m,g,!0,["verify"]);if(!await crypto.subtle.verify(g,_,u,h3(`${h}.${d}`)))throw new tv("Invalid JWT signature");return{data:{claims:o,header:i,signature:u},error:null}}catch(r){if(pe(r))return this._returnResult({data:null,error:r});throw r}}}qc.nextInstanceID={};const r6=qc,s6="2.90.0";let dc="";typeof Deno<"u"?dc="deno":typeof document<"u"?dc="web":typeof navigator<"u"&&navigator.product==="ReactNative"?dc="react-native":dc="node";const i6={"X-Client-Info":`supabase-js-${dc}/${s6}`},a6={headers:i6},o6={schema:"public"},l6={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},u6={};function $c(t){"@babel/helpers - typeof";return $c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$c(t)}function c6(t,e){if($c(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if($c(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function h6(t){var e=c6(t,"string");return $c(e)=="symbol"?e:e+""}function d6(t,e,n){return(e=h6(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function VS(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function _t(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?VS(Object(n),!0).forEach(function(r){d6(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):VS(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}const f6=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),m6=()=>Headers,p6=(t,e,n)=>{const r=f6(n),i=m6();return async(o,u)=>{var h;const d=(h=await e())!==null&&h!==void 0?h:t;let m=new i(u?.headers);return m.has("apikey")||m.set("apikey",t),m.has("Authorization")||m.set("Authorization",`Bearer ${d}`),r(o,_t(_t({},u),{},{headers:m}))}};function g6(t){return t.endsWith("/")?t:t+"/"}function y6(t,e){var n,r;const{db:i,auth:o,realtime:u,global:h}=t,{db:d,auth:m,realtime:g,global:_}=e,w={db:_t(_t({},d),i),auth:_t(_t({},m),o),realtime:_t(_t({},g),u),storage:{},global:_t(_t(_t({},_),h),{},{headers:_t(_t({},(n=_?.headers)!==null&&n!==void 0?n:{}),(r=h?.headers)!==null&&r!==void 0?r:{})}),accessToken:async()=>""};return t.accessToken?w.accessToken=t.accessToken:delete w.accessToken,w}function v6(t){const e=t?.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(g6(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var _6=class extends r6{constructor(t){super(t)}},w6=class{constructor(t,e,n){var r,i;this.supabaseUrl=t,this.supabaseKey=e;const o=v6(t);if(!e)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",o),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",o),this.storageUrl=new URL("storage/v1",o),this.functionsUrl=new URL("functions/v1",o);const u=`sb-${o.hostname.split(".")[0]}-auth-token`,h={db:o6,realtime:u6,auth:_t(_t({},l6),{},{storageKey:u}),global:a6},d=y6(n??{},h);if(this.storageKey=(r=d.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(i=d.global.headers)!==null&&i!==void 0?i:{},d.accessToken)this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(g,_)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(_)} is not possible`)}});else{var m;this.auth=this._initSupabaseAuthClient((m=d.auth)!==null&&m!==void 0?m:{},this.headers,d.global.fetch)}this.fetch=p6(e,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(_t({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.accessToken&&this.accessToken().then(g=>this.realtime.setAuth(g)).catch(g=>console.warn("Failed to set initial Realtime auth token:",g)),this.rest=new Zj(new URL("rest/v1",o).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),this.storage=new QU(this.storageUrl.href,this.headers,this.fetch,n?.storage),d.accessToken||this._listenForAuthEvents()}get functions(){return new Wj(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,e={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,e,n)}channel(t,e={config:{}}){return this.realtime.channel(t,e)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t=this,e,n;if(t.accessToken)return await t.accessToken();const{data:r}=await t.auth.getSession();return(e=(n=r.session)===null||n===void 0?void 0:n.access_token)!==null&&e!==void 0?e:t.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:e,detectSessionInUrl:n,storage:r,userStorage:i,storageKey:o,flowType:u,lock:h,debug:d,throwOnError:m},g,_){const w={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new _6({url:this.authUrl.href,headers:_t(_t({},w),g),storageKey:o,autoRefreshToken:t,persistSession:e,detectSessionInUrl:n,storage:r,userStorage:i,flowType:u,lock:h,debug:d,throwOnError:m,fetch:_,hasCustomAuthorizationHeader:Object.keys(this.headers).some(E=>E.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new gU(this.realtimeUrl.href,_t(_t({},t),{},{params:_t(_t({},{apikey:this.supabaseKey}),t?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,e)=>{this._handleTokenChanged(t,"CLIENT",e?.access_token)})}_handleTokenChanged(t,e,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),e=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const b6=(t,e,n)=>new w6(t,e,n);function T6(){if(typeof window<"u")return!1;const t=globalThis.process;if(!t)return!1;const e=t.version;if(e==null)return!1;const n=e.match(/^v(\d+)\./);return n?parseInt(n[1],10)<=18:!1}T6()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const E6="https://jqtwgpureszvfgwdllgo.supabase.co",S6="sb_publishable_KAVFnuTneYsqZrce7n10Ag_1q0fSV1U",MS=b6(E6,S6),A6=()=>{const[t,e]=D.useState([]),[n,r]=D.useState(!0),[i,o]=D.useState(null);return D.useEffect(()=>{(async()=>{try{r(!0);const{data:h,error:d}=await MS.storage.from("file").list("",{limit:100,offset:0,sortBy:{column:"name",order:"asc"}});if(d)throw d;if(!h){e([]),r(!1);return}const m=h.filter(g=>g.id!==null).map(g=>{const{data:_}=MS.storage.from("file").getPublicUrl(g.name,{download:!0});return{name:g.name,link:_.publicUrl,id:g.id}});e(m)}catch(h){console.error("Error fetching files from Supabase Storage:",h),o(h)}finally{r(!1)}})()},[]),{files:t,loading:n,error:i}},R6=()=>{const{subjects:t,loading:e}=Fj(),{files:n,loading:r,error:i}=A6(),[o,u]=D.useState([]);D.useEffect(()=>{if(!e&&!r){const d=[...t.map(m=>({...m,type:"subject"})),...n.map(m=>({...m,type:"supabaseFile"}))];u(d)}},[t,n,e,r]);const h=()=>{$j.success("  ")};return e||r?x.jsx("div",{className:"container mx-auto p-4 flex-grow",children:x.jsx("div",{className:"spinner"})}):i?x.jsx("div",{className:"container mx-auto p-4 flex-grow text-red-600",children:x.jsxs("p",{children:["Error loading files from Supabase: ",i.message]})}):x.jsx("div",{className:"container mx-auto p-4 flex-grow",children:x.jsx("div",{id:"subjects-container",className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:o.length===0?x.jsx("p",{className:"col-span-full text-center text-gray-600",children:"   ."}):o.map((d,m)=>x.jsxs("a",{href:d.link||"#",download:d.name,rel:"noopener noreferrer",className:"bg-white rounded-xl shadow-md p-6 flex flex-col items-center justify-center space-y-4 cursor-pointer no-underline",onClick:h,children:[x.jsx("h3",{className:"text-xl md:text-2xl font-bold text-gray-800 text-center",children:d.name}),x.jsxs("div",{className:"bg-blue-500 text-white font-bold py-2 px-4 rounded-lg flex items-center space-x-2 space-x-reverse",children:[x.jsx("i",{className:"fas fa-download"}),x.jsx("span",{children:""})]})]},m))})})},x6=({isOpen:t,onClose:e,product:n,onSubmit:r})=>{const[i,o]=D.useState("whatsapp"),[u,h]=D.useState("");if(!t)return null;const d=m=>{if(m.preventDefault(),!u){alert("   ");return}r({contactMethod:i,phoneNumber:u})};return x.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50",children:x.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-xl w-full max-w-md mx-4",children:[x.jsxs("h2",{className:"text-2xl font-bold mb-4 text-right",children:[" ",n.name]}),x.jsxs("p",{className:"mb-6 text-right",children:[" : ",n.price," "]}),x.jsxs("form",{onSubmit:d,children:[x.jsxs("div",{className:"mb-4",children:[x.jsx("label",{className:"block text-right mb-2 font-bold",children:" "}),x.jsxs("div",{className:"flex justify-end gap-4",children:[x.jsxs("label",{className:"flex items-center gap-2",children:[x.jsx("span",{children:"Telegram"}),x.jsx("input",{type:"radio",name:"contactMethod",value:"telegram",checked:i==="telegram",onChange:m=>o(m.target.value),className:"form-radio"})]}),x.jsxs("label",{className:"flex items-center gap-2",children:[x.jsx("span",{children:"WhatsApp"}),x.jsx("input",{type:"radio",name:"contactMethod",value:"whatsapp",checked:i==="whatsapp",onChange:m=>o(m.target.value),className:"form-radio"})]})]})]}),x.jsxs("div",{className:"mb-6",children:[x.jsx("label",{htmlFor:"phoneNumber",className:"block text-right mb-2 font-bold",children:" "}),x.jsx("input",{type:"tel",id:"phoneNumber",value:u,onChange:m=>h(m.target.value),className:"w-full p-2 border border-gray-300 rounded-lg text-right",placeholder:": 966512345678+",required:!0})]}),x.jsxs("div",{className:"flex justify-end gap-4",children:[x.jsx("button",{type:"button",onClick:e,className:"bg-gray-500 text-white font-bold py-2 px-4 rounded-lg",children:""}),x.jsx("button",{type:"submit",className:"bg-blue-600 text-white font-bold py-2 px-4 rounded-lg",children:" "})]})]})]})})},C6=()=>{const{user:t}=oo(),{points:e,loading:n}=jx(),[r,i]=D.useState([]),[o,u]=D.useState(!0),[h,d]=D.useState(!1),[m,g]=D.useState(null);D.useEffect(()=>{const O=Ja(zn,"products"),I=Hl(O,P=>{const V=P.docs.map(M=>({id:M.id,...M.data()}));i(V),u(!1)},P=>{console.error("Error fetching products:",P),u(!1)});return()=>I()},[]);const _=O=>{e<O.price?alert("   "):(g(O),d(!0))},w=()=>{d(!1),g(null)},E=async O=>{if(!(!t||!m))try{await GM(Ja(zn,"orders"),{userId:t.uid,userEmail:t.email,productId:m.id,productName:m.name,productPrice:m.price,contactMethod:O.contactMethod,phoneNumber:O.phoneNumber,status:"pending",createdAt:KM()}),alert("   !")}catch(I){console.error("Error creating order:",I),alert("    .")}finally{w()}};return n||o?x.jsx("div",{className:"container mx-auto p-4 flex-grow flex justify-center items-center",children:x.jsx("div",{className:"spinner"})}):x.jsxs("div",{className:"container mx-auto p-4 flex-grow",children:[x.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mt-10",children:r.map(O=>x.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 cursor-pointer transform hover:scale-105 transition-transform",onClick:()=>_(O),children:[x.jsx("h3",{className:"text-xl font-bold mb-2",children:O.name}),x.jsxs("p",{className:"text-gray-700 text-lg",children:[O.price," "]})]},O.id))}),m&&x.jsx(x6,{isOpen:h,onClose:w,product:m,onSubmit:E})]})},I6=()=>{const{user:t}=oo(),e=Ll(),n=()=>{const o=new ks;sL(qy,o).then(u=>{const h=u.user,d=Za(zn,"users",h.uid);jy(d,{name:h.displayName,uid:h.uid},{merge:!0})}).catch(u=>{console.error("Google Sign-In Error:",u.message)})},r=()=>{setTimeout(()=>{j4(qy).catch(o=>{console.error("Sign-Out Error:",o)})},100)},i=()=>{setTimeout(()=>{e("/purchase-orders")},100)};return x.jsxs("div",{className:"flex-grow bg-white",children:[x.jsx("div",{style:{backgroundColor:"rgb(46, 144, 244)",borderBottomLeftRadius:"20px",borderBottomRightRadius:"20px"},className:"pt-16 pb-12 sm:pt-20 sm:pb-14 md:pt-24 md:pb-16",children:x.jsxs("div",{className:"px-4",children:[x.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-800 mb-8 text-right",children:""}),t?x.jsx("div",{className:"flex items-center justify-between",children:x.jsxs("div",{className:"flex items-center",children:[x.jsx("div",{className:"w-16 h-16 sm:w-20 sm:h-20 md:w-24 md:h-24 rounded-full bg-gray-200 flex items-center justify-center ml-4",children:x.jsx("svg",{className:"w-8 h-8 sm:w-10 sm:h-10 md:w-12 md:h-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),x.jsxs("div",{children:[x.jsx("h2",{className:"text-lg sm:text-xl font-bold text-gray-900 text-right",children:t.displayName}),x.jsxs("p",{className:"text-[10px] sm:text-xs text-gray-500 mt-1 break-all text-right",children:[t.uid," :ID"]})]})]})}):x.jsx("div",{className:"text-center",children:x.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-lg inline-block",children:[x.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:" "}),x.jsx("p",{className:"text-gray-600 mb-6",children:"      ."}),x.jsxs("button",{onClick:n,className:"bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-8 rounded-lg shadow-md transition-transform transform hover:scale-105",children:[x.jsx("i",{className:"fab fa-google mr-3"}),"    "]})]})})]})}),t&&x.jsxs("div",{className:"p-4",children:[x.jsxs("button",{onClick:i,className:"w-full font-bold py-4 px-2 rounded-lg flex justify-between items-center border-b border-gray-200 transition-colors duration-75 ease-in-out active:bg-gray-200",children:[x.jsxs("div",{className:"flex items-center",children:[x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6 text-gray-500",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"})}),x.jsx("span",{className:"mr-4",children:" "})]}),x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6 text-gray-400",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5 8.25 12l7.5-7.5"})})]}),x.jsxs("button",{onClick:r,className:"w-full font-bold py-4 px-2 rounded-lg flex justify-between items-center border-b border-gray-200 transition-colors duration-75 ease-in-out active:bg-gray-200",children:[x.jsxs("div",{className:"flex items-center",children:[x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6 text-gray-500",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0 0 13.5 3h-6a2.25 2.25 0 0 0-2.25 2.25v13.5A2.25 2.25 0 0 0 7.5 21h6a2.25 2.25 0 0 0 2.25-2.25V15M12 9l-3 3m0 0 3 3m-3-3h12.75"})}),x.jsx("span",{className:"mr-4",children:" "})]}),x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6 text-gray-400",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5 8.25 12l7.5-7.5"})})]})]})]})},O6=()=>{const{examId:t}=sk(),e=Ll(),[n,r]=D.useState(null),[i,o]=D.useState(!0),[u,h]=D.useState([]),[d,m]=D.useState(0),[g,_]=D.useState(!1);D.useEffect(()=>{(async()=>{const P=Za(zn,"exams",t),V=await y_(P);if(V.exists()){const M={id:V.id,...V.data()};r(M),h(new Array(M.questions.length).fill(null)),m((M.duration||30)*60)}else console.error("No such document!");o(!1)})()},[t]);const w=()=>{e(`/results/${t}`,{state:{userAnswers:u,exam:n}})};D.useEffect(()=>{if(d===0&&n&&w(),!d)return;const I=setInterval(()=>{m(d-1)},1e3);return()=>clearInterval(I)},[d]);const E=(I,P)=>{const V=[...u];V[I]=P,h(V)},R=()=>{u.every(P=>P!==null)?w():_(!0)};if(i)return x.jsx("div",{className:"spinner"});if(!n)return x.jsx("div",{children:"Exam not found"});const O=I=>{const P=Math.floor(I/60),V=I%60;return`${P}:${V<10?"0":""}${V}`};return x.jsxs("div",{className:"py-4 flex-grow",children:[g&&x.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50",children:x.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-xl text-center w-11/12 md:w-auto",children:[x.jsx("h3",{className:"text-xl font-bold mb-4",children:""}),x.jsx("p",{className:"mb-6",children:"     .       "}),x.jsxs("div",{className:"flex justify-center space-x-4 space-x-reverse",children:[x.jsx("button",{onClick:w,className:"bg-green-600 text-white font-bold py-2 px-6 rounded-lg",children:"  "}),x.jsx("button",{onClick:()=>_(!1),className:"bg-gray-500 text-white font-bold py-2 px-6 rounded-lg",children:"  "})]})]})}),x.jsx("div",{id:"exam-timer",className:"fixed top-4 left-4 bg-red-500 text-white p-2 rounded-lg shadow-lg",children:O(d)}),x.jsx("h2",{id:"exam-title",className:"text-3xl md:text-4xl font-bold text-gray-800 text-center mb-6",children:n.name}),x.jsx("div",{id:"questions-container",className:"space-y-8",children:n.questions.map((I,P)=>x.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-md relative w-full md:h-[80vh]",children:[x.jsx("div",{className:"question-number-box",children:x.jsx("span",{children:P+1})}),x.jsx("div",{className:"question-points-box",children:x.jsxs("span",{children:[I.points||1," "]})}),x.jsx("p",{className:"text-lg md:text-3xl text-gray-800 mb-4 break-words pt-16",children:I.text}),x.jsx("div",{className:"space-y-3 md:space-y-8",children:I.options.map((V,M)=>{const J=typeof V=="string"?V:V.text,X=`option-${P}-${M}`;return x.jsxs("div",{className:"custom-radio p-2 rounded-lg",children:[x.jsx("input",{type:"radio",id:X,name:`question-${P}`,value:J,onChange:()=>E(P,J),className:"form-radio"}),x.jsx("label",{htmlFor:X,className:"text-gray-700 text-base md:text-2xl",children:J})]},M)})})]},P))}),x.jsx("div",{className:"flex justify-center mt-8",children:x.jsx("button",{onClick:R,className:"bg-green-600 text-white font-bold py-3 px-6 rounded-lg shadow-md transition-transform transform",children:""})})]})},k6=()=>{const t=Ar(),e=Ll(),{user:n}=oo(),{userAnswers:r,exam:i}=t.state||{},{correctAnswersCount:o,earnedPoints:u,totalQuestions:h,percentage:d}=D.useMemo(()=>{if(!i)return{correctAnswersCount:0,earnedPoints:0,totalQuestions:0,percentage:0};let m=0,g=0;const _=i.questions.length;i.questions.forEach((E,R)=>{const O=r[R],I=E.correctAnswer;E.options.findIndex(V=>(typeof V=="string"?V:V.text)===O)===I&&(m++,g+=E.points||1)});const w=_>0?Math.round(m/_*100):0;return{correctAnswersCount:m,earnedPoints:g,totalQuestions:_,percentage:w}},[i,r]);return D.useEffect(()=>{if(n&&i){const m=Za(zn,"exam_results",i.id,"submissions",n.uid),g={email:n.email,userId:n.uid,percentage:d,correctAnswers:o,totalQuestions:h,earnedPoints:u,userAnswers:r,submittedAt:new Date};jy(m,g,{merge:!0}).then(()=>console.log("Exam results saved successfully!")).catch(w=>console.error("Error saving exam results: ",w));const _=async()=>{const w=Za(zn,"users",n.uid);try{const O=((await y_(w)).data()?.points||0)+u;await jy(w,{points:O},{merge:!0}),console.log("User points updated successfully!")}catch(E){console.error("Error updating user points: ",E)}};u>0&&_()}},[n,i,d,o,h,u,r]),i?x.jsxs("div",{className:"py-4 flex-grow",children:[x.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-800 text-center mb-6",children:" "}),x.jsxs("div",{className:"space-y-8",children:[x.jsxs("div",{className:"p-6 bg-blue-100 text-blue-800 rounded-lg shadow-md text-center mb-8",children:[x.jsxs("p",{className:"text-2xl md:text-3xl font-bold",children:["   ",o,"  ",h,"  "]}),x.jsxs("p",{className:"text-xl md:text-2xl mt-2",children:["   ",x.jsx("span",{className:"font-bold text-green-600",children:u})," "]}),x.jsxs("p",{className:"text-4xl md:text-5xl font-bold mt-2",children:[d,"%"]})]}),i.questions.map((m,g)=>{const _=r[g],w=m.correctAnswer,E=m.options.findIndex(I=>(typeof I=="string"?I:I.text)===_),R=E===w,O=m.points||1;return x.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-md relative w-full",children:[x.jsx("div",{className:"question-number-box",children:x.jsx("span",{children:g+1})}),x.jsx("div",{className:"result-points-box",children:x.jsxs("span",{className:R?"text-black":"text-gray-500 line-through",children:[O," "]})}),x.jsx("p",{className:"text-lg md:text-xl text-gray-800 mb-4 break-words pt-16",children:m.text}),x.jsx("div",{className:"space-y-3",children:m.options.map((I,P)=>{const V=typeof I=="string"?I:I.text;let M="flex justify-between items-center p-2 rounded-lg",J="text-gray-700 text-base md:text-lg",X="";return P===w&&(M+=" bg-green-100",J="text-green-800 text-base md:text-lg font-bold",X='<i class="fas fa-check-circle text-green-600 ml-2"></i>'),E===P&&E!==w&&(M+=" bg-red-100",J="text-red-800 text-base md:text-lg font-bold",X='<i class="fas fa-times-circle text-red-600 ml-2"></i>'),x.jsxs("div",{className:M,children:[x.jsxs("div",{className:"custom-radio",children:[x.jsx("input",{type:"radio",id:`result-option-${g}-${P}`,name:`result-question-${g}`,value:V,className:"form-radio",checked:E===P,disabled:!0}),x.jsx("label",{htmlFor:`result-option-${g}-${P}`,className:J,children:V})]}),x.jsx("span",{dangerouslySetInnerHTML:{__html:X}})]},P)})})]},g)})]}),x.jsx("div",{className:"flex justify-center mt-8",children:x.jsx("button",{onClick:()=>e("/"),className:"bg-gray-400 text-white font-bold py-3 px-6 rounded-lg shadow-md transition-transform transform",children:"  "})})]}):x.jsx("div",{children:"No results to display."})},fC=D.createContext({});function D6(t){const e=D.useRef(null);return e.current===null&&(e.current=t()),e.current}const V_=typeof window<"u",P6=V_?D.useLayoutEffect:D.useEffect,M_=D.createContext(null);function L_(t,e){t.indexOf(e)===-1&&t.push(e)}function j_(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const qs=(t,e,n)=>n>e?e:n<t?t:n;let U_=()=>{};const $s={},mC=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function pC(t){return typeof t=="object"&&t!==null}const gC=t=>/^0[^.\s]+$/u.test(t);function B_(t){let e;return()=>(e===void 0&&(e=t()),e)}const ir=t=>t,N6=(t,e)=>n=>e(t(n)),hh=(...t)=>t.reduce(N6),Fc=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r};class z_{constructor(){this.subscriptions=[]}add(e){return L_(this.subscriptions,e),()=>j_(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let o=0;o<i;o++){const u=this.subscriptions[o];u&&u(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Xr=t=>t*1e3,Jr=t=>t/1e3;function yC(t,e){return e?t*(1e3/e):0}const vC=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,V6=1e-7,M6=12;function L6(t,e,n,r,i){let o,u,h=0;do u=e+(n-e)/2,o=vC(u,r,i)-t,o>0?n=u:e=u;while(Math.abs(o)>V6&&++h<M6);return u}function dh(t,e,n,r){if(t===e&&n===r)return ir;const i=o=>L6(o,0,1,t,n);return o=>o===0||o===1?o:vC(i(o),e,r)}const _C=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,wC=t=>e=>1-t(1-e),bC=dh(.33,1.53,.69,.99),q_=wC(bC),TC=_C(q_),EC=t=>(t*=2)<1?.5*q_(t):.5*(2-Math.pow(2,-10*(t-1))),$_=t=>1-Math.sin(Math.acos(t)),SC=wC($_),AC=_C($_),j6=dh(.42,0,1,1),U6=dh(0,0,.58,1),RC=dh(.42,0,.58,1),B6=t=>Array.isArray(t)&&typeof t[0]!="number",xC=t=>Array.isArray(t)&&typeof t[0]=="number",z6={linear:ir,easeIn:j6,easeInOut:RC,easeOut:U6,circIn:$_,circInOut:AC,circOut:SC,backIn:q_,backInOut:TC,backOut:bC,anticipate:EC},q6=t=>typeof t=="string",LS=t=>{if(xC(t)){U_(t.length===4);const[e,n,r,i]=t;return dh(e,n,r,i)}else if(q6(t))return z6[t];return t},Xd=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function $6(t,e){let n=new Set,r=new Set,i=!1,o=!1;const u=new WeakSet;let h={delta:0,timestamp:0,isProcessing:!1};function d(g){u.has(g)&&(m.schedule(g),t()),g(h)}const m={schedule:(g,_=!1,w=!1)=>{const R=w&&i?n:r;return _&&u.add(g),R.has(g)||R.add(g),g},cancel:g=>{r.delete(g),u.delete(g)},process:g=>{if(h=g,i){o=!0;return}i=!0,[n,r]=[r,n],n.forEach(d),n.clear(),i=!1,o&&(o=!1,m.process(g))}};return m}const F6=40;function CC(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},o=()=>n=!0,u=Xd.reduce((M,J)=>(M[J]=$6(o),M),{}),{setup:h,read:d,resolveKeyframes:m,preUpdate:g,update:_,preRender:w,render:E,postRender:R}=u,O=()=>{const M=$s.useManualTiming?i.timestamp:performance.now();n=!1,$s.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(M-i.timestamp,F6),1)),i.timestamp=M,i.isProcessing=!0,h.process(i),d.process(i),m.process(i),g.process(i),_.process(i),w.process(i),E.process(i),R.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(O))},I=()=>{n=!0,r=!0,i.isProcessing||t(O)};return{schedule:Xd.reduce((M,J)=>{const X=u[J];return M[J]=(oe,L=!1,C=!1)=>(n||I(),X.schedule(oe,L,C)),M},{}),cancel:M=>{for(let J=0;J<Xd.length;J++)u[Xd[J]].cancel(M)},state:i,steps:u}}const{schedule:ct,cancel:zi,state:an,steps:Zg}=CC(typeof requestAnimationFrame<"u"?requestAnimationFrame:ir,!0);let mf;function H6(){mf=void 0}const Cn={now:()=>(mf===void 0&&Cn.set(an.isProcessing||$s.useManualTiming?an.timestamp:performance.now()),mf),set:t=>{mf=t,queueMicrotask(H6)}},IC=t=>e=>typeof e=="string"&&e.startsWith(t),F_=IC("--"),G6=IC("var(--"),H_=t=>G6(t)?K6.test(t.split("/*")[0].trim()):!1,K6=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Kl={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Hc={...Kl,transform:t=>qs(0,1,t)},Jd={...Kl,default:1},Tc=t=>Math.round(t*1e5)/1e5,G_=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function W6(t){return t==null}const Y6=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,K_=(t,e)=>n=>!!(typeof n=="string"&&Y6.test(n)&&n.startsWith(t)||e&&!W6(n)&&Object.prototype.hasOwnProperty.call(n,e)),OC=(t,e,n)=>r=>{if(typeof r!="string")return r;const[i,o,u,h]=r.match(G_);return{[t]:parseFloat(i),[e]:parseFloat(o),[n]:parseFloat(u),alpha:h!==void 0?parseFloat(h):1}},Q6=t=>qs(0,255,t),ey={...Kl,transform:t=>Math.round(Q6(t))},za={test:K_("rgb","red"),parse:OC("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+ey.transform(t)+", "+ey.transform(e)+", "+ey.transform(n)+", "+Tc(Hc.transform(r))+")"};function X6(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const nv={test:K_("#"),parse:X6,transform:za.transform},fh=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Ti=fh("deg"),Zr=fh("%"),Ae=fh("px"),J6=fh("vh"),Z6=fh("vw"),jS={...Zr,parse:t=>Zr.parse(t)/100,transform:t=>Zr.transform(t*100)},pl={test:K_("hsl","hue"),parse:OC("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+Zr.transform(Tc(e))+", "+Zr.transform(Tc(n))+", "+Tc(Hc.transform(r))+")"},Nt={test:t=>za.test(t)||nv.test(t)||pl.test(t),parse:t=>za.test(t)?za.parse(t):pl.test(t)?pl.parse(t):nv.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?za.transform(t):pl.transform(t),getAnimatableNone:t=>{const e=Nt.parse(t);return e.alpha=0,Nt.transform(e)}},e5=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function t5(t){return isNaN(t)&&typeof t=="string"&&(t.match(G_)?.length||0)+(t.match(e5)?.length||0)>0}const kC="number",DC="color",n5="var",r5="var(",US="${}",s5=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Gc(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let o=0;const h=e.replace(s5,d=>(Nt.test(d)?(r.color.push(o),i.push(DC),n.push(Nt.parse(d))):d.startsWith(r5)?(r.var.push(o),i.push(n5),n.push(d)):(r.number.push(o),i.push(kC),n.push(parseFloat(d))),++o,US)).split(US);return{values:n,split:h,indexes:r,types:i}}function PC(t){return Gc(t).values}function NC(t){const{split:e,types:n}=Gc(t),r=e.length;return i=>{let o="";for(let u=0;u<r;u++)if(o+=e[u],i[u]!==void 0){const h=n[u];h===kC?o+=Tc(i[u]):h===DC?o+=Nt.transform(i[u]):o+=i[u]}return o}}const i5=t=>typeof t=="number"?0:Nt.test(t)?Nt.getAnimatableNone(t):t;function a5(t){const e=PC(t);return NC(t)(e.map(i5))}const qi={test:t5,parse:PC,createTransformer:NC,getAnimatableNone:a5};function ty(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function o5({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,o=0,u=0;if(!e)i=o=u=n;else{const h=n<.5?n*(1+e):n+e-n*e,d=2*n-h;i=ty(d,h,t+1/3),o=ty(d,h,t),u=ty(d,h,t-1/3)}return{red:Math.round(i*255),green:Math.round(o*255),blue:Math.round(u*255),alpha:r}}function qf(t,e){return n=>n>0?e:t}const ft=(t,e,n)=>t+(e-t)*n,ny=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},l5=[nv,za,pl],u5=t=>l5.find(e=>e.test(t));function BS(t){const e=u5(t);if(!e)return!1;let n=e.parse(t);return e===pl&&(n=o5(n)),n}const zS=(t,e)=>{const n=BS(t),r=BS(e);if(!n||!r)return qf(t,e);const i={...n};return o=>(i.red=ny(n.red,r.red,o),i.green=ny(n.green,r.green,o),i.blue=ny(n.blue,r.blue,o),i.alpha=ft(n.alpha,r.alpha,o),za.transform(i))},rv=new Set(["none","hidden"]);function c5(t,e){return rv.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function h5(t,e){return n=>ft(t,e,n)}function W_(t){return typeof t=="number"?h5:typeof t=="string"?H_(t)?qf:Nt.test(t)?zS:m5:Array.isArray(t)?VC:typeof t=="object"?Nt.test(t)?zS:d5:qf}function VC(t,e){const n=[...t],r=n.length,i=t.map((o,u)=>W_(o)(o,e[u]));return o=>{for(let u=0;u<r;u++)n[u]=i[u](o);return n}}function d5(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=W_(t[i])(t[i],e[i]));return i=>{for(const o in r)n[o]=r[o](i);return n}}function f5(t,e){const n=[],r={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const o=e.types[i],u=t.indexes[o][r[o]],h=t.values[u]??0;n[i]=h,r[o]++}return n}const m5=(t,e)=>{const n=qi.createTransformer(e),r=Gc(t),i=Gc(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?rv.has(t)&&!i.values.length||rv.has(e)&&!r.values.length?c5(t,e):hh(VC(f5(r,i),i.values),n):qf(t,e)};function MC(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?ft(t,e,n):W_(t)(t,e)}const p5=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>ct.update(e,n),stop:()=>zi(e),now:()=>an.isProcessing?an.timestamp:Cn.now()}},LC=(t,e,n=10)=>{let r="";const i=Math.max(Math.round(e/n),2);for(let o=0;o<i;o++)r+=Math.round(t(o/(i-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},$f=2e4;function Y_(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<$f;)e+=n,r=t.next(e);return e>=$f?1/0:e}function g5(t,e=100,n){const r=n({...t,keyframes:[0,e]}),i=Math.min(Y_(r),$f);return{type:"keyframes",ease:o=>r.next(i*o).value/e,duration:Jr(i)}}const y5=5;function jC(t,e,n){const r=Math.max(e-y5,0);return yC(n-t(r),e-r)}const wt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},ry=.001;function v5({duration:t=wt.duration,bounce:e=wt.bounce,velocity:n=wt.velocity,mass:r=wt.mass}){let i,o,u=1-e;u=qs(wt.minDamping,wt.maxDamping,u),t=qs(wt.minDuration,wt.maxDuration,Jr(t)),u<1?(i=m=>{const g=m*u,_=g*t,w=g-n,E=sv(m,u),R=Math.exp(-_);return ry-w/E*R},o=m=>{const _=m*u*t,w=_*n+n,E=Math.pow(u,2)*Math.pow(m,2)*t,R=Math.exp(-_),O=sv(Math.pow(m,2),u);return(-i(m)+ry>0?-1:1)*((w-E)*R)/O}):(i=m=>{const g=Math.exp(-m*t),_=(m-n)*t+1;return-ry+g*_},o=m=>{const g=Math.exp(-m*t),_=(n-m)*(t*t);return g*_});const h=5/t,d=w5(i,o,h);if(t=Xr(t),isNaN(d))return{stiffness:wt.stiffness,damping:wt.damping,duration:t};{const m=Math.pow(d,2)*r;return{stiffness:m,damping:u*2*Math.sqrt(r*m),duration:t}}}const _5=12;function w5(t,e,n){let r=n;for(let i=1;i<_5;i++)r=r-t(r)/e(r);return r}function sv(t,e){return t*Math.sqrt(1-e*e)}const b5=["duration","bounce"],T5=["stiffness","damping","mass"];function qS(t,e){return e.some(n=>t[n]!==void 0)}function E5(t){let e={velocity:wt.velocity,stiffness:wt.stiffness,damping:wt.damping,mass:wt.mass,isResolvedFromDuration:!1,...t};if(!qS(t,T5)&&qS(t,b5))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,o=2*qs(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:wt.mass,stiffness:i,damping:o}}else{const n=v5(t);e={...e,...n,mass:wt.mass},e.isResolvedFromDuration=!0}return e}function Ff(t=wt.visualDuration,e=wt.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:i}=n;const o=n.keyframes[0],u=n.keyframes[n.keyframes.length-1],h={done:!1,value:o},{stiffness:d,damping:m,mass:g,duration:_,velocity:w,isResolvedFromDuration:E}=E5({...n,velocity:-Jr(n.velocity||0)}),R=w||0,O=m/(2*Math.sqrt(d*g)),I=u-o,P=Jr(Math.sqrt(d/g)),V=Math.abs(I)<5;r||(r=V?wt.restSpeed.granular:wt.restSpeed.default),i||(i=V?wt.restDelta.granular:wt.restDelta.default);let M;if(O<1){const X=sv(P,O);M=oe=>{const L=Math.exp(-O*P*oe);return u-L*((R+O*P*I)/X*Math.sin(X*oe)+I*Math.cos(X*oe))}}else if(O===1)M=X=>u-Math.exp(-P*X)*(I+(R+P*I)*X);else{const X=P*Math.sqrt(O*O-1);M=oe=>{const L=Math.exp(-O*P*oe),C=Math.min(X*oe,300);return u-L*((R+O*P*I)*Math.sinh(C)+X*I*Math.cosh(C))/X}}const J={calculatedDuration:E&&_||null,next:X=>{const oe=M(X);if(E)h.done=X>=_;else{let L=X===0?R:0;O<1&&(L=X===0?Xr(R):jC(M,X,oe));const C=Math.abs(L)<=r,k=Math.abs(u-oe)<=i;h.done=C&&k}return h.value=h.done?u:oe,h},toString:()=>{const X=Math.min(Y_(J),$f),oe=LC(L=>J.next(X*L).value,X,30);return X+"ms "+oe},toTransition:()=>{}};return J}Ff.applyToOptions=t=>{const e=g5(t,100,Ff);return t.ease=e.ease,t.duration=Xr(e.duration),t.type="keyframes",t};function iv({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:o=500,modifyTarget:u,min:h,max:d,restDelta:m=.5,restSpeed:g}){const _=t[0],w={done:!1,value:_},E=C=>h!==void 0&&C<h||d!==void 0&&C>d,R=C=>h===void 0?d:d===void 0||Math.abs(h-C)<Math.abs(d-C)?h:d;let O=n*e;const I=_+O,P=u===void 0?I:u(I);P!==I&&(O=P-_);const V=C=>-O*Math.exp(-C/r),M=C=>P+V(C),J=C=>{const k=V(C),B=M(C);w.done=Math.abs(k)<=m,w.value=w.done?P:B};let X,oe;const L=C=>{E(w.value)&&(X=C,oe=Ff({keyframes:[w.value,R(w.value)],velocity:jC(M,C,w.value),damping:i,stiffness:o,restDelta:m,restSpeed:g}))};return L(0),{calculatedDuration:null,next:C=>{let k=!1;return!oe&&X===void 0&&(k=!0,J(C),L(C)),X!==void 0&&C>=X?oe.next(C-X):(!k&&J(C),w)}}}function S5(t,e,n){const r=[],i=n||$s.mix||MC,o=t.length-1;for(let u=0;u<o;u++){let h=i(t[u],t[u+1]);if(e){const d=Array.isArray(e)?e[u]||ir:e;h=hh(d,h)}r.push(h)}return r}function A5(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const o=t.length;if(U_(o===e.length),o===1)return()=>e[0];if(o===2&&e[0]===e[1])return()=>e[1];const u=t[0]===t[1];t[0]>t[o-1]&&(t=[...t].reverse(),e=[...e].reverse());const h=S5(e,r,i),d=h.length,m=g=>{if(u&&g<t[0])return e[0];let _=0;if(d>1)for(;_<t.length-2&&!(g<t[_+1]);_++);const w=Fc(t[_],t[_+1],g);return h[_](w)};return n?g=>m(qs(t[0],t[o-1],g)):m}function R5(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=Fc(0,e,r);t.push(ft(n,1,i))}}function x5(t){const e=[0];return R5(e,t.length-1),e}function C5(t,e){return t.map(n=>n*e)}function I5(t,e){return t.map(()=>e||RC).splice(0,t.length-1)}function Ec({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=B6(r)?r.map(LS):LS(r),o={done:!1,value:e[0]},u=C5(n&&n.length===e.length?n:x5(e),t),h=A5(u,e,{ease:Array.isArray(i)?i:I5(e,i)});return{calculatedDuration:t,next:d=>(o.value=h(d),o.done=d>=t,o)}}const O5=t=>t!==null;function Q_(t,{repeat:e,repeatType:n="loop"},r,i=1){const o=t.filter(O5),h=i<0||e&&n!=="loop"&&e%2===1?0:o.length-1;return!h||r===void 0?o[h]:r}const k5={decay:iv,inertia:iv,tween:Ec,keyframes:Ec,spring:Ff};function UC(t){typeof t.type=="string"&&(t.type=k5[t.type])}class X_{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const D5=t=>t/100;class J_ extends X_{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:n}=this.options;n&&n.updatedAt!==Cn.now()&&this.tick(Cn.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;UC(e);const{type:n=Ec,repeat:r=0,repeatDelay:i=0,repeatType:o,velocity:u=0}=e;let{keyframes:h}=e;const d=n||Ec;d!==Ec&&typeof h[0]!="number"&&(this.mixKeyframes=hh(D5,MC(h[0],h[1])),h=[0,100]);const m=d({...e,keyframes:h});o==="mirror"&&(this.mirroredGenerator=d({...e,keyframes:[...h].reverse(),velocity:-u})),m.calculatedDuration===null&&(m.calculatedDuration=Y_(m));const{calculatedDuration:g}=m;this.calculatedDuration=g,this.resolvedDuration=g+i,this.totalDuration=this.resolvedDuration*(r+1)-i,this.generator=m}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:r,totalDuration:i,mixKeyframes:o,mirroredGenerator:u,resolvedDuration:h,calculatedDuration:d}=this;if(this.startTime===null)return r.next(0);const{delay:m=0,keyframes:g,repeat:_,repeatType:w,repeatDelay:E,type:R,onUpdate:O,finalKeyframe:I}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-i/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const P=this.currentTime-m*(this.playbackSpeed>=0?1:-1),V=this.playbackSpeed>=0?P<0:P>i;this.currentTime=Math.max(P,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let M=this.currentTime,J=r;if(_){const C=Math.min(this.currentTime,i)/h;let k=Math.floor(C),B=C%1;!B&&C>=1&&(B=1),B===1&&k--,k=Math.min(k,_+1),!!(k%2)&&(w==="reverse"?(B=1-B,E&&(B-=E/h)):w==="mirror"&&(J=u)),M=qs(0,1,B)*h}const X=V?{done:!1,value:g[0]}:J.next(M);o&&(X.value=o(X.value));let{done:oe}=X;!V&&d!==null&&(oe=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const L=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&oe);return L&&R!==iv&&(X.value=Q_(g,this.options,I,this.speed)),O&&O(X.value),L&&this.finish(),X}then(e,n){return this.finished.then(e,n)}get duration(){return Jr(this.calculatedDuration)}get time(){return Jr(this.currentTime)}set time(e){e=Xr(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Cn.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=Jr(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=p5,startTime:n}=this.options;this.driver||(this.driver=e(i=>this.tick(i))),this.options.onPlay?.();const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Cn.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function P5(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const qa=t=>t*180/Math.PI,av=t=>{const e=qa(Math.atan2(t[1],t[0]));return ov(e)},N5={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:av,rotateZ:av,skewX:t=>qa(Math.atan(t[1])),skewY:t=>qa(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},ov=t=>(t=t%360,t<0&&(t+=360),t),$S=av,FS=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),HS=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),V5={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:FS,scaleY:HS,scale:t=>(FS(t)+HS(t))/2,rotateX:t=>ov(qa(Math.atan2(t[6],t[5]))),rotateY:t=>ov(qa(Math.atan2(-t[2],t[0]))),rotateZ:$S,rotate:$S,skewX:t=>qa(Math.atan(t[4])),skewY:t=>qa(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function lv(t){return t.includes("scale")?1:0}function uv(t,e){if(!t||t==="none")return lv(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,i;if(n)r=V5,i=n;else{const h=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=N5,i=h}if(!i)return lv(e);const o=r[e],u=i[1].split(",").map(L5);return typeof o=="function"?o(u):u[o]}const M5=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return uv(n,e)};function L5(t){return parseFloat(t.trim())}const Wl=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Yl=new Set(Wl),GS=t=>t===Kl||t===Ae,j5=new Set(["x","y","z"]),U5=Wl.filter(t=>!j5.has(t));function B5(t){const e=[];return U5.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const Ga={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>uv(e,"x"),y:(t,{transform:e})=>uv(e,"y")};Ga.translateX=Ga.x;Ga.translateY=Ga.y;const Ka=new Set;let cv=!1,hv=!1,dv=!1;function BC(){if(hv){const t=Array.from(Ka).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=B5(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([o,u])=>{r.getValue(o)?.set(u)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}hv=!1,cv=!1,Ka.forEach(t=>t.complete(dv)),Ka.clear()}function zC(){Ka.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(hv=!0)})}function z5(){dv=!0,zC(),BC(),dv=!1}class Z_{constructor(e,n,r,i,o,u=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=o,this.isAsync=u}scheduleResolve(){this.state="scheduled",this.isAsync?(Ka.add(this),cv||(cv=!0,ct.read(zC),ct.resolveKeyframes(BC))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;if(e[0]===null){const o=i?.get(),u=e[e.length-1];if(o!==void 0)e[0]=o;else if(r&&n){const h=r.readValue(n,u);h!=null&&(e[0]=h)}e[0]===void 0&&(e[0]=u),i&&o===void 0&&i.set(e[0])}P5(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),Ka.delete(this)}cancel(){this.state==="scheduled"&&(Ka.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const q5=t=>t.startsWith("--");function $5(t,e,n){q5(e)?t.style.setProperty(e,n):t.style[e]=n}const F5=B_(()=>window.ScrollTimeline!==void 0),H5={};function G5(t,e){const n=B_(t);return()=>H5[e]??n()}const qC=G5(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),fc=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,KS={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:fc([0,.65,.55,1]),circOut:fc([.55,0,1,.45]),backIn:fc([.31,.01,.66,-.59]),backOut:fc([.33,1.53,.69,.99])};function $C(t,e){if(t)return typeof t=="function"?qC()?LC(t,e):"ease-out":xC(t)?fc(t):Array.isArray(t)?t.map(n=>$C(n,e)||KS.easeOut):KS[t]}function K5(t,e,n,{delay:r=0,duration:i=300,repeat:o=0,repeatType:u="loop",ease:h="easeOut",times:d}={},m=void 0){const g={[e]:n};d&&(g.offset=d);const _=$C(h,i);Array.isArray(_)&&(g.easing=_);const w={delay:r,duration:i,easing:Array.isArray(_)?"linear":_,fill:"both",iterations:o+1,direction:u==="reverse"?"alternate":"normal"};return m&&(w.pseudoElement=m),t.animate(g,w)}function FC(t){return typeof t=="function"&&"applyToOptions"in t}function W5({type:t,...e}){return FC(t)&&qC()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class Y5 extends X_{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:n,name:r,keyframes:i,pseudoElement:o,allowFlatten:u=!1,finalKeyframe:h,onComplete:d}=e;this.isPseudoElement=!!o,this.allowFlatten=u,this.options=e,U_(typeof e.type!="string");const m=W5(e);this.animation=K5(n,r,i,m,o),m.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!o){const g=Q_(i,this.options,h,this.speed);this.updateMotionValue?this.updateMotionValue(g):$5(n,r,g),this.animation.cancel()}d?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return Jr(Number(e))}get time(){return Jr(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=Xr(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&F5()?(this.animation.timeline=e,ir):n(this)}}const HC={anticipate:EC,backInOut:TC,circInOut:AC};function Q5(t){return t in HC}function X5(t){typeof t.ease=="string"&&Q5(t.ease)&&(t.ease=HC[t.ease])}const WS=10;class J5 extends Y5{constructor(e){X5(e),UC(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:r,onComplete:i,element:o,...u}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const h=new J_({...u,autoplay:!1}),d=Xr(this.finishedTime??this.time);n.setWithVelocity(h.sample(d-WS).value,h.sample(d).value,WS),h.stop()}}const YS=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(qi.test(t)||t==="0")&&!t.startsWith("url("));function Z5(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function e9(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const o=t[t.length-1],u=YS(i,e),h=YS(o,e);return!u||!h?!1:Z5(t)||(n==="spring"||FC(n))&&r}function fv(t){t.duration=0,t.type}const t9=new Set(["opacity","clipPath","filter","transform"]),n9=B_(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function r9(t){const{motionValue:e,name:n,repeatDelay:r,repeatType:i,damping:o,type:u}=t;if(!(e?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:d,transformTemplate:m}=e.owner.getProps();return n9()&&n&&t9.has(n)&&(n!=="transform"||!m)&&!d&&!r&&i!=="mirror"&&o!==0&&u!=="inertia"}const s9=40;class i9 extends X_{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:o=0,repeatType:u="loop",keyframes:h,name:d,motionValue:m,element:g,..._}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=Cn.now();const w={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:o,repeatType:u,name:d,motionValue:m,element:g,..._},E=g?.KeyframeResolver||Z_;this.keyframeResolver=new E(h,(R,O,I)=>this.onKeyframesResolved(R,O,w,!I),d,m,g),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,n,r,i){this.keyframeResolver=void 0;const{name:o,type:u,velocity:h,delay:d,isHandoff:m,onUpdate:g}=r;this.resolvedAt=Cn.now(),e9(e,o,u,h)||(($s.instantAnimations||!d)&&g?.(Q_(e,r,n)),e[0]=e[e.length-1],fv(r),r.repeat=0);const w={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>s9?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:e},E=!m&&r9(w)?new J5({...w,element:w.motionValue.owner.current}):new J_(w);E.finished.then(()=>this.notifyFinished()).catch(ir),this.pendingTimeline&&(this.stopTimeline=E.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=E}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),z5()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const a9=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function o9(t){const e=a9.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n??r}`,i]}function GC(t,e,n=1){const[r,i]=o9(t);if(!r)return;const o=window.getComputedStyle(e).getPropertyValue(r);if(o){const u=o.trim();return mC(u)?parseFloat(u):u}return H_(i)?GC(i,e,n+1):i}function e0(t,e){return t?.[e]??t?.default??t}const KC=new Set(["width","height","top","left","right","bottom",...Wl]),l9={test:t=>t==="auto",parse:t=>t},WC=t=>e=>e.test(t),YC=[Kl,Ae,Zr,Ti,Z6,J6,l9],QS=t=>YC.find(WC(t));function u9(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||gC(t):!0}const c9=new Set(["brightness","contrast","saturate","opacity"]);function h9(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(G_)||[];if(!r)return t;const i=n.replace(r,"");let o=c9.has(e)?1:0;return r!==n&&(o*=100),e+"("+o+i+")"}const d9=/\b([a-z-]*)\(.*?\)/gu,mv={...qi,getAnimatableNone:t=>{const e=t.match(d9);return e?e.map(h9).join(" "):t}},XS={...Kl,transform:Math.round},f9={rotate:Ti,rotateX:Ti,rotateY:Ti,rotateZ:Ti,scale:Jd,scaleX:Jd,scaleY:Jd,scaleZ:Jd,skew:Ti,skewX:Ti,skewY:Ti,distance:Ae,translateX:Ae,translateY:Ae,translateZ:Ae,x:Ae,y:Ae,z:Ae,perspective:Ae,transformPerspective:Ae,opacity:Hc,originX:jS,originY:jS,originZ:Ae},t0={borderWidth:Ae,borderTopWidth:Ae,borderRightWidth:Ae,borderBottomWidth:Ae,borderLeftWidth:Ae,borderRadius:Ae,radius:Ae,borderTopLeftRadius:Ae,borderTopRightRadius:Ae,borderBottomRightRadius:Ae,borderBottomLeftRadius:Ae,width:Ae,maxWidth:Ae,height:Ae,maxHeight:Ae,top:Ae,right:Ae,bottom:Ae,left:Ae,padding:Ae,paddingTop:Ae,paddingRight:Ae,paddingBottom:Ae,paddingLeft:Ae,margin:Ae,marginTop:Ae,marginRight:Ae,marginBottom:Ae,marginLeft:Ae,backgroundPositionX:Ae,backgroundPositionY:Ae,...f9,zIndex:XS,fillOpacity:Hc,strokeOpacity:Hc,numOctaves:XS},m9={...t0,color:Nt,backgroundColor:Nt,outlineColor:Nt,fill:Nt,stroke:Nt,borderColor:Nt,borderTopColor:Nt,borderRightColor:Nt,borderBottomColor:Nt,borderLeftColor:Nt,filter:mv,WebkitFilter:mv},QC=t=>m9[t];function XC(t,e){let n=QC(t);return n!==mv&&(n=qi),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const p9=new Set(["auto","none","0"]);function g9(t,e,n){let r=0,i;for(;r<t.length&&!i;){const o=t[r];typeof o=="string"&&!p9.has(o)&&Gc(o).values.length&&(i=t[r]),r++}if(i&&n)for(const o of e)t[o]=XC(n,i)}class y9 extends Z_{constructor(e,n,r,i,o){super(e,n,r,i,o,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let d=0;d<e.length;d++){let m=e[d];if(typeof m=="string"&&(m=m.trim(),H_(m))){const g=GC(m,n.current);g!==void 0&&(e[d]=g),d===e.length-1&&(this.finalKeyframe=m)}}if(this.resolveNoneKeyframes(),!KC.has(r)||e.length!==2)return;const[i,o]=e,u=QS(i),h=QS(o);if(u!==h)if(GS(u)&&GS(h))for(let d=0;d<e.length;d++){const m=e[d];typeof m=="string"&&(e[d]=parseFloat(m))}else Ga[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)(e[i]===null||u9(e[i]))&&r.push(i);r.length&&g9(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Ga[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){const{element:e,name:n,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const i=e.getValue(n);i&&i.jump(this.measuredOrigin,!1);const o=r.length-1,u=r[o];r[o]=Ga[n](e.measureViewportBox(),window.getComputedStyle(e.current)),u!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=u),this.removedTransforms?.length&&this.removedTransforms.forEach(([h,d])=>{e.getValue(h).set(d)}),this.resolveNoneKeyframes()}}function v9(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let r=document;const i=n?.[t]??r.querySelectorAll(t);return i?Array.from(i):[]}return Array.from(t)}const JC=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function _9(t){return pC(t)&&"offsetHeight"in t}const JS=30,w9=t=>!isNaN(parseFloat(t));class b9{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{const i=Cn.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const o of this.dependents)o.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=Cn.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=w9(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new z_);const r=this.events[e].add(n);return e==="change"?()=>{r(),ct.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Cn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>JS)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,JS);return yC(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Nl(t,e){return new b9(t,e)}const{schedule:n0}=CC(queueMicrotask,!1),mr={x:!1,y:!1};function ZC(){return mr.x||mr.y}function T9(t){return t==="x"||t==="y"?mr[t]?null:(mr[t]=!0,()=>{mr[t]=!1}):mr.x||mr.y?null:(mr.x=mr.y=!0,()=>{mr.x=mr.y=!1})}function eI(t,e){const n=v9(t),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[n,i,()=>r.abort()]}function ZS(t){return!(t.pointerType==="touch"||ZC())}function E9(t,e,n={}){const[r,i,o]=eI(t,n),u=h=>{if(!ZS(h))return;const{target:d}=h,m=e(d,h);if(typeof m!="function"||!d)return;const g=_=>{ZS(_)&&(m(_),d.removeEventListener("pointerleave",g))};d.addEventListener("pointerleave",g,i)};return r.forEach(h=>{h.addEventListener("pointerenter",u,i)}),o}const tI=(t,e)=>e?t===e?!0:tI(t,e.parentElement):!1,r0=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,S9=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function A9(t){return S9.has(t.tagName)||t.tabIndex!==-1}const pf=new WeakSet;function eA(t){return e=>{e.key==="Enter"&&t(e)}}function sy(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const R9=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=eA(()=>{if(pf.has(n))return;sy(n,"down");const i=eA(()=>{sy(n,"up")}),o=()=>sy(n,"cancel");n.addEventListener("keyup",i,e),n.addEventListener("blur",o,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function tA(t){return r0(t)&&!ZC()}function x9(t,e,n={}){const[r,i,o]=eI(t,n),u=h=>{const d=h.currentTarget;if(!tA(h))return;pf.add(d);const m=e(d,h),g=(E,R)=>{window.removeEventListener("pointerup",_),window.removeEventListener("pointercancel",w),pf.has(d)&&pf.delete(d),tA(E)&&typeof m=="function"&&m(E,{success:R})},_=E=>{g(E,d===window||d===document||n.useGlobalTarget||tI(d,E.target))},w=E=>{g(E,!1)};window.addEventListener("pointerup",_,i),window.addEventListener("pointercancel",w,i)};return r.forEach(h=>{(n.useGlobalTarget?window:h).addEventListener("pointerdown",u,i),_9(h)&&(h.addEventListener("focus",m=>R9(m,i)),!A9(h)&&!h.hasAttribute("tabindex")&&(h.tabIndex=0))}),o}function nI(t){return pC(t)&&"ownerSVGElement"in t}function C9(t){return nI(t)&&t.tagName==="svg"}const gn=t=>!!(t&&t.getVelocity),I9=[...YC,Nt,qi],O9=t=>I9.find(WC(t)),rI=D.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function k9(t=!0){const e=D.useContext(M_);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=e,o=D.useId();D.useEffect(()=>{if(t)return i(o)},[t]);const u=D.useCallback(()=>t&&r&&r(o),[o,r,t]);return!n&&r?[!1,u]:[!0]}const sI=D.createContext({strict:!1}),nA={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Vl={};for(const t in nA)Vl[t]={isEnabled:e=>nA[t].some(n=>!!e[n])};function D9(t){for(const e in t)Vl[e]={...Vl[e],...t[e]}}const P9=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Hf(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||P9.has(t)}let iI=t=>!Hf(t);function N9(t){typeof t=="function"&&(iI=e=>e.startsWith("on")?!Hf(e):t(e))}try{N9(require("@emotion/is-prop-valid").default)}catch{}function V9(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(iI(i)||n===!0&&Hf(i)||!e&&!Hf(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}const bm=D.createContext({});function Tm(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function Kc(t){return typeof t=="string"||Array.isArray(t)}const s0=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],i0=["initial",...s0];function Em(t){return Tm(t.animate)||i0.some(e=>Kc(t[e]))}function aI(t){return!!(Em(t)||t.variants)}function M9(t,e){if(Em(t)){const{initial:n,animate:r}=t;return{initial:n===!1||Kc(n)?n:void 0,animate:Kc(r)?r:void 0}}return t.inherit!==!1?e:{}}function L9(t){const{initial:e,animate:n}=M9(t,D.useContext(bm));return D.useMemo(()=>({initial:e,animate:n}),[rA(e),rA(n)])}function rA(t){return Array.isArray(t)?t.join(" "):t}const Wc={};function j9(t){for(const e in t)Wc[e]=t[e],F_(e)&&(Wc[e].isCSSVariable=!0)}function oI(t,{layout:e,layoutId:n}){return Yl.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Wc[t]||t==="opacity")}const U9={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},B9=Wl.length;function z9(t,e,n){let r="",i=!0;for(let o=0;o<B9;o++){const u=Wl[o],h=t[u];if(h===void 0)continue;let d=!0;if(typeof h=="number"?d=h===(u.startsWith("scale")?1:0):d=parseFloat(h)===0,!d||n){const m=JC(h,t0[u]);if(!d){i=!1;const g=U9[u]||u;r+=`${g}(${m}) `}n&&(e[u]=m)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}function a0(t,e,n){const{style:r,vars:i,transformOrigin:o}=t;let u=!1,h=!1;for(const d in e){const m=e[d];if(Yl.has(d)){u=!0;continue}else if(F_(d)){i[d]=m;continue}else{const g=JC(m,t0[d]);d.startsWith("origin")?(h=!0,o[d]=g):r[d]=g}}if(e.transform||(u||n?r.transform=z9(e,t.transform,n):r.transform&&(r.transform="none")),h){const{originX:d="50%",originY:m="50%",originZ:g=0}=o;r.transformOrigin=`${d} ${m} ${g}`}}const o0=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function lI(t,e,n){for(const r in e)!gn(e[r])&&!oI(r,n)&&(t[r]=e[r])}function q9({transformTemplate:t},e){return D.useMemo(()=>{const n=o0();return a0(n,e,t),Object.assign({},n.vars,n.style)},[e])}function $9(t,e){const n=t.style||{},r={};return lI(r,n,t),Object.assign(r,q9(t,e)),r}function F9(t,e){const n={},r=$9(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const H9={offset:"stroke-dashoffset",array:"stroke-dasharray"},G9={offset:"strokeDashoffset",array:"strokeDasharray"};function K9(t,e,n=1,r=0,i=!0){t.pathLength=1;const o=i?H9:G9;t[o.offset]=Ae.transform(-r);const u=Ae.transform(e),h=Ae.transform(n);t[o.array]=`${u} ${h}`}function uI(t,{attrX:e,attrY:n,attrScale:r,pathLength:i,pathSpacing:o=1,pathOffset:u=0,...h},d,m,g){if(a0(t,h,m),d){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:_,style:w}=t;_.transform&&(w.transform=_.transform,delete _.transform),(w.transform||_.transformOrigin)&&(w.transformOrigin=_.transformOrigin??"50% 50%",delete _.transformOrigin),w.transform&&(w.transformBox=g?.transformBox??"fill-box",delete _.transformBox),e!==void 0&&(_.x=e),n!==void 0&&(_.y=n),r!==void 0&&(_.scale=r),i!==void 0&&K9(_,i,o,u,!1)}const cI=()=>({...o0(),attrs:{}}),hI=t=>typeof t=="string"&&t.toLowerCase()==="svg";function W9(t,e,n,r){const i=D.useMemo(()=>{const o=cI();return uI(o,e,hI(r),t.transformTemplate,t.style),{...o.attrs,style:{...o.style}}},[e]);if(t.style){const o={};lI(o,t.style,t),i.style={...o,...i.style}}return i}const Y9=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function l0(t){return typeof t!="string"||t.includes("-")?!1:!!(Y9.indexOf(t)>-1||/[A-Z]/u.test(t))}function Q9(t,e,n,{latestValues:r},i,o=!1){const h=(l0(t)?W9:F9)(e,r,i,t),d=V9(e,typeof t=="string",o),m=t!==D.Fragment?{...d,...h,ref:n}:{},{children:g}=e,_=D.useMemo(()=>gn(g)?g.get():g,[g]);return D.createElement(t,{...m,children:_})}function sA(t){const e=[{},{}];return t?.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function u0(t,e,n,r){if(typeof e=="function"){const[i,o]=sA(r);e=e(n!==void 0?n:t.custom,i,o)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,o]=sA(r);e=e(n!==void 0?n:t.custom,i,o)}return e}function gf(t){return gn(t)?t.get():t}function X9({scrapeMotionValuesFromProps:t,createRenderState:e},n,r,i){return{latestValues:J9(n,r,i,t),renderState:e()}}function J9(t,e,n,r){const i={},o=r(t,{});for(const w in o)i[w]=gf(o[w]);let{initial:u,animate:h}=t;const d=Em(t),m=aI(t);e&&m&&!d&&t.inherit!==!1&&(u===void 0&&(u=e.initial),h===void 0&&(h=e.animate));let g=n?n.initial===!1:!1;g=g||u===!1;const _=g?h:u;if(_&&typeof _!="boolean"&&!Tm(_)){const w=Array.isArray(_)?_:[_];for(let E=0;E<w.length;E++){const R=u0(t,w[E]);if(R){const{transitionEnd:O,transition:I,...P}=R;for(const V in P){let M=P[V];if(Array.isArray(M)){const J=g?M.length-1:0;M=M[J]}M!==null&&(i[V]=M)}for(const V in O)i[V]=O[V]}}}return i}const dI=t=>(e,n)=>{const r=D.useContext(bm),i=D.useContext(M_),o=()=>X9(t,e,r,i);return n?o():D6(o)};function c0(t,e,n){const{style:r}=t,i={};for(const o in r)(gn(r[o])||e.style&&gn(e.style[o])||oI(o,t)||n?.getValue(o)?.liveStyle!==void 0)&&(i[o]=r[o]);return i}const Z9=dI({scrapeMotionValuesFromProps:c0,createRenderState:o0});function fI(t,e,n){const r=c0(t,e,n);for(const i in t)if(gn(t[i])||gn(e[i])){const o=Wl.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[o]=t[i]}return r}const eB=dI({scrapeMotionValuesFromProps:fI,createRenderState:cI}),tB=Symbol.for("motionComponentSymbol");function gl(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function nB(t,e,n){return D.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):gl(n)&&(n.current=r))},[e])}const h0=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),rB="framerAppearId",mI="data-"+h0(rB),pI=D.createContext({});function sB(t,e,n,r,i){const{visualElement:o}=D.useContext(bm),u=D.useContext(sI),h=D.useContext(M_),d=D.useContext(rI).reducedMotion,m=D.useRef(null);r=r||u.renderer,!m.current&&r&&(m.current=r(t,{visualState:e,parent:o,props:n,presenceContext:h,blockInitialAnimation:h?h.initial===!1:!1,reducedMotionConfig:d}));const g=m.current,_=D.useContext(pI);g&&!g.projection&&i&&(g.type==="html"||g.type==="svg")&&iB(m.current,n,i,_);const w=D.useRef(!1);D.useInsertionEffect(()=>{g&&w.current&&g.update(n,h)});const E=n[mI],R=D.useRef(!!E&&!window.MotionHandoffIsComplete?.(E)&&window.MotionHasOptimisedAnimation?.(E));return P6(()=>{g&&(w.current=!0,window.MotionIsMounted=!0,g.updateFeatures(),g.scheduleRenderMicrotask(),R.current&&g.animationState&&g.animationState.animateChanges())}),D.useEffect(()=>{g&&(!R.current&&g.animationState&&g.animationState.animateChanges(),R.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(E)}),R.current=!1),g.enteringChildren=void 0)}),g}function iB(t,e,n,r){const{layoutId:i,layout:o,drag:u,dragConstraints:h,layoutScroll:d,layoutRoot:m,layoutCrossfade:g}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:gI(t.parent)),t.projection.setOptions({layoutId:i,layout:o,alwaysMeasureLayout:!!u||h&&gl(h),visualElement:t,animationType:typeof o=="string"?o:"both",initialPromotionConfig:r,crossfade:g,layoutScroll:d,layoutRoot:m})}function gI(t){if(t)return t.options.allowProjection!==!1?t.projection:gI(t.parent)}function iy(t,{forwardMotionProps:e=!1}={},n,r){n&&D9(n);const i=l0(t)?eB:Z9;function o(h,d){let m;const g={...D.useContext(rI),...h,layoutId:aB(h)},{isStatic:_}=g,w=L9(h),E=i(h,_);if(!_&&V_){oB();const R=lB(g);m=R.MeasureLayout,w.visualElement=sB(t,E,g,r,R.ProjectionNode)}return x.jsxs(bm.Provider,{value:w,children:[m&&w.visualElement?x.jsx(m,{visualElement:w.visualElement,...g}):null,Q9(t,h,nB(E,w.visualElement,d),E,_,e)]})}o.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const u=D.forwardRef(o);return u[tB]=t,u}function aB({layoutId:t}){const e=D.useContext(fC).id;return e&&t!==void 0?e+"-"+t:t}function oB(t,e){D.useContext(sI).strict}function lB(t){const{drag:e,layout:n}=Vl;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e?.isEnabled(t)||n?.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function uB(t,e){if(typeof Proxy>"u")return iy;const n=new Map,r=(o,u)=>iy(o,u,t,e),i=(o,u)=>r(o,u);return new Proxy(i,{get:(o,u)=>u==="create"?r:(n.has(u)||n.set(u,iy(u,void 0,t,e)),n.get(u))})}function yI({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function cB({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function hB(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function ay(t){return t===void 0||t===1}function pv({scale:t,scaleX:e,scaleY:n}){return!ay(t)||!ay(e)||!ay(n)}function Na(t){return pv(t)||vI(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function vI(t){return iA(t.x)||iA(t.y)}function iA(t){return t&&t!=="0%"}function Gf(t,e,n){const r=t-n,i=e*r;return n+i}function aA(t,e,n,r,i){return i!==void 0&&(t=Gf(t,i,r)),Gf(t,n,r)+e}function gv(t,e=0,n=1,r,i){t.min=aA(t.min,e,n,r,i),t.max=aA(t.max,e,n,r,i)}function _I(t,{x:e,y:n}){gv(t.x,e.translate,e.scale,e.originPoint),gv(t.y,n.translate,n.scale,n.originPoint)}const oA=.999999999999,lA=1.0000000000001;function dB(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let o,u;for(let h=0;h<i;h++){o=n[h],u=o.projectionDelta;const{visualElement:d}=o.options;d&&d.props.style&&d.props.style.display==="contents"||(r&&o.options.layoutScroll&&o.scroll&&o!==o.root&&vl(t,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),u&&(e.x*=u.x.scale,e.y*=u.y.scale,_I(t,u)),r&&Na(o.latestValues)&&vl(t,o.latestValues))}e.x<lA&&e.x>oA&&(e.x=1),e.y<lA&&e.y>oA&&(e.y=1)}function yl(t,e){t.min=t.min+e,t.max=t.max+e}function uA(t,e,n,r,i=.5){const o=ft(t.min,t.max,i);gv(t,e,n,o,r)}function vl(t,e){uA(t.x,e.x,e.scaleX,e.scale,e.originX),uA(t.y,e.y,e.scaleY,e.scale,e.originY)}function wI(t,e){return yI(hB(t.getBoundingClientRect(),e))}function fB(t,e,n){const r=wI(t,n),{scroll:i}=e;return i&&(yl(r.x,i.offset.x),yl(r.y,i.offset.y)),r}const cA=()=>({translate:0,scale:1,origin:0,originPoint:0}),_l=()=>({x:cA(),y:cA()}),hA=()=>({min:0,max:0}),St=()=>({x:hA(),y:hA()}),yv={current:null},bI={current:!1};function mB(){if(bI.current=!0,!!V_)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>yv.current=t.matches;t.addEventListener("change",e),e()}else yv.current=!1}const pB=new WeakMap;function gB(t,e,n){for(const r in e){const i=e[r],o=n[r];if(gn(i))t.addValue(r,i);else if(gn(o))t.addValue(r,Nl(i,{owner:t}));else if(o!==i)if(t.hasValue(r)){const u=t.getValue(r);u.liveStyle===!0?u.jump(i):u.hasAnimated||u.set(i)}else{const u=t.getStaticValue(r);t.addValue(r,Nl(u!==void 0?u:i,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const dA=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class yB{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:o,visualState:u},h={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Z_,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const w=Cn.now();this.renderScheduledAt<w&&(this.renderScheduledAt=w,ct.render(this.render,!1,!0))};const{latestValues:d,renderState:m}=u;this.latestValues=d,this.baseTarget={...d},this.initialValues=n.initial?{...d}:{},this.renderState=m,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=h,this.blockInitialAnimation=!!o,this.isControllingVariants=Em(n),this.isVariantNode=aI(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:g,..._}=this.scrapeMotionValuesFromProps(n,{},this);for(const w in _){const E=_[w];d[w]!==void 0&&gn(E)&&E.set(d[w])}}mount(e){this.current=e,pB.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),bI.current||mB(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:yv.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),zi(this.notifyUpdate),zi(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=Yl.has(e);r&&this.onBindTransform&&this.onBindTransform();const i=n.on("change",u=>{this.latestValues[e]=u,this.props.onUpdate&&ct.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),o&&o(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Vl){const n=Vl[e];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const o=this.features[e];o.isMounted?o.update():(o.mount(),o.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):St()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<dA.length;r++){const i=dA[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const o="on"+i,u=e[o];u&&(this.propEventSubscriptions[i]=this.on(i,u))}this.prevMotionValues=gB(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=Nl(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(mC(r)||gC(r))?r=parseFloat(r):!O9(r)&&qi.test(n)&&(r=XC(e,n)),this.setBaseTarget(e,gn(r)?r.get():r)),gn(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const o=u0(this.props,n,this.presenceContext?.custom);o&&(r=o[e])}if(n&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!gn(i)?i:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new z_),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}scheduleRenderMicrotask(){n0.render(this.render)}}class TI extends yB{constructor(){super(...arguments),this.KeyframeResolver=y9}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;gn(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function EI(t,{style:e,vars:n},r,i){const o=t.style;let u;for(u in e)o[u]=e[u];i?.applyProjectionStyles(o,r);for(u in n)o.setProperty(u,n[u])}function vB(t){return window.getComputedStyle(t)}class _B extends TI{constructor(){super(...arguments),this.type="html",this.renderInstance=EI}readValueFromInstance(e,n){if(Yl.has(n))return this.projection?.isProjecting?lv(n):M5(e,n);{const r=vB(e),i=(F_(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:n}){return wI(e,n)}build(e,n,r){a0(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return c0(e,n,r)}}const SI=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function wB(t,e,n,r){EI(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(SI.has(i)?i:h0(i),e.attrs[i])}class bB extends TI{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=St}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Yl.has(n)){const r=QC(n);return r&&r.default||0}return n=SI.has(n)?n:h0(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return fI(e,n,r)}build(e,n,r){uI(e,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,n,r,i){wB(e,n,r,i)}mount(e){this.isSVGTag=hI(e.tagName),super.mount(e)}}const TB=(t,e)=>l0(t)?new bB(e):new _B(e,{allowProjection:t!==D.Fragment});function Al(t,e,n){const r=t.getProps();return u0(r,e,n!==void 0?n:r.custom,t)}const vv=t=>Array.isArray(t);function EB(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Nl(n))}function SB(t){return vv(t)?t[t.length-1]||0:t}function AB(t,e){const n=Al(t,e);let{transitionEnd:r={},transition:i={},...o}=n||{};o={...o,...r};for(const u in o){const h=SB(o[u]);EB(t,u,h)}}function RB(t){return!!(gn(t)&&t.add)}function _v(t,e){const n=t.getValue("willChange");if(RB(n))return n.add(e);if(!n&&$s.WillChange){const r=new $s.WillChange("auto");t.addValue("willChange",r),r.add(e)}}function AI(t){return t.props[mI]}const xB=t=>t!==null;function CB(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter(xB),o=e&&n!=="loop"&&e%2===1?0:i.length-1;return i[o]}const IB={type:"spring",stiffness:500,damping:25,restSpeed:10},OB=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),kB={type:"keyframes",duration:.8},DB={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},PB=(t,{keyframes:e})=>e.length>2?kB:Yl.has(t)?t.startsWith("scale")?OB(e[1]):IB:DB;function NB({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:o,repeatType:u,repeatDelay:h,from:d,elapsed:m,...g}){return!!Object.keys(g).length}const d0=(t,e,n,r={},i,o)=>u=>{const h=e0(r,t)||{},d=h.delay||r.delay||0;let{elapsed:m=0}=r;m=m-Xr(d);const g={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...h,delay:-m,onUpdate:w=>{e.set(w),h.onUpdate&&h.onUpdate(w)},onComplete:()=>{u(),h.onComplete&&h.onComplete()},name:t,motionValue:e,element:o?void 0:i};NB(h)||Object.assign(g,PB(t,g)),g.duration&&(g.duration=Xr(g.duration)),g.repeatDelay&&(g.repeatDelay=Xr(g.repeatDelay)),g.from!==void 0&&(g.keyframes[0]=g.from);let _=!1;if((g.type===!1||g.duration===0&&!g.repeatDelay)&&(fv(g),g.delay===0&&(_=!0)),($s.instantAnimations||$s.skipAnimations)&&(_=!0,fv(g),g.delay=0),g.allowFlatten=!h.type&&!h.ease,_&&!o&&e.get()!==void 0){const w=CB(g.keyframes,h);if(w!==void 0){ct.update(()=>{g.onUpdate(w),g.onComplete()});return}}return h.isSync?new J_(g):new i9(g)};function VB({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function RI(t,e,{delay:n=0,transitionOverride:r,type:i}={}){let{transition:o=t.getDefaultTransition(),transitionEnd:u,...h}=e;r&&(o=r);const d=[],m=i&&t.animationState&&t.animationState.getState()[i];for(const g in h){const _=t.getValue(g,t.latestValues[g]??null),w=h[g];if(w===void 0||m&&VB(m,g))continue;const E={delay:n,...e0(o||{},g)},R=_.get();if(R!==void 0&&!_.isAnimating&&!Array.isArray(w)&&w===R&&!E.velocity)continue;let O=!1;if(window.MotionHandoffAnimation){const P=AI(t);if(P){const V=window.MotionHandoffAnimation(P,g,ct);V!==null&&(E.startTime=V,O=!0)}}_v(t,g),_.start(d0(g,_,w,t.shouldReduceMotion&&KC.has(g)?{type:!1}:E,t,O));const I=_.animation;I&&d.push(I)}return u&&Promise.all(d).then(()=>{ct.update(()=>{u&&AB(t,u)})}),d}function xI(t,e,n,r=0,i=1){const o=Array.from(t).sort((m,g)=>m.sortNodePosition(g)).indexOf(e),u=t.size,h=(u-1)*r;return typeof n=="function"?n(o,u):i===1?o*r:h-o*r}function wv(t,e,n={}){const r=Al(t,e,n.type==="exit"?t.presenceContext?.custom:void 0);let{transition:i=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const o=r?()=>Promise.all(RI(t,r,n)):()=>Promise.resolve(),u=t.variantChildren&&t.variantChildren.size?(d=0)=>{const{delayChildren:m=0,staggerChildren:g,staggerDirection:_}=i;return MB(t,e,d,m,g,_,n)}:()=>Promise.resolve(),{when:h}=i;if(h){const[d,m]=h==="beforeChildren"?[o,u]:[u,o];return d().then(()=>m())}else return Promise.all([o(),u(n.delay)])}function MB(t,e,n=0,r=0,i=0,o=1,u){const h=[];for(const d of t.variantChildren)d.notify("AnimationStart",e),h.push(wv(d,e,{...u,delay:n+(typeof r=="function"?0:r)+xI(t.variantChildren,d,r,i,o)}).then(()=>d.notify("AnimationComplete",e)));return Promise.all(h)}function LB(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(o=>wv(t,o,n));r=Promise.all(i)}else if(typeof e=="string")r=wv(t,e,n);else{const i=typeof e=="function"?Al(t,e,n.custom):e;r=Promise.all(RI(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}function CI(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}const jB=i0.length;function II(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?II(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<jB;n++){const r=i0[n],i=t.props[r];(Kc(i)||i===!1)&&(e[r]=i)}return e}const UB=[...s0].reverse(),BB=s0.length;function zB(t){return e=>Promise.all(e.map(({animation:n,options:r})=>LB(t,n,r)))}function qB(t){let e=zB(t),n=fA(),r=!0;const i=d=>(m,g)=>{const _=Al(t,g,d==="exit"?t.presenceContext?.custom:void 0);if(_){const{transition:w,transitionEnd:E,...R}=_;m={...m,...R,...E}}return m};function o(d){e=d(t)}function u(d){const{props:m}=t,g=II(t.parent)||{},_=[],w=new Set;let E={},R=1/0;for(let I=0;I<BB;I++){const P=UB[I],V=n[P],M=m[P]!==void 0?m[P]:g[P],J=Kc(M),X=P===d?V.isActive:null;X===!1&&(R=I);let oe=M===g[P]&&M!==m[P]&&J;if(oe&&r&&t.manuallyAnimateOnMount&&(oe=!1),V.protectedKeys={...E},!V.isActive&&X===null||!M&&!V.prevProp||Tm(M)||typeof M=="boolean")continue;const L=$B(V.prevProp,M);let C=L||P===d&&V.isActive&&!oe&&J||I>R&&J,k=!1;const B=Array.isArray(M)?M:[M];let q=B.reduce(i(P),{});X===!1&&(q={});const{prevResolvedValues:F={}}=V,j={...F,...q},xt=ae=>{C=!0,w.has(ae)&&(k=!0,w.delete(ae)),V.needsAnimating[ae]=!0;const de=t.getValue(ae);de&&(de.liveStyle=!1)};for(const ae in j){const de=q[ae],ke=F[ae];if(E.hasOwnProperty(ae))continue;let U=!1;vv(de)&&vv(ke)?U=!CI(de,ke):U=de!==ke,U?de!=null?xt(ae):w.add(ae):de!==void 0&&w.has(ae)?xt(ae):V.protectedKeys[ae]=!0}V.prevProp=M,V.prevResolvedValues=q,V.isActive&&(E={...E,...q}),r&&t.blockInitialAnimation&&(C=!1);const at=oe&&L;C&&(!at||k)&&_.push(...B.map(ae=>{const de={type:P};if(typeof ae=="string"&&r&&!at&&t.manuallyAnimateOnMount&&t.parent){const{parent:ke}=t,U=Al(ke,ae);if(ke.enteringChildren&&U){const{delayChildren:ie}=U.transition||{};de.delay=xI(ke.enteringChildren,t,ie)}}return{animation:ae,options:de}}))}if(w.size){const I={};if(typeof m.initial!="boolean"){const P=Al(t,Array.isArray(m.initial)?m.initial[0]:m.initial);P&&P.transition&&(I.transition=P.transition)}w.forEach(P=>{const V=t.getBaseTarget(P),M=t.getValue(P);M&&(M.liveStyle=!0),I[P]=V??null}),_.push({animation:I})}let O=!!_.length;return r&&(m.initial===!1||m.initial===m.animate)&&!t.manuallyAnimateOnMount&&(O=!1),r=!1,O?e(_):Promise.resolve()}function h(d,m){if(n[d].isActive===m)return Promise.resolve();t.variantChildren?.forEach(_=>_.animationState?.setActive(d,m)),n[d].isActive=m;const g=u(d);for(const _ in n)n[_].protectedKeys={};return g}return{animateChanges:u,setActive:h,setAnimateFunction:o,getState:()=>n,reset:()=>{n=fA(),r=!0}}}function $B(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!CI(e,t):!1}function ka(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function fA(){return{animate:ka(!0),whileInView:ka(),whileHover:ka(),whileTap:ka(),whileDrag:ka(),whileFocus:ka(),exit:ka()}}class Hi{constructor(e){this.isMounted=!1,this.node=e}update(){}}class FB extends Hi{constructor(e){super(e),e.animationState||(e.animationState=qB(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Tm(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let HB=0;class GB extends Hi{constructor(){super(...arguments),this.id=HB++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const KB={animation:{Feature:FB},exit:{Feature:GB}};function Yc(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function mh(t){return{point:{x:t.pageX,y:t.pageY}}}const WB=t=>e=>r0(e)&&t(e,mh(e));function Sc(t,e,n,r){return Yc(t,e,WB(n),r)}const OI=1e-4,YB=1-OI,QB=1+OI,kI=.01,XB=0-kI,JB=0+kI;function Tn(t){return t.max-t.min}function ZB(t,e,n){return Math.abs(t-e)<=n}function mA(t,e,n,r=.5){t.origin=r,t.originPoint=ft(e.min,e.max,t.origin),t.scale=Tn(n)/Tn(e),t.translate=ft(n.min,n.max,t.origin)-t.originPoint,(t.scale>=YB&&t.scale<=QB||isNaN(t.scale))&&(t.scale=1),(t.translate>=XB&&t.translate<=JB||isNaN(t.translate))&&(t.translate=0)}function Ac(t,e,n,r){mA(t.x,e.x,n.x,r?r.originX:void 0),mA(t.y,e.y,n.y,r?r.originY:void 0)}function pA(t,e,n){t.min=n.min+e.min,t.max=t.min+Tn(e)}function e8(t,e,n){pA(t.x,e.x,n.x),pA(t.y,e.y,n.y)}function gA(t,e,n){t.min=e.min-n.min,t.max=t.min+Tn(e)}function Rc(t,e,n){gA(t.x,e.x,n.x),gA(t.y,e.y,n.y)}function nr(t){return[t("x"),t("y")]}const DI=({current:t})=>t?t.ownerDocument.defaultView:null,yA=(t,e)=>Math.abs(t-e);function t8(t,e){const n=yA(t.x,e.x),r=yA(t.y,e.y);return Math.sqrt(n**2+r**2)}class PI{constructor(e,n,{transformPagePoint:r,contextWindow:i=window,dragSnapToOrigin:o=!1,distanceThreshold:u=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const w=ly(this.lastMoveEventInfo,this.history),E=this.startEvent!==null,R=t8(w.offset,{x:0,y:0})>=this.distanceThreshold;if(!E&&!R)return;const{point:O}=w,{timestamp:I}=an;this.history.push({...O,timestamp:I});const{onStart:P,onMove:V}=this.handlers;E||(P&&P(this.lastMoveEvent,w),this.startEvent=this.lastMoveEvent),V&&V(this.lastMoveEvent,w)},this.handlePointerMove=(w,E)=>{this.lastMoveEvent=w,this.lastMoveEventInfo=oy(E,this.transformPagePoint),ct.update(this.updatePoint,!0)},this.handlePointerUp=(w,E)=>{this.end();const{onEnd:R,onSessionEnd:O,resumeAnimation:I}=this.handlers;if(this.dragSnapToOrigin&&I&&I(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const P=ly(w.type==="pointercancel"?this.lastMoveEventInfo:oy(E,this.transformPagePoint),this.history);this.startEvent&&R&&R(w,P),O&&O(w,P)},!r0(e))return;this.dragSnapToOrigin=o,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=u,this.contextWindow=i||window;const h=mh(e),d=oy(h,this.transformPagePoint),{point:m}=d,{timestamp:g}=an;this.history=[{...m,timestamp:g}];const{onSessionStart:_}=n;_&&_(e,ly(d,this.history)),this.removeListeners=hh(Sc(this.contextWindow,"pointermove",this.handlePointerMove),Sc(this.contextWindow,"pointerup",this.handlePointerUp),Sc(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),zi(this.updatePoint)}}function oy(t,e){return e?{point:e(t.point)}:t}function vA(t,e){return{x:t.x-e.x,y:t.y-e.y}}function ly({point:t},e){return{point:t,delta:vA(t,NI(e)),offset:vA(t,n8(e)),velocity:r8(e,.1)}}function n8(t){return t[0]}function NI(t){return t[t.length-1]}function r8(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=NI(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>Xr(e)));)n--;if(!r)return{x:0,y:0};const o=Jr(i.timestamp-r.timestamp);if(o===0)return{x:0,y:0};const u={x:(i.x-r.x)/o,y:(i.y-r.y)/o};return u.x===1/0&&(u.x=0),u.y===1/0&&(u.y=0),u}function s8(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?ft(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?ft(n,t,r.max):Math.min(t,n)),t}function _A(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function i8(t,{top:e,left:n,bottom:r,right:i}){return{x:_A(t.x,n,i),y:_A(t.y,e,r)}}function wA(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function a8(t,e){return{x:wA(t.x,e.x),y:wA(t.y,e.y)}}function o8(t,e){let n=.5;const r=Tn(t),i=Tn(e);return i>r?n=Fc(e.min,e.max-r,t.min):r>i&&(n=Fc(t.min,t.max-i,e.min)),qs(0,1,n)}function l8(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const bv=.35;function u8(t=bv){return t===!1?t=0:t===!0&&(t=bv),{x:bA(t,"left","right"),y:bA(t,"top","bottom")}}function bA(t,e,n){return{min:TA(t,e),max:TA(t,n)}}function TA(t,e){return typeof t=="number"?t:t[e]||0}const c8=new WeakMap;class h8{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=St(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const o=_=>{const{dragSnapToOrigin:w}=this.getProps();w?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(mh(_).point)},u=(_,w)=>{const{drag:E,dragPropagation:R,onDragStart:O}=this.getProps();if(E&&!R&&(this.openDragLock&&this.openDragLock(),this.openDragLock=T9(E),!this.openDragLock))return;this.latestPointerEvent=_,this.latestPanInfo=w,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),nr(P=>{let V=this.getAxisMotionValue(P).get()||0;if(Zr.test(V)){const{projection:M}=this.visualElement;if(M&&M.layout){const J=M.layout.layoutBox[P];J&&(V=Tn(J)*(parseFloat(V)/100))}}this.originPoint[P]=V}),O&&ct.postRender(()=>O(_,w)),_v(this.visualElement,"transform");const{animationState:I}=this.visualElement;I&&I.setActive("whileDrag",!0)},h=(_,w)=>{this.latestPointerEvent=_,this.latestPanInfo=w;const{dragPropagation:E,dragDirectionLock:R,onDirectionLock:O,onDrag:I}=this.getProps();if(!E&&!this.openDragLock)return;const{offset:P}=w;if(R&&this.currentDirection===null){this.currentDirection=d8(P),this.currentDirection!==null&&O&&O(this.currentDirection);return}this.updateAxis("x",w.point,P),this.updateAxis("y",w.point,P),this.visualElement.render(),I&&I(_,w)},d=(_,w)=>{this.latestPointerEvent=_,this.latestPanInfo=w,this.stop(_,w),this.latestPointerEvent=null,this.latestPanInfo=null},m=()=>nr(_=>this.getAnimationState(_)==="paused"&&this.getAxisMotionValue(_).animation?.play()),{dragSnapToOrigin:g}=this.getProps();this.panSession=new PI(e,{onSessionStart:o,onStart:u,onMove:h,onSessionEnd:d,resumeAnimation:m},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:g,distanceThreshold:r,contextWindow:DI(this.visualElement)})}stop(e,n){const r=e||this.latestPointerEvent,i=n||this.latestPanInfo,o=this.isDragging;if(this.cancel(),!o||!i||!r)return;const{velocity:u}=i;this.startAnimation(u);const{onDragEnd:h}=this.getProps();h&&ct.postRender(()=>h(r,i))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!Zd(e,i,this.currentDirection))return;const o=this.getAxisMotionValue(e);let u=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(u=s8(u,this.constraints[e],this.elastic[e])),o.set(u)}resolveConstraints(){const{dragConstraints:e,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,i=this.constraints;e&&gl(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=i8(r.layoutBox,e):this.constraints=!1,this.elastic=u8(n),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&nr(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=l8(r.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!gl(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const o=fB(r,i.root,this.visualElement.getTransformPagePoint());let u=a8(i.layout.layoutBox,o);if(n){const h=n(cB(u));this.hasMutatedConstraints=!!h,h&&(u=yI(h))}return u}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:o,dragSnapToOrigin:u,onDragTransitionEnd:h}=this.getProps(),d=this.constraints||{},m=nr(g=>{if(!Zd(g,n,this.currentDirection))return;let _=d&&d[g]||{};u&&(_={min:0,max:0});const w=i?200:1e6,E=i?40:1e7,R={type:"inertia",velocity:r?e[g]:0,bounceStiffness:w,bounceDamping:E,timeConstant:750,restDelta:1,restSpeed:10,...o,..._};return this.startAxisValueAnimation(g,R)});return Promise.all(m).then(h)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return _v(this.visualElement,e),r.start(d0(e,r,0,n,this.visualElement,!1))}stopAnimation(){nr(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){nr(e=>this.getAxisMotionValue(e).animation?.pause())}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){nr(n=>{const{drag:r}=this.getProps();if(!Zd(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,o=this.getAxisMotionValue(n);if(i&&i.layout){const{min:u,max:h}=i.layout.layoutBox[n];o.set(e[n]-ft(u,h,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!gl(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};nr(u=>{const h=this.getAxisMotionValue(u);if(h&&this.constraints!==!1){const d=h.get();i[u]=o8({min:d,max:d},this.constraints[u])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),nr(u=>{if(!Zd(u,e,null))return;const h=this.getAxisMotionValue(u),{min:d,max:m}=this.constraints[u];h.set(ft(d,m,i[u]))})}addListeners(){if(!this.visualElement.current)return;c8.set(this.visualElement,this);const e=this.visualElement.current,n=Sc(e,"pointerdown",d=>{const{drag:m,dragListener:g=!0}=this.getProps();m&&g&&this.start(d)}),r=()=>{const{dragConstraints:d}=this.getProps();gl(d)&&d.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,o=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),ct.read(r);const u=Yc(window,"resize",()=>this.scalePositionWithinConstraints()),h=i.addEventListener("didUpdate",(({delta:d,hasLayoutChanged:m})=>{this.isDragging&&m&&(nr(g=>{const _=this.getAxisMotionValue(g);_&&(this.originPoint[g]+=d[g].translate,_.set(_.get()+d[g].translate))}),this.visualElement.render())}));return()=>{u(),n(),o(),h&&h()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:o=!1,dragElastic:u=bv,dragMomentum:h=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:o,dragElastic:u,dragMomentum:h}}}function Zd(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function d8(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class f8 extends Hi{constructor(e){super(e),this.removeGroupControls=ir,this.removeListeners=ir,this.controls=new h8(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||ir}unmount(){this.removeGroupControls(),this.removeListeners()}}const EA=t=>(e,n)=>{t&&ct.postRender(()=>t(e,n))};class m8 extends Hi{constructor(){super(...arguments),this.removePointerDownListener=ir}onPointerDown(e){this.session=new PI(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:DI(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:EA(e),onStart:EA(n),onMove:r,onEnd:(o,u)=>{delete this.session,i&&ct.postRender(()=>i(o,u))}}}mount(){this.removePointerDownListener=Sc(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const yf={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function SA(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const oc={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Ae.test(t))t=parseFloat(t);else return t;const n=SA(t,e.target.x),r=SA(t,e.target.y);return`${n}% ${r}%`}},p8={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=qi.parse(t);if(i.length>5)return r;const o=qi.createTransformer(t),u=typeof i[0]!="number"?1:0,h=n.x.scale*e.x,d=n.y.scale*e.y;i[0+u]/=h,i[1+u]/=d;const m=ft(h,d,.5);return typeof i[2+u]=="number"&&(i[2+u]/=m),typeof i[3+u]=="number"&&(i[3+u]/=m),o(i)}};let uy=!1;class g8 extends D.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:o}=e;j9(y8),o&&(n.group&&n.group.add(o),r&&r.register&&i&&r.register(o),uy&&o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),yf.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:o}=this.props,{projection:u}=r;return u&&(u.isPresent=o,uy=!0,i||e.layoutDependency!==n||n===void 0||e.isPresent!==o?u.willUpdate():this.safeToRemove(),e.isPresent!==o&&(o?u.promote():u.relegate()||ct.postRender(()=>{const h=u.getStack();(!h||!h.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),n0.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;uy=!0,i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function VI(t){const[e,n]=k9(),r=D.useContext(fC);return x.jsx(g8,{...t,layoutGroup:r,switchLayoutGroup:D.useContext(pI),isPresent:e,safeToRemove:n})}const y8={borderRadius:{...oc,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:oc,borderTopRightRadius:oc,borderBottomLeftRadius:oc,borderBottomRightRadius:oc,boxShadow:p8};function v8(t,e,n){const r=gn(t)?t:Nl(t);return r.start(d0("",r,e,n)),r.animation}const _8=(t,e)=>t.depth-e.depth;class w8{constructor(){this.children=[],this.isDirty=!1}add(e){L_(this.children,e),this.isDirty=!0}remove(e){j_(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(_8),this.isDirty=!1,this.children.forEach(e)}}function b8(t,e){const n=Cn.now(),r=({timestamp:i})=>{const o=i-n;o>=e&&(zi(r),t(o-e))};return ct.setup(r,!0),()=>zi(r)}const MI=["TopLeft","TopRight","BottomLeft","BottomRight"],T8=MI.length,AA=t=>typeof t=="string"?parseFloat(t):t,RA=t=>typeof t=="number"||Ae.test(t);function E8(t,e,n,r,i,o){i?(t.opacity=ft(0,n.opacity??1,S8(r)),t.opacityExit=ft(e.opacity??1,0,A8(r))):o&&(t.opacity=ft(e.opacity??1,n.opacity??1,r));for(let u=0;u<T8;u++){const h=`border${MI[u]}Radius`;let d=xA(e,h),m=xA(n,h);if(d===void 0&&m===void 0)continue;d||(d=0),m||(m=0),d===0||m===0||RA(d)===RA(m)?(t[h]=Math.max(ft(AA(d),AA(m),r),0),(Zr.test(m)||Zr.test(d))&&(t[h]+="%")):t[h]=m}(e.rotate||n.rotate)&&(t.rotate=ft(e.rotate||0,n.rotate||0,r))}function xA(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const S8=LI(0,.5,SC),A8=LI(.5,.95,ir);function LI(t,e,n){return r=>r<t?0:r>e?1:n(Fc(t,e,r))}function CA(t,e){t.min=e.min,t.max=e.max}function tr(t,e){CA(t.x,e.x),CA(t.y,e.y)}function IA(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function OA(t,e,n,r,i){return t-=e,t=Gf(t,1/n,r),i!==void 0&&(t=Gf(t,1/i,r)),t}function R8(t,e=0,n=1,r=.5,i,o=t,u=t){if(Zr.test(e)&&(e=parseFloat(e),e=ft(u.min,u.max,e/100)-u.min),typeof e!="number")return;let h=ft(o.min,o.max,r);t===o&&(h-=e),t.min=OA(t.min,e,n,h,i),t.max=OA(t.max,e,n,h,i)}function kA(t,e,[n,r,i],o,u){R8(t,e[n],e[r],e[i],e.scale,o,u)}const x8=["x","scaleX","originX"],C8=["y","scaleY","originY"];function DA(t,e,n,r){kA(t.x,e,x8,n?n.x:void 0,r?r.x:void 0),kA(t.y,e,C8,n?n.y:void 0,r?r.y:void 0)}function PA(t){return t.translate===0&&t.scale===1}function jI(t){return PA(t.x)&&PA(t.y)}function NA(t,e){return t.min===e.min&&t.max===e.max}function I8(t,e){return NA(t.x,e.x)&&NA(t.y,e.y)}function VA(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function UI(t,e){return VA(t.x,e.x)&&VA(t.y,e.y)}function MA(t){return Tn(t.x)/Tn(t.y)}function LA(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class O8{constructor(){this.members=[]}add(e){L_(this.members,e),e.scheduleRender()}remove(e){if(j_(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const o=this.members[i];if(o.isPresent!==!1){r=o;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function k8(t,e,n){let r="";const i=t.x.translate/e.x,o=t.y.translate/e.y,u=n?.z||0;if((i||o||u)&&(r=`translate3d(${i}px, ${o}px, ${u}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:m,rotate:g,rotateX:_,rotateY:w,skewX:E,skewY:R}=n;m&&(r=`perspective(${m}px) ${r}`),g&&(r+=`rotate(${g}deg) `),_&&(r+=`rotateX(${_}deg) `),w&&(r+=`rotateY(${w}deg) `),E&&(r+=`skewX(${E}deg) `),R&&(r+=`skewY(${R}deg) `)}const h=t.x.scale*e.x,d=t.y.scale*e.y;return(h!==1||d!==1)&&(r+=`scale(${h}, ${d})`),r||"none"}const cy=["","X","Y","Z"],D8=1e3;let P8=0;function hy(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function BI(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=AI(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:o}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",ct,!(i||o))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&BI(r)}function zI({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(u={},h=e?.()){this.id=P8++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(M8),this.nodes.forEach(B8),this.nodes.forEach(z8),this.nodes.forEach(L8)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=u,this.root=h?h.root||h:this,this.path=h?[...h.path,h]:[],this.parent=h,this.depth=h?h.depth+1:0;for(let d=0;d<this.path.length;d++)this.path[d].shouldResetTransform=!0;this.root===this&&(this.nodes=new w8)}addEventListener(u,h){return this.eventHandlers.has(u)||this.eventHandlers.set(u,new z_),this.eventHandlers.get(u).add(h)}notifyListeners(u,...h){const d=this.eventHandlers.get(u);d&&d.notify(...h)}hasListeners(u){return this.eventHandlers.has(u)}mount(u){if(this.instance)return;this.isSVG=nI(u)&&!C9(u),this.instance=u;const{layoutId:h,layout:d,visualElement:m}=this.options;if(m&&!m.current&&m.mount(u),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(d||h)&&(this.isLayoutDirty=!0),t){let g,_=0;const w=()=>this.root.updateBlockedByResize=!1;ct.read(()=>{_=window.innerWidth}),t(u,()=>{const E=window.innerWidth;E!==_&&(_=E,this.root.updateBlockedByResize=!0,g&&g(),g=b8(w,250),yf.hasAnimatedSinceResize&&(yf.hasAnimatedSinceResize=!1,this.nodes.forEach(BA)))})}h&&this.root.registerSharedNode(h,this),this.options.animate!==!1&&m&&(h||d)&&this.addEventListener("didUpdate",({delta:g,hasLayoutChanged:_,hasRelativeLayoutChanged:w,layout:E})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const R=this.options.transition||m.getDefaultTransition()||G8,{onLayoutAnimationStart:O,onLayoutAnimationComplete:I}=m.getProps(),P=!this.targetLayout||!UI(this.targetLayout,E),V=!_&&w;if(this.options.layoutRoot||this.resumeFrom||V||_&&(P||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const M={...e0(R,"layout"),onPlay:O,onComplete:I};(m.shouldReduceMotion||this.options.layoutRoot)&&(M.delay=0,M.type=!1),this.startAnimation(M),this.setAnimationOrigin(g,V)}else _||BA(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=E})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const u=this.getStack();u&&u.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),zi(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(q8),this.animationId++)}getTransformTemplate(){const{visualElement:u}=this.options;return u&&u.getProps().transformTemplate}willUpdate(u=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&BI(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let g=0;g<this.path.length;g++){const _=this.path[g];_.shouldResetTransform=!0,_.updateScroll("snapshot"),_.options.layoutRoot&&_.willUpdate(!1)}const{layoutId:h,layout:d}=this.options;if(h===void 0&&!d)return;const m=this.getTransformTemplate();this.prevTransformTemplateValue=m?m(this.latestValues,""):void 0,this.updateSnapshot(),u&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(jA);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(UA);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(U8),this.nodes.forEach(N8),this.nodes.forEach(V8)):this.nodes.forEach(UA),this.clearAllSnapshots();const h=Cn.now();an.delta=qs(0,1e3/60,h-an.timestamp),an.timestamp=h,an.isProcessing=!0,Zg.update.process(an),Zg.preRender.process(an),Zg.render.process(an),an.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,n0.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(j8),this.sharedNodes.forEach($8)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,ct.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){ct.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Tn(this.snapshot.measuredBox.x)&&!Tn(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let d=0;d<this.path.length;d++)this.path[d].updateScroll();const u=this.layout;this.layout=this.measure(!1),this.layoutCorrected=St(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:h}=this.options;h&&h.notify("LayoutMeasure",this.layout.layoutBox,u?u.layoutBox:void 0)}updateScroll(u="measure"){let h=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===u&&(h=!1),h&&this.instance){const d=r(this.instance);this.scroll={animationId:this.root.animationId,phase:u,isRoot:d,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:d}}}resetTransform(){if(!i)return;const u=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,h=this.projectionDelta&&!jI(this.projectionDelta),d=this.getTransformTemplate(),m=d?d(this.latestValues,""):void 0,g=m!==this.prevTransformTemplateValue;u&&this.instance&&(h||Na(this.latestValues)||g)&&(i(this.instance,m),this.shouldResetTransform=!1,this.scheduleRender())}measure(u=!0){const h=this.measurePageBox();let d=this.removeElementScroll(h);return u&&(d=this.removeTransform(d)),K8(d),{animationId:this.root.animationId,measuredBox:h,layoutBox:d,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:u}=this.options;if(!u)return St();const h=u.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(W8))){const{scroll:m}=this.root;m&&(yl(h.x,m.offset.x),yl(h.y,m.offset.y))}return h}removeElementScroll(u){const h=St();if(tr(h,u),this.scroll?.wasRoot)return h;for(let d=0;d<this.path.length;d++){const m=this.path[d],{scroll:g,options:_}=m;m!==this.root&&g&&_.layoutScroll&&(g.wasRoot&&tr(h,u),yl(h.x,g.offset.x),yl(h.y,g.offset.y))}return h}applyTransform(u,h=!1){const d=St();tr(d,u);for(let m=0;m<this.path.length;m++){const g=this.path[m];!h&&g.options.layoutScroll&&g.scroll&&g!==g.root&&vl(d,{x:-g.scroll.offset.x,y:-g.scroll.offset.y}),Na(g.latestValues)&&vl(d,g.latestValues)}return Na(this.latestValues)&&vl(d,this.latestValues),d}removeTransform(u){const h=St();tr(h,u);for(let d=0;d<this.path.length;d++){const m=this.path[d];if(!m.instance||!Na(m.latestValues))continue;pv(m.latestValues)&&m.updateSnapshot();const g=St(),_=m.measurePageBox();tr(g,_),DA(h,m.latestValues,m.snapshot?m.snapshot.layoutBox:void 0,g)}return Na(this.latestValues)&&DA(h,this.latestValues),h}setTargetDelta(u){this.targetDelta=u,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(u){this.options={...this.options,...u,crossfade:u.crossfade!==void 0?u.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==an.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(u=!1){const h=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=h.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=h.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=h.isSharedProjectionDirty);const d=!!this.resumingFrom||this!==h;if(!(u||d&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:g,layoutId:_}=this.options;if(!(!this.layout||!(g||_))){if(this.resolvedRelativeTargetAt=an.timestamp,!this.targetDelta&&!this.relativeTarget){const w=this.getClosestProjectingParent();w&&w.layout&&this.animationProgress!==1?(this.relativeParent=w,this.forceRelativeParentToResolveTarget(),this.relativeTarget=St(),this.relativeTargetOrigin=St(),Rc(this.relativeTargetOrigin,this.layout.layoutBox,w.layout.layoutBox),tr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=St(),this.targetWithTransforms=St()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),e8(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):tr(this.target,this.layout.layoutBox),_I(this.target,this.targetDelta)):tr(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const w=this.getClosestProjectingParent();w&&!!w.resumingFrom==!!this.resumingFrom&&!w.options.layoutScroll&&w.target&&this.animationProgress!==1?(this.relativeParent=w,this.forceRelativeParentToResolveTarget(),this.relativeTarget=St(),this.relativeTargetOrigin=St(),Rc(this.relativeTargetOrigin,this.target,w.target),tr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||pv(this.parent.latestValues)||vI(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const u=this.getLead(),h=!!this.resumingFrom||this!==u;let d=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(d=!1),h&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(d=!1),this.resolvedRelativeTargetAt===an.timestamp&&(d=!1),d)return;const{layout:m,layoutId:g}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(m||g))return;tr(this.layoutCorrected,this.layout.layoutBox);const _=this.treeScale.x,w=this.treeScale.y;dB(this.layoutCorrected,this.treeScale,this.path,h),u.layout&&!u.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(u.target=u.layout.layoutBox,u.targetWithTransforms=St());const{target:E}=u;if(!E){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(IA(this.prevProjectionDelta.x,this.projectionDelta.x),IA(this.prevProjectionDelta.y,this.projectionDelta.y)),Ac(this.projectionDelta,this.layoutCorrected,E,this.latestValues),(this.treeScale.x!==_||this.treeScale.y!==w||!LA(this.projectionDelta.x,this.prevProjectionDelta.x)||!LA(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",E))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(u=!0){if(this.options.visualElement?.scheduleRender(),u){const h=this.getStack();h&&h.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=_l(),this.projectionDelta=_l(),this.projectionDeltaWithTransform=_l()}setAnimationOrigin(u,h=!1){const d=this.snapshot,m=d?d.latestValues:{},g={...this.latestValues},_=_l();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!h;const w=St(),E=d?d.source:void 0,R=this.layout?this.layout.source:void 0,O=E!==R,I=this.getStack(),P=!I||I.members.length<=1,V=!!(O&&!P&&this.options.crossfade===!0&&!this.path.some(H8));this.animationProgress=0;let M;this.mixTargetDelta=J=>{const X=J/1e3;zA(_.x,u.x,X),zA(_.y,u.y,X),this.setTargetDelta(_),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Rc(w,this.layout.layoutBox,this.relativeParent.layout.layoutBox),F8(this.relativeTarget,this.relativeTargetOrigin,w,X),M&&I8(this.relativeTarget,M)&&(this.isProjectionDirty=!1),M||(M=St()),tr(M,this.relativeTarget)),O&&(this.animationValues=g,E8(g,m,this.latestValues,X,V,P)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=X},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(u){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(zi(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=ct.update(()=>{yf.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Nl(0)),this.currentAnimation=v8(this.motionValue,[0,1e3],{...u,velocity:0,isSync:!0,onUpdate:h=>{this.mixTargetDelta(h),u.onUpdate&&u.onUpdate(h)},onStop:()=>{},onComplete:()=>{u.onComplete&&u.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const u=this.getStack();u&&u.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(D8),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const u=this.getLead();let{targetWithTransforms:h,target:d,layout:m,latestValues:g}=u;if(!(!h||!d||!m)){if(this!==u&&this.layout&&m&&qI(this.options.animationType,this.layout.layoutBox,m.layoutBox)){d=this.target||St();const _=Tn(this.layout.layoutBox.x);d.x.min=u.target.x.min,d.x.max=d.x.min+_;const w=Tn(this.layout.layoutBox.y);d.y.min=u.target.y.min,d.y.max=d.y.min+w}tr(h,d),vl(h,g),Ac(this.projectionDeltaWithTransform,this.layoutCorrected,h,g)}}registerSharedNode(u,h){this.sharedNodes.has(u)||this.sharedNodes.set(u,new O8),this.sharedNodes.get(u).add(h);const m=h.options.initialPromotionConfig;h.promote({transition:m?m.transition:void 0,preserveFollowOpacity:m&&m.shouldPreserveFollowOpacity?m.shouldPreserveFollowOpacity(h):void 0})}isLead(){const u=this.getStack();return u?u.lead===this:!0}getLead(){const{layoutId:u}=this.options;return u?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:u}=this.options;return u?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:u}=this.options;if(u)return this.root.sharedNodes.get(u)}promote({needsReset:u,transition:h,preserveFollowOpacity:d}={}){const m=this.getStack();m&&m.promote(this,d),u&&(this.projectionDelta=void 0,this.needsReset=!0),h&&this.setOptions({transition:h})}relegate(){const u=this.getStack();return u?u.relegate(this):!1}resetSkewAndRotation(){const{visualElement:u}=this.options;if(!u)return;let h=!1;const{latestValues:d}=u;if((d.z||d.rotate||d.rotateX||d.rotateY||d.rotateZ||d.skewX||d.skewY)&&(h=!0),!h)return;const m={};d.z&&hy("z",u,m,this.animationValues);for(let g=0;g<cy.length;g++)hy(`rotate${cy[g]}`,u,m,this.animationValues),hy(`skew${cy[g]}`,u,m,this.animationValues);u.render();for(const g in m)u.setStaticValue(g,m[g]),this.animationValues&&(this.animationValues[g]=m[g]);u.scheduleRender()}applyProjectionStyles(u,h){if(!this.instance||this.isSVG)return;if(!this.isVisible){u.visibility="hidden";return}const d=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,u.visibility="",u.opacity="",u.pointerEvents=gf(h?.pointerEvents)||"",u.transform=d?d(this.latestValues,""):"none";return}const m=this.getLead();if(!this.projectionDelta||!this.layout||!m.target){this.options.layoutId&&(u.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,u.pointerEvents=gf(h?.pointerEvents)||""),this.hasProjected&&!Na(this.latestValues)&&(u.transform=d?d({},""):"none",this.hasProjected=!1);return}u.visibility="";const g=m.animationValues||m.latestValues;this.applyTransformsToTarget();let _=k8(this.projectionDeltaWithTransform,this.treeScale,g);d&&(_=d(g,_)),u.transform=_;const{x:w,y:E}=this.projectionDelta;u.transformOrigin=`${w.origin*100}% ${E.origin*100}% 0`,m.animationValues?u.opacity=m===this?g.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:g.opacityExit:u.opacity=m===this?g.opacity!==void 0?g.opacity:"":g.opacityExit!==void 0?g.opacityExit:0;for(const R in Wc){if(g[R]===void 0)continue;const{correct:O,applyTo:I,isCSSVariable:P}=Wc[R],V=_==="none"?g[R]:O(g[R],m);if(I){const M=I.length;for(let J=0;J<M;J++)u[I[J]]=V}else P?this.options.visualElement.renderState.vars[R]=V:u[R]=V}this.options.layoutId&&(u.pointerEvents=m===this?gf(h?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(u=>u.currentAnimation?.stop()),this.root.nodes.forEach(jA),this.root.sharedNodes.clear()}}}function N8(t){t.updateLayout()}function V8(t){const e=t.resumeFrom?.snapshot||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:r}=t.layout,{animationType:i}=t.options,o=e.source!==t.layout.source;i==="size"?nr(g=>{const _=o?e.measuredBox[g]:e.layoutBox[g],w=Tn(_);_.min=n[g].min,_.max=_.min+w}):qI(i,e.layoutBox,n)&&nr(g=>{const _=o?e.measuredBox[g]:e.layoutBox[g],w=Tn(n[g]);_.max=_.min+w,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[g].max=t.relativeTarget[g].min+w)});const u=_l();Ac(u,n,e.layoutBox);const h=_l();o?Ac(h,t.applyTransform(r,!0),e.measuredBox):Ac(h,n,e.layoutBox);const d=!jI(u);let m=!1;if(!t.resumeFrom){const g=t.getClosestProjectingParent();if(g&&!g.resumeFrom){const{snapshot:_,layout:w}=g;if(_&&w){const E=St();Rc(E,e.layoutBox,_.layoutBox);const R=St();Rc(R,n,w.layoutBox),UI(E,R)||(m=!0),g.options.layoutRoot&&(t.relativeTarget=R,t.relativeTargetOrigin=E,t.relativeParent=g)}}}t.notifyListeners("didUpdate",{layout:n,snapshot:e,delta:h,layoutDelta:u,hasLayoutChanged:d,hasRelativeLayoutChanged:m})}else if(t.isLead()){const{onExitComplete:n}=t.options;n&&n()}t.options.transition=void 0}function M8(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function L8(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function j8(t){t.clearSnapshot()}function jA(t){t.clearMeasurements()}function UA(t){t.isLayoutDirty=!1}function U8(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function BA(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function B8(t){t.resolveTargetDelta()}function z8(t){t.calcProjection()}function q8(t){t.resetSkewAndRotation()}function $8(t){t.removeLeadSnapshot()}function zA(t,e,n){t.translate=ft(e.translate,0,n),t.scale=ft(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function qA(t,e,n,r){t.min=ft(e.min,n.min,r),t.max=ft(e.max,n.max,r)}function F8(t,e,n,r){qA(t.x,e.x,n.x,r),qA(t.y,e.y,n.y,r)}function H8(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const G8={duration:.45,ease:[.4,0,.1,1]},$A=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),FA=$A("applewebkit/")&&!$A("chrome/")?Math.round:ir;function HA(t){t.min=FA(t.min),t.max=FA(t.max)}function K8(t){HA(t.x),HA(t.y)}function qI(t,e,n){return t==="position"||t==="preserve-aspect"&&!ZB(MA(e),MA(n),.2)}function W8(t){return t!==t.root&&t.scroll?.wasRoot}const Y8=zI({attachResizeListener:(t,e)=>Yc(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),dy={current:void 0},$I=zI({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!dy.current){const t=new Y8({});t.mount(window),t.setOptions({layoutScroll:!0}),dy.current=t}return dy.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),Q8={pan:{Feature:m8},drag:{Feature:f8,ProjectionNode:$I,MeasureLayout:VI}};function GA(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,o=r[i];o&&ct.postRender(()=>o(e,mh(e)))}class X8 extends Hi{mount(){const{current:e}=this.node;e&&(this.unmount=E9(e,(n,r)=>(GA(this.node,r,"Start"),i=>GA(this.node,i,"End"))))}unmount(){}}class J8 extends Hi{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=hh(Yc(this.node.current,"focus",()=>this.onFocus()),Yc(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function KA(t,e,n){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),o=r[i];o&&ct.postRender(()=>o(e,mh(e)))}class Z8 extends Hi{mount(){const{current:e}=this.node;e&&(this.unmount=x9(e,(n,r)=>(KA(this.node,r,"Start"),(i,{success:o})=>KA(this.node,i,o?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Tv=new WeakMap,fy=new WeakMap,e7=t=>{const e=Tv.get(t.target);e&&e(t)},t7=t=>{t.forEach(e7)};function n7({root:t,...e}){const n=t||document;fy.has(n)||fy.set(n,{});const r=fy.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(t7,{root:t,...e})),r[i]}function r7(t,e,n){const r=n7(e);return Tv.set(t,n),r.observe(t),()=>{Tv.delete(t),r.unobserve(t)}}const s7={some:0,all:1};class i7 extends Hi{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:o}=e,u={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:s7[i]},h=d=>{const{isIntersecting:m}=d;if(this.isInView===m||(this.isInView=m,o&&!m&&this.hasEnteredView))return;m&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",m);const{onViewportEnter:g,onViewportLeave:_}=this.node.getProps(),w=m?g:_;w&&w(d)};return r7(this.node.current,u,h)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(a7(e,n))&&this.startObserver()}unmount(){}}function a7({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const o7={inView:{Feature:i7},tap:{Feature:Z8},focus:{Feature:J8},hover:{Feature:X8}},l7={layout:{ProjectionNode:$I,MeasureLayout:VI}},u7={...KB,...o7,...Q8,...l7},WA=uB(u7,TB),FI=t=>{const[e,n]=D.useState([]),[r,i]=D.useState(!0);return D.useEffect(()=>{if(!t){n([]),i(!1);return}i(!0);const o=Ja(zn,"exam_results",t,"submissions"),u=m_(o,tx("percentage","desc")),h=Hl(u,async d=>{const m=d.docs.map(_=>({id:_.id,..._.data()})),g=await Promise.all(m.map(async _=>{const w=Za(zn,"users",_.userId),E=await y_(w),R=E.exists()?E.data().name:"  ";return{..._,name:R}}));n(g),i(!1)},d=>{console.error("Error fetching leaderboard:",d),i(!1)});return()=>h()},[t]),{leaderboard:e,loading:r}},c7=()=>{const{leaderboard:t,loading:e,percentage:n}=FI(),{user:r,loading:i}=oo();return e||i?x.jsx("div",{className:"bg-white p-8 rounded-t-2xl",children:x.jsxs("div",{className:"container mx-auto",children:[x.jsx("h2",{className:"text-2xl font-bold text-center text-gray-800 mb-4",children:" "}),x.jsx("div",{className:"spinner"})]})}):x.jsxs("div",{className:"bg-white p-8 rounded-t-2xl pb-24",children:[x.jsx("h2",{className:"text-2xl font-bold text-center text-gray-800 mb-4",children:" "}),r&&x.jsxs("div",{className:"text-center mb-6",children:[x.jsx("p",{className:"text-lg text-gray-700",children:" "}),x.jsxs("p",{className:"text-3xl font-bold text-blue-600",children:[n,"%"]}),x.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5 mt-2",children:x.jsx("div",{className:"bg-blue-600 h-2.5 rounded-full",style:{width:`${n}%`}})})]}),x.jsx(WA.div,{id:"leaderboard-list",className:"space-y-4",children:t.map((o,u)=>x.jsxs(WA.div,{className:`flex items-center justify-between p-3 rounded-lg transition-all ${r&&r.uid===o.uid?"bg-blue-100 ring-2 ring-blue-500":"bg-gray-50"}`,children:[x.jsxs("div",{className:"flex items-center",children:[x.jsx("div",{className:"leaderboard-rank-box",children:u+1}),x.jsx("span",{className:"font-semibold text-gray-800 mr-3",children:o.name||"  "})]}),x.jsxs("span",{className:"font-bold text-blue-600",children:[o.points||0," "]})]},o.uid))})]})},h7=()=>{const[t,e]=D.useState([]),[n,r]=D.useState(!0);return D.useEffect(()=>{const i=Ja(zn,"exams"),o=m_(i,tx("createdAt","desc")),u=Hl(o,h=>{const d=h.docs.map(m=>({id:m.id,...m.data()}));e(d),r(!1)},h=>{console.error("Error fetching exams:",h),r(!1)});return()=>u()},[]),{exams:t,loading:n}},d7=()=>{const{exams:t,loading:e}=h7(),[n,r]=D.useState(null);D.useEffect(()=>{t.length>0&&r(t[0].id)},[t]);const{leaderboard:i,loading:o}=FI(n),u=i.slice(0,3),h=m=>{r(m.target.value)},d=e||o;return x.jsxs("div",{className:"flex-grow bg-white",children:[x.jsx("div",{style:{backgroundImage:"url('/basic/blu545.jpeg')",backgroundSize:"cover",backgroundPosition:"center"},className:"pt-24 pb-16",children:x.jsxs("div",{className:"px-4",children:[x.jsxs("div",{className:"flex justify-between items-center mb-8",children:[x.jsx("h1",{className:"text-2xl font-bold text-gray-800 text-right",children:" "}),x.jsx("select",{onChange:h,value:n||"",className:"bg-white border border-gray-300 text-gray-700 py-2 px-4 pr-8 rounded-lg leading-tight focus:outline-none focus:bg-white focus:border-gray-500",children:t.map(m=>x.jsx("option",{value:m.id,children:m.name},m.id))})]}),x.jsxs("div",{className:"flex justify-around items-end",children:[u.length>1&&x.jsxs("div",{className:"text-center",children:[x.jsx("div",{className:"w-20 h-20 rounded-full bg-gray-200 flex items-center justify-center mx-auto border-4 border-silver",children:x.jsx("h2",{className:"text-xl font-bold",children:"2"})}),x.jsx("h3",{className:"text-lg font-semibold mt-2",children:u[1].name}),x.jsxs("p",{className:"text-gray-600",children:[u[1].percentage,"%"]})]}),u.length>0&&x.jsxs("div",{className:"text-center mx-4",children:[x.jsx("div",{className:"w-24 h-24 rounded-full bg-gray-200 flex items-center justify-center mx-auto border-4 border-gold",children:x.jsx("h2",{className:"text-2xl font-bold",children:"1"})}),x.jsx("h3",{className:"text-xl font-bold mt-2",children:u[0].name}),x.jsxs("p",{className:"text-gray-700",children:[u[0].percentage,"%"]})]}),u.length>2&&x.jsxs("div",{className:"text-center",children:[x.jsx("div",{className:"w-20 h-20 rounded-full bg-gray-200 flex items-center justify-center mx-auto border-4 border-bronze",children:x.jsx("h2",{className:"text-xl font-bold",children:"3"})}),x.jsx("h3",{className:"text-lg font-semibold mt-2",children:u[2].name}),x.jsxs("p",{className:"text-gray-600",children:[u[2].percentage,"%"]})]})]})]})}),x.jsx("div",{className:"relative -mt-8",children:d?x.jsx("div",{className:"spinner"}):x.jsx(c7,{leaderboard:i})})]})},f7=t=>{const[e,n]=D.useState([]),[r,i]=D.useState(!0),[o,u]=D.useState(null);return D.useEffect(()=>{(async()=>{if(!t){i(!1);return}try{const d=Ja(zn,"orders"),m=m_(d,qM("userId","==",t)),_=(await HM(m)).docs.map(w=>({id:w.id,...w.data()}));n(_)}catch(d){u(d)}finally{i(!1)}})()},[t]),{orders:e,loading:r,error:o}},m7=({onFilterChange:t})=>{const[e,n]=D.useState(!1),r=D.useRef(null);D.useEffect(()=>{const o=u=>{r.current&&!r.current.contains(u.target)&&n(!1)};return document.addEventListener("mousedown",o),()=>{document.removeEventListener("mousedown",o)}},[r]);const i=o=>{t(o),n(!1)};return x.jsxs("div",{className:"relative",ref:r,children:[x.jsx("button",{onClick:()=>n(!e),className:"p-2 rounded-full hover:bg-gray-100",children:x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 5v.01M12 12v.01M12 19v.01"})})}),e&&x.jsxs("div",{className:"absolute left-0 mt-2 w-48 bg-white rounded-md shadow-xl z-20",children:[x.jsx("button",{onClick:()=>i("pending"),className:"block w-full text-right px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:" "}),x.jsx("button",{onClick:()=>i("delivered"),className:"block w-full text-right px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:" "})]})]})},p7=()=>{const{user:t}=oo(),e=Ll(),{orders:n,loading:r,error:i}=f7(t?.uid),[o,u]=D.useState("pending"),{setTitle:h,setLeftContent:d,setRightContent:m}=Bx();D.useEffect(()=>{const _=()=>x.jsx("button",{onClick:()=>e(-1),className:"p-2 rounded-full hover:bg-gray-100",children:x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5l7 7-7 7"})})});return h(" "),d(x.jsx(_,{})),m(x.jsx(m7,{onFilterChange:u})),()=>{h(""),d(null),m(null)}},[h,d,m,e]);const g=D.useMemo(()=>n.filter(_=>_.status===o),[n,o]);return r?x.jsx("div",{className:"p-4 text-center",children:"Loading..."}):i?x.jsxs("div",{className:"p-4 text-center text-red-500",children:["Error: ",i.message]}):x.jsx("div",{dir:"rtl",children:g.length===0?x.jsx("p",{className:"text-right text-gray-500 mt-4",children:"     ."}):x.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:g.map(_=>x.jsxs("div",{className:"bg-white border rounded-lg shadow-md p-4 flex flex-col justify-between",children:[x.jsxs("div",{children:[x.jsxs("div",{className:"flex justify-between items-center mb-2",children:[x.jsx("h2",{className:"text-lg font-bold",children:_.productName}),x.jsx("span",{className:`px-2 py-1 text-sm rounded-full ${_.status==="pending"?"bg-yellow-200 text-yellow-800":"bg-green-200 text-green-800"}`,children:_.status})]}),x.jsxs("p",{className:"text-gray-600",children:[_.productPrice," "]}),x.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:[" : ",x.jsx("span",{className:"font-mono",children:_.id})]})]}),x.jsxs("div",{className:"border-t mt-4 pt-4",children:[x.jsxs("p",{className:"text-sm",children:[x.jsx("strong",{children:" :"})," ",_.contactMethod," - ",_.phoneNumber]}),x.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:[" : ",_.createdAt?.toDate().toLocaleDateString("ar-EG")||" "]})]})]},_.id))})})};function g7(){const{pathname:t}=Ar();return D.useEffect(()=>{window.scrollTo(0,0)},[t]),null}const y7=()=>{const t=Ar(),e=["/","/store","/profile","/evaluations","/leaderboard"].includes(t.pathname),n="md:mr-20",r=t.pathname==="/profile"||t.pathname==="/leaderboard",i=`${n} ${r?"mb-0":"p-4 mt-16 mb-16 md:mb-0"}`;return x.jsx(zx,{children:x.jsxs("div",{className:`min-h-screen ${r?"bg-white":"bg-gray-100"}`,children:[e&&x.jsx(qx,{}),x.jsx(Xk,{isCollapsed:!1}),x.jsx("main",{className:i,children:x.jsx(o1,{})})]})})},v7=({backButtonLink:t})=>x.jsx(zx,{children:x.jsxs("div",{className:"min-h-screen bg-gray-100",children:[x.jsx(qx,{showBackButton:!0,backButtonLink:t}),x.jsx("main",{className:"p-4 mt-16",children:x.jsx(o1,{})})]})}),_7=()=>{const{initialAuthChecked:t}=oo();return t?x.jsxs(qk,{children:[x.jsx(g7,{}),x.jsxs(_k,{children:[x.jsxs(dr,{path:"/",element:x.jsx(y7,{}),children:[x.jsx(dr,{index:!0,element:x.jsx(ej,{})}),x.jsx(dr,{path:"evaluations",element:x.jsx(R6,{})}),x.jsx(dr,{path:"store",element:x.jsx(C6,{})}),x.jsx(dr,{path:"profile",element:x.jsx(I6,{})}),x.jsx(dr,{path:"leaderboard",element:x.jsx(d7,{})})]}),x.jsx(dr,{element:x.jsx(v7,{backButtonLink:"/profile"}),children:x.jsx(dr,{path:"/purchase-orders",element:x.jsx(p7,{})})}),x.jsx(dr,{path:"exam/:examId",element:x.jsx(O6,{})}),x.jsx(dr,{path:"results/:examId",element:x.jsx(k6,{})})]})]}):x.jsx("div",{className:"flex justify-center items-center min-h-screen",children:x.jsx("div",{className:"spinner"})})};function w7(){return x.jsxs(JL,{children:[x.jsx(qj,{position:"top-center",reverseOrder:!1,toastOptions:{style:{background:"#363636",color:"#fff"}}}),x.jsx(_7,{})]})}RO.createRoot(document.getElementById("root")).render(x.jsx(vO.StrictMode,{children:x.jsx(w7,{})}));
